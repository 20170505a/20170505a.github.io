<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="目录操作," />










<meta name="description" content="Perl文件操作概述 Perl使用一种叫做文件句柄类型的变量来操作文件。从文件读取或者写入数据需要使用文件句柄。文件句柄(file handle)是一个I/O连接的名称，可以简单地地理解为控制文件的某个东西。Perl提供了三种文件句柄:STDIN,STDOUT,STDERR，分别代表标准输入、标准输出和标准出错输出。 Perl 中打开文件可以使用以下方式： 1234open FILEHANDL">
<meta name="keywords" content="目录操作">
<meta property="og:type" content="article">
<meta property="og:title" content="Perl学习笔记（8）-文件与目录操作">
<meta property="og:url" content="http://rvdsd.top/2018/05/19/Perl/Perl学习笔记（8）-文件与目录操作/index.html">
<meta property="og:site_name" content="RVDSD的个人笔记本">
<meta property="og:description" content="Perl文件操作概述 Perl使用一种叫做文件句柄类型的变量来操作文件。从文件读取或者写入数据需要使用文件句柄。文件句柄(file handle)是一个I/O连接的名称，可以简单地地理解为控制文件的某个东西。Perl提供了三种文件句柄:STDIN,STDOUT,STDERR，分别代表标准输入、标准输出和标准出错输出。 Perl 中打开文件可以使用以下方式： 1234open FILEHANDL">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-08-18T02:38:02.517Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Perl学习笔记（8）-文件与目录操作">
<meta name="twitter:description" content="Perl文件操作概述 Perl使用一种叫做文件句柄类型的变量来操作文件。从文件读取或者写入数据需要使用文件句柄。文件句柄(file handle)是一个I/O连接的名称，可以简单地地理解为控制文件的某个东西。Perl提供了三种文件句柄:STDIN,STDOUT,STDERR，分别代表标准输入、标准输出和标准出错输出。 Perl 中打开文件可以使用以下方式： 1234open FILEHANDL">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://rvdsd.top/2018/05/19/Perl/Perl学习笔记（8）-文件与目录操作/"/>





  <title>Perl学习笔记（8）-文件与目录操作 | RVDSD的个人笔记本</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RVDSD的个人笔记本</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学习过程中的输出</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/05/19/Perl/Perl学习笔记（8）-文件与目录操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Perl学习笔记（8）-文件与目录操作</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-19T12:00:00+08:00">
                2018-05-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Perl/" itemprop="url" rel="index">
                    <span itemprop="name">Perl</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,582
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  16
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="perl文件操作概述">Perl文件操作概述</h2>
<p>Perl使用一种叫做<code>文件句柄</code>类型的变量来操作文件。从文件读取或者写入数据需要使用文件句柄。文件句柄(file handle)是一个I/O连接的名称，可以简单地地理解为控制文件的某个东西。Perl提供了三种文件句柄:STDIN,STDOUT,STDERR，分别代表标准输入、标准输出和标准出错输出。</p>
<p>Perl 中打开文件可以使用以下方式： <figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span> FILEHANDLE, EXPR</div><div class="line"><span class="keyword">open</span> FILEHANDLE</div><div class="line"><span class="keyword">sysopen</span> FILEHANDLE, FILENAME, MODE, PERMS</div><div class="line"><span class="keyword">sysopen</span> FILEHANDLE, FILENAME, MODE</div></pre></td></tr></table></figure></p>
<p>参数说明: <figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">FILEHANDLE：文件句柄，用于存放一个文件唯一标识符，它就是一串数字，其实可以理解为文件编号。</div><div class="line">EXPR：文件名及文件访问类型组成的表达式。</div><div class="line">MODE：文件访问类型。</div><div class="line">PERMS：访问权限位(permission bits)。</div></pre></td></tr></table></figure></p>
<h2 id="open函数">Open函数</h2>
<h3 id="只读方式打开">只读方式打开</h3>
<p>open是打开某个文件的函数，它的用法为<code>open(filevar,filenmae)</code>，其中，filevar是文件句柄，filename是文件名，路径可以是绝对路径，也可以是相对路径。<code>open(DATA,&quot;&lt;file.txt&quot;);</code>表示以只读的方式（只读的方式是<code>&lt;</code>号）打开文件<code>file.txt</code>。如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat open.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">open</span>(DATA,<span class="string">"&lt;file.txt"</span>) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"file.txt can not be opened,$!"</span>;</div><div class="line"></div><div class="line"><span class="keyword">while</span>(&lt;DATA&gt;)&#123;</div><div class="line">    <span class="keyword">print</span> <span class="string">"$_"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl open.pl </div><div class="line">This is a test file.</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat file.txt </div><div class="line">This is a test file.</div></pre></td></tr></table></figure>
<h3 id="写入方式打开">写入方式打开</h3>
<p>写入方式打开是用<code>&gt;</code>符号，使用格式为：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span>(DATA,<span class="string">"&gt;file.txt"</span>) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"file.txt can not be open, $!"</span>;</div></pre></td></tr></table></figure>
<h3 id="读写方式打开">读写方式打开</h3>
<p>如果要以读写方式打开文件，需要要<code>&gt;</code>或<code>&lt;</code>字符前添加<code>+</code>号，这种方式不会删除文件原来的内容，它的格式如下：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span>(DATA,<span class="string">"+&lt;file.txt"</span>); <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"file.txt can not be opened,$!"</span>;</div></pre></td></tr></table></figure>
<h3 id="删除文件内容">删除文件内容</h3>
<p>删除文件内容，需要在<code>+</code>号后面添加<code>&gt;</code>符号，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span> DATA, <span class="string">"+&gt;file.txt"</span> <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"file can not be opened, $!"</span>;</div></pre></td></tr></table></figure>
<h3 id="追加数据">追加数据</h3>
<p>追加数据使用双大于号（<code>&gt;&gt;</code>），如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span>(DATA,<span class="string">"&gt;&gt;file.txt"</span>)|| <span class="keyword">die</span> <span class="string">"file.txt can not be opened,$!"</span>;</div></pre></td></tr></table></figure>
<h3 id="读取追加文件的内容">读取追加文件的内容</h3>
<p>在追加符号前面加上<code>+</code>号即可，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span>(DATA,<span class="string">"+&gt;&gt;file.txt"</span>) || <span class="keyword">die</span> <span class="string">"file.txt can not be opened,$!"</span>;</div></pre></td></tr></table></figure>
<h3 id="不同的访问模式汇总">不同的访问模式汇总</h3>
<table>
<thead>
<tr class="header">
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;</code>或<code>r</code></td>
<td>只读方式打开，将文件指针指向文件头。</td>
</tr>
<tr class="even">
<td><code>&gt;</code>或<code>w</code></td>
<td>写入方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。</td>
</tr>
<tr class="odd">
<td><code>&gt;&gt;</code>或<code>a</code></td>
<td>写入方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。</td>
</tr>
<tr class="even">
<td><code>+&lt;</code>或<code>r+</code></td>
<td>读写方式打开，将文件指针指向文件头。</td>
</tr>
<tr class="odd">
<td><code>+&gt;</code>或<code>w+</code></td>
<td>读写方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。</td>
</tr>
<tr class="even">
<td><code>+&gt;&gt;</code>或<code>a+</code></td>
<td>读写方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。</td>
</tr>
</tbody>
</table>
<h2 id="sysopen函数">Sysopen函数</h2>
<p><code>sysopen</code>函数类似于<code>open</code>函数，它的使用格式如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">sysopen</span>(FH,$filename,O_RDWR|O_CREAT,<span class="number">0666</span>)（中间有一个竖线，是OR的意思）</div></pre></td></tr></table></figure>
<p>参数解释：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>. FH:文件句柄，与<span class="keyword">open</span>函数的第<span class="number">1</span>个参数一样；</div><div class="line"><span class="number">2</span>. $filename：文件名；</div><div class="line"><span class="number">3</span>. O_RDWRIO_CREAT：模式值，tl模块提供的逻辑OR运算组合起来的常数构成；</div><div class="line"><span class="number">4</span>. 这个参数可先，是八进制值，<span class="number">0666</span>表示数据文件，<span class="number">0777</span>表示程序</div><div class="line">如果文件能够打开，则返回true，如果失败，返回false。</div></pre></td></tr></table></figure>
<p>以读写(<code>+&lt;filename</code>)的方式打开文件的代码是<code>sysopen(DATA,&quot;file.txt&quot;,O_RDWR);</code>如果需要在更新文件前清空文件，代码是`sysopen(DATA,“file.txt”,O_RDWR|O_TRUNC);。所有的模式值如下表所示：</p>
<table>
<thead>
<tr class="header">
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>O_RDWR</td>
<td>读写方式打开，将文件指针指向文件头。</td>
</tr>
<tr class="even">
<td>O_RDONLY</td>
<td>只读方式打开，将文件指针指向文件头。</td>
</tr>
<tr class="odd">
<td>O_WRONLY</td>
<td>写入方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。</td>
</tr>
<tr class="even">
<td>O_CREAT</td>
<td>创建文件</td>
</tr>
<tr class="odd">
<td>O_APPEND</td>
<td>追加文件</td>
</tr>
<tr class="even">
<td>O_TRUNC</td>
<td>将文件大小截为零</td>
</tr>
<tr class="odd">
<td>O_EXCL</td>
<td>如果使用O_CREAT时文件存在,就返回错误信息,它可以测试文件是否存在</td>
</tr>
<tr class="even">
<td>O_NONBLOCK</td>
<td>非阻塞I/O使我们的操作要么成功，要么立即返回错误，不被阻塞。</td>
</tr>
</tbody>
</table>
<h2 id="close函数">Close函数</h2>
<p>在文件使用完后，要关闭文件，以刷新与文件句柄相关联的输入输出缓冲区，关闭文件的语法如下：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">close</span> FILEHANDLE</div><div class="line"><span class="keyword">close</span></div></pre></td></tr></table></figure>
<p>FILEHANDLE 为指定的文件句柄，如果成功关闭则返回 true，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">close</span>(DATA) || <span class="keyword">die</span> <span class="string">"can not close file"</span></div></pre></td></tr></table></figure>
<h2 id="读写文件">读写文件</h2>
<p>向文件读写信息有几种不同的方式。</p>
<h3 id="第一种方式filehandle操作符">第一种方式：<code>&lt;FILEHANDLE&gt;操作符</code></h3>
<p>从打开的文件句柄读取信息的主要方法是<code>&lt;FILEHANDLE&gt;操作符</code>。在标量上下文中，它从文件句柄返回单一行，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span> file<span class="string">";</span></div><div class="line"><span class="string">@lines=&lt;DATA&gt;;</span></div><div class="line"><span class="string">print @lines;</span></div><div class="line"><span class="string">close(DATA);</span></div><div class="line"><span class="string">biotest@ubuntu:~/perl/06file$ perl import.pl</span></div><div class="line"><span class="string">1</span></div><div class="line"><span class="string">2</span></div><div class="line"><span class="string">3</span></div></pre></td></tr></table></figure>
<h3 id="getc-函数">getc 函数</h3>
<p><code>xgetc</code>函数从指定的<code>FILEHANDLE</code>返回单一的字符，如果没指定返回 STDIN：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">getc</span> FILEHANDLE</div><div class="line"><span class="keyword">getc</span></div></pre></td></tr></table></figure>
<p>如果发生错误，或在文件句柄在文件末尾，则返回 undef。</p>
<h3 id="read函数">read函数</h3>
<p>read函数用于从缓冲区的文件句柄读取信息。 这个函数用于从文件读取二进制数据，格式如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">read</span> FILEHANDLE,SCALAR,LENGTH,OFFSET</div><div class="line"><span class="keyword">read</span> FILEHANDLE,SCALAR,LENGTH</div></pre></td></tr></table></figure>
<p>参数说明: <figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>. FILEHANDLE：文件句柄，用于存放一个文件唯一标识符。 </div><div class="line"><span class="number">2</span>. SCALAR：存贮结果，如果没有指定OFFSET，数据将放在SCALAR的开头。否则数据放在SCALAR中的OFFSET字节之后。</div><div class="line"><span class="number">3</span>. LENGTH：读取的内容长度。</div><div class="line"><span class="number">4</span>. OFFSET：偏移量。</div><div class="line">如果读取成功返回读取的字节数，如果在文件结尾返回<span class="number">0</span>，如果发生错误返回<span class="keyword">undef</span>。</div></pre></td></tr></table></figure></p>
<h3 id="print函数">print函数</h3>
<p>对于所有从文件句柄中读取信息的函数，在后端主要的写入函数为 print： <figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> FILEHANDLE LIST</div><div class="line"><span class="keyword">print</span> LIST</div><div class="line"><span class="keyword">print</span></div></pre></td></tr></table></figure></p>
<p>利用文件句柄和print函数可以把程序运行的结果发给输出设备(STDOUT：标准输出)，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> <span class="string">"Hello World!\n"</span>;</div></pre></td></tr></table></figure>
<h2 id="文件操作实例">文件操作实例</h2>
<h3 id="复制文件数据">复制文件数据</h3>
<p>在下面的案例中，打开一个已经存在的文件<code>file1.txt</code>，并读取它的每一行，写入到文件<code>file2.txt</code>中，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat file1.txt</div><div class="line">This is line1 of file1.txt</div><div class="line">This is line2 of file1.txt</div><div class="line">This is line3 of file1.txt</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat operation.pl </div><div class="line"><span class="comment">#!/usr/bi/perl</span></div><div class="line"></div><div class="line"><span class="comment"># Open file1 with only-read</span></div><div class="line"><span class="keyword">open</span>(DATA1,<span class="string">"&lt;file1.txt"</span>);</div><div class="line"></div><div class="line"><span class="comment"># Open new file2</span></div><div class="line"><span class="keyword">open</span>(DATA2,<span class="string">"&gt;file2.txt"</span>);</div><div class="line"></div><div class="line"><span class="comment"># copy data</span></div><div class="line"><span class="keyword">while</span>(&lt;DATA1&gt;)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">print</span> DATA2 $_;</div><div class="line">&#125;</div><div class="line"><span class="keyword">close</span>(DATA1);</div><div class="line"><span class="keyword">close</span>(DATA2);</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl operation.pl </div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat file2.txt </div><div class="line">This is line1 of file1.txt</div><div class="line">This is line2 of file1.txt</div><div class="line">This is line3 of file1.txt</div></pre></td></tr></table></figure>
<h3 id="重命名文件">重命名文件</h3>
<p>在下面的案例中，将<code>file1.txt</code>重命令为<code>new_file1.txt</code>，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls -lh *.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">13</span> file1.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">17</span> file2.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">21</span> May <span class="number">18</span> <span class="number">19</span>:<span class="number">44</span> file.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest  <span class="number">7</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">04</span> import.txt</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat rename.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">rename</span>(<span class="string">"/home/biotest/perl/06file/file1.txt"</span>,<span class="string">"/home/biotest/perl/06file/new_file1.txt"</span>);</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl rename.pl </div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls -lh *.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">17</span> file2.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">21</span> May <span class="number">18</span> <span class="number">19</span>:<span class="number">44</span> file.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest  <span class="number">7</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">04</span> import.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">13</span> new_file1.txt</div></pre></td></tr></table></figure>
<h3 id="删除文件">删除文件</h3>
<p>现在删除当前目录下的<code>file2.txt</code>文件，使用的是<code>unlink</code>函数，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls -lh *.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">17</span> file2.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">21</span> May <span class="number">18</span> <span class="number">19</span>:<span class="number">44</span> file.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest  <span class="number">7</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">04</span> import.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">13</span> new_file1.txt</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ vim delete.pl</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat delete.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">unlink</span>(<span class="string">"/home/biotest/perl/06file/file2.txt"</span>);</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl delete.pl </div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls -lh *.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">21</span> May <span class="number">18</span> <span class="number">19</span>:<span class="number">44</span> file.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest  <span class="number">7</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">04</span> import.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">13</span> new_file1.txt</div></pre></td></tr></table></figure>
<h2 id="指定文件位置">指定文件位置</h2>
<p><code>tell</code>函数用于获取文件的位置，<code>seek</code>函数指定文件内的位置。</p>
<h3 id="tell函数">tell函数</h3>
<p>tell函数的使用如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">tell</span> FILEHANDLE</div><div class="line"><span class="keyword">tell</span></div></pre></td></tr></table></figure>
<p>如果指定 FILEHANDLE 该函数返回文件指针的位置，以字节计。如果没有指定则返回默认选取的文件句柄。</p>
<h3 id="seek函数">seek函数</h3>
<p>seek()函数是通过文件句柄来移动文件读写指针的方式来读取或写入文件的，以字节为单位进行读取和写入，使用格式如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">seek</span> FILEHANDLE, POSITION, WHENCE</div></pre></td></tr></table></figure>
<p>参数说明: <figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>. FILEHANDLE：文件句柄，用于存放一个文件唯一标识符。</div><div class="line"><span class="number">2</span>. POSITION：表示文件句柄(读写位置指针)要移动的字节数。</div><div class="line"><span class="number">3</span>. WHENCE：表示文件句柄(读写位置指针)开始移动时的起始位置，可以取的值为<span class="number">0</span>、<span class="number">1</span>、<span class="number">2</span>；分别表示文件开头、当前位置和文件尾。</div></pre></td></tr></table></figure></p>
<p>以下案例就是从文件开头读取256个字节： <figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">seek</span> DATA, <span class="number">256</span>, <span class="number">0</span>;</div></pre></td></tr></table></figure></p>
<h3 id="使用案例">使用案例</h3>
<p>以下代码用于判断这个文件是否𥇛，是否可读写，代码如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat file_info.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">my</span> $file=<span class="string">"/home/biotest/perl/06file/file.txt"</span>;</div><div class="line"><span class="keyword">my</span> (@description, $size);</div><div class="line"><span class="keyword">if</span> (-e $file)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a binary file'</span> <span class="keyword">if</span> (-B <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a socket'</span> <span class="keyword">if</span> (-S <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a text file'</span> <span class="keyword">if</span> (-T <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a special file'</span> <span class="keyword">if</span> (-b <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a special character file'</span> <span class="keyword">if</span> (-c <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a dictionary'</span> <span class="keyword">if</span> (-d <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'file exists'</span> <span class="keyword">if</span> (-<span class="keyword">x</span> <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, (($size=-<span class="keyword">s</span> <span class="number">_</span>))? <span class="string">"$size byte"</span>:<span class="string">'null'</span>;</div><div class="line">    <span class="keyword">print</span> <span class="string">"$file information: "</span>,<span class="keyword">join</span>(<span class="string">','</span>,@description),<span class="string">"\n"</span>;</div><div class="line">&#125;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl file_info.pl </div><div class="line">/home/biotest/perl/<span class="number">06</span>file/file.txt information: is a text file,<span class="number">21</span> byte</div></pre></td></tr></table></figure>
<p>文件测试操作符如下表所示：</p>
<table>
<thead>
<tr class="header">
<th>操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>-A</code></td>
<td>文件上一次被访问的时间(单位：天)</td>
</tr>
<tr class="even">
<td><code>-B</code></td>
<td>是否为二进制文件</td>
</tr>
<tr class="odd">
<td><code>-C</code></td>
<td>文件的(inode)索引节点修改时间(单位：天)</td>
</tr>
<tr class="even">
<td><code>-M</code></td>
<td>文件上一次被修改的时间(单位：天)</td>
</tr>
<tr class="odd">
<td><code>-O</code></td>
<td>文件被真实的UID所有</td>
</tr>
<tr class="even">
<td><code>-R</code></td>
<td>文件或目录可以被真实的UID/GID读取</td>
</tr>
<tr class="odd">
<td><code>-S</code></td>
<td>为socket(套接字)</td>
</tr>
<tr class="even">
<td><code>-T</code></td>
<td>是否为文本文件</td>
</tr>
<tr class="odd">
<td><code>-W</code></td>
<td>文件或目录可以被真实的UID/GID写入</td>
</tr>
<tr class="even">
<td><code>-X</code></td>
<td>文件或目录可以被真实的UID/GID执行</td>
</tr>
<tr class="odd">
<td><code>-b</code></td>
<td>为block-special (特殊块)文件(如挂载磁盘)</td>
</tr>
<tr class="even">
<td><code>-c</code></td>
<td>为character-special (特殊字符)文件(如I/O 设备)</td>
</tr>
<tr class="odd">
<td><code>-d</code></td>
<td>为目录</td>
</tr>
<tr class="even">
<td><code>-e</code></td>
<td>文件或目录名存在</td>
</tr>
<tr class="odd">
<td><code>-f</code></td>
<td>为普通文件</td>
</tr>
<tr class="even">
<td><code>-g</code></td>
<td>文件或目录具有setgid属性</td>
</tr>
<tr class="odd">
<td><code>-k</code></td>
<td>文件或目录设置了sticky位</td>
</tr>
<tr class="even">
<td><code>-l</code></td>
<td>为符号链接</td>
</tr>
<tr class="odd">
<td><code>-o</code></td>
<td>文件被有效UID所有</td>
</tr>
<tr class="even">
<td><code>-p</code></td>
<td>文件是命名管道(FIFO)</td>
</tr>
<tr class="odd">
<td><code>-r</code></td>
<td>文件可以被有效的UID/GID读取</td>
</tr>
<tr class="even">
<td><code>-s</code></td>
<td>文件或目录存在且不为0(返回字节数)</td>
</tr>
<tr class="odd">
<td><code>-t</code></td>
<td>文件句柄为TTY(系统函数isatty()的返回结果；不能对文件名使用这个测试)</td>
</tr>
<tr class="even">
<td><code>-u</code></td>
<td>文件或目录具有setuid属性</td>
</tr>
<tr class="odd">
<td><code>-w</code></td>
<td>文件可以被有效的UID/GID写入</td>
</tr>
<tr class="even">
<td><code>-x</code></td>
<td>文件可以被有效的UID/GID执行</td>
</tr>
<tr class="odd">
<td><code>-z</code></td>
<td>文件存在，大小为0(目录恒为false)，即是否为空文件，</td>
</tr>
</tbody>
</table>
<h2 id="perl目录操作">Perl目录操作</h2>
<p>下面是Perl中常用的一些操作目录的函数：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">opendir</span> DIRHANDLE, EXPR  <span class="comment"># 打开目录</span></div><div class="line"><span class="keyword">readdir</span> DIRHANDLE        <span class="comment"># 读取目录</span></div><div class="line"><span class="keyword">rewinddir</span> DIRHANDLE      <span class="comment"># 定位指针到开头</span></div><div class="line"><span class="keyword">telldir</span> DIRHANDLE        <span class="comment"># 返回目录的当前位置</span></div><div class="line"><span class="keyword">seekdir</span> DIRHANDLE, POS   <span class="comment"># 定位指定到目录的 POS 位置</span></div><div class="line">closedir DIRHANDLE       <span class="comment"># 关闭目录</span></div></pre></td></tr></table></figure>
<h3 id="显示所有文件">显示所有文件</h3>
<p>在下面的案例中，可以显示所有的文件，使用了<code>glob</code>函数，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat glob.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="comment"># display /home/biotest/perl/06file/ all files</span></div><div class="line">$dir = <span class="string">"/home/biotest/perl/06file/*"</span>;</div><div class="line"><span class="keyword">my</span> @files=<span class="keyword">glob</span>($dir);</div><div class="line"></div><div class="line"><span class="keyword">foreach</span>(@files)&#123;</div><div class="line">    <span class="keyword">print</span> $_. <span class="string">"\n"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment"># display all files with .pl in /home/biotest/perl/06file/</span></div><div class="line">$dir=<span class="string">"/home/biotest/perl/06file/*.pl"</span>;</div><div class="line">@files=<span class="keyword">glob</span>($dir);</div><div class="line"></div><div class="line"><span class="keyword">foreach</span>(@files)&#123;</div><div class="line">    <span class="keyword">print</span> $_.<span class="string">"\n"</span>;</div><div class="line">&#125;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl glob.pl </div><div class="line">/home/biotest/perl/<span class="number">06</span>file/delete.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/file.txt</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/file_info.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/glob.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/import.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/import.txt</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/m1.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/new_file1.txt</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/open.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/operation.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/rename.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/delete.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/file_info.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/glob.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/import.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/m1.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/open.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/operation.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/rename.pl</div></pre></td></tr></table></figure>
<p>显示当前目录下所有文件，使用<code>opendir</code>函数，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat opendir.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">opendir</span>(DIR,<span class="string">'.'</span>) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"Can not open directory,$!"</span>;</div><div class="line"><span class="keyword">while</span>($file=<span class="keyword">readdir</span> DIR)&#123;</div><div class="line">    <span class="keyword">print</span> <span class="string">"$file\n"</span>;</div><div class="line">&#125;</div><div class="line">closedir DIR;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl opendir.pl </div><div class="line">open.pl</div><div class="line">file.txt</div><div class="line">..</div><div class="line">rename.pl</div><div class="line">glob.pl</div><div class="line">import.pl</div><div class="line">opendir.pl</div><div class="line">operation.pl</div><div class="line">new_file1.txt</div><div class="line">file_info.pl</div><div class="line">.</div><div class="line">m1.pl</div><div class="line">delete.pl</div><div class="line">import.txt</div></pre></td></tr></table></figure>
<h3 id="显示当前目录下所有以.pl结尾的文件">显示当前目录下所有以<code>.pl</code>结尾的文件</h3>
<p>如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat display_file_pl.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">opendir</span>(DIR,<span class="string">'.'</span>) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"can not open directionary, $!"</span>;</div><div class="line"><span class="keyword">foreach</span> (<span class="keyword">sort</span> <span class="keyword">grep</span>(<span class="regexp">/^.*\.pl$/</span>,<span class="keyword">readdir</span>(DIR)))&#123;</div><div class="line">     <span class="keyword">print</span> <span class="string">"$_\n"</span>;</div><div class="line">&#125;</div><div class="line">closedir DIR;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl display_file_pl.pl </div><div class="line">delete.pl</div><div class="line">display_file_pl.pl</div><div class="line">file_info.pl</div><div class="line">glob.pl</div><div class="line">import.pl</div><div class="line">m1.pl</div><div class="line">open.pl</div><div class="line">opendir.pl</div><div class="line">operation.pl</div><div class="line">rename.pl</div></pre></td></tr></table></figure>
<h3 id="创建一个新目录">创建一个新目录</h3>
<p>mkdir也是Perl中的一个函数，它用于创建一个新目录，但是使用之前，要有足够的权限，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat mkdir.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$dir=<span class="string">"/home/biotest/perl/06file/new"</span>;</div><div class="line"></div><div class="line"><span class="keyword">mkdir</span>($dir) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"Can not create $dir directionary, $!"</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"Create a directionary!"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl mkdir.pl </div><div class="line">Create a directionary!</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls</div><div class="line">delete.pl           glob.pl     mkdir.pl       open.pl</div><div class="line">display_file_pl.pl  import.pl   new            operation.pl</div><div class="line">file_info.pl        import.txt  new_file1.txt  rename.pl</div><div class="line">file.txt            m1.pl       opendir.pl</div></pre></td></tr></table></figure>
<h3 id="删除目录">删除目录</h3>
<p>使用rmdir来删除目录，使用这个函数之前用户需要有足够的权限，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat del_dir.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$dir=<span class="string">"/home/biotest/perl/06file/new"</span>;</div><div class="line"></div><div class="line"><span class="keyword">rmdir</span>($dir) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"Can not delete $dir directionary, $!"</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"Delete directionary successfully!\n"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl del_dir.pl </div><div class="line">Delete directionary successfully!</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls</div><div class="line">del_dir.pl          file.txt    m1.pl          open.pl</div><div class="line">delete.pl           glob.pl     mkdir.pl       operation.pl</div><div class="line">display_file_pl.pl  import.pl   new_file1.txt  rename.pl</div><div class="line">file_info.pl        import.txt  opendir.pl</div></pre></td></tr></table></figure>
<h3 id="切换目录">切换目录</h3>
<p>切换目录使用chdir函数，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ pwd</div><div class="line">/home/biotest/perl/<span class="number">06</span>file</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat chdir.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$dir=<span class="string">"/home/biotest"</span>;</div><div class="line"></div><div class="line"><span class="keyword">chdir</span>($dir) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"Can not change to $dir, $!"</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"Your current directionary is $dir\n"</span>;</div><div class="line"></div><div class="line"><span class="keyword">opendir</span>(DIR,<span class="string">'.'</span>) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"Can not open $dir,$!"</span>;</div><div class="line"><span class="keyword">while</span>($file=<span class="keyword">readdir</span> DIR)&#123;</div><div class="line">    <span class="keyword">print</span> <span class="string">"$file\n"</span>;</div><div class="line">&#125;</div><div class="line">closedir DIR;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl chdir.pl|head</div><div class="line">Your current directionary is /home/biotest</div><div class="line">Desktop</div><div class="line">Miniconda2-latest-Linux-x86_64.sh</div><div class="line">filename</div><div class="line">Pictures</div><div class="line">.dmrc</div><div class="line">Videos</div><div class="line">.xsession-errors.old</div><div class="line">.bash_history</div><div class="line">.cache</div></pre></td></tr></table></figure>
<p>从结果来看，运行代码后，chdir并不会在shell中直接切换到<code>/home/biotest</code>目录，但是，我们后来使用了<code>opendir</code>函数后，显示的文件确实是<code>/home/biotest</code>目录下的文件，这一点需要注意：切换目录改变的只能是Perl程序运行中的目录，而不是Shell实际中的目录。</p>
<h2 id="参考资料">参考资料</h2>
<p><a href="http://www.runoob.com/perl/perl-tutorial.html" target="_blank" rel="external">Perl教程|菜鸟教程</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/目录操作/" <i class="fa fa-tag"></i> 目录操作</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/05/18/Perl/Perl学习笔记（7）-引用/" rel="next" title="Perl学习笔记（7）-引用">
                <i class="fa fa-chevron-left"></i> Perl学习笔记（7）-引用
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/05/28/Experiment/实验笔记-miRNA的qPCR方法笔记/" rel="prev" title="miRNA的qPCR方法笔记">
                miRNA的qPCR方法笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="vcomments"></div>
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">RVDSD</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">157</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">45</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#perl文件操作概述"><span class="nav-number">1.</span> <span class="nav-text">Perl文件操作概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#open函数"><span class="nav-number">2.</span> <span class="nav-text">Open函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#只读方式打开"><span class="nav-number">2.1.</span> <span class="nav-text">只读方式打开</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#写入方式打开"><span class="nav-number">2.2.</span> <span class="nav-text">写入方式打开</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#读写方式打开"><span class="nav-number">2.3.</span> <span class="nav-text">读写方式打开</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除文件内容"><span class="nav-number">2.4.</span> <span class="nav-text">删除文件内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#追加数据"><span class="nav-number">2.5.</span> <span class="nav-text">追加数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#读取追加文件的内容"><span class="nav-number">2.6.</span> <span class="nav-text">读取追加文件的内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不同的访问模式汇总"><span class="nav-number">2.7.</span> <span class="nav-text">不同的访问模式汇总</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sysopen函数"><span class="nav-number">3.</span> <span class="nav-text">Sysopen函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#close函数"><span class="nav-number">4.</span> <span class="nav-text">Close函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#读写文件"><span class="nav-number">5.</span> <span class="nav-text">读写文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一种方式filehandle操作符"><span class="nav-number">5.1.</span> <span class="nav-text">第一种方式：<FILEHANDLE>操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getc-函数"><span class="nav-number">5.2.</span> <span class="nav-text">getc 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#read函数"><span class="nav-number">5.3.</span> <span class="nav-text">read函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#print函数"><span class="nav-number">5.4.</span> <span class="nav-text">print函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件操作实例"><span class="nav-number">6.</span> <span class="nav-text">文件操作实例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#复制文件数据"><span class="nav-number">6.1.</span> <span class="nav-text">复制文件数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重命名文件"><span class="nav-number">6.2.</span> <span class="nav-text">重命名文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除文件"><span class="nav-number">6.3.</span> <span class="nav-text">删除文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指定文件位置"><span class="nav-number">7.</span> <span class="nav-text">指定文件位置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#tell函数"><span class="nav-number">7.1.</span> <span class="nav-text">tell函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#seek函数"><span class="nav-number">7.2.</span> <span class="nav-text">seek函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用案例"><span class="nav-number">7.3.</span> <span class="nav-text">使用案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#perl目录操作"><span class="nav-number">8.</span> <span class="nav-text">Perl目录操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#显示所有文件"><span class="nav-number">8.1.</span> <span class="nav-text">显示所有文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#显示当前目录下所有以.pl结尾的文件"><span class="nav-number">8.2.</span> <span class="nav-text">显示当前目录下所有以.pl结尾的文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建一个新目录"><span class="nav-number">8.3.</span> <span class="nav-text">创建一个新目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除目录"><span class="nav-number">8.4.</span> <span class="nav-text">删除目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#切换目录"><span class="nav-number">8.5.</span> <span class="nav-text">切换目录</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考资料"><span class="nav-number">9.</span> <span class="nav-text">参考资料</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RVDSD</span>

  
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_pv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共590.3k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
