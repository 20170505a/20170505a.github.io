<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="Bimap对象概览 我们平常所见的“注释映射”(annotation maps)就是Bimap对象。例如，x是一个Bimap对象，使用show(x)或summary(x)，就可以显示一些有关这个对象的信息，两者的区别在于，后者显示的信息更多，如下所示： 12345678910111213141516171819show(hgu95av2SYMBOL)# SYMBOL map for chip">
<meta property="og:type" content="article">
<meta property="og:title" content="Bimap对象笔记">
<meta property="og:url" content="http://rvdsd.top/2018/09/06/Tools/Bimap对象笔记/index.html">
<meta property="og:site_name" content="RVDSD的个人笔记本">
<meta property="og:description" content="Bimap对象概览 我们平常所见的“注释映射”(annotation maps)就是Bimap对象。例如，x是一个Bimap对象，使用show(x)或summary(x)，就可以显示一些有关这个对象的信息，两者的区别在于，后者显示的信息更多，如下所示： 12345678910111213141516171819show(hgu95av2SYMBOL)# SYMBOL map for chip">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-09-06T06:16:19.850Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bimap对象笔记">
<meta name="twitter:description" content="Bimap对象概览 我们平常所见的“注释映射”(annotation maps)就是Bimap对象。例如，x是一个Bimap对象，使用show(x)或summary(x)，就可以显示一些有关这个对象的信息，两者的区别在于，后者显示的信息更多，如下所示： 12345678910111213141516171819show(hgu95av2SYMBOL)# SYMBOL map for chip">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://rvdsd.top/2018/09/06/Tools/Bimap对象笔记/"/>





  <title>Bimap对象笔记 | RVDSD的个人笔记本</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RVDSD的个人笔记本</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学习过程中的输出</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/09/06/Tools/Bimap对象笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Bimap对象笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-06T12:00:00+08:00">
                2018-09-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生信工具/" itemprop="url" rel="index">
                    <span itemprop="name">生信工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,898
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  13
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="bimap对象概览">Bimap对象概览</h2>
<p>我们平常所见的“注释映射”(annotation maps)就是Bimap对象。例如，x是一个Bimap对象，使用<code>show(x)</code>或<code>summary(x)</code>，就可以显示一些有关这个对象的信息，两者的区别在于，后者显示的信息更多，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">show(hgu95av2SYMBOL)</div><div class="line"><span class="comment"># SYMBOL map for chip hgu95av2 (object of class "ProbeAnnDbBimap")</span></div><div class="line"><span class="comment"># 从上面的信息我们可以看出来，hgu95av2SYMBOL是hgu95av芯片的SYMBOL映射文件</span></div><div class="line"></div><div class="line">summary(hgu95av2SYMBOL)</div><div class="line"><span class="comment"># SYMBOL map for chip hgu95av2 (object of class "ProbeAnnDbBimap")</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Lkeyname: probe_id (Ltablename: probes)</span></div><div class="line"><span class="comment"># |    Lkeys: "1000_at", "1001_at", ... (total=12625/mapped=11471)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Rkeyname: symbol (Rtablename: gene_info)</span></div><div class="line"><span class="comment"># |    Rkeys: "A1BG", "A2M", ... (total=59682/mapped=8595)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | direction: L --&gt; R</span></div><div class="line"><span class="comment"># --------------------------------</span></div><div class="line"><span class="comment"># 从上面的信息可以看出来，hgu95av2SYMBOL这个文件的左侧是探针ID(probe_id)，列的名称是probes，它的格式为"1000_at", "1001_at", ... </span></div><div class="line"><span class="comment"># 探针的数目是12625个，有映射关系的有11471个</span></div><div class="line"><span class="comment"># 右侧的信息的symbol，可以理解为基因的缩写，列的名称是gene_info，它的格式为"A1BG", "A2M", ...，其中有基因的数目为59682，有映射关系的有8595个</span></div><div class="line"><span class="comment"># 映射的方向是从左到右</span></div></pre></td></tr></table></figure>
<h2 id="bimap对象的构成">Bimap对象的构成</h2>
<p>一个bimap由2部分构成。第一部分是2个对象集，就像上面所说的，左侧的对象集与右侧的对象集，这两个对象集中的每一个成员都有自己的名称，并且这个名称在各自的对象集中是唯一的。左侧对象集的名称称为left keys，或者是Lkeys，相应的右侧就是Rkeys。第二部分就是左侧与右侧的映射数目，并且链接是可以被标记的(tagged），关于这个“标记”是什么意思，下文会提到。总之，一个bimap对象其实就是一个二分图(bipartite grpha)。</p>
<p>什么是二分图呢，看下面的案例。</p>
<p>案例1: <code>B1</code>是某个bimap对象，它有4个Lkeys，即abcd，它有3个Rkeys，分别为ABC，它的链接（原文是Links，或edges）链接关系如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">"a"</span> &lt;--&gt; <span class="string">"A"</span></div><div class="line"><span class="string">"a"</span> &lt;--&gt; <span class="string">"B"</span></div><div class="line"><span class="string">"b"</span> &lt;--&gt; <span class="string">"A"</span></div><div class="line"><span class="string">"d"</span> &lt;--&gt; <span class="string">"C"</span></div></pre></td></tr></table></figure>
<p>这里我们需要注意的是，第一，在一个确定的对象中，从左侧到右侧的链接数目可以是任意值。第二，在这个案例中，链接数目并没有标记(tagged)。</p>
<p>再看一个叫<code>B2</code>的bimap文件，它有4个Lkeys，分别为abcd，有3个Rkeys，分别为ABC，这个bimap文件中的链接进行了标记，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">"a"</span> &lt;-<span class="string">"x"</span>-&gt; <span class="string">"A"</span></div><div class="line"><span class="string">"a"</span> &lt;-<span class="string">"y"</span>-&gt; <span class="string">"B"</span></div><div class="line"><span class="string">"b"</span> &lt;-<span class="string">"x"</span>-&gt; <span class="string">"A"</span></div><div class="line"><span class="string">"d"</span> &lt;-<span class="string">"x"</span>-&gt; <span class="string">"C"</span></div><div class="line"><span class="string">"d"</span> &lt;-<span class="string">"y"</span>-&gt; <span class="string">"C"</span></div></pre></td></tr></table></figure>
<p>从上面的数据可以看出来，d与C存在两个链接(links)，其中一个标记(tag)为x，另外一个标记为y。</p>
<p>bimap除了用箭头表示映射关系外，还可以采用数据框的形式，下面就是<code>B1</code>文件的映射关系，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">left  right</div><div class="line">   a      A </div><div class="line">   a      B</div><div class="line">   b      A</div><div class="line">   d      C</div></pre></td></tr></table></figure>
<p>如果右侧的对象有一个多值属性，就像下面的这个样子：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">A &lt;-- c(<span class="number">1.2</span>, <span class="number">0.9</span>)</div><div class="line">B &lt;-- character(<span class="number">0</span>)</div><div class="line">C &lt;-- -<span class="number">1</span>:<span class="number">1</span></div></pre></td></tr></table></figure>
<p>那么B1的平面表示法（英文是Flat representation），就是下面的这个样子：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">left  right  Rattrib1</div><div class="line">   a      A       <span class="number">1.2</span></div><div class="line">   a      A       <span class="number">0.9</span></div><div class="line">   a      B        <span class="literal">NA</span></div><div class="line">   b      A       <span class="number">1.2</span></div><div class="line">   b      A       <span class="number">0.9</span></div><div class="line">   d      C        -<span class="number">1</span></div><div class="line">   d      C         <span class="number">0</span></div><div class="line">   d      C         <span class="number">1</span></div></pre></td></tr></table></figure>
<p>从上面的这个案例我们就知道，行数（这里是8）大于链接数（这里是4）。</p>
<h2 id="anndbbimap与flatbimap对象">AnnDbBimap与FlatBimap对象</h2>
<p>AnnDbBimap对象是bimap对象的一种，它储存于数据库中。一个FLastBimap的数据（Lkeys，Rkeys和Links）储存在内存（用数据框的形式储存Links）。从概念上讲，AnnDbBimap和FlatBimap对象是一样的（只是它们的内部表示不一样），因此我们可以使用一组方法来对它们进行操作，最常见的接口（common interface）就是Bimap interface。这里需要注意的是，AnnDbBimap和FlastBimap对象都是只读对象，无法更改它们，只能读取。</p>
<p>使用<code>flatten()</code>函数可以将AnnDbBimap对象转换为一个FlatBimap对象。但是，一个FlatBimap对象不能转换为AnnDbBimap对象，flatten()这个泛型函数在理解一个特定的Bimap的方法，即<code>f</code>方面很有用。对于任何的AnnDbBimap对象x来说，<code>f(x)</code>与<code>f(flatten(x))</code>是一样的。这就说明，<code>f</code>方法作用于AnnDbBimap对象时，它返回的类型与<code>f</code>方法作用于FlatBimap对象是一样。</p>
<h2 id="处理bimap对象的函数">处理Bimap对象的函数</h2>
<p>处于Bimap对象的函数有以下这些。</p>
<p><code>key()</code>，它返回一个Bimap对象的所有keys，例如<code>keys(hgu95av2GO)</code>。 <code>length()</code>，它等于同<code>length(keys(x))</code>。 <code>isNA()</code>，返回一个逻辑向量，长度与参数一样，如果是TRUE，则表示keys没有映射。 <code>mappedkeys()</code>，返回<code>keys(x)</code>的子集，也就是只产生了映射的子集，这是一个处理Bimap对象的接口。 <code>count.mappedkyes()</code>，相当于<code>length(mappedkeys(x))</code>。</p>
<p>现在我们来看一个Bimap对象<code>hgu95av2GO</code>，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">class(hgu95av2GO)</div><div class="line"><span class="comment"># [1] "ProbeGo3AnnDbBimap"</span></div><div class="line"><span class="comment"># attr(,"package")</span></div><div class="line"><span class="comment"># [1] "AnnotationDbi"</span></div><div class="line">str(hgu95av2GO)</div><div class="line"><span class="comment"># Formal class 'ProbeGo3AnnDbBimap' [package "AnnotationDbi"] with 9 slots</span></div><div class="line">  <span class="comment"># ..@ rightTables: Named chr [1:3] "go_bp" "go_cc" "go_mf"</span></div><div class="line">  <span class="comment"># .. ..- attr(*, "names")= chr [1:3] "BP" "CC" "MF"</span></div><div class="line">  <span class="comment"># ..@ L2Rchain   :List of 3</span></div><div class="line">  <span class="comment"># .. ..$ :Formal class 'L2Rlink' [package "AnnotationDbi"] with 8 slots</span></div><div class="line">  <span class="comment"># .. .. .. ..@ tablename   : chr "probes"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ Lcolname    : chr "probe_id"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ tagname     : chr NA</span></div><div class="line">  <span class="comment"># .. .. .. ..@ Rcolname    : chr "gene_id"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ Rattribnames: chr(0) </span></div><div class="line">  <span class="comment"># .. .. .. ..@ Rattrib_join: chr NA</span></div><div class="line">  <span class="comment"># .. .. .. ..@ filter      : chr "&#123;is_multiple&#125;='0'"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ altDB       : chr(0) </span></div><div class="line">  <span class="comment"># .. ..$ :Formal class 'L2Rlink' [package "AnnotationDbi"] with 8 slots</span></div><div class="line">  <span class="comment"># .. .. .. ..@ tablename   : chr "genes"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ Lcolname    : chr "gene_id"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ tagname     : chr NA</span></div><div class="line">  <span class="comment"># .. .. .. ..@ Rcolname    : chr "_id"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ Rattribnames: chr(0) </span></div><div class="line">  <span class="comment"># .. .. .. ..@ Rattrib_join: chr NA</span></div><div class="line">  <span class="comment"># .. .. .. ..@ filter      : chr "1"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ altDB       : chr "org.Hs.eg"</span></div><div class="line">  <span class="comment"># .. ..$ :Formal class 'L2Rlink' [package "AnnotationDbi"] with 8 slots</span></div><div class="line">  <span class="comment"># .. .. .. ..@ tablename   : chr(0) </span></div><div class="line">  <span class="comment"># .. .. .. ..@ Lcolname    : chr "_id"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ tagname     : Named chr "&#123;evidence&#125;"</span></div><div class="line">  <span class="comment"># .. .. .. .. ..- attr(*, "names")= chr "Evidence"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ Rcolname    : chr "go_id"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ Rattribnames: Named chr "NULL"</span></div><div class="line">  <span class="comment"># .. .. .. .. ..- attr(*, "names")= chr "Ontology"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ Rattrib_join: chr NA</span></div><div class="line">  <span class="comment"># .. .. .. ..@ filter      : chr "1"</span></div><div class="line">  <span class="comment"># .. .. .. ..@ altDB       : chr "org.Hs.eg"</span></div><div class="line">  <span class="comment"># ..@ direction  : int 1</span></div><div class="line">  <span class="comment"># ..@ Lkeys      : chr NA</span></div><div class="line">  <span class="comment"># ..@ Rkeys      : chr NA</span></div><div class="line">  <span class="comment"># ..@ ifnotfound : list()</span></div><div class="line">  <span class="comment"># ..@ datacache  :&lt;environment: 0x0000000035b54010&gt; </span></div><div class="line">  <span class="comment"># ..@ objName    : chr "GO"</span></div><div class="line">  <span class="comment"># ..@ objTarget  : chr "chip hgu95av2"</span></div><div class="line"></div><div class="line">hgu95av2GO</div><div class="line"><span class="comment"># GO map for chip hgu95av2 (object of class "ProbeGo3AnnDbBimap")</span></div><div class="line">summary(hgu95av2GO)</div><div class="line"><span class="comment"># GO map for chip hgu95av2 (object of class "ProbeGo3AnnDbBimap")</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Lkeyname: probe_id (Ltablename: probes)</span></div><div class="line"><span class="comment"># |    Lkeys: "1000_at", "1001_at", ... (total=12625/mapped=11244)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Rkeyname: go_id (Rtablename: go_bpgo_ccgo_mf)</span></div><div class="line"><span class="comment"># |    Rkeys: "GO:0000002", "GO:0000003", ... (total=17120/mapped=14965)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | tagname: Evidence</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | direction: L --&gt; R</span></div></pre></td></tr></table></figure>
<p>从上面的信息我们可以知道，<code>hgu95av2GO</code>是一个用于hgu95av2芯片的GO map文件，使用<code>summary(hgu95av2GO)</code>文件我们可以了解到更加全面的信息，如上所述。</p>
<p>现在对<code>hgu95av2GO</code>这个对象进行几个操作，如下所示：</p>
<h3 id="direction">direction()</h3>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">x &lt;- hgu95av2GO</div><div class="line">summary(x)</div><div class="line"><span class="comment"># GO map for chip hgu95av2 (object of class "ProbeGo3AnnDbBimap")</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Lkeyname: probe_id (Ltablename: probes)</span></div><div class="line"><span class="comment"># |    Lkeys: "1000_at", "1001_at", ... (total=12625/mapped=11244)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Rkeyname: go_id (Rtablename: go_bpgo_ccgo_mf)</span></div><div class="line"><span class="comment"># |    Rkeys: "GO:0000002", "GO:0000003", ... (total=17120/mapped=14965)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | tagname: Evidence</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | direction: L --&gt; R</span></div><div class="line">direction(x)</div><div class="line"><span class="comment"># [1] 1</span></div><div class="line">direction(x) &lt;- -<span class="number">1</span></div><div class="line">direction(x)</div><div class="line"><span class="comment"># [1] -1</span></div><div class="line">summary(x)</div><div class="line"><span class="comment"># revmap(GO) map for chip hgu95av2 (object of class "ProbeGo3AnnDbBimap")</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Lkeyname: probe_id (Ltablename: probes)</span></div><div class="line"><span class="comment"># |    Lkeys: "1000_at", "1001_at", ... (total=12625/mapped=11244)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Rkeyname: go_id (Rtablename: go_bpgo_ccgo_mf)</span></div><div class="line"><span class="comment"># |    Rkeys: "GO:0000002", "GO:0000003", ... (total=17120/mapped=14965)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | tagname: Evidence</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | direction: L &lt;-- R</span></div></pre></td></tr></table></figure>
<p>从上面的结果可以看出来，<code>direction(x)</code>这个函数的作用是改变映射方向，当是1的时候，是从左向右映射，当是-1的时候，是从右向左映射，<code>summary(x)</code>结果的最后一行可以看出来。</p>
<p>direction()这个函数与revmap()函数的功能是一样，如下所示。</p>
<h3 id="revmap">revmap()</h3>
<p>这个函数是调换Bimap的左右两侧的映射关系，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">y &lt;- revmap(x)</div><div class="line">y</div><div class="line"><span class="comment"># revmap(revmap(revmap(GO))) map for chip hgu95av2 (object of class "ProbeGo3AnnDbBimap")</span></div><div class="line">summary(y)</div><div class="line"><span class="comment"># revmap(revmap(revmap(GO))) map for chip hgu95av2 (object of class "ProbeGo3AnnDbBimap")</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Lkeyname: probe_id (Ltablename: probes)</span></div><div class="line"><span class="comment"># |    Lkeys: "1000_at", "1001_at", ... (total=12625/mapped=11244)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Rkeyname: go_id (Rtablename: go_bpgo_ccgo_mf)</span></div><div class="line"><span class="comment"># |    Rkeys: "GO:0000002", "GO:0000003", ... (total=17120/mapped=14965)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | tagname: Evidence</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | direction: L &lt;-- R</span></div><div class="line"><span class="comment"># | direction: L &lt;-- R</span></div><div class="line">summary(x)</div><div class="line"><span class="comment"># revmap(revmap(GO)) map for chip hgu95av2 (object of class "ProbeGo3AnnDbBimap")</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Lkeyname: probe_id (Ltablename: probes)</span></div><div class="line"><span class="comment"># |    Lkeys: "1000_at", "1001_at", ... (total=12625/mapped=11244)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | Rkeyname: go_id (Rtablename: go_bpgo_ccgo_mf)</span></div><div class="line"><span class="comment"># |    Rkeys: "GO:0000002", "GO:0000003", ... (total=17120/mapped=14965)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | tagname: Evidence</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment"># | direction: L --&gt; R</span></div><div class="line">keys(y)[<span class="number">1</span>:<span class="number">4</span>]</div><div class="line"><span class="comment"># [1] "GO:0000002" "GO:0000003" "GO:0000011" "GO:0000012"</span></div><div class="line">Lkeys(y)[<span class="number">1</span>:<span class="number">4</span>]</div><div class="line"><span class="comment"># [1] "1000_at"   "1001_at"   "1002_f_at" "1003_s_at"</span></div><div class="line">Rkeys(y)[<span class="number">1</span>:<span class="number">4</span>]</div><div class="line"><span class="comment"># [1] "GO:0000002" "GO:0000003" "GO:0000011" "GO:0000012"</span></div></pre></td></tr></table></figure>
<h3 id="lkeys与rkeys">Lkeys()与Rkeys()</h3>
<p>Lkeys()这个函数可以提取出Bimap左侧的成员，Rkeys()则是提取右侧成员，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">direction(x) &lt;- <span class="number">1</span></div><div class="line">head(Lkeys(x))</div><div class="line"><span class="comment"># [1] "1000_at"   "1001_at"   "1002_f_at" "1003_s_at" "1004_at"   "1005_at"  </span></div><div class="line">head(Rkeys(x))</div><div class="line"><span class="comment"># [1] "GO:0000002" "GO:0000003" "GO:0000011" "GO:0000012" "GO:0000018" "GO:0000019"</span></div></pre></td></tr></table></figure>
<h3 id="llength和rlength">Llength()和Rlength()</h3>
<p>这两个函数分别是列出左侧与右侧的成员数目，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Llength(x)</div><div class="line"><span class="comment"># [1] 12625</span></div><div class="line">Rlength(x)</div><div class="line"><span class="comment"># [1] 17120</span></div></pre></td></tr></table></figure>
<h3 id="mappedlkeys与mappedrkeys">mappedLkeys()与mappedRkeys()</h3>
<p>查看是匹配的keys，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">head(mappedLkeys(x))</div><div class="line"><span class="comment"># [1] "1000_at"   "1001_at"   "1002_f_at" "1003_s_at" "1004_at"   "1005_at"  </span></div><div class="line">head(mappedkeys(x))</div><div class="line"><span class="comment"># [1] "1000_at"   "1001_at"   "1002_f_at" "1003_s_at" "1004_at"   "1005_at" </span></div><div class="line"><span class="comment"># 从上面的结果可以看𡵾，mappedLkeys()与mappedkeys()是等价的</span></div><div class="line"></div><div class="line">head(mappedRkeys(x))</div><div class="line"><span class="comment"># [1] "GO:0000165" "GO:0000187" "GO:0000189" "GO:0001934" "GO:0002741" "GO:0006361"</span></div><div class="line">length(mappedLkeys(x))</div><div class="line"><span class="comment"># [1] 11244</span></div><div class="line">length(mappedRkeys(x))</div><div class="line"><span class="comment"># [1] 14965</span></div><div class="line"><span class="comment"># 等于同count.mappedRkyes()</span></div><div class="line">count.mappedLkeys(x)</div><div class="line"><span class="comment"># [1] 11244</span></div><div class="line">count.mappedRkeys(x)</div><div class="line"><span class="comment"># [1] 14965</span></div><div class="line">count.mappedkeys(x)</div><div class="line"><span class="comment"># [1] 11244</span></div></pre></td></tr></table></figure>
<h3 id="as.list">as.list()</h3>
<p>使用<code>as.list()</code>可以将Bimap文件转换为列表，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">as.list(hgu95av2SYMBOL)[<span class="number">1</span>:<span class="number">9</span>]</div><div class="line"><span class="comment"># $`1000_at`</span></div><div class="line"><span class="comment"># [1] "MAPK3"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1001_at`</span></div><div class="line"><span class="comment"># [1] "TIE1"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1002_f_at`</span></div><div class="line"><span class="comment"># [1] "CYP2C19"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1003_s_at`</span></div><div class="line"><span class="comment"># [1] "CXCR5"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1004_at`</span></div><div class="line"><span class="comment"># [1] "CXCR5"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1005_at`</span></div><div class="line"><span class="comment"># [1] "DUSP1"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1006_at`</span></div><div class="line"><span class="comment"># [1] "MMP10"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1007_s_at`</span></div><div class="line"><span class="comment"># [1] NA</span></div><div class="line"></div><div class="line"><span class="comment"># $`1008_f_at`</span></div><div class="line"><span class="comment"># [1] "EIF2AK2"</span></div><div class="line"></div><div class="line">as.list(hgu95av2ENTREZID)[<span class="number">1</span>:<span class="number">9</span>]</div><div class="line"><span class="comment"># $`1000_at`</span></div><div class="line"><span class="comment"># [1] "5595"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1001_at`</span></div><div class="line"><span class="comment"># [1] "7075"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1002_f_at`</span></div><div class="line"><span class="comment"># [1] "1557"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1003_s_at`</span></div><div class="line"><span class="comment"># [1] "643"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1004_at`</span></div><div class="line"><span class="comment"># [1] "643"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1005_at`</span></div><div class="line"><span class="comment"># [1] "1843"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1006_at`</span></div><div class="line"><span class="comment"># [1] "4319"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1007_s_at`</span></div><div class="line"><span class="comment"># [1] NA</span></div><div class="line"></div><div class="line"><span class="comment"># $`1008_f_at`</span></div><div class="line"><span class="comment"># [1] "5610"</span></div></pre></td></tr></table></figure>
<h3 id="as.character">as.character()</h3>
<p>使用<code>as.character()</code>可以将Bimap文件转换为字符串，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">as.character(hgu95av2ENTREZID)[<span class="number">1</span>:<span class="number">9</span>]</div><div class="line">  <span class="comment"># 1000_at   1001_at 1002_f_at 1003_s_at   1004_at   1005_at   1006_at 1008_f_at </span></div><div class="line">   <span class="comment"># "5595"    "7075"    "1557"     "643"     "643"    "1843"    "4319"    "5610" </span></div><div class="line">  <span class="comment"># 1009_at </span></div><div class="line">   <span class="comment"># "3094"</span></div></pre></td></tr></table></figure>
<h3 id="bimap-envirapi">Bimap-envirAPI</h3>
<p>Bimap-envirAPI的这些操作可以像在R中操作环境一样操作Bimap对象，看下面的案例：</p>
<h3 id="ls">ls()</h3>
<p>显示某个Bimap对象的成员，用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls(name, pos = -<span class="number">1L</span>, envir = as.environment(pos), all.names = <span class="literal">FALSE</span>, pattern, sorted = <span class="literal">TRUE</span>)</div></pre></td></tr></table></figure>
<p>name是Bimap对象的名称，其它的参数不用管，用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(hgu95av2.db)</div><div class="line">x &lt;- hgu95av2SYMBOL</div><div class="line">ls(x)[<span class="number">1</span>:<span class="number">3</span>]</div><div class="line"><span class="comment"># [1] "100_g_at" "1000_at"  "1001_at"</span></div><div class="line">x[[ls(x)[<span class="number">1</span>]]]</div><div class="line"><span class="comment"># [1] "RABGGTA"</span></div></pre></td></tr></table></figure>
<p>显示前3个成员</p>
<h3 id="exist">exist()</h3>
<p>判断某个成员是否存在于Bimap对象中，用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">exists(x, where, envir, frame, mode, inherits)</div></pre></td></tr></table></figure>
<p>看一个案例：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">exists(ls(x)[<span class="number">1</span>], x)</div><div class="line"><span class="comment"># [1] TRUE</span></div><div class="line">exists(<span class="string">"100_g_at"</span>, x)</div><div class="line"><span class="comment"># [1] TRUE</span></div><div class="line">exists(<span class="string">"666"</span>, x)</div><div class="line"><span class="comment"># [1] FALSE</span></div></pre></td></tr></table></figure>
<h3 id="get">get()</h3>
<p>获得左侧某个成员在右侧的映射对象，用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">get(x, pos, envir, mode, inherits)</div></pre></td></tr></table></figure>
<p>使用如下：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">get(<span class="string">"100_g_at"</span>,x)</div><div class="line"><span class="comment"># [1] "RABGGTA"</span></div><div class="line">get(<span class="string">"1974_s_at"</span>,x)</div><div class="line"><span class="comment"># [1] "TP53"</span></div></pre></td></tr></table></figure>
<h3 id="mget">mget()</h3>
<p>获取多个成员，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mget(ls(x)[<span class="number">1</span>:<span class="number">3</span>], x)</div><div class="line"><span class="comment"># $`100_g_at`</span></div><div class="line"><span class="comment"># [1] "RABGGTA"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1000_at`</span></div><div class="line"><span class="comment"># [1] "MAPK3"</span></div><div class="line"></div><div class="line"><span class="comment"># $`1001_at`</span></div><div class="line"><span class="comment"># [1] "TIE1"</span></div></pre></td></tr></table></figure>
<h3 id="samplexn">sample(x,n)</h3>
<p>表示随机从x中取出3对映射关系，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">sample(x, <span class="number">3</span>)</div><div class="line"><span class="comment"># $`36554_at`</span></div><div class="line"><span class="comment"># [1] "ASMTL"</span></div><div class="line"></div><div class="line"><span class="comment"># $`37701_at`</span></div><div class="line"><span class="comment"># [1] "RGS2"</span></div><div class="line"></div><div class="line"><span class="comment"># $`939_at`</span></div><div class="line"><span class="comment"># [1] "MELTF"</span></div></pre></td></tr></table></figure>
<h3 id="totable与links">toTable与links</h3>
<p>将Bimap对象转换为数据框，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">toTable(x)[<span class="number">1</span>:<span class="number">4</span>,]</div><div class="line"><span class="comment"># probe_id  symbol</span></div><div class="line"><span class="comment"># 1   1000_at   MAPK3</span></div><div class="line"><span class="comment"># 2   1001_at    TIE1</span></div><div class="line"><span class="comment"># 3 1002_f_at CYP2C19</span></div><div class="line"><span class="comment"># 4 1003_s_at   CXCR5</span></div></pre></td></tr></table></figure>
<p>links()与toTable的功能一样，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">toTable(x[<span class="string">"1001_at"</span>])</div><div class="line"><span class="comment"># probe_id symbol</span></div><div class="line"><span class="comment"># 1  1001_at   TIE1</span></div><div class="line">links(x)[<span class="number">1</span>:<span class="number">4</span>,]</div><div class="line"><span class="comment"># probe_id  symbol</span></div><div class="line"><span class="comment"># 1   1000_at   MAPK3</span></div><div class="line"><span class="comment"># 2   1001_at    TIE1</span></div><div class="line"><span class="comment"># 3 1002_f_at CYP2C19</span></div><div class="line"><span class="comment"># 4 1003_s_at   CXCR5</span></div><div class="line">links(x[<span class="string">"1001_at"</span>])</div><div class="line"><span class="comment"># probe_id symbol</span></div><div class="line"><span class="comment"># 1  1001_at   TIE1</span></div></pre></td></tr></table></figure>
<h3 id="nhit">nhit()</h3>
<p>此函数返回一个名义整数向量，值为一系列的0或1，1表示有映射关系，0表示没有，这与<code>isNA()</code>类似，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">x_names &lt;- nhit(x)</div><div class="line">class(x_names)</div><div class="line"><span class="comment"># [1] "integer"</span></div><div class="line">str(x_names)</div><div class="line"><span class="comment"># Named int [1:12625] 1 1 1 1 1 1 1 0 1 1 ...</span></div><div class="line"><span class="comment"># - attr(*, "names")= chr [1:12625] "1000_at" "1001_at" "1002_f_at" "1003_s_at" ...</span></div><div class="line">table(x_names)</div><div class="line"><span class="comment"># x_names</span></div><div class="line"><span class="comment"># 0     1 </span></div><div class="line"><span class="comment"># 1154 11471</span></div></pre></td></tr></table></figure>
<p>从上面的<code>str(x_names)</code>结果我们可以看到第8个是0，它表示不存在左侧的成员与右侧的成员的映射关系，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">isNA(x)[<span class="number">8</span>]</div><div class="line"><span class="comment"># 1007_s_at </span></div><div class="line"><span class="comment"># TRUE </span></div><div class="line">isNA(x)[<span class="number">1</span>:<span class="number">8</span>]</div><div class="line"><span class="comment"># 1000_at   1001_at 1002_f_at 1003_s_at   1004_at   1005_at   1006_at 1007_s_at </span></div><div class="line"><span class="comment"># FALSE     FALSE     FALSE     FALSE     FALSE     FALSE     FALSE      TRUE </span></div><div class="line">toTable(x[<span class="string">"1007_s_at"</span>])</div><div class="line"><span class="comment"># [1] probe_id symbol  </span></div><div class="line"><span class="comment"># &lt;0 行&gt; (或0-长度的row.names)</span></div><div class="line">toTable(x[<span class="string">"1006_at"</span>])</div><div class="line"><span class="comment"># probe_id symbol</span></div><div class="line"><span class="comment"># 1  1006_at  MMP10</span></div></pre></td></tr></table></figure>
<p>从上面我们可以知道，<code>1007_s_at</code>这个探针并没有映射到相应的基因上。hgu95av2SYMBOL一共有1154个探针没有相应的映射。</p>
<h2 id="提取没有映射关系的探针">提取没有映射关系的探针</h2>
<p>前面知道，有1154个探针没有映射到相应的基因上，现在我们把那些映射到相应基因上的探针提取出来，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">x &lt;- hgu95av2SYMBOL</div><div class="line">summary(x)</div><div class="line"><span class="comment"># x是原始数据</span></div><div class="line"><span class="comment"># SYMBOL map for chip hgu95av2 (object of class "ProbeAnnDbBimap")</span></div><div class="line"><span class="comment"># &gt; summary(x)</span></div><div class="line"><span class="comment"># SYMBOL map for chip hgu95av2 (object of class "ProbeAnnDbBimap")</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment">#   | Lkeyname: probe_id (Ltablename: probes)</span></div><div class="line"><span class="comment"># |    Lkeys: "1000_at", "1001_at", ... (total=12625/mapped=11471)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment">#   | Rkeyname: symbol (Rtablename: gene_info)</span></div><div class="line"><span class="comment"># |    Rkeys: "A1BG", "A2M", ... (total=59682/mapped=8595)</span></div><div class="line"><span class="comment"># |</span></div><div class="line"><span class="comment">#   | direction: L --&gt; R</span></div><div class="line"></div><div class="line">x_names &lt;- nhit(x)</div><div class="line"><span class="comment"># 生成一个名义整数向量，其中1表示有映射关系的向量，0表示没有</span></div><div class="line">head(x_names,<span class="number">10</span>)</div><div class="line"><span class="comment"># 1000_at   1001_at 1002_f_at 1003_s_at   1004_at   1005_at   1006_at 1007_s_at </span></div><div class="line"><span class="comment"># 1         1         1         1         1         1         1         0 </span></div><div class="line"><span class="comment"># 1008_f_at   1009_at </span></div><div class="line"><span class="comment"># 1         1 </span></div><div class="line">table(x_names)</div><div class="line"><span class="comment"># x_names</span></div><div class="line"><span class="comment"># 0     1 </span></div><div class="line"><span class="comment"># 1154 11471 </span></div><div class="line"><span class="comment"># 一共有11471个探针有映射关系</span></div><div class="line">x_mapped &lt;- mappedkeys(x)</div><div class="line">head(x_mapped)</div><div class="line"><span class="comment"># [1] "1000_at"   "1001_at"   "1002_f_at" "1003_s_at" "1004_at"   "1005_at"</span></div></pre></td></tr></table></figure>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><a href="https://www.rdocumentation.org/packages/AnnotationDbi/versions/1.34.4/topics/Bimap-direction" target="_blank" rel="external">Bimap-direction</a></li>
<li><a href="https://www.rdocumentation.org/packages/AnnotationDbi/versions/1.34.4/topics/Bimap" target="_blank" rel="external">Bimap</a></li>
<li><a href="https://www.rdocumentation.org/packages/AnnotationDbi/versions/1.34.4/topics/Bimap-keys" target="_blank" rel="external">Bimap-keys</a></li>
<li><a href="https://www.rdocumentation.org/packages/AnnotationDbi/versions/1.34.4/topics/BimapFormatting" target="_blank" rel="external">BimapFormatting</a></li>
<li><a href="https://www.rdocumentation.org/packages/AnnotationDbi/versions/1.34.4/topics/Bimap-envirAPI" target="_blank" rel="external">Bimap-envirAPI</a></li>
<li><a href="https://www.rdocumentation.org/packages/AnnotationDbi/versions/1.34.4/topics/Bimap-toTable" target="_blank" rel="external">Bimap-toTable</a></li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/05/Tools/查找miRNA的前体序列/" rel="next" title="查找miRNA的前体序列">
                <i class="fa fa-chevron-left"></i> 查找miRNA的前体序列
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/09/07/Tools/DESeq2/" rel="prev" title="DESeq2">
                DESeq2 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="vcomments"></div>
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">RVDSD</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">126</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">38</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#bimap对象概览"><span class="nav-number">1.</span> <span class="nav-text">Bimap对象概览</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bimap对象的构成"><span class="nav-number">2.</span> <span class="nav-text">Bimap对象的构成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#anndbbimap与flatbimap对象"><span class="nav-number">3.</span> <span class="nav-text">AnnDbBimap与FlatBimap对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#处理bimap对象的函数"><span class="nav-number">4.</span> <span class="nav-text">处理Bimap对象的函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#direction"><span class="nav-number">4.1.</span> <span class="nav-text">direction()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#revmap"><span class="nav-number">4.2.</span> <span class="nav-text">revmap()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lkeys与rkeys"><span class="nav-number">4.3.</span> <span class="nav-text">Lkeys()与Rkeys()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#llength和rlength"><span class="nav-number">4.4.</span> <span class="nav-text">Llength()和Rlength()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mappedlkeys与mappedrkeys"><span class="nav-number">4.5.</span> <span class="nav-text">mappedLkeys()与mappedRkeys()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#as.list"><span class="nav-number">4.6.</span> <span class="nav-text">as.list()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#as.character"><span class="nav-number">4.7.</span> <span class="nav-text">as.character()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bimap-envirapi"><span class="nav-number">4.8.</span> <span class="nav-text">Bimap-envirAPI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ls"><span class="nav-number">4.9.</span> <span class="nav-text">ls()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#exist"><span class="nav-number">4.10.</span> <span class="nav-text">exist()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#get"><span class="nav-number">4.11.</span> <span class="nav-text">get()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mget"><span class="nav-number">4.12.</span> <span class="nav-text">mget()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#samplexn"><span class="nav-number">4.13.</span> <span class="nav-text">sample(x,n)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#totable与links"><span class="nav-number">4.14.</span> <span class="nav-text">toTable与links</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nhit"><span class="nav-number">4.15.</span> <span class="nav-text">nhit()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#提取没有映射关系的探针"><span class="nav-number">5.</span> <span class="nav-text">提取没有映射关系的探针</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考资料"><span class="nav-number">6.</span> <span class="nav-text">参考资料</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RVDSD</span>

  
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共467.1k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
