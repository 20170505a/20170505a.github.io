<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="RVDSD的个人笔记本">
<meta property="og:url" content="http://rvdsd.top/index.html">
<meta property="og:site_name" content="RVDSD的个人笔记本">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RVDSD的个人笔记本">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://rvdsd.top/"/>





  <title>RVDSD的个人笔记本</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RVDSD的个人笔记本</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学习过程中的输出</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2019/07/15/R/R语言中的颜色设置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/15/R/R语言中的颜色设置/" itemprop="url">R语言中的颜色设置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-15T12:00:00+08:00">
                2019-07-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/" itemprop="url" rel="index">
                    <span itemprop="name">R</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  860
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="rcolorbrewer包">RColorBrewer包</h2>
<p>此包的官方配色网站是：http://colorbrewer2.org</p>
<h3 id="brewer.pal"><code>brewer.pal()</code></h3>
<p>参数为：<code>brewer.pal(n ,name)</code>，其中n为不同颜色数，最小为3，最大取决于调色板中的颜色数。name指颜色的名称，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mypalette&lt;-brewer.pal(<span class="number">7</span>,<span class="string">"Greens"</span>)</div><div class="line">mypalette</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; mypalette&lt;-brewer.pal(<span class="number">7</span>,<span class="string">"Greens"</span>)</div><div class="line">&gt; mypalette</div><div class="line">[<span class="number">1</span>] <span class="string">"#EDF8E9"</span> <span class="string">"#C7E9C0"</span> <span class="string">"#A1D99B"</span> <span class="string">"#74C476"</span> <span class="string">"#41AB5D"</span> <span class="string">"#238B45"</span> <span class="string">"#005A32"</span></div></pre></td></tr></table></figure>
<h3 id="display.brewer.pal"><code>display.brewer.pal()</code></h3>
<p>在窗口中显示显示的颜色，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">display.brewer.pal(<span class="number">7</span>,<span class="string">"BrBG"</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715095133.png">

</div>
<h3 id="brewer.pal.info可以查看颜色信息"><code>brewer.pal.info()</code>可以查看颜色信息</h3>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brewer.pal.info[<span class="string">"Blues"</span>,]</div></pre></td></tr></table></figure>
<p>如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; brewer.pal.info[<span class="string">"Blues"</span>,]</div><div class="line">      maxcolors category colorblind</div><div class="line">Blues         <span class="number">9</span>      seq       <span class="literal">TRUE</span></div></pre></td></tr></table></figure>
<h3 id="display.brewer.all"><code>display.brewer.all()</code></h3>
<p>参数为：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">display.brewer.all(n=<span class="number">10</span>, type=<span class="string">"all"</span>, select=<span class="literal">NULL</span>, exact.n=<span class="literal">TRUE</span>, </div><div class="line">colorblindFriendly=<span class="literal">FALSE</span>)</div></pre></td></tr></table></figure>
<p>同时显示几个调色板，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715095827.png">

</div>
<h4 id="颜色类型">颜色类型</h4>
<p>其中参数<code>type</code>是显示颜色类型，一共有三种颜色类型，分别是seq连续型，div离散型，qual极端型，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">display.brewer.all(type = <span class="string">"seq"</span>)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715095816.png">

</div>
<p>如果我们要使用YIOrRd组中的第1，3，4，6，8，9这6种颜色，可以使用下面的代码：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">barplot(rep(<span class="number">1</span>,<span class="number">6</span>),col = brewer.pal(<span class="number">9</span>,<span class="string">"YlOrRd"</span>)[c(<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>)])</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715100025.png">

</div>
<p>div离散型颜色，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">display.brewer.all(type = <span class="string">"div"</span>)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715100112.png">

</div>
<p>这种颜色两边亮，中间暗，比较适合进行高低对比。</p>
<p>现在我们使用BrBG组中的3到8种颜色，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">barplot(rep(<span class="number">1</span>,<span class="number">6</span>),col = brewer.pal(<span class="number">11</span>,<span class="string">"BrBG"</span>)[<span class="number">3</span>:<span class="number">8</span>])</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715100205.png">

</div>
<p>qual极端型颜色</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">display.brewer.all(type = <span class="string">"qual"</span>)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715100235.png">

</div>
<p>这种颜色比较适合呈现分类变量。</p>
<p>现在使用Set3中的3到8种颜色，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">barplot(rep(<span class="number">1</span>,<span class="number">6</span>),col = brewer.pal(<span class="number">12</span>,<span class="string">"Set3"</span>)[<span class="number">3</span>:<span class="number">8</span>])</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715100306.png">

</div>
<h2 id="rcolorbrewer包使用案例">RColorBrewer包使用案例</h2>
<h3 id="第1案例从现在的颜色中挑选颜色">第1案例：从现在的颜色中挑选颜色</h3>
<p>代码如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">### Set the display a 1 by 1 grid</span></div><div class="line">par(mfrow=c(<span class="number">1</span>,<span class="number">1</span>))</div><div class="line"><span class="comment">### Generate random data matrix</span></div><div class="line">rand.data &lt;- replicate(<span class="number">8</span>,rnorm(<span class="number">100</span>,<span class="number">100</span>,sd=<span class="number">1.5</span>))</div><div class="line"><span class="comment">### Draw a box plot, with each box coloured by the 'Set3' palette</span></div><div class="line">boxplot(rand.data,col=brewer.pal(<span class="number">8</span>,<span class="string">"Set3"</span>))</div></pre></td></tr></table></figure>
<p>这里使用到了<code>replicate()</code>函数，这个函数在<code>rand.data &lt;- replicate(8,rnorm(100,100,sd=1.5))</code>这个语句中的意思是，将后面的<code>rnorm(100,100,sd=1.5)</code>这个语句运行100次，也就是生成800个均值为100，sd为1.5的，符合正态分布的数据，结果如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715100823.png">

</div>
<h3 id="第2案例使用colorramppalette来扩展颜色">第2案例：使用<code>colorRampPalette()</code>来扩展颜色</h3>
<p>代码如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">### 使用colorRampPalette可以扩展颜色。</span></div><div class="line">newpalette&lt;-colorRampPalette(brewer.pal(<span class="number">9</span>,<span class="string">"Blues"</span>))(<span class="number">10</span>)</div><div class="line"><span class="comment">### Generate random data matrix</span></div><div class="line">rand.data &lt;- replicate(<span class="number">10</span>,rnorm(<span class="number">100</span>,<span class="number">100</span>,sd=<span class="number">1.5</span>))</div><div class="line"><span class="comment">### Draw a box plot, with each box coloured by the 'newpalette' palette</span></div><div class="line">boxplot(rand.data,col=newpalette)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715101208.png">

</div>
<p>这里使用到了<code>colorRampPalette()</code>函数，此函数可以自定义一繁殖颜色梯度，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">colors &lt;- colorRampPalette(c(<span class="string">"green"</span>, <span class="string">"red"</span>))(<span class="number">5</span>)</div><div class="line">colors</div><div class="line">rand.data &lt;- replicate(<span class="number">10</span>,rnorm(<span class="number">100</span>,<span class="number">100</span>,sd=<span class="number">1.5</span>))</div><div class="line">boxplot(rand.data,col=colors)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715101512.png">

</div>
<p>这种功能在绘制热图时很有用。</p>
<h2 id="wesanderson颜色包"><code>wesanderson</code>颜色包</h2>
<p>可用的颜色有好几个，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; names(wes_palettes)</div><div class="line"> [<span class="number">1</span>] <span class="string">"BottleRocket1"</span>  <span class="string">"BottleRocket2"</span>  <span class="string">"Rushmore1"</span>      <span class="string">"Rushmore"</span>      </div><div class="line"> [<span class="number">5</span>] <span class="string">"Royal1"</span>         <span class="string">"Royal2"</span>         <span class="string">"Zissou1"</span>        <span class="string">"Darjeeling1"</span>   </div><div class="line"> [<span class="number">9</span>] <span class="string">"Darjeeling2"</span>    <span class="string">"Chevalier1"</span>     <span class="string">"FantasticFox1"</span>  <span class="string">"Moonrise1"</span>     </div><div class="line">[<span class="number">13</span>] <span class="string">"Moonrise2"</span>      <span class="string">"Moonrise3"</span>      <span class="string">"Cavalcanti1"</span>    <span class="string">"GrandBudapest1"</span></div><div class="line">[<span class="number">17</span>] <span class="string">"GrandBudapest2"</span> <span class="string">"IsleofDogs1"</span>    <span class="string">"IsleofDogs2"</span></div></pre></td></tr></table></figure>
<p>查看一下，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wes_palette(<span class="string">"BottleRocket1"</span>)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715102342.png">

</div>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wes_palette(<span class="string">"BottleRocket2"</span>)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715102408.png">

</div>
<p>看一下使用案例：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(<span class="string">"ggplot2"</span>)</div><div class="line">ggplot(mtcars, aes(factor(cyl), fill=factor(vs))) +  geom_bar() +</div><div class="line">  scale_fill_manual(values = wes_palette(<span class="string">"Royal1"</span>))</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715102457.png">

</div>
<p>看一下热图案例：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">pal &lt;- wes_palette(<span class="string">"Zissou1"</span>, <span class="number">100</span>, type = <span class="string">"continuous"</span>)</div><div class="line"><span class="comment"># heatmap is a local dataset</span></div><div class="line">ggplot(heatmap, aes(x = X2, y = X1, fill = value)) +</div><div class="line">  geom_tile() + </div><div class="line">  scale_fill_gradientn(colours = pal) + </div><div class="line">  scale_x_discrete(expand = c(<span class="number">0</span>, <span class="number">0</span>)) +</div><div class="line">  scale_y_discrete(expand = c(<span class="number">0</span>, <span class="number">0</span>)) + </div><div class="line">  coord_equal()</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715102638.png">

</div>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><a href="https://www.cnblogs.com/homewch/archive/2016/07/25/5704153.html" target="_blank" rel="external">R语言配色方案 — RColorBrewer包</a></li>
<li><a href="https://www.cnblogs.com/huzs/p/3742000.html" target="_blank" rel="external">R语言编程入门–replicate()函数比较有意思!</a></li>
<li><a href="https://www.cnblogs.com/xudongliang/p/6932195.html" target="_blank" rel="external">R语言colorRampPalette函数-创建颜色梯度(渐变色)</a></li>
<li><a href="https://www.cnblogs.com/sanmenyi/p/7219574.html" target="_blank" rel="external">R语言可视化–颜色</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2019/07/12/Tools/常用软件收集/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/12/Tools/常用软件收集/" itemprop="url">常用软件收集</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-12T12:00:00+08:00">
                2019-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/" itemprop="url" rel="index">
                    <span itemprop="name">R</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  0
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2019/07/12/Literature/炎性小体/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/12/Literature/炎性小体/" itemprop="url">炎性小体</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-12T12:00:00+08:00">
                2019-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/文献笔记/" itemprop="url" rel="index">
                    <span itemprop="name">文献笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,213
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  12
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="概念">概念</h2>
<p>胚系编码的一一些受体，例如NLR，ALR，TRIM在外界刺激（通常是病原体）下，会形成一个更大分子量的复合物，也就是炎性小体，炎性小体会通过ASC来招募促炎性的蛋白，即caspase-1。</p>
<p>炎性小体的大致结构如下所示<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>:</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190712153128.png">

</div>
<p>炎性小体的核心结构进而会招募并寡聚化(oligomerize)半胱氨酸蛋白酶caspase-1，其中caspase-1是以丝状的形式存在的，如上图所示，这种丝状的结构会促进caspase-1自身的活化。</p>
<p>ASC蛋白位于中间，它的N端是PYD，C末端是CARD，其中CARD参与caspase-1的相互作用。caspase-1会切除炎症细胞因子IL-1beta与IL-18的前体，将它们释放到细胞外。</p>
<p>炎性小体的活化会诱导细胞的裂解死亡，这种形式称为<strong>焦亡(pyroptosis)</strong>，这是细胞对抗病原体的一种免疫机制。</p>
<p>在天然免疫中，炎性小体是一个重要的组成成分，书中对炎性小体的定义如下所示<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>：</p>
<blockquote>
<p>By definition, inﬂammasomes are scaffolds for activation of the inﬂammatory cysteine-dependent aspartate-specific protease caspase-1.</p>
</blockquote>
<p>也就是说，炎性小体是一类脚手架蛋白(scaffold)，其功能是参与光胱氨酸依赖的天冬氨酸特异性蛋白酶caspase-1的活化，这种酶活化后参与炎性细胞因子，IL-1beta，IL-18的成熟与分泌， 以及参与焦亡，与焦亡相关的另外一个酶是caspase-11。</p>
<p>pyroptosis是宿主细胞的一种防御机制，它能裂解那些被病原体感染的细胞，从而将病原体暴露出来，与免疫细胞接触。pyroptosis相关的细胞裂解还会释放DAMP，例如IL-1瞢a和HMGB1。</p>
<h3 id="prrs作为炎性小体的脚手架蛋白">PRRs作为炎性小体的脚手架蛋白</h3>
<p>常见的炎性小体结构如下所示<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190712171054.png">

</div>
<p>NLRP1， NLRP2，NLRP3，NLRP6，NLRC4以及NLRP12它们都含有一个NBD，NBD也被称为NACHT。还含有一个LRR，剩下的要么含有CARD，要么含有PYD。</p>
<p>AIM2与IFI16是PYHIN家族成员，它们都含有PYD与HIN200结构域，这两个结构域参与配体结合<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>。</p>
<p>其它文献关于它们的结构总结如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190715105613.png">

</div>
<p>其中的缩写如下所示：</p>
<ol style="list-style-type: decimal">
<li>PYD: Pyrin domain</li>
<li>NLR: nucleotide-binding domain and leucine-rich repeat containing receptors</li>
<li>NACHT：NAIP-CIITA-HET-E domain</li>
<li>NAIP: neuronal apoptosis inhibitor protein</li>
<li>LRR: leucine-rich repeat</li>
<li>NOD: nucleotide-binding oligomerization domain</li>
<li>FIND:‘Function to find’ domain</li>
<li>CARD: Caspase recruitment domain</li>
<li>BIR: Baculovirus inhibitor repeat(Baculovirus是杆状病毒)</li>
<li>NLRP: NLR family, pyrin domain containing</li>
<li>NLRC: containing a caspase recruitment domain</li>
<li>NLRB: containing a Baculovirus inhibitor repeat (BIR) domain</li>
<li>Hin200: Hematopoietic interferon-inducible nuclear protein family, 200 amino acid repeat</li>
<li>CC: coiled-coil</li>
</ol>
<p>NLRs（这个s指的是P，C，B，也就是NLRP，NLRB，NLRC这3种炎性小体）这种结构的炎性小体的结构前文已经提及，它含有NACHT/NBD，LRR，这两个组件(NACHT与LRR）通常位于中央。多数的NLRs型炎性小体在氨基端还有BIR，PYD,CARD这些结构。</p>
<p>NLR家族一共有22个人类炎性小体，有34个鼠源炎性小体。</p>
<h2 id="炎性小体功能">炎性小体功能</h2>
<p>哺乳动物的NLRs有几个阐明功能了，其余的功能还不清楚。其中研究比较透彻的是NOD1和NOD2(nucleotide-binding oligomerization domain containing proteins 1/2)，他们能促进RIPK2与CARD9依赖的NF-kappaB与AP1靶基因的活化。MHC II在抗原提呈中也需要NLR蛋白CIITA的参与。</p>
<p>另一个NLRs亚家族，也就是NLRP1，NLRP3，NLRC4和NAIP通过炎性小体信号转导参与免疫应答。</p>
<p>信号转导诱导PRR的聚集与招募，促进procaspase-1丝状物的成核，随后procaspase-1会经历邻近诱导的自我活化(proximity-induced autoactivation)。</p>
<h2 id="相关细胞因子">相关细胞因子</h2>
<p>IL-1beta与IL-18的分泌与其它的细胞因子不同，proIL-1beta和proIL-18最先是以非活性的形式（前体）分泌到细胞质中，然后再经caspase-1的切割，形成生物活性形式。</p>
<h2 id="nlrp3">NLRP3</h2>
<p>NLRP3能对大量的激活剂产生应答，它需要NF-kappaB信号的诱导才能活化。NF-kappaB信号是第一信号 （signal 1或priming）。例如NF-kappaB调控物A20/TNFAIP3缺陷的小鼠就无法出现 NLRP3的活化。</p>
<p>signla 2：细菌，真菌的一些成分会诱导NLRP3的活化，除了经典的刺激（细菌成分）诱导 NLRP3炎性小体外，还有一些其它的蛋白能诱导NLRP3的活化，这些属于NLRP3的非经典活化内容，例如人类的caspase-11或它的鼠源直系同源蛋白 caspase-4和caspase-5参与细胞质LPS诱导的NLRP3炎性小体的活化。在这些非经典信号通路中，caspase-11诱导的pyroptosis并不依赖于NLRP3炎性小体 ，但是proIL-1beta与por-IL-18的切割却要通过NLRP3来实现 。在观其NLRP3活化过程中，K+是一种重要的诱导物。</p>
<p>非经典NLRP3炎性小体信号转导通常在格兰氏阴性菌的识别过程中有着重要作用。</p>
<p>pyroptosis的一个关键事件就是Gasdermin D的切割，它的切割与LPS诱导的caspase-11和caspase-1有关。</p>
<p>线粒体膜的破坏，以及线粒体DNA的氧化是NLRP3活化的一个因素。</p>
<p>线粒体异常有时候伴随着离子流的异常，这种行为也会控制NLRP3的活化。心磷脂(cardiolipin)的释放，氧化的线粒体DNA与线粒体膜的破坏都是NLRP3活化的第二信使。最近发现的Nek7是NLRP3活化的一个关键蛋白，它控制K+的流入来影响NLRP3的组装。</p>
<h2 id="nlrp1">NLRP1</h2>
<p>NLRP1是第1个发现的炎性小体，它通常FIIND结构域进行自我切割，FIIND位于CARD与LRR中间。人类有1个NLRP1基因，小鼠有3个，分别是Nlrp1a，Nlrp1b与Nlrp1c。Nlrp1b在Bacillus anthracis的LeTx(lethal toxin)诱导下进行组装。ASC对于Nlrp1b依赖的IL-1beta和IL-18分泌来说并非是必不可少的，只是ASC能够增强这两种细胞因子的分泌。这表明，proaspase-1招募到Nlrp1b平台上后，会诱导caspase-1构象的改变，诱导其活化，而ASC依赖的caspase-1自我切割则会锁定这种活化构象。</p>
<p>炎性小体活化的经典与非经典通路：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190713103622.png">

</div>
<h2 id="nlrc4">NLRC4</h2>
<p>NLRC4与其它炎性小体的结构如下所示<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a>：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190713104104.png">

</div>
<p>上图列出了NLRC4活化的上游机制，NLRC4在氨基末端有一个CARD，在没有ASC的前提下，NLRC4通过CARD与procaspase-1相互作用。一些微生物能活化NLRC4的活化，例如Salmonella enterica serovar Typhimurium， Legionella pneumophila，Pseudomonas auruginosa，Shigella ﬂ exneri， Listeria monocytogenes），这些细菌的毒力因子都是依赖于鞭毛蛋白(flagellin)介导的运行，会向宿主细胞传递T3SS和T4SS。NLRC4不直接检测这些毒力因子，而是NAIP检测到这些成分后，再作用于NLRC4。人类的全长NAIP与小鼠的Naip5，Naip6是鞭毛蛋白的受体。人类短的NAIP与小鼠的Nip1能识别T3SS的针状蛋白(needle protein)，但Naip2则能与T3SS杆状蛋白(rod protein)结合。S. Typhimurium能诱导NLRC4在Ser533位点的磷酸化，进而活化NLRC4。</p>
<p>在Naip5缺陷的巨噬中，falgellin依赖的NLRC4磷酸化并不依赖地Naip5。这说明，Nlrc4的活化机制分两步，先是在Ser533位点磷酸化，随后，Naip5再诱导NLRC4的活化。NLRC4与天然免疫有关，也与自身免疫性疾病有关。</p>
<h2 id="aim2">AIM2</h2>
<p>AIM2全称是absent in melanoma2，这是一个HIN200家族/AIM2家族的一个成员(ALR)。当细菌或病毒来源的dsDNA与Hin200结构域结合时，就会诱发AIM2炎性小体的组装。AIM2会诱导髓系细胞(myeloid cells)产生IL-1beta和IL-18，诱导细胞的pyroptosis。AIM2在控制一些病原体感染方面有着重要作用，例如 Francisella tularensis,Listeria monocytogenes,mouse cytomegalovirus,vaccinia virus。</p>
<h2 id="pyrin">Pyrin</h2>
<p>人类MEFV基因编码Pyrin/TRIM20蛋白，这是一个TRIM家族的成员。Pyrin主要表达于髓系细胞(myeloid cell)，在单核细胞向巨噬分化过程中，Pyrin的表达会降低。RhoA-inactivating bacterial toxins会诱导Pyrin组装成炎性小体，激活caspase-1，参与IL-1beta的分泌。</p>
<h2 id="炎性小体的组装与信号转导">炎性小体的组装与信号转导</h2>
<p>ASC依赖的炎性小体的组装过程：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190713152009.png">

</div>
<p>上游的NLR或ALR识别其配体后，会通过PYD或CARD聚集，聚集的NLR或ALR会形成一个平台，通过PYD-PYD或CARD-CARD的相互作用来招募ASC，形成一个丝状的核心。其中ASC(CARD)位于外层，它形成另外一个平台，通过CARD-CARD的相互作用来招募caspase-1，高度聚合化折caspase-1会诱导自身的切割，产生活性炎性小体。</p>
<h2 id="listeria-monocytogenes与炎性小体">Listeria monocytogenes与炎性小体</h2>
<p>Lm能激活不同的炎性小体。</p>
<h3 id="nlrp3与lm">NLRP3与Lm</h3>
<p>Lm是第一个发现的能激活NLRP3的病原体。Mariathasan发现，细胞质中的Lm能激活NLRP3炎性小体，但是被囊泡包裹的Lm无法激活炎性小体，这说明被囊泡包裹这一过程对于炎性小体的活化非常重要。Kannengati观察到，Lm的总RNA能刺激NLRP3的活化，这进一步说明，LM能通过各种机制来刺激NLRP3。</p>
<p>胞外的LLO形成的孔洞会诱导K+外流，导入NLRP3炎性小体的活化。除此之外，Lm的RNA，iap基因编码的p60也能激活NLRP3。p60的N端LysM与SH3结构域刺激IL-1beta和IL-18的释放，这些活动独立于细胞的焦亡形式死亡。使用DPI抑制ROS能降低IL-1beta的分泌，但IL-18的分泌不受影响。这些实验是在小鼠细胞上做的。</p>
<p>在人类PBMC实验方面，使用Lm感染PBMC，细胞会经历LLO诱导的NLRP3依赖的炎性小体活化，这种炎性小体一的活化依赖于吞噬泡的西化与cathepsin B的释放，这些现象与小鼠的细胞有所不同。</p>
<p>Lm诱导的快速NRLP3的活化依赖于TLR信号转导，因为MyD88缺陷的细胞无法活化炎性小体。这些应答依赖于MyD88的下游信号分子IRAK1，因此IRAK1缺陷的细胞无法激活炎性小体，以及无法分泌IL-1beta和IL-18。但是，在致敏状态(priming)，IRAK1对于炎性小体的活化又不是必需的。另外，延长感染时间会出现Lm诱导的非NLRP3依赖的炎性小体活化。总之就是，LM在早期感染中激活NLRP3。</p>
<h3 id="nlrc4与lm">NLRC4与Lm</h3>
<p>NRLC4识别鞭毛蛋白(flagellin)与T3SS(Type III secretion system)。</p>
<p>Lm是格兰阳性菌，不含T3SS成分，它的鞭毛蛋白是激活NLRC4的成分。但Lm鞭毛蛋白似乎并非只激活NRLC4，因为使用鞭毛蛋白缺陷菌ΔflaA来感染，也能产生caspase-1的活化以及形成IL-1beta。</p>
<h3 id="aim2与lm">AIM2与Lm</h3>
<p>AIM2通常HIN200结构域来识别dsDNA。前面提到，在NLRP3缺失的情况下，鞭毛蛋白缺陷菌ΔflaA也能诱导caspase-1的活化。但在AIM2缺陷的细胞中，caspase-1的活化则会消失。</p>
<p>Lm的DNA激活AIM2。</p>
<h3 id="其它炎性小体">其它炎性小体</h3>
<p>NLRC5与NLRP3结合参与NLRP3的活化。NLRC5敲除的小鼠感染Lm后，载菌是不是更多，机制不明。NLRP6敲除的小鼠载菌量低，NLRPP6在LM感染方面的作用，不依赖于炎性小体的信号转导。Lm在刺激炎性小体方面的作用，体外数据很好，但是体内数据研究机制不明，其中AIM2有可能与体内相关炎性小体最密切的一个炎性小体。</p>
<p>在体外实验中，虽然LM能激活很多炎性小体，但是在体内感染方面，Lm会避免过度激活炎性小体，从而避免自身被清除，它已经进化出了逃避炎性小体监测的机制。</p>
<p>Lm会通过调控自身LLO，鞭毛蛋白(flagellin)来逃避宿主细胞的监测。</p>
<p>Lm的感染会诱导caspase-11的表达，但是敲除caspase-11后，caspase-1的功能不受影响，这说明caspase-11对于Lm的感染来说是可有可无的。</p>
<p>ASC敲除的异噬细胞无法激活caspase-1，不能分泌IL-1beta和IL-18.</p>
<p>Lm激活与逃避炎性小体监测的机制：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190713165831.png">

</div>
<p>Fig1：WT LM能最小程度地激活caspase-1，维持Lm在细胞内的存活，最终形成感染。相比之下，那些能激活炎性小体的Lm会诱导强烈的caspase-1以及pyroptosis，释放IL-1beta和IL-18，最终导致Lm的清除，增强活化巨噬细胞的招募，中性粒细胞的流入。</p>
<p>炎性小体的活化能清除Lm。</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190713170002.png">

</div>
<p>炎性小体相互关的炎症会损伤宿主针对Lm的细胞免疫。</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190713170251.png">

</div>
<h2 id="炎性小体研究思路">炎性小体研究思路</h2>
<h2 id="参考资料">参考资料</h2>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Janeway immunobiology. 9th<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Backert S . Inflammasome Signaling and Bacterial Infections[M]. Springer International Publishing, 2016.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>Backert S . Inflammasome Signaling and Bacterial Infections[M]. Springer International Publishing, 2016.<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>Inflammasomes in health and disease.Nature. 2012 Jan 18;481(7381):278-86. doi: 10.1038/nature10759.<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>Lamkanfi, M. and Vishva M. Dixit (2014). “Mechanisms and Functions of Inflammasomes.” Cell 157(5): 1013-1022.<a href="#fnref5">↩</a></p></li>
</ol>
</div>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2019/07/11/Literature/支架蛋白与脚手架蛋白/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/11/Literature/支架蛋白与脚手架蛋白/" itemprop="url">支架蛋白与脚手架蛋白</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-11T12:00:00+08:00">
                2019-07-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/文献笔记/" itemprop="url" rel="index">
                    <span itemprop="name">文献笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  812
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>信号转导通路（Signaling pathway）本身就是一种机制，或者说是一种过程，在这个过程中，一个信号到达细胞后（细胞表面，或者是细胞内部），这个信号就会触发一系列有序的事件（信号转导通路），最终导致细胞内出现一些变化。这些变化通常伴随着基因的表达或者是某些物质浓度的变化，这些事件能够使细胞对某种信号作出反应，并根据当前环境调整细胞自身的代谢活动。</p>
<p>信号转导通路始于某个信号本身，这个信号分子与细胞表面的信号分子受体结合，受体通过大量的不同的蛋白来将信号传递到细胞内部。从本质上来说，衔接蛋白（adaptor protein）与脚手架蛋白（Scaffold protein）都位于前述的这些蛋白集合中，它们负责将信号从受体进一步传递到细胞内部。</p>
<p>衔接蛋白与脚手架蛋白的区别就在于它们的功能和结构上的不同。脚手架蛋白的作用是通过“吸引”大量的，信号转导通路所需的不同蛋白来协调信号转导，这从一点我们可以知道，脚手架蛋白本身比较大。它们本质上是将信号通路中的执行者锭定到一个蛋白复合物中，并将它们定位到特定的位置，从而使信号转导更加有效，脚手架蛋白是发挥一个平台作用，将很多蛋白招募到一起，让它们之间发生相互作用。由于有这种作用，脚手架蛋白还能通过正反馈与负反馈信号来调控信号转导通路，脚手架蛋白还能将特定的蛋白（例如当前活跃的信号通路）从其它不需要的竞争性蛋白复合物中的分离出来。</p>
<p>衔接蛋白（有的译为接头蛋白），即adaptor protein，这种蛋白的分子量相对比较小，它们有助于形成蛋白复合物，但是衔接蛋白通常只与两类蛋白质结合。衔接蛋白通过特定的结构域（通常是SH2和SH3）来与其它蛋白结合，这两个结构域能识别靶蛋白的特定氨基酸序列。衔接蛋白本身可能没有酶活性，但它们会招募那些有功能的蛋白来发挥作用，例如MyD88，Grb2，SHC1等。</p>
<p>我们以脚手架蛋白MEKK1为例说明一下，此蛋白存在于MAPK通路中，此通路会将信号传递到细胞核，调控与细胞周期和细胞分化相关的特定转录因子的表达。而GRB2（生长因子受体结合蛋白2，Growthfactor receptor=bound protein 2）是一种衔接蛋白，它通过SH2结构域与EGF受体结合，并通过SH3结构域吸引此信号通路中下一个蛋白（Sos蛋白）。</p>
<p>MAPK信号通路图片如下所示：</p>
<p>[](https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190712163909.jpg</p>
<p>参考资料</p>
<ol style="list-style-type: decimal">
<li>https://www.biotechnologyforums.com/thread-3331.html</li>
<li>https://cshperspectives.cshlp.org/content/4/11/a011254.full%22</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2019/07/08/BioItem/iTRAQ定量蛋白质组(上)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/08/BioItem/iTRAQ定量蛋白质组(上)/" itemprop="url">iTRAQ定量蛋白质组(上)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-08T12:00:00+08:00">
                2019-07-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生信实战项目/" itemprop="url" rel="index">
                    <span itemprop="name">生信实战项目</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  6,685
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  24
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言">前言</h2>
<p>这篇笔记是腾讯课堂上的蛋白质组数据分析教程的笔记，教程的全称是<a href="https://ke.qq.com/course/400449" target="_blank" rel="external">《iTRAQ定量蛋白质组》</a>教程中涉及到的蛋白质谱使用的方法是iTRAQ，分析的物种是玉米，虽然与我的方向不一致，但是原理与数据分析的思路都是相通的，这一部分仅是背景知识。</p>
<p>这个视频教程笔记分2篇，上篇主要是蛋白质谱背景知识介绍，以及文献中的常规思路分析。</p>
<p>下篇主要是进行案例训练。</p>
<h2 id="蛋白质组知识背景">蛋白质组知识背景</h2>
<p>蛋白质组(proteome)：由一个细胞、一个组织或一个机体的基因组所表达的全部相应的蛋白质，是一个整体的概念。</p>
<p>蛋白质组学(proteomics)：以蛋白质组为研究对象，从蛋白质整体水平来认识重合活动规律的科学，是后基因组计划的重要组成部分。</p>
<p>蛋白质组学本质上指的是在大规模水平上研究蛋白质的特征，包括蛋白质的表达水平、翻译后的修饰、蛋白质与蛋白质相互作用等，由此获得蛋白质水平上的关于疾病机理、细胞代谢等过程的整体而全面的认识。</p>
<h3 id="蛋白质组学分类">蛋白质组学分类</h3>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190709172614.png">

</div>
<p>常用的是非标Label Free，以及标记的iTRAQ分板技术。</p>
<h3 id="定量蛋白组学">定量蛋白组学</h3>
<p>定量蛋白组学：研究不同条件下蛋白表达水平的变化（上下调情况）。</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190709172748.png">

</div>
<h2 id="itraq知识背景">iTRAQ知识背景</h2>
<p><strong>iTRAQ</strong>的全称是<strong>Isobaric tag for relative and absolute quantitation</strong>，翻译为中文就是<strong>同重元素标记的相对与绝对定量技术</strong>。这是由AB SCIEX公司研发的一种体外同重同位素标记的相对与绝对定量技术。该技术利用同位素试剂可同时标记8个多肽样品，标记的多肽样品等量混匀后，经液相色谱分离及串联质谱（MS/MS）分析，可得到各肽段的一、二级质谱信息。</p>
<p>在一级质谱中，不同样品来源的同一肽段表现出相同的质荷比；</p>
<p>在二级质谱中，化学键断裂释放出iTRAQ报告离子，在质谱低质量区产生了8个报告离子峰，其强度反应了该肽段在不同样品中的相对表达量信息，另外二级质谱中的肽段碎片离子峰质荷比反应了该肽段的序列信息；这些质谱原始数据经过数据库检索，可得到蛋白质的定性和相对定量信息。</p>
<p>iTRAQ技术在微生物抗协迫机制和动植物发育分化机理研究及医学生物标记物筛选领域都有广泛应用。</p>
<p><strong>iTRAQ</strong>：采用4种或8种同位素标签，通过特异性标记多肽的氨基基团，进行串联质谱分析从而比较不同样本中蛋白质的相对含量，其特点是：</p>
<ul>
<li><p>蛋白通量高，覆盖度高；</p></li>
<li><p>定量准确，可信度高；</p></li>
<li><p>分离能力强、分析范围广，定性结果可靠；</p></li>
<li><p>自动化程度高、分析时间快，分离效果好。</p></li>
</ul>
<h2 id="定量蛋白质组原理">定量蛋白质组原理</h2>
<h3 id="itraq试剂">iTRAQ试剂</h3>
<ul>
<li>iTRAQ试剂是可与氨基酸末端及赖氨酸侧链连接的胺标记的同位素元素；</li>
<li>iTRAQ试剂由三部分组成：报告基团、质量平衡基团和肽反应标记试剂基团；</li>
<li>报告基因：常见4标或8标，可同时标记4组或8组样品，报告基团有8种分子量，范围从113到121（无120）；</li>
<li>平衡基因：保证iTRAQ标记的同一肽段的质荷比相同，平衡基团也8有种不同的分子量，与不同的报告基团搭配，能保证被标记的不同来源的同一肽段在一级质谱中具有相同的质荷比，就是下图中右侧的部分，在上图，也就是a图中，它们的荷质比都是145.10，在下图，也就是b图中，荷质比都是305.10；</li>
<li>肽反应标记基团：可与肽段N端及辣氨酸侧链发生共价连接，从而标记上肽段。</li>
</ul>
<p>这几个试剂的结构如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190709185729.png">

</div>
<p>（图片来源于：Aggarwal S., Yadav A.K. (2016) Dissecting the iTRAQ Data Analysis. In: Jung K. (eds) Statistical Analysis in Proteomics. Methods in Molecular Biology, vol 1362. Humana Press, New York, NY,277）</p>
<h3 id="itraq的实验流程原理">iTRAQ的实验流程原理</h3>
<p>在质谱峰图中，虽然不同样本带有不同的同位素标签，但是经过质量平衡基因的平衡，任何一种试剂标记不同样本中的同一蛋白多肽表现为相同的质荷比，从而形成单一的峰。</p>
<p>在串联质谱结果中，经过激光通量轰击肽段，iTRAQ试剂的三部分之间的键断裂，平衡基因断裂，平衡基团丢失，不同同位素标签的同一多肽的离子信号表现为不同质荷比的峰，因此可根据波峰的高度和面积比较同一蛋白不同处理的定量信息，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190709190427.png">

</div>
<p>（图片出处为：Aggarwal S., Yadav A.K. (2016) Dissecting the iTRAQ Data Analysis. In: Jung K. (eds) Statistical Analysis in Proteomics. Methods in Molecular Biology, vol 1362. Humana Press, New York, NY，P278）</p>
<p>一级质谱：</p>
<p>二级质谱：</p>
<h4 id="常规实验流程">常规实验流程</h4>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190709184551.jpg">

</div>
<h4 id="实验流程如下所示">实验流程如下所示：</h4>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190709185226.png">

</div>
<p>第一步：蛋白酶解样本，也就是将蛋白样本酶解为肽段；</p>
<p>第二步：使用iTRAQ同位素标记，也就是使用不同的iTRAQ标签来标记不同的肽段样本；</p>
<p>第三步：SCX预分级，使用强阳离子交换SCX（HPLC）将肽段分为多个组分；</p>
<p>第四步：使用LC-MS对每个组分进行质谱检测。</p>
<h4 id="质谱仪的组成部分">质谱仪的组成部分</h4>
<p>蛋白质谱的核心就质谱，原理就是样本在特定条件下转变为高速运动的离子，根据离子质荷比的不同在静电场和磁场作用下进行分离，再用特定检测器记录不同质荷比的各离子的相对强度并形成质谱图。</p>
<h5 id="质谱仪">质谱仪</h5>
<p><strong>质谱仪</strong>：在真空状态下分析离子的质荷比m/z，质谱仪主要是由离子源、质量分析器和离子检测器组成，iTRAQ技术中常用LC-MS/MS，液相色谱串联质谱。</p>
<ul>
<li><p>离子源：将蛋白或多肽变成气态的带电离子，常用的有2类：①电喷雾电泳ESI；②基质辅助激光解吸电离MALDI（脉冲方式使用样本离子化0；</p></li>
<li><p>质量分析器：将离子源形成的离子按质荷比大小分开：常见有的5类：①四级杆(Quadrupole)；②离子阱(Ion trap)；③飞行时间(TOF)；④傅里叶(FTICR)；⑤轨道阱(Qrbitrap)。</p></li>
</ul>
<p>质量分析器的参数</p>
<p>质量分析器的质量范围是指测定质荷比范围，它决定了能检测到的离子范围，例如ESI离子源可产生许多质荷比大于3000的离子，但是如果质量分析器的上限达不到3000，则就无法检测大于3000的离子。</p>
<p>分辨率：观测到的质谱峰的质荷比/半峰高处的峰宽(FWHM)。</p>
<h4 id="不同类型质量分析器的比较">不同类型质量分析器的比较</h4>
<p>不同质量分析器有不同的分辨率，其中傅里叶&gt;轨道阱&gt;时间飞行&gt;离子阱&gt;四级杆，具体的参数如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717184549.png">

</div>
<p>市场上不同型号质谱仪的比较：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717184735.png">

</div>
<p>其中在使用iTRAQ分析时，比较常用的是Thermo的Q-Exactive与Q-Exactive HF。</p>
<ul>
<li><p>离子检测器：①直接检测器；②电子倍增器；③闪烁检测器。</p></li>
<li><p>液相色谱LC：利用物质在流动相和固定相中的分配系数差异，进行分离检测。</p></li>
<li><p>质谱MS：把不同质荷比的离子分开排列成谱。</p></li>
</ul>
<h2 id="实验方案设计">实验方案设计</h2>
<p>教学视频中的案例是植物方向，其实原理跟动物方向一样的，以下的都是植物蛋白质谱的实验设计。</p>
<h3 id="方案设计-生物学重复">方案设计-生物学重复</h3>
<ol style="list-style-type: decimal">
<li>至少设置3个以上的生物学重复；</li>
<li>为了增加实验结果的可靠性，可通过增加质谱的技术重复上机次数；</li>
<li>严谨的实验通常进行3次生物学重复和3次技术重复，也就是一共9批MS数据；</li>
<li>出于经费考虑，有的文献也只进行2-3次技术重复（在动物实验方面，技术重复就是同一个样本上3针质谱即可）。</li>
</ol>
<h3 id="方案设计-不同组样本的标记选择和上机组合">方案设计-不同组样本的标记选择和上机组合</h3>
<h4 id="两组样品">两组样品</h4>
<p>常见的组合包括2组，3组，4组，5组，6组样本，现在以植物干旱无罪推定研究为例说明一下。</p>
<p>假设我们有2组样本，对照组这里用CK表示，它表示正常浇水；实验组使用Treatment不胜感激，它表示不浇水3天，现在有2个方案：</p>
<p>第一个方案：每组2个生物学重复，1个3标；</p>
<p>第二个方案：第组3个生物学重复，1个6标，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717185946.png">

</div>
<h4 id="三组样本">三组样本</h4>
<p>现在将实验扩展一下，我们使用3组：</p>
<p>对照组：CK，正常浇水；</p>
<p>干预组不浇水，包括2组：</p>
<p>不浇水3天：T1</p>
<p>不浇水6天：T2</p>
<p>第一个方案：每组两个生物学重复，1个6标；</p>
<p>第二个方案：每组3个生物学重复，3个4标或1个9标，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717190254.png">

</div>
<h4 id="四组样本">四组样本</h4>
<p>对照组：CK，正常浇水</p>
<p>处理组：Treatment</p>
<p>不浇水3天：T1</p>
<p>不浇水6天：T2</p>
<p>不浇水9天：T3</p>
<p>方案一：每组2个生物学重复，1个8标；</p>
<p>方案二：每组3个生物学重复，3个4组，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717190615.png">

</div>
<h4 id="五组样本">五组样本</h4>
<p>对照组：CK，正常浇水</p>
<p>处理组：Treatment</p>
<p>不浇水1天：T1</p>
<p>不浇水2天：T2</p>
<p>不浇水3天：T3</p>
<p>不浇水4天：T4</p>
<p>方案一：每组3个生物学重复，3个5标；</p>
<p>方案二：每组3个生物学重复，3个6标，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717190812.png">

</div>
<h4 id="六组样本">六组样本</h4>
<p>对照组：CK，正常浇水</p>
<p>处理组：</p>
<p>不浇水1天：T1</p>
<p>不浇水2天：T2</p>
<p>不浇水3天：T3</p>
<p>不浇水4天：T4</p>
<p>不浇水5天：T5，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717190946.png">

</div>
<h3 id="实验方案小结">实验方案小结</h3>
<ul>
<li>需要比较的差异分组放在同一组标记中；</li>
<li>不同组织部位不要放在一组标记中检测；</li>
<li>生物学重复可分批上机，此时可不需要内参；</li>
<li>可将所有样本混合作为内参，分析时可通过内参间接找到有无变化的蛋白质。</li>
</ul>
<h1 id="蛋白数据分析流程">蛋白数据分析流程</h1>
<p>iTRAQ定量蛋白组数据分析流程如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717191336.png">

</div>
<p>从质谱仪上拿到的数据是原始质谱数据，然后要将原始数据进行一个数据格式转换，数据转换后，要进行搜库来鉴定蛋白质，这一步是要看找到了多少个蛋白质，随后对找到的蛋白进行蛋白定量。</p>
<p>定量后就是各种分析，包括GO，KEGG，蛋白相互作用等。</p>
<h3 id="一搜库">[一]搜库</h3>
<p><code>搜库</code>是指通过实验得到的谱图与数据库中的理论谱图进行匹配，得到可能的肽段序列，从而鉴定蛋白质，进行搜库的操作就是将质谱仪得到的谱图输入到搜库软件，常用的搜库软件包括：</p>
<ul>
<li>ProteinPilot(AB SCIEX)</li>
<li>Proteome Discoverer(Thermo scientific)</li>
<li>Mascot（这个软件是上述2个软件的核心）</li>
</ul>
<p>数据的产生其实就是：<code>蛋白-&gt;肽段-&gt;谱图</code>；而数据分析就是这个过程的逆过程，即<code>谱图-&gt;肽段-&gt;蛋白</code>。</p>
<p>整个流程如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717191954.png">

</div>
<h4 id="搜库的原理">搜库的原理</h4>
<p>搜库软件运行的主要步骤包括：</p>
<ol style="list-style-type: decimal">
<li>从数据库中选择分子量与输入值相等的肽段；</li>
<li>形成理论碎片，并进一步生成理论谱图；</li>
<li>将实验谱图与理论谱图进行匹配；</li>
<li>对匹配进行打分；</li>
<li>按打分进行排序，通过统计学分析，确定最佳的匹配结果并导出。</li>
</ol>
<p>流程示意图如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717192309.png">

</div>
<h4 id="搜库数据库的选择">搜库数据库的选择</h4>
<p>数据库的选择是基于质谱数据的蛋白质鉴定策略中的重要一步，最终鉴定到的蛋白序列都来源于被选择的数据库。</p>
<ul>
<li>如果是已经测序的生物，直接选用该物种蛋白数据库(NCBI)，或同批样本转录组数据构建的蛋白库。</li>
<li>如果是非测序生物，则选择与被测样本最为相关的大类蛋白质组数据库；</li>
<li>NCBInr分类库，包括动物全库、植物全库、微生物全库、细菌全部库等。</li>
<li>SwissProt/UniProt分类库，动物全库、植物全库、微生物全库、细菌库等。</li>
</ul>
<h4 id="蛋白质谱鉴定的结果">蛋白质谱鉴定的结果</h4>
<p>定量蛋白质鉴定数目一般在几千左右，远少于转录组检测的表达的基因数目和参考基因组的基因数目，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717192758.png">

</div>
<p>右上图是根据分析量来确定的蛋白数据，右下图是根据肽段来确定的鉴定的蛋白数目。蛋白鉴定的数目跟转录鉴定的基因不在一个数量级上，这是因为蛋白质谱在实验的通量，数据库，实验技术方面都有一定的局限。</p>
<h3 id="二蛋白质功能注释">[二]蛋白质功能注释</h3>
<p>通过搜库对蛋白质进行鉴定后，接着就是对这些搜到的蛋白进行功能注释，这有助于了解蛋白的功能，从而解析样本相关表型，常用于功能注释的数据库有：GO、COG、KEGG、NR、Pfam、Swiss-Prot，下图是一个玉米的项目，玉米的蛋白在各个数据库中的注释结果：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717193450.png">

</div>
<h4 id="数据库介绍">数据库介绍</h4>
<h5 id="nr">NR</h5>
<p>全称是Non-redundant protein sequences，包含GenBank所有编码序列，以及PDB，swissprot，PIR，PRF数据库的所有编码序列的一个非冗余数据库，其数据库完整度高；这是一个氨基酸序列数据库。</p>
<h5 id="pfam">Pfam</h5>
<p>全称是Protein families database，通过蛋白序列的比对建立了每个家族的氨基酸序列的HMM统计模型，是最全面的蛋白结构域注释的分类系统；通过识别蛋白质的结构域序列，可以预测蛋白质的功能。</p>
<h5 id="swiss-prot">Swiss-Prot</h5>
<p>这是上EBI维护的数据库，主要收录人工注释的序列及其相关文献信息和经过计算机辅助分析的序列；注释结果包括对蛋白质功能、酶学特性、剪接异构体、相关疾病信息的注释等待，注释结果无冗余。</p>
<h5 id="cog">COG</h5>
<p>全称是Clusters of Orthologous Groups of proteins，这是一个蛋白质直系同源数据库。通过对菌类，藻类和真核生物等66个完整基因组的编码蛋白，根据系统进化关系构建而成。这对于预测单个蛋白的功能和整个基因组中蛋白质的功能具有重要的作用。</p>
<h5 id="go与kegg">GO与KEGG</h5>
<p>常见，不介绍。</p>
<h3 id="三定量">[三]定量</h3>
<h4 id="蛋白定量原理回顾">蛋白定量原理回顾</h4>
<p>先来了解一下iTRAQ蛋白质定量的原理，如下所示：</p>
<ul>
<li>iTRAQ试剂是等量的，因此不同同位素在标记同一多肽后在一级质谱检测中，分子量完全相同。</li>
<li>在一级质谱检测到前体离子后进行碰撞诱导解离，产物离子通过二级质谱进行分析。</li>
<li>在二级质谱中，报告基团、质量平衡基团和多肽反应基团之间的键断裂，质量平衡基团丢失，产生低质荷比(m/z)的报告离子。</li>
<li>由于二级质谱可分析相对分子质量相差为1的报告基团，不同报告基团离子强度的差异就代表了它所标记的多肽相对丰度。</li>
<li>多肽内的酰胺键断裂，形成一系列b离子和y离子，得到离子片段的质量数，通过搜库就可以鉴别出相应蛋白质。</li>
</ul>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717195201.png">

</div>
<h4 id="蛋白定量分析工具">蛋白定量分析工具</h4>
<ul>
<li>常用的软件前面已经提了，包括：IQuant(BGI), ProteinPilot(AB SCIEX)、Proteome Discoverer(Thermo scientific)</li>
<li><a href="https://onlinelibrary.wiley.com/doi/full/10.1002/pmic.201300361" target="_blank" rel="external">IQuant</a>：整合了Mascot算法，采用机器学习算法自动对搜索结果进行重新打分，提高结果的鉴定率。</li>
</ul>
<p>核心的值有3个：</p>
<ol style="list-style-type: decimal">
<li>在谱图/肽段水平进行1%FDR的过滤(PSM-level PDF&lt;=0.01)，获得显性性鉴定的谱图和肽段列表。</li>
<li>基于<strong>简约原则</strong>(the parsimony principle)， 利用肽段进行蛋白组装，并生产一系列的蛋白组。</li>
<li>在蛋白质水平以FDR 1%再次进行过滤(Protein-level FDR&lt;=0.01)，以控制蛋白的假阳性。</li>
</ol>
<p>IQuant的工作流程为：</p>
<p><code>蛋白质过滤 --&gt; 报告基团标签纯度校正 --&gt; 定量值归一化 --&gt; 缺失值补全 --&gt; 蛋白定量值计算 --&gt; 统计检验</code>。</p>
<h3 id="四差异蛋白筛选">[四]差异蛋白筛选</h3>
<p>对蛋白进行定量后，需要对蛋白的差异进行筛选，筛选的内容包括3个，如下所示：</p>
<ul>
<li>根据实验设计来设置差异分析，例如<code>A_VS_B</code>；</li>
<li>显示差异蛋白选择的阈值，Fold Change &gt; 1.2或1.5和Q-value &lt; 0.05；</li>
<li>统计学方法：t-test或ANOVA。</li>
</ul>
<p>现在来看一个差异计算后的结果：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717200544.png">

</div>
<p>第1列是蛋白名称；</p>
<p>第2列到第4列是3个生物学重复；</p>
<p>第5列与第6列是FC与pvalue。</p>
<h3 id="五富集分析">[五]富集分析</h3>
<p>富集分析常见的就是GO分析与KEGG分析，不介绍。</p>
<h3 id="六表达聚类和蛋白互作">[六]表达聚类和蛋白互作</h3>
<p>表达聚类分析的核心就是热图与聚类图，不介绍。</p>
<p>蛋白相互作用通常使用的数据库是STRING数据库，它能分析预测差异蛋白质之间的互作关系，这个数据库的主要信息如下</p>
<ul>
<li>STRING是一个搜索已知蛋白之间和预测蛋白之间相互作用系统的数据库，包括蛋白质直接物理的相互作用，也包括蛋白质之间间接功能相关性；</li>
<li>数据包括：实验数据、从PubMed摘要中挖掘结果，利用生物信息学方法预测的结果；</li>
<li>通过打分对不同方法得来的结果给予一定权重，得到综合打分，且可根据打分结果绘制蛋白相互作用网络图，它的网络图如下所示：</li>
</ul>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717201930.png">

</div>
<h2 id="案例解析">案例解析</h2>
<p>先来看一篇文献，文献内容如下所示：</p>
<p>Liancheng Wu, Shunxi Wang, Lei Tian, Liuji Wu, Mingna Li, Jun Zhang, Pei Li, Weiqiang Zhang, Yanhui Chen Comparative proteomic analysis of the maize responses to early leaf senescence induced by preventing pollination,Journal of Proteomics,Volume 177,2018,Pages 75-87,ISSN 1874-3919.</p>
<h3 id="研究背景">研究背景</h3>
<p>玉米是一种一年生作物，叶片衰老的过早或过晚都可能会影响产量，在成熟后期，营养物质的再活化受到负面影响，导致幼叶的光合作用受损和系列能力下降，相反，过早的叶片衰老则阻碍了植物生长并降低其CO2的同化能力。叶片衰老是一个高度调控的过程，由几个称为衰老相关基因(SAGs)的基因介导，然后在蛋白质水平上仅鉴定了少数SAG。目前，使用蛋白质组学分析全体蛋白质波动比功能分析的转录组学更有效，因为蛋白质与功能更直接相关。本研究的目的是，研究玉米阻断授粉诱导叶片衰老过程中蛋白质的全局差异积累和代谢物质的变化。</p>
<h4 id="叶片衰老的生理特征">叶片衰老的生理特征</h4>
<p>叶片衰老通常与植物衰老以及开花和种子形成有关。叶色也与叶片衰老有关，是植物重合周期阶段的可见指标。叶片衰老时会出现一系列的生理过程，包括叶绿素分解、光合作用停止、蛋白质和核酸降解、分解代谢和营养物质的运输，以及细胞死亡反应，从而导致营养物质再循环到新发育的营养器官和生殖器官。</p>
<h4 id="分子机制研究进展">分子机制研究进展</h4>
<p>叶片衰老可以通过许多环境和内源信号来调节，包括年龄、发育信号和植物生长调节剂。植物激素与植物中的各种生物过程（包括叶片衰老）相关，如外源施用脱落酸(ABA)可促进叶片衰老，内源ABA水平在几种植物叶片衰老后增加。</p>
<p>水杨酸(SA)是另一种对叶片衰老正调控的植物激素，而生长素、细胞分裂素和赤霉素对叶片衰老有负调控作用。</p>
<p>糖代谢是与叶片衰老相关的另一因素，如糖类直接应用于拟南芥的叶细胞会导致早衰。</p>
<h4 id="表型分析糖">表型分析－糖</h4>
<p>实验材料：授粉(POL)和不授粉(NPNPOL)的玉米自交系Yu816。</p>
<p>发育时间：吐丝扣6天到21天(DAS)。</p>
<p>参数检测：叶片的可溶性糖含量和淀粉含量。</p>
<p>分析结果：</p>
<p>可溶性糖，6-18 DAS两种材料中均增加；21 DAS和POL中稍微下降，而NONPL的大量下降。</p>
<p>淀粉：趋势与可溶性糖类似，数据如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717203730.png">

</div>
<h4 id="表型分析-叶片形态和叶绿素分析">表型分析-叶片形态和叶绿素分析</h4>
<ul>
<li><p>穗叶和上部的叶片；</p></li>
<li><p>两组材料在6-14 DAS时一样保持绿色。</p></li>
<li><p>NONPOL组，18 DAS时叶脉积累红色色素，尖端变黄且干燥；21 DAS时穗叶的三分之二变黄；27 DAS时叶片完全干燥。</p></li>
<li><p>POL组，仅在27 DAS时表现出轻微黄色。</p></li>
<li><p>叶绿素含量：</p></li>
<li><p>NONPOL组，穗叶尖端在6-27 DAS显著下降（相对中部和基部），而同时POL组只是稍微一些辞职。</p></li>
<li><p>相同的趋势也发生在穗叶的中部和基部。</p></li>
<li><p>在两组中Chl含量随着发育而下降，但是NONPOL组比POL组下降得更快，数据如下所示：</p></li>
</ul>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717204222.png">

</div>
<h3 id="itaaq蛋白组实验设计">iTAAQ蛋白组实验设计</h3>
<p>样本数目：7组样本，8标，每个3个生物学重复</p>
<p>实验材料：玉米自交系Yu816</p>
<p>实验处理：授粉(POL)、不授粉(NONPOL)</p>
<p>取样部位：叶片</p>
<p>取样时间点：吐丝后6天(DAS)、14天、18天和21天</p>
<p>生物学重复：3个</p>
<p>方法与仪器：iTRAQ、LC-MS/MS(Thermo Fisher Scientific, Q-exactive)</p>
<p>流程如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717204548.png">

</div>
<h3 id="蛋白质组整体分析">蛋白质组整体分析</h3>
<p>文章的附件中列出了蛋白质谱的一些数据，得到了959464个广谱，其中150650匹配上肽段谱图，通过Mascot软件匹配上已知多肽，且28605个匹配上唯一多肽。</p>
<p>鉴定了6941个蛋白，其中4371个唯一蛋白时至少有两个以上肽段匹配的，数据如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717205151.png">

</div>
<h3 id="筛选差异蛋白分析">筛选差异蛋白分析</h3>
<ul>
<li>文献中使用了ANOVA来筛选差异蛋白(DAP)，其中阈值为：FC大于1.2或小于0.83(0.83其实就是1.2的倒数)，p值小于0.05。</li>
<li>POL组有700个显著差异积累的蛋白，NONPOL组有1832个；</li>
<li>其中261中仅在POL中显著积累，1393个只在NONPOL组中显著积累，而439个在两组均显著积累；</li>
<li>分析不同时间诱导的衰老：A1 VS B1， A2 vs B2， A3 VS B3；1443个显著差异积累，其中809个仅在NONPOL中显著差异积累，然后进一步分析在14 DAS、18 DAS和21 DAS的做好心理情况下，以及上下调情况；</li>
<li>通过比较本研究和之前文献报告的玉米自交系B73阻断授粉诱导衰老的转录组研究，发现两个数据集仅有154个重叠的基因，这说明在Yu816中有着相对不同的调控机制：</li>
</ul>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717205707.png">

</div>
<h3 id="差异蛋白功能分析go和kegg分析">差异蛋白功能分析—GO和KEGG分析</h3>
<ul>
<li>对NONPOL组809个DAP进分别进行GO和KEGG分析，使用cytoscape、Cluego和Cluepedia软件绘制GO注释和KEGG网络图；</li>
<li>通过评分得到65条边连接的36个Term， 表明在鉴定的蛋白质相互作用组中相当多的富集(P&lt;0.05)；</li>
<li>显著富集的Term：光合作用、光合作用光系统II、生长素生物合成过程、JA代谢过程、器官衰老、络氨酸代谢、脯氨酸生物合成过程；</li>
<li>从亚细胞定位角度来看，显著宝座的蛋白主要定位于叶绿体、光合体系、过氧化酶体和核糖体，如下所示：</li>
</ul>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717210255.png">

</div>
<h3 id="差异蛋白表达分析">差异蛋白表达分析</h3>
<p>表达分析的核心就是热图与聚类。</p>
<ul>
<li>在诱导叶片衰老过程中，大多数核糖体蛋白质丰度下降，包括50S核糖体蛋白L5-1(B6SST7)， 其在14 DAS时稍微下降了0.98倍，在18 DAS时下降了0.8倍，但在21 DAS下降到了0.6。</li>
<li>NONPOL组蛋白酶丰度增加，如光胱氨酸蛋白酶1(B6TGM9)在14 DAS增加1.09倍，在18 DAS时增加1.43位，21 DAS时增加到了2.89倍。</li>
<li>在差异积累的蛋白质中，29种与光合作用有关，并且大部分光合作用相关蛋白丰度减少，例如PSII反应中心蛋白H(P24993)在14 DAS时减少了1.00倍，在18 DAS时为0.72倍，在21 DAS时为0.46倍，如下所示：</li>
</ul>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717210704.png">

</div>
<ul>
<li>糖代谢相关的蛋白质在NONPOL组中丰度增加，如淀粉合酶，和叶绿体/淀粉体蛋白（B6U167)在14 DAS时半圆了0.98倍，在18 DAS时增加了1.18倍，21 DAS的1.65倍；</li>
<li>参与ROS过程的蛋白质，抗氧化蛋白质在诱导叶片衰老过程中丰度降低了，例如铁氧还原蛋白(Q6JAD2)在14 DAs时减少了0.84位，在18 DAS时减少了0.76倍，在21 DAS时减少了0.55倍；</li>
<li>但是氧化蛋白质各类如脂氧合酶(Q8W0V2)在14 DAS时增加了0.87倍，在18 DAS时增加了1.78倍，在21 DAS时增加了2.26倍；</li>
<li>ABA响应蛋白(B6U8P6)在14 DAS时增加了0.88倍，在18 DAS时增加了1.32倍，在21 DAS时增加了1.5倍；但与生长素和赤霉素相关的蛋白质丰度降低，数据如下所示：</li>
</ul>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717211150.png">

</div>
<p>文章最后使用WB进行验证，测序类文章中基本上都要有验证，这一部分略去不表。</p>
<p>文章到此就结束了，整个文献的数据分析思路如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717211539.png">

</div>
<p>简化一下就是下图：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190717211604.png">

</div>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><a href="http://www.fitgene.com/fuwu/danbaizhizuxue/iTRAQ.html" target="_blank" rel="external">iTRAQ标记定量蛋白质组学.辉骏生物</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/28203867" target="_blank" rel="external">iTRAQ(稳定同位素标记蛋白质组学技术)</a></li>
<li><a href="https://sciex.com/products/consumables/itraq-reagent" target="_blank" rel="external">iTRAQ® Reagents</a></li>
<li><a href="iTRAQ/TMT.MtoZ%20Biolabs%20Experit%20in%20Mass%20Spectrometry%20Analysis">iTRAQ/TMT.MtoZ Biolabs Experit in Mass Spectrometry Analysis</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2019/07/02/Python/Python数据处理笔记02-Excel文件处理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/02/Python/Python数据处理笔记02-Excel文件处理/" itemprop="url">Python数据分析02-Excel文件处理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-02T12:00:00+08:00">
                2019-07-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,640
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  8
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="python处理excel的包">Python处理Excel的包</h2>
<p>在PYthon中处理Excel文件（扩展名为<code>.xls</code>和<code>.xlsx</code>的文件）的扩展包为<code>xlrd</code>和<code>xlwt</code>，这两个包对Excel中的日期型数据支持非常好。而在Anaconda Python中，已经含有了这两个包，不用额外安装。如果是最原始版本的Python，则需要下载这两个包。</p>
<p>书中关于这两个包的介绍并不多，因此一些参数只是告诉你了要么用，至于这个参数具体是做什么的，这个包的某些函数还有没有其它的参数，作者并没有多讲，因此可以检索一下<code>xlrd</code>和<code>xlwt</code>这两个包的文档。</p>
<p><a href="https://xlrd.readthedocs.io/en/latest/index.html" target="_blank" rel="external">xlrd文档</a></p>
<p><a href="https://xlwt.readthedocs.io/en/latest/" target="_blank" rel="external">xlwt文档</a></p>
<h2 id="练习数据下载">练习数据下载</h2>
<p>《Python数据分析基础》这本书中的<a href="https://github.com/cbrownley/foundations-for-analytics-with-python" target="_blank" rel="external">源数据和源代码</a>已经上传至Github上，自己可以下载下来。</p>
<p>下载后的Excel练习数据一共是3个，名称分别为：<code>sales_2013</code>，<code>sales_2014</code>和<code>sales_2015</code>。其中以<code>sales_2013</code>为例说明一下，这个文件中一共有3个Excel表格，名称分别为<code>january_2013</code>，<code>february_2013</code>和<code>march_2013</code>。</p>
<p>Excel与csv文件的不同之处在于，一个Excel文件（后文称为一个Exce工作薄）含有多个工作表（sheet）。通过工作簿的内省可以获取工作表的信息：</p>
<blockquote>
<p>Python的内省（Introspection）是一种自我检查行为。在编程过程中，自省能够获取对象的类型与属性。</p>
</blockquote>
<p>注：在这篇笔记中，工作簿是指一个Excel文件，而一个工作簿中则中含有多个工作表。</p>
<h2 id="获取工作表的信息">获取工作表的信息</h2>
<p>下面的代码命名为<code>1excel_introspect_workbook.py</code>，它的功能在于获取一个Excel文件中工作表的数量、名称和每个工作表中行与列的数量，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">from</span> xlrd <span class="keyword">import</span> open_workbook</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">workbook = open_workbook(input_file)</div><div class="line">print(<span class="string">'Number of worksheets:'</span>, workbook.nsheets)</div><div class="line"><span class="keyword">for</span> worksheet <span class="keyword">in</span> workbook.sheets():</div><div class="line">    print(<span class="string">"Worksheet name:"</span>, worksheet.name, <span class="string">'\tRows:'</span>, \</div><div class="line">          worksheet.nrows, <span class="string">'\tColumns:'</span>, worksheet.ncols)</div></pre></td></tr></table></figure>
<p>运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python <span class="number">1</span>excel_introspect_workbook.py sales_2013.xlsx</div><div class="line">Number of worksheets: <span class="number">3</span></div><div class="line">Worksheet name: january_2013    Rows: <span class="number">7</span>         Columns: <span class="number">5</span></div><div class="line">Worksheet name: february_2013   Rows: <span class="number">7</span>         Columns: <span class="number">5</span></div><div class="line">Worksheet name: march_2013      Rows: <span class="number">7</span>         Columns: <span class="number">5</span></div></pre></td></tr></table></figure>
<p>解释代码：</p>
<ol style="list-style-type: decimal">
<li>使用<code>open_workbook</code>函数打开了一个Excel主文件，并赋给了一个名为<code>workbook</code>的对象，这个对象中包含了工作簿中的所有可用的信息，可以查看一下，如下所示：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dir(workbook)</div><div class="line">[<span class="string">'__class__'</span>, <span class="string">'__delattr__'</span>, <span class="string">'__dict__'</span>, <span class="string">'__dir__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__enter__'</span>, <span class="string">'__eq__'</span>, <span class="string">'__exit__'</span>, <span class="string">'__format__'</span>, <span class="string">'__ge__'</span>, <span class="string">'__getattribute__'</span>, <span class="string">'__gt__'</span>, <span class="string">'__hash__'</span>, <span class="string">'__init__'</span>, <span class="string">'__init_subclass__'</span>, <span class="string">'__le__'</span>, <span class="string">'__lt__'</span>, <span class="string">'__module__'</span>, <span class="string">'__ne__'</span>, <span class="string">'__new__'</span>, <span class="string">'__reduce__'</span>, <span class="string">'__reduce_ex__'</span>, <span class="string">'__repr__'</span>, <span class="string">'__setattr__'</span>, <span class="string">'__sizeof__'</span>, <span class="string">'__str__'</span>, <span class="string">'__subclasshook__'</span>, <span class="string">'__weakref__'</span>, <span class="string">'_all_sheets_count'</span>, <span class="string">'_all_sheets_map'</span>, <span class="string">'_externsheet_info'</span>, <span class="string">'_externsheet_type_b57'</span>, <span class="string">'_extnsht_count'</span>, <span class="string">'_extnsht_name_from_num'</span>, <span class="string">'_repr_these'</span>, <span class="string">'_resources_released'</span>, <span class="string">'_rich_text_runlist_map'</span>, <span class="string">'_sh_abs_posn'</span>, <span class="string">'_sharedstrings'</span>, <span class="string">'_sheet_list'</span>, <span class="string">'_sheet_names'</span>, <span class="string">'_sheet_num_from_name'</span>, <span class="string">'_sheet_visibility'</span>, <span class="string">'_sheethdr_count'</span>, <span class="string">'_supbook_addins_inx'</span>, <span class="string">'_supbook_count'</span>, <span class="string">'_supbook_locals_inx'</span>, <span class="string">'_supbook_types'</span>, <span class="string">'_xf_epilogue_done'</span>, <span class="string">'_xf_index_to_xl_type_map'</span>, <span class="string">'actualfmtcount'</span>, <span class="string">'addin_func_names'</span>, <span class="string">'biff2_8_load'</span>, <span class="string">'biff_version'</span>, <span class="string">'builtinfmtcount'</span>, <span class="string">'codepage'</span>, <span class="string">'colour_map'</span>, <span class="string">'countries'</span>, <span class="string">'datemode'</span>, <span class="string">'derive_encoding'</span>, <span class="string">'dump'</span>, <span class="string">'encoding'</span>, <span class="string">'fake_globals_get_sheet'</span>, <span class="string">'filestr'</span>, <span class="string">'font_list'</span>, <span class="string">'format_list'</span>, <span class="string">'format_map'</span>, <span class="string">'formatting_info'</span>, <span class="string">'get2bytes'</span>, <span class="string">'get_record_parts'</span>, <span class="string">'get_record_parts_conditional'</span>, <span class="string">'get_sheet'</span>, <span class="string">'get_sheets'</span>, <span class="string">'getbof'</span>, <span class="string">'handle_boundsheet'</span>, <span class="string">'handle_builtinfmtcount'</span>, <span class="string">'handle_codepage'</span>, <span class="string">'handle_country'</span>, <span class="string">'handle_datemode'</span>, <span class="string">'handle_externname'</span>, <span class="string">'handle_externsheet'</span>, <span class="string">'handle_filepass'</span>, <span class="string">'handle_name'</span>, <span class="string">'handle_obj'</span>, <span class="string">'handle_sheethdr'</span>, <span class="string">'handle_sheetsoffset'</span>, <span class="string">'handle_sst'</span>, <span class="string">'handle_supbook'</span>, <span class="string">'handle_writeaccess'</span>, <span class="string">'initialise_format_info'</span>, <span class="string">'load_time_stage_1'</span>, <span class="string">'load_time_stage_2'</span>, <span class="string">'logfile'</span>, <span class="string">'mem'</span>, <span class="string">'name_and_scope_map'</span>, <span class="string">'name_map'</span>, <span class="string">'name_obj_list'</span>, <span class="string">'names_epilogue'</span>, <span class="string">'nsheets'</span>, <span class="string">'on_demand'</span>, <span class="string">'palette_record'</span>, <span class="string">'parse_globals'</span>, <span class="string">'props'</span>, <span class="string">'ragged_rows'</span>, <span class="string">'raw_user_name'</span>, <span class="string">'read'</span>, <span class="string">'release_resources'</span>, <span class="string">'sheet_by_index'</span>, <span class="string">'sheet_by_name'</span>, <span class="string">'sheet_loaded'</span>, <span class="string">'sheet_names'</span>, <span class="string">'sheets'</span>, <span class="string">'style_name_map'</span>, <span class="string">'unload_sheet'</span>, <span class="string">'use_mmap'</span>, <span class="string">'user_name'</span>, <span class="string">'verbosity'</span>, <span class="string">'xf_list'</span>, <span class="string">'xfcount'</span>]</div></pre></td></tr></table></figure>
<ol start="2" style="list-style-type: decimal">
<li><code>name</code>属性则是获取每个sheet的名称，<code>nrow</code>与<code>ncol</code>则是获取每个sheet的行与列的数目</li>
</ol>
<h2 id="处理单个sheet">处理单个sheet</h2>
<h3 id="读写excel文件">读写Excel文件</h3>
<p>下面的代码功能在于读取一个excel文件，名称为<code>2excel_parsing_and_write.py</code>，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">from</span> xlrd <span class="keyword">import</span> open_workbook</div><div class="line"><span class="keyword">from</span> xlwt <span class="keyword">import</span> Workbook</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line">output_workbook = Workbook()</div><div class="line"><span class="comment"># Create an Workbook object</span></div><div class="line"><span class="comment"># Workbook object is intended for output</span></div><div class="line"></div><div class="line">output_worksheet = output_workbook.add_sheet(<span class="string">'jan_2013_output'</span>)</div><div class="line"><span class="comment"># add_sheet function is adding an sheet</span></div><div class="line"><span class="keyword">with</span> open_workbook(input_file) <span class="keyword">as</span> workbook:</div><div class="line">    worksheet = workbook.sheet_by_name(<span class="string">'january_2013'</span>)</div><div class="line">    <span class="keyword">for</span> row_index <span class="keyword">in</span> range(worksheet.nrows):</div><div class="line">        <span class="keyword">for</span> column_index <span class="keyword">in</span> range(worksheet.ncols):</div><div class="line">            output_worksheet.write(row_index, column_index, \</div><div class="line">                                   worksheet.cell_value(row_index, column_index))</div><div class="line">            <span class="comment"># write function is use for writing data into output files</span></div><div class="line">output_workbook.save(output_file)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python <span class="number">2</span>excel_parsing_and_write.py sales_2013.xlsx <span class="number">2</span>output.xls</div></pre></td></tr></table></figure>
<p>打开<code>2output.xls</code>后如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190630141416.png">

</div>
<p>其中第5列，也就是<code>Purchase Date</code>这一列是数字，而不是日期。Excel会将日期和时间保存为浮点数，这个浮点数代表从1900年1月0日起经过的日期数，加上一个24小时的小数部分。例如数值1表示1900年1月1日，因为从1900年1月0日是过去了1天，因此这一列中的数值代表日期，只是这是没有经过格式化的日期数据。</p>
<p><code>xlrd</code>能够格式化这种日期。</p>
<h2 id="格式化日期">格式化日期</h2>
<h3 id="常规方法">常规方法</h3>
<p>格式化日期的Python代码保存为<code>3excel_parsing_and_write_keep_dates.py</code>，代码内容如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> date</div><div class="line"><span class="comment"># date function is used to format date data</span></div><div class="line"><span class="keyword">from</span> xlrd <span class="keyword">import</span> open_workbook, xldate_as_tuple</div><div class="line"><span class="comment"># xldate_as_tuple is to transform data representing date, time into tuple</span></div><div class="line"><span class="keyword">from</span> xlwt <span class="keyword">import</span> Workbook</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line">output_workbook = Workbook()</div><div class="line">output_worksheet = output_workbook.add_sheet(<span class="string">'jan_2013_output'</span>)</div><div class="line"></div><div class="line"><span class="keyword">with</span> open_workbook(input_file) <span class="keyword">as</span> workbook:</div><div class="line">    worksheet = workbook.sheet_by_name(<span class="string">'january_2013'</span>)</div><div class="line">    <span class="keyword">for</span> row_index <span class="keyword">in</span> range(worksheet.nrows):</div><div class="line">        row_list_output = []</div><div class="line">        <span class="keyword">for</span> col_index <span class="keyword">in</span> range(worksheet.ncols):</div><div class="line">            <span class="keyword">if</span> worksheet.cell_type(row_index, col_index) == <span class="number">3</span>:</div><div class="line">                <span class="comment"># value 3 represents cell that include date data</span></div><div class="line">                date_cell = xldate_as_tuple(worksheet.cell_value\</div><div class="line">                                                (row_index, col_index), workbook.datemode)</div><div class="line">                <span class="comment"># datemode determine date is based on 1900 or 1904 </span></div><div class="line">                date_cell = date(*date_cell[<span class="number">0</span>:<span class="number">3</span>]).strftime\</div><div class="line">                    (<span class="string">'%m/%d/%Y'</span>)</div><div class="line">                row_list_output.append(date_cell)</div><div class="line">                output_worksheet.write(row_index, col_index, date_cell)</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                non_date_cell = worksheet.cell_value\</div><div class="line">                    (row_index, col_index)</div><div class="line">                row_list_output.append(non_date_cell)</div><div class="line">                output_worksheet.write(row_index, col_index, \</div><div class="line">                                       non_date_cell)</div><div class="line">output_workbook.save(output_file)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python <span class="number">3</span>excel_parsing_and_write_keep_dates.py sales_2013.xlsx date_output.xls</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190630150632.png">

</div>
<h2 id="使用pandas读取excel文件">使用<code>pandas</code>读取Excel文件</h2>
<p>使用<code>pandas</code>也可以读取Excel文件，将下面的代码保存为<code>pandas_read_and_write_excel.py</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line">data_frame = pd.read_excel(input_file, sheetname = <span class="string">'january_2013'</span>)</div><div class="line">writer = pd.ExcelWriter(output_file)</div><div class="line">data_frame.to_excel(writer, sheet_name = <span class="string">'jan_13_output'</span>, index = <span class="keyword">False</span>)</div><div class="line">writer.save()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PS D:\netdisk\python_data&gt; python .\pandas_read_and_write_excel.py .\sales_2013.xlsx pandas_output.xls</div></pre></td></tr></table></figure>
<h2 id="选取特定的行">选取特定的行</h2>
<p>现在挑出那些<code>Sale Amount</code>超过1400的行。</p>
<h3 id="常规python选择某一行">常规Python选择某一行</h3>
<p>保存下面代码，命名为<code>4excel_value_meets_condition.py</code>，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> date</div><div class="line"><span class="keyword">from</span> xlrd <span class="keyword">import</span> open_workbook,xldate_as_tuple</div><div class="line"><span class="keyword">from</span> xlwt <span class="keyword">import</span> Workbook</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line">output_workbook = Workbook()</div><div class="line">output_worksheet = output_workbook.add_sheet(<span class="string">'jan_2013_output'</span>)</div><div class="line">sale_amount_column_index = <span class="number">3</span></div><div class="line"><span class="keyword">with</span> open_workbook(input_file) <span class="keyword">as</span> workbook:</div><div class="line">    worksheet = workbook.sheet_by_name(<span class="string">'january_2013'</span>)</div><div class="line">    data = []</div><div class="line">    header = worksheet.row_values(<span class="number">0</span>)</div><div class="line">    data.append(header)</div><div class="line">    <span class="keyword">for</span> row_index <span class="keyword">in</span> range(<span class="number">1</span>, worksheet.nrows):</div><div class="line">        row_list = []</div><div class="line">        sale_amount = worksheet.cell_value\</div><div class="line">            (row_index, sale_amount_column_index)</div><div class="line">        <span class="keyword">if</span> sale_amount &gt; <span class="number">1400</span>:</div><div class="line">            <span class="keyword">for</span> column_index <span class="keyword">in</span> range(worksheet.ncols):</div><div class="line">                cell_value = worksheet.cell_value\</div><div class="line">                    (row_index, column_index)</div><div class="line">                cell_type = worksheet.cell_type\</div><div class="line">                    (row_index, column_index)</div><div class="line">                <span class="keyword">if</span> cell_type == <span class="number">3</span>:</div><div class="line">                    date_cell = xldate_as_tuple\</div><div class="line">                        (cell_value, workbook.datemode)</div><div class="line">                    date_cell = date(*date_cell[<span class="number">0</span>:<span class="number">3</span>])\</div><div class="line">                    .strftime(<span class="string">'%m/%d/%Y'</span>)</div><div class="line">                    row_list.append(date_cell)</div><div class="line">                <span class="keyword">else</span>:</div><div class="line">                    row_list.append(cell_value)</div><div class="line">        <span class="keyword">if</span> row_list:</div><div class="line">            data.append(row_list)</div><div class="line">    <span class="keyword">for</span> list_index, output_list <span class="keyword">in</span> enumerate(data):</div><div class="line">        <span class="keyword">for</span> element_index, element <span class="keyword">in</span> enumerate(output_list):</div><div class="line">            output_worksheet.write(list_index, element_index, element)</div><div class="line">output_workbook.save(output_file)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PS D:\netdisk\python_data&gt; python .\<span class="number">4</span>excel_value_meets_condition.py .\sales_2013.xlsx <span class="number">4</span>output.xls</div></pre></td></tr></table></figure>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190701153503.png">

</div>
<h3 id="pandas包选取某一行"><code>pandas</code>包选取某一行</h3>
<p>在下面的案例中，使用<code>pandas</code>挑出那些<code>Sale Amount</code>列大于1400的行。如果需要多个条件，则需要添加<code>&amp;</code>与<code>|</code>符号，代码文件保存为<code>pandas_value_meets_condition.py</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line">data_frame = pd.read_excel(input_file, <span class="string">'january_2013'</span>, index_col = <span class="keyword">None</span>)</div><div class="line">data_frame_value_meets_condition = \</div><div class="line">    data_frame[data_frame[<span class="string">'Sale Amount'</span>].astype(float) &gt; <span class="number">1400</span>]</div><div class="line">writer = pd.ExcelWriter(output_file)</div><div class="line">data_frame_value_meets_condition.to_excel(writer, sheet_name = <span class="string">'jan_13_output'</span>,\</div><div class="line">                                          index = <span class="keyword">False</span>)</div><div class="line">writer.save()</div></pre></td></tr></table></figure>
<p>运行代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PS D:\netdisk\python_data&gt; python .\pandas_value_meets_condition.py .\sales_2013.xlsx pandas_output.xlsx</div></pre></td></tr></table></figure>
<p>打开<code>pandas_output.xlsx</code>，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190702100612.png">

</div>
<h2 id="挑选满足多个条件的行">挑选满足多个条件的行</h2>
<p>例如在前面的数据中，我们要挑选<code>01/24/2013</code>与<code>01/31/2013</code>这两个购买日期的行，代码保存为<code>5excel_value_in_set.py</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h2 id="参考资料">参考资料</h2>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2019/07/01/Python/Python数据处理笔记01-argv函数与读取csv文件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/01/Python/Python数据处理笔记01-argv函数与读取csv文件/" itemprop="url">Python数据分析01-argv函数与读取或导出csv文件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-01T12:00:00+08:00">
                2019-07-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  6,352
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  28
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言">前言</h2>
<p>这篇笔记的主要参考书是《Python数据分析基础》（[美] 克林顿·布朗利（Clinton，W.，Brownley） 著，陈光欣 译），封面如下：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190629130344.png">

</div>
<p>作者在Github上已经放了<a href="https://github.com/cbrownley/foundations-for-analytics-with-python" target="_blank" rel="external">书中的源代码与数据文件</a>。</p>
<h2 id="sys.argv函数"><code>sys.argv[]</code>函数</h2>
<p><code>sys.argv[]</code>是用来获取命令行输入的参数的，<code>argv</code>的是<code>argument variable</code>的缩写。这个变量其实是一个List列表，其中参数和参数之间空格区分，<code>sys.argv[0]</code>表示代码本身文件路径，而<code>sys.argv[1]</code>表示获取的参数。现在看使用案例。</p>
<p>首选我们在桌面上新建一个<code>test.py</code>文件，输入内容如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line">result = sys.argv[<span class="number">0</span>]</div><div class="line">print(result)</div></pre></td></tr></table></figure>
<p>现在运行这段代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;cd Desktop</div><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python test.py</div><div class="line">test.py</div></pre></td></tr></table></figure>
<p>从上面的结果可以看出来，运行<code>test.py</code>文件返回了一个<code>test.py</code>字符，这是因为<code>sys.argv[0]</code>这个参数本身指的就是这个程序本身，这个程序就是<code>test.py</code>文件。现在更改一下<code>test.py</code>代码，将第2行的<code>result = sys.argv[0]</code>改为<code>result = sys.argv[1:]</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line">result = sys.argv[<span class="number">1</span>:]</div><div class="line">print(result)</div></pre></td></tr></table></figure>
<p>再次运行，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python test.py Hello, Python</div><div class="line">[<span class="string">'Hello,'</span>, <span class="string">'Python'</span>]</div><div class="line"></div><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python test.py Hello,Python</div><div class="line">[<span class="string">'Hello,Python'</span>]</div></pre></td></tr></table></figure>
<p>从上面看到，当我们输入<code>python test.py Hello, Python</code>时（请注意，<code>Hello,</code>与<code>Python</code>之间有一个空格），<code>sys.argv[1:]</code>就会接收输入的参数，并且以空格来进行区分，当用空格进行区分，这就是2个参数，这个列表中就有2个参数。当我们直接输入<code>Hello,python</code>（中间没有空格）时，就是一个参数，这个列表中就只有一个元素。</p>
<p>使用<code>sys.argv[]</code>来读取文件的代码如下所示：</p>
<p>在桌面上新建一个文本文档<code>test_text</code>，再新建一个<code>test.py</code>Python文件，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">print(<span class="string">"Output:  "</span>)</div><div class="line">filereader = open(input_file, <span class="string">'r'</span>, newline= <span class="string">''</span>)</div><div class="line"><span class="keyword">for</span> row <span class="keyword">in</span> filereader:</div><div class="line">    print(<span class="string">"&#123;&#125;"</span>.format(row.strip()))</div><div class="line"></div><div class="line">filereader.close()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python test.py test_text.txt</div><div class="line">Output:</div><div class="line">这是第<span class="number">1</span>行；</div><div class="line">这是第<span class="number">2</span>行；</div><div class="line">这是第<span class="number">3</span>行；</div><div class="line">这是第<span class="number">4</span>行；</div><div class="line">这是第<span class="number">5</span>行；</div></pre></td></tr></table></figure>
<p>还有一种代码，就是使用<code>with</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">print(<span class="string">"Output:  "</span>)</div><div class="line"><span class="keyword">with</span> open(input_file, <span class="string">'r'</span>, newline= <span class="string">''</span>) <span class="keyword">as</span> filereader:</div><div class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> filereader:</div><div class="line">        print(<span class="string">"&#123;&#125;"</span>.format(row.strip()))</div><div class="line"></div><div class="line">filereader.close()</div></pre></td></tr></table></figure>
<h2 id="读取多个文本文件glob">读取多个文本文件<code>glob</code></h2>
<p>在实际应用过程中，有可能要同时读取多个文件。读取多个文件的实现方式之一就是在命令行中将包含输入文件目录的路径名写在Python脚本之后，如果要使用这种方法，就需要<code>os</code>模块与<code>glob</code>模块，那么完整的代码如下所示，这段代码位于桌面，命令为<code>directory_test.py</code>，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> math <span class="keyword">import</span>  exp, log, sqrt</div><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> date, time, datetime, timedelta</div><div class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</div><div class="line"><span class="keyword">import</span> glob</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">print(<span class="string">"Output:  "</span>)</div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line"><span class="keyword">for</span> input_file <span class="keyword">in</span> glob.glob(os.path.join(input_file, <span class="string">'*.txt'</span>)):</div><div class="line">    <span class="keyword">with</span> open(input_file, <span class="string">'r'</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> filereader:</div><div class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> filereader:</div><div class="line">            print(<span class="string">"&#123;&#125;"</span>.format(row.strip()))</div></pre></td></tr></table></figure>
<p>使用<code>os</code>模块可以使用其提供的与路径相关的函数，例如<code>os.path.join</code>函数可以将一个或多个路径成分连接在一起，在上面的代码中，</p>
<p><code>glob</code>模块可以找出与特定模式相匹配的所有路径名。它可以将某目录下面跟通配符模式相同的文件放到一个列表中，有了这个函数中，我们想于生成所有文件的列表就不需要使用for循环遍历目录了，而是直接使用<code>glob.glob(path + pattern)</code>的方式进行获取，可以看一下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(glob.glob(<span class="string">r'.\*.py'</span>))</div><div class="line">[<span class="string">'.\\12csv_reader_add_header_row.py'</span>, <span class="string">'.\\8csv_reader_counts_for_multiple_ﬁles.py'</span>, <span class="string">'.\\pandas_add_header_row.py'</span>]</div></pre></td></tr></table></figure>
<p>这段代码表示的内容就是，搜索当前目录下的所有<code>.py</code>文件，并显示出来。</p>
<p>另外一个类似的函数则是<code>iglob</code>，此函数则是一次只检索一个文件，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>f = glob.iglob(<span class="string">r'.\*.py'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> py <span class="keyword">in</span> f:</div><div class="line"><span class="meta">... </span>    print(py)</div><div class="line">...</div><div class="line">.\<span class="number">12</span>csv_reader_add_header_row.py</div><div class="line">.\<span class="number">8</span>csv_reader_counts_for_multiple_ﬁles.py</div><div class="line">.\pandas_add_header_row.py</div></pre></td></tr></table></figure>
<p><code>os</code>模块和<code>glob</code>模块组合在一起可以找出符合特定模式的某个文件夹下的所有文件。在这段代码的<code>for</code>循环中使用了<code>os.path.join</code>函数和<code>glob.glob</code>函数来找出符合特定模式的某个文件夹下面的所有文件。指向这个文件夹的路径包含在变量<code>input_file</code>中，这个变量需要在命令行中提供。<code>os.path.join</code>函数将这个文件夹路径和这个文件夹中所有符合特定模式的文件名连接起来，这种特定模式可以由<code>glob.glob</code>函数扩展。 这段代码使用是的模式<code>*.txt</code>来匹配由<code>.txt</code>结尾的所有文件名。</p>
<p>现在来演示一下这个案例。</p>
<p>在桌面上新建一个文件夹，命令为<code>test_directory</code>，在此目录下新建一个文本文件，命名为<code>test_1.txt</code>，输入以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">This </div><div class="line">text </div><div class="line">comes </div><div class="line">from </div><div class="line">a </div><div class="line">different </div><div class="line">text </div><div class="line">file.</div></pre></td></tr></table></figure>
<p>在此目录新建第二个文本文件，命名为<code>test_2.txt</code>，输入以下内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">这是第<span class="number">2</span>个txt文件；</div><div class="line">这是第<span class="number">2</span>个txt文件；</div><div class="line">这是第<span class="number">2</span>个txt文件；</div><div class="line">这是第<span class="number">2</span>个txt文件；</div><div class="line">这是第<span class="number">2</span>个txt文件；</div></pre></td></tr></table></figure>
<p>现在运行<code>directory_test.py</code>代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python directory_test.py <span class="string">"test_directory"</span></div><div class="line">Output:</div><div class="line">This</div><div class="line">text</div><div class="line">comes</div><div class="line"><span class="keyword">from</span></div><div class="line">a</div><div class="line">different</div><div class="line">text</div><div class="line">file.</div><div class="line">这是第<span class="number">2</span>个txt文件；</div><div class="line">这是第<span class="number">2</span>个txt文件；</div><div class="line">这是第<span class="number">2</span>个txt文件；</div><div class="line">这是第<span class="number">2</span>个txt文件；</div><div class="line">这是第<span class="number">2</span>个txt文件；</div></pre></td></tr></table></figure>
<h2 id="读取csv文件">读取<code>csv</code>文件</h2>
<p><code>csv</code>文件的全称为<code>comma-separated value</code>，即<code>逗号分隔值</code>，这是一种常用的数据存储格式。在Python中专门的<code>csv</code>模块，但这里先用最原始的python代码来实现一下。</p>
<h3 id="非csv模块读取csv文件">非csv模块读取csv文件</h3>
<p>在桌面上新建一个名为<code>read_csv.py</code>的Python文件，输入以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line"><span class="keyword">with</span> open(input_file, <span class="string">'r'</span>, newline = <span class="string">""</span>) <span class="keyword">as</span> filereader:</div><div class="line">    <span class="keyword">with</span> open(output_file, <span class="string">'w'</span>, newline = <span class="string">""</span>) <span class="keyword">as</span> filewriter:</div><div class="line">        header = filereader.readline() <span class="comment"># Read first line as header</span></div><div class="line">        header = header.strip()</div><div class="line">        header_list = header.split(<span class="string">','</span>)</div><div class="line">        print(header_list)</div><div class="line">        filewriter.wirte(<span class="string">','</span>.join(map(str,header_list)) + <span class="string">'\n'</span>)</div><div class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> filereader:</div><div class="line">            row = row.strip()</div><div class="line">            row_list = row.split(<span class="string">','</span>)</div><div class="line">            print(row_list)</div><div class="line">            filewriter.write(<span class="string">','</span>.join(map(str, row_list)) + <span class="string">'\n'</span>)</div></pre></td></tr></table></figure>
<p>在桌面上新建一个<code>test_csv.csv</code>文件，输入以下内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">header1,header2</div><div class="line">test1,test2</div><div class="line"><span class="number">123</span>,<span class="number">345</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python read_csv.py test_csv.csv <span class="string">"test_out.csv"</span></div><div class="line">[<span class="string">'header1'</span>, <span class="string">'header2'</span>]</div><div class="line">[<span class="string">'test1'</span>, <span class="string">'test2'</span>]</div><div class="line">[<span class="string">'123'</span>, <span class="string">'345'</span>]</div></pre></td></tr></table></figure>
<p>现在桌面上就有了一个输出文件，名称为<code>test_out.csv</code>。</p>
<h3 id="使用pandas模块读取csv文件">使用<code>pandas</code>模块读取csv文件</h3>
<p><code>pandas</code>是一个开源的，BSD许可的库，为Python编程语言提供高性能，易于使用的数据结构和数据分析工具。pandas可以用于读取csv文件，在下面的这段代码中，会读取csv文件，然后输出读取的内容，在桌上上新建<code>pandas_test.py</code>文件，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line">data_frame = pd.read_csv(input_file)</div><div class="line">print(data_frame)</div><div class="line">data_frame.to_csv(output_file, index=<span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python pandas_test.py test_csv.csv <span class="string">"pandas_test.csv"</span></div><div class="line">  header1 header2</div><div class="line"><span class="number">0</span>   test1   test2</div><div class="line"><span class="number">1</span>     <span class="number">123</span>     <span class="number">345</span></div></pre></td></tr></table></figure>
<p>此时在桌面上生成一个叫<code>pandas_test.csv</code>的文件。</p>
<h3 id="使用csv模块读取csv文件">使用csv模块读取csv文件</h3>
<p>python内置的<code>csv</code>模块可以读取csv文件，现在在桌上新建一个名为<code>csv_module.py</code>的文件，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> csv</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">out_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line"><span class="keyword">with</span> open(input_file, <span class="string">'r'</span>, newline = <span class="string">''</span>) <span class="keyword">as</span> csv_in_file:</div><div class="line">    <span class="keyword">with</span> open(out_file, <span class="string">'w'</span>, newline = <span class="string">''</span>) <span class="keyword">as</span> csv_out_file:</div><div class="line">        filereader = csv.reader(csv_in_file, delimiter = <span class="string">','</span>) <span class="comment"># delimiter是指默认分割符，如果导入的文件是csv，其实是不用这个参数的</span></div><div class="line">        filewriter = csv.writer(csv_out_file, delimiter = <span class="string">','</span>)</div><div class="line">        <span class="keyword">for</span> row_list <span class="keyword">in</span> filereader:</div><div class="line">            print(row_list)</div><div class="line">            filewriter.writerow(row_list)</div></pre></td></tr></table></figure>
<p>现在运行一下这个文件，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python csv_module.py test_csv.csv <span class="string">"csv_module_test.csv"</span></div><div class="line">[<span class="string">'header1'</span>, <span class="string">'header2'</span>]</div><div class="line">[<span class="string">'test1'</span>, <span class="string">'test2'</span>]</div><div class="line">[<span class="string">'123'</span>, <span class="string">'345'</span>]</div></pre></td></tr></table></figure>
<p>现在在桌上上生成了一个名为<code>csv_module_test.csv</code>的csv文件。</p>
<h2 id="读取特定的行">读取特定的行</h2>
<p>数据处理过程中通常会有一项操作是要把满足某个条件的某行数据给挑出来，通常有这几种方法：</p>
<ul>
<li>行中的值满足某个条件；</li>
<li>行中的值属于某个集合</li>
<li>行中的值匹配于某个模式（正则表达式）</li>
</ul>
<h3 id="满足某条件行的通用代码结构">满足某条件行的通用代码结构</h3>
<p>现在看一下以下的这段虚拟代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> row <span class="keyword">in</span> filereader:</div><div class="line">    ***<span class="keyword">if</span> value <span class="keyword">in</span> row meets some business rule <span class="keyword">or</span> set of rules:***</div><div class="line">        do something</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    do something <span class="keyword">else</span></div></pre></td></tr></table></figure>
<p>这段代码描述的是在输入文件中筛选出特定行的通用代码结构。</p>
<p>在平时写代码过程中只需要修改<code>***</code>中的代码，以使脚本满足具体需要即可。</p>
<h3 id="行中的值满足某个条件">行中的值满足某个条件</h3>
<p>有数据分析的实现情况中，有的时候有这种需要：当行中的值满足一个具体条件时需要保留些行。例如，我们可能希望在数据集中保留那些成本高于某个阈值的行，或者希望保留所有购买日期在一个具体日期之前的行。</p>
<p>在这种情况下，我们就可以检验行中的值是否满足具体的条件，然后筛选出满足条件的行。现在我们来描述这么一个案例：</p>
<p>保留某个供应商名字为<code>Suuplier Z</code>的行，或者是成本大于600的行，并将结果写入某个文件中。</p>
<h3 id="使用csv模块某列-索引方法">使用<code>csv</code>模块某列-索引方法</h3>
<p>在csv文中选取特定列的一种方法就是使用列的索引值来提取。例如，如果想提取数据的第1列和最后1列，就使用<code>row[0]</code>和<code>row[-1]</code>来提取。</p>
<p>在下面的这个案例中，我们只想提取供应商姓名和成本这两列，就要使用索引值来聚会这两列。</p>
<p>现在我们在桌面上新建一个名为<code>select_meets_condition.py</code>的文件，输入以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> csv</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line">my_columns = [<span class="number">0</span>, <span class="number">3</span>]</div><div class="line"><span class="keyword">with</span> open(input_file, <span class="string">'r'</span>, newline = <span class="string">''</span>) <span class="keyword">as</span> csv_in_file:</div><div class="line">    <span class="keyword">with</span> open(output_file, <span class="string">'w'</span>, newline = <span class="string">''</span>) <span class="keyword">as</span> csv_out_file:</div><div class="line">        filereader = csv.reader(csv_in_file)</div><div class="line">        filewriter = csv.writer(csv_out_file)</div><div class="line">        <span class="keyword">for</span> row_list <span class="keyword">in</span> filereader:</div><div class="line">            row_list_output = []</div><div class="line">            <span class="keyword">for</span> index_value <span class="keyword">in</span> my_columns:</div><div class="line">                row_list_output.append(row_list[index_value])</div><div class="line">            filewriter.writerow(row_list_output)</div></pre></td></tr></table></figure>
<p>现在新建一个csv文件，这个文件就是我们要使用数据文件，把它命名为<code>supplier_data_unnecessary_header_footer</code>，内容如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">I don<span class="string">'t care about this row,,,,</span></div><div class="line"><span class="string">I don'</span>t care about this row,,,,</div><div class="line">I don<span class="string">'t care about this row,,,,</span></div><div class="line"><span class="string">Supplier Name,Invoice Number,Part Number,Cost,Purchase Date</span></div><div class="line"><span class="string">Supplier X,001-1001,2341,$500.00,1/20/14</span></div><div class="line"><span class="string">Supplier X,001-1001,2341,$500.00,1/20/14</span></div><div class="line"><span class="string">Supplier X,001-1001,5467,$750.00,1/20/14</span></div><div class="line"><span class="string">Supplier X,001-1001,5467,$750.00,1/20/14</span></div><div class="line"><span class="string">Supplier X,50-9501,7009,$250.00,1/30/14</span></div><div class="line"><span class="string">Supplier X,50-9501,7009,$250.00,1/30/14</span></div><div class="line"><span class="string">Supplier X,50-9501,6650,$125.00,2/3/14</span></div><div class="line"><span class="string">Supplier X,50-9501,6650,$125.00,2/3/14</span></div><div class="line"><span class="string">Supplier X,920-4803,3321,$615.00,2/3/14</span></div><div class="line"><span class="string">Supplier X,920-4803,3321,$615.00,2/10/14</span></div><div class="line"><span class="string">Supplier X,920-4803,3321,$615.00,2/17/14</span></div><div class="line"><span class="string">Supplier X,920-4803,3321,$615.00,2/24/14</span></div><div class="line"><span class="string">I don'</span>t want this row either,,,,</div><div class="line">I don<span class="string">'t want this row either,,,,</span></div><div class="line"><span class="string">I don'</span>t want this row either,,,,</div></pre></td></tr></table></figure>
<p>用Excel打开就是下面的这个样子：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190628183046.png">

</div>
<p>现在解释一下源代码：</p>
<ol style="list-style-type: decimal">
<li>在代码中我们使用了<code>my_columns = [0, 3]</code>这个变量，0与3就是我们要提取的列的位置，也就是对应的是<code>Supplier Name</code>和<code>Cost</code>这两列。</li>
<li>代码中有2个for循环，对于输入的文件，每一行都要执行这些代码。在第1个for循环中，创建了一个空列表变量<code>row_list_output</code>。这个变量保存的是，每行中需要保留的值。</li>
<li><code>for index_value in my_columns</code>这个语句是第2个for循环语句，在<code>my_cloumns</code>中的各个索引值之间进行迭代。</li>
<li><code>row_list_output.append(row_list[index_value])</code>：使用每行中<code>my_columns</code>索引位置的值添加到<code>row_list_output</code>这个列表中。</li>
<li>现在描述一下这段代码对于第一次外部for循环的运行过程：当读取了文件的第一行后。<code>index_value</code>的值为0，随后，<code>append</code>将<code>row[3]</code>，也就是csv文件中对应的成本那一列加入到<code>row_list_output</code>。</li>
<li>再往下运行，<code>filewriter.writerow(row_list_output)</code>将提取的这个值写入输出文件。</li>
</ol>
<p>现在运行这段代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python select_meets_condition.py supplier_data_unnecessary_header_footer.csv <span class="string">"output.csv"</span> <span class="comment">#其实不加引号也行</span></div></pre></td></tr></table></figure>
<p>现在在桌面上就出现了一个新的csv文件，名称为<code>output.csv</code>，打开这个文件，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190628191313.png">

</div>
<h3 id="使用pandas模块挑出某列-索引方法">使用<code>pandas</code>模块挑出某列-索引方法</h3>
<p>使用<code>pandas</code>模块来选取某列的代码如下所示，代码保存在桌面上，命名为<code>pandas_column_by_index.py</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line">data_frame = pd.read_csv(input_file)</div><div class="line">data_frame_column_by_index = data_frame.iloc[:, [<span class="number">0</span>, <span class="number">3</span>]]</div><div class="line">data_frame_column_by_index.to_csv(output_file, index = <span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<p>运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python pandas_column_by_index.py supplier_data_unnecessary_header_footer.csv pandas_output.csv</div></pre></td></tr></table></figure>
<p>这里用到了<code>iloc</code>函数，这个函数的功能是：基于索引位置来选择数据集，那么代码中的<code>[:0, 3]</code>表示的就是选取第0列与第3列。</p>
<h4 id="iloc与loc函数的用法"><code>iloc</code>与<code>loc</code>函数的用法</h4>
<p>iloc的用法可以通过代码来演示一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="comment">#创建一个Dataframe</span></div><div class="line">data=pd.DataFrame(np.arange(<span class="number">16</span>).reshape(<span class="number">4</span>,<span class="number">4</span>),index=list(<span class="string">'abcd'</span>),columns=list(<span class="string">'ABCD'</span>))</div><div class="line">data</div><div class="line">data.loc[<span class="string">'a'</span>] <span class="comment">#取索引为'a'的行</span></div><div class="line">data.iloc[<span class="number">0</span>] <span class="comment"># 取第一行数据，索引为'a'的行就是第一行，所以结果相同</span></div><div class="line">data.loc[:,[<span class="string">'A'</span>]] <span class="comment">#取'A'列所有行，多取几列格式为 data.loc[:,['A','B']]</span></div><div class="line">data.iloc[:,[<span class="number">0</span>]] <span class="comment">#取第0列所有行，多取几列格式为 data.iloc[:,[0,1]]</span></div><div class="line">data.loc[[<span class="string">'a'</span>,<span class="string">'b'</span>],[<span class="string">'A'</span>,<span class="string">'B'</span>]] <span class="comment">#提取index为'a','b',列名为'A','B'中的数据</span></div><div class="line">data.iloc[[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">1</span>]] <span class="comment">#提取第0、1行，第0、1列中的数据</span></div><div class="line">data.loc[:,:] <span class="comment">#取A,B,C,D列的所有行</span></div><div class="line">data.iloc[:,:] <span class="comment">#取第0,1,2,3列的所有行</span></div><div class="line">data.loc[data[<span class="string">'A'</span>]==<span class="number">0</span>] <span class="comment">#提取data数据(筛选条件: A列中数字为0所在的行数据)</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>data</div><div class="line">    A   B   C   D</div><div class="line">a   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></div><div class="line">b   <span class="number">4</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span></div><div class="line">c   <span class="number">8</span>   <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span></div><div class="line">d  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span>  <span class="number">15</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>data.loc[<span class="string">'a'</span>] <span class="comment">#取索引为'a'的行</span></div><div class="line">A    <span class="number">0</span></div><div class="line">B    <span class="number">1</span></div><div class="line">C    <span class="number">2</span></div><div class="line">D    <span class="number">3</span></div><div class="line">Name: a, dtype: int32</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>data.iloc[<span class="number">0</span>] <span class="comment"># 取第一行数据，索引为'a'的行就是第一行，所以结果相同</span></div><div class="line">A    <span class="number">0</span></div><div class="line">B    <span class="number">1</span></div><div class="line">C    <span class="number">2</span></div><div class="line">D    <span class="number">3</span></div><div class="line">Name: a, dtype: int32</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>data.loc[:,[<span class="string">'A'</span>]] <span class="comment">#取'A'列所有行，多取几列格式为 data.loc[:,['A','B']]</span></div><div class="line">    A</div><div class="line">a   <span class="number">0</span></div><div class="line">b   <span class="number">4</span></div><div class="line">c   <span class="number">8</span></div><div class="line">d  <span class="number">12</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>data.iloc[:,[<span class="number">0</span>]] <span class="comment">#取第0列所有行，多取几列格式为 data.iloc[:,[0,1]]</span></div><div class="line">    A</div><div class="line">a   <span class="number">0</span></div><div class="line">b   <span class="number">4</span></div><div class="line">c   <span class="number">8</span></div><div class="line">d  <span class="number">12</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>data.loc[[<span class="string">'a'</span>,<span class="string">'b'</span>],[<span class="string">'A'</span>,<span class="string">'B'</span>]] <span class="comment">#提取index为'a','b',列名为'A','B'中的数据</span></div><div class="line">   A  B</div><div class="line">a  <span class="number">0</span>  <span class="number">1</span></div><div class="line">b  <span class="number">4</span>  <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>data.iloc[[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">1</span>]] <span class="comment">#提取第0、1行，第0、1列中的数据</span></div><div class="line">   A  B</div><div class="line">a  <span class="number">0</span>  <span class="number">1</span></div><div class="line">b  <span class="number">4</span>  <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>data.loc[:,:] <span class="comment">#取A,B,C,D列的所有行</span></div><div class="line">    A   B   C   D</div><div class="line">a   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></div><div class="line">b   <span class="number">4</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span></div><div class="line">c   <span class="number">8</span>   <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span></div><div class="line">d  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span>  <span class="number">15</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>data.iloc[:,:] <span class="comment">#取第0,1,2,3列的所有行</span></div><div class="line">    A   B   C   D</div><div class="line">a   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></div><div class="line">b   <span class="number">4</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span></div><div class="line">c   <span class="number">8</span>   <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span></div><div class="line">d  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span>  <span class="number">15</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>data.loc[data[<span class="string">'A'</span>]==<span class="number">0</span>] <span class="comment">#提取data数据(筛选条件: A列中数字为0所在的行数据)</span></div><div class="line">   A  B  C  D</div><div class="line">a  <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span></div></pre></td></tr></table></figure>
<h3 id="基于标题选取列">基于标题选取列</h3>
<p>选取特定的列也可以使用列标题来选取，尤其是当处理的文件中有相同的标题，但是列不同的时候就可以采用这种方法。在这个案例中，还以前面的那个csv文件说明一下，现在只需要保留发票号码列和购买日期列，我们采用列标题的方式来选取，输入以下代码，命名为<code>reader_column_by_name.py</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> csv</div><div class="line"><span class="keyword">import</span> sys</div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line">my_columns = [<span class="string">'Invoice Number'</span>,<span class="string">'Purchase Date'</span>]</div><div class="line">my_columns_index = []</div><div class="line"></div><div class="line"><span class="keyword">with</span> open(input_file, <span class="string">'r'</span>, newline = <span class="string">''</span>) <span class="keyword">as</span> csv_in_file:</div><div class="line">    <span class="keyword">with</span> open(output_file, <span class="string">'w'</span>, newline = <span class="string">''</span>) <span class="keyword">as</span> csv_out_file:</div><div class="line">        filereader = csv.reader(csv_in_file)</div><div class="line">        filewriter = csv.writer(csv_out_file)</div><div class="line">        header = next(filereader, <span class="keyword">None</span>)</div><div class="line">        <span class="keyword">for</span> index_value <span class="keyword">in</span> range(len(header)):</div><div class="line">            <span class="keyword">if</span> header[index_value] <span class="keyword">in</span> my_columns:</div><div class="line">                my_columns_index.append(index_value)</div><div class="line">        filewriter.writerow(my_columns)</div><div class="line">        <span class="keyword">for</span> row_list <span class="keyword">in</span> filereader:</div><div class="line">            row_list_output = []</div><div class="line">            <span class="keyword">for</span> index_value <span class="keyword">in</span> my_columns_index:</div><div class="line">                row_list_output.append(row_list[index_value])</div><div class="line">        filewriter.writerow(row_list_output)</div></pre></td></tr></table></figure>
<p>解释一下代码（略去前面已经提到的内容）：</p>
<ol style="list-style-type: decimal">
<li><code>header  = next(filereader, None)</code>:这里使用了<code>next</code>函数，它的功能是返回迭代器的下一项。<code>next</code>函数的用法是<code>next(iterator[, default])</code>，其中<code>iterator</code>是一个迭代器，而<code>default</code>则是一个可选对象，也就是说，在没有下一个元素返回时，就返回该默认值，如果不设置，又没有下一个元素时，就会触发<code>StopIteration</code>异常。</li>
</ol>
<p>这段代码是《Python数据分析基础》中的代码，根据书后面的csv文件，它的前两行是其它数据，使用上面的代码无法正确读取（只会生成标题，而没有内容），因此需要手工将前面的数据删除，形成如下内容才行：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190628203042.png">

</div>
<p>现在运行代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python reader_column_by_name.py supplier_data_unnecessary_header_footer.csv index_output.csv</div></pre></td></tr></table></figure>
<p>此时就会在桌面上生成一个名为<code>index_output.csv</code>的csv文件，打开如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190628203136.png">

</div>
<h3 id="使用pandas按标题行进行读取">使用<code>pandas</code>按标题行进行读取</h3>
<p>要使用<code>pandas</code>来读取数据，需要输入以下代码（命名为<code>pandas_column_by_name.py</code>）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line">data_frame = pd.read_csv(input_file)</div><div class="line">data_frame_column_by_name = data_frame.loc[:, [<span class="string">'Invoice Number'</span>,<span class="string">'Purchase Date'</span>]]</div><div class="line">data_frame_column_by_name.to_csv(output_file, index = <span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<p>需要注意的是，这个也要删除原始csv文件的前两行。</p>
<h3 id="常规方法选取连续的行">常规方法选取连续的行</h3>
<p>在前面的原始csv表格中，我们可以发现，前两行的内容是<code>I don’t care about this line</code>，后三行的内容是<code>I  don’t  want  this line either</code>，这些内容不是我们想要的，我们只想要中间的那些内容，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190628210317.png">

</div>
<p>因此下面演示一下如何选取中间的内容，输入以下代码，命名为<code>11csv_reader_select_contiguous_rows.py</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> csv</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line">row_counter = <span class="number">0</span></div><div class="line"></div><div class="line"><span class="keyword">with</span> open(input_file, <span class="string">'r'</span>, newline = <span class="string">''</span>) <span class="keyword">as</span> csv_in_file:</div><div class="line">    <span class="keyword">with</span> open(output_file, <span class="string">'w'</span>, newline = <span class="string">''</span>) <span class="keyword">as</span> csv_out_file:</div><div class="line">        filereader = csv.reader(csv_in_file)</div><div class="line">        filewriter = csv.writer(csv_out_file)</div><div class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> filereader:</div><div class="line">            <span class="keyword">if</span> row_counter &gt;=<span class="number">3</span> <span class="keyword">and</span> row_counter &lt;= <span class="number">15</span>:</div><div class="line">                filewriter.writerow([value.strip() <span class="keyword">for</span> value <span class="keyword">in</span> row])</div><div class="line">                print(row_counter, [value.strip() <span class="keyword">for</span> value <span class="keyword">in</span> row])</div><div class="line">            row_counter += <span class="number">1</span></div></pre></td></tr></table></figure>
<p>运行代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python <span class="number">11</span>csv_reader_select_contiguous_rows.py supplier_data_unnecessary_header_footer.csv <span class="number">11.</span>csv</div><div class="line"><span class="number">3</span> [<span class="string">'Supplier X'</span>, <span class="string">'001-1001'</span>, <span class="string">'5467'</span>, <span class="string">'$750.00'</span>, <span class="string">'1/20/14'</span>]</div><div class="line"><span class="number">4</span> [<span class="string">'Supplier X'</span>, <span class="string">'001-1001'</span>, <span class="string">'5467'</span>, <span class="string">'$750.00'</span>, <span class="string">'1/20/14'</span>]</div><div class="line"><span class="number">5</span> [<span class="string">'Supplier X'</span>, <span class="string">'50-9501'</span>, <span class="string">'7009'</span>, <span class="string">'$250.00'</span>, <span class="string">'1/30/14'</span>]</div><div class="line"><span class="number">6</span> [<span class="string">'Supplier X'</span>, <span class="string">'50-9501'</span>, <span class="string">'7009'</span>, <span class="string">'$250.00'</span>, <span class="string">'1/30/14'</span>]</div><div class="line"><span class="number">7</span> [<span class="string">'Supplier X'</span>, <span class="string">'50-9501'</span>, <span class="string">'6650'</span>, <span class="string">'$125.00'</span>, <span class="string">'2002/3/14'</span>]</div><div class="line"><span class="number">8</span> [<span class="string">'Supplier X'</span>, <span class="string">'50-9501'</span>, <span class="string">'6650'</span>, <span class="string">'$125.00'</span>, <span class="string">'2002/3/14'</span>]</div><div class="line"><span class="number">9</span> [<span class="string">'Supplier X'</span>, <span class="string">'920-4803'</span>, <span class="string">'3321'</span>, <span class="string">'$615.00'</span>, <span class="string">'2002/3/14'</span>]</div><div class="line"><span class="number">10</span> [<span class="string">'Supplier X'</span>, <span class="string">'920-4803'</span>, <span class="string">'3321'</span>, <span class="string">'$615.00'</span>, <span class="string">'2002/10/14'</span>]</div><div class="line"><span class="number">11</span> [<span class="string">'Supplier X'</span>, <span class="string">'920-4803'</span>, <span class="string">'3321'</span>, <span class="string">'$615.00'</span>, <span class="string">'2/17/14'</span>]</div><div class="line"><span class="number">12</span> [<span class="string">'Supplier X'</span>, <span class="string">'920-4803'</span>, <span class="string">'3321'</span>, <span class="string">'$615.00'</span>, <span class="string">'2/24/14'</span>]</div><div class="line"><span class="number">13</span> [<span class="string">"I don't want this row either"</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>]</div><div class="line"><span class="number">14</span> [<span class="string">"I don't want this row either"</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>]</div><div class="line"><span class="number">15</span> [<span class="string">"I don't want this row either"</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>]</div></pre></td></tr></table></figure>
<p>此时就在桌面上生成了一个名为<code>11.csv</code>的csv文件。</p>
<h2 id="添加标题行">添加标题行</h2>
<p>当电子表格中没有标题行 的时候，就需要添加列标题。此时还以前面的ccsv文件为例说明一下，删除前后几行，菾下面的样式：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190629130029.png">

</div>
<p>将文保存为<code>supplier_data_no_header_row.csv</code>格式。</p>
<h3 id="使用常规方式添加标题行">使用常规方式添加标题行</h3>
<p>在桌面上新建一个名为<code>12csv_reader_add_header_row.py</code>的Python文件，输入以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> csv</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">with</span> open(input_file, <span class="string">'r'</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> csv_in_file:</div><div class="line">    <span class="keyword">with</span> open(output_file, <span class="string">'w'</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> csv_out_file:</div><div class="line">        filereader = csv.reader(csv_in_file)</div><div class="line">        filewriter = csv.writer(csv_out_file)</div><div class="line">        header_list = [<span class="string">'Supplier Name'</span>, <span class="string">'Invoice Number'</span>,<span class="string">'Part Number'</span>,\</div><div class="line">                       <span class="string">'Cost'</span>, <span class="string">'Purchase Date'</span>]</div><div class="line">        filewriter.writerow(header_list)</div><div class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> filereader:</div><div class="line">            filewriter.writerow(row)</div></pre></td></tr></table></figure>
<p>运行代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python <span class="number">12</span>csv_reader_add_header_row.py supplier_data_no_header_row.csv add_header.csv</div></pre></td></tr></table></figure>
<p>在桌面上就生成了<code>add_header.csv</code>的新文件，打开如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190629132100.png">

</div>
<h3 id="使用pandas包添加列标题">使用<code>pandas</code>包添加列标题</h3>
<p><code>pandas</code>包中的<code>read_csv</code>函数可以直接指定输入文件不包含标题行，并哦可以提供一个列标题列表。如果要给一个没有标题行的数据集添加标题行，此文件命名为<code>pandas_add_header_row.py</code>，实现方式如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_file = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line">header_list = [<span class="string">'Supplier Name'</span>, <span class="string">'Invoice Number'</span>, <span class="string">'Part Number'</span>, \</div><div class="line">               <span class="string">'Cost'</span>, <span class="string">'Purchase Date'</span>]</div><div class="line"></div><div class="line">data_frame = pd.read_csv(input_file, header=<span class="keyword">None</span>, names= header_list)</div><div class="line">data_frame.to_csv(output_file, index=<span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<p>运行代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python pandas_add_header_row.py supplier_data_no_header_row.csv pandas_header.csv</div></pre></td></tr></table></figure>
<p>这里需要注意一下最后一行<code>data_frame.to_csv(output_file, index=False)</code>里面的<code>index=False</code>，如果设置为<code>True</code>，则会在数据集的前面再添加1列，这1列是索引，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190629133022.png">

</div>
<h2 id="读取多个csv文件">读取多个csv文件</h2>
<p>数据处理过程中常常会遇到同时处理多个csv文件的情况。</p>
<h3 id="创建3个演示csv文件">创建3个演示csv文件</h3>
<p>在桌面上创建第1个csv文件（这个文件也可以从作者的Github上下载），命名为<code>sales_january_2014.csv</code>文件内容如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190629135448.png">

</div>
<p>创建第2个csv文件，命名为<code>sales_february_2014.csv</code>，内容如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190629135656.png">

</div>
<p>创建第3个csv文件，命名为<code>sales_march_2014.csv</code>，内容如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190629135922.png">

</div>
<h3 id="文件计数与文件中的行列计数">文件计数与文件中的行列计数</h3>
<p>这一部分是要计算一下每个文件中行与列的数量，代码文件为<code>8csv_reader_counts_for_multiple_ﬁles.py</code>，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> csv</div><div class="line"><span class="keyword">import</span> glob</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_path = sys.argv[<span class="number">1</span>]</div><div class="line">file_counter = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> input_file <span class="keyword">in</span> glob.glob(os.path.join(input_path, <span class="string">'sales_*'</span>)):</div><div class="line">    row_counter = <span class="number">1</span></div><div class="line">    <span class="keyword">with</span> open(input_file, <span class="string">'r'</span>, newline = <span class="string">''</span>) <span class="keyword">as</span> csv_in_file:</div><div class="line">        filereader = csv.reader(csv_in_file)</div><div class="line">        header = next(filereader, <span class="keyword">None</span>)</div><div class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> filereader:</div><div class="line">            row_counter += <span class="number">1</span></div><div class="line">    print(<span class="string">'&#123;0!s&#125;: \t&#123;1:d&#125; rows \t&#123;2:d&#125; columns'</span>.format(os.path.basename(input_file), row_counter, len(header)))</div><div class="line">    file_counter += <span class="number">1</span></div><div class="line">print(<span class="string">'Number of files: &#123;0:d&#125;'</span>.format(file_counter))</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python <span class="number">8</span>csv_reader_counts_for_multiple_ﬁles.py <span class="string">"C:\Users\20161111\Desktop"</span></div><div class="line">sales_february_2014.csv:        <span class="number">7</span> rows  <span class="number">5</span> columns</div><div class="line">sales_january_2014.csv:         <span class="number">7</span> rows  <span class="number">5</span> columns</div><div class="line">sales_march_2014.csv:   <span class="number">7</span> rows  <span class="number">5</span> columns</div><div class="line">Number of files: <span class="number">3</span></div></pre></td></tr></table></figure>
<p>代码解释：</p>
<ol style="list-style-type: decimal">
<li><code>for input_file in glob.glob(os.path.join(input_path, 'sales_*')):</code>这里使用了<code>glob</code>模块中的<code>glob</code>函数，这个模块可以匹配某个特定模式的所有路径名，在这段代码中，搜索的模式是<code>sales_*</code>。这个模式表示要搜索所有文件名以<code>sale_</code>形状并且下划线后面可以是任意字符的文件。由于我们创建了3个csv文件，所以应该知道使用这段代码可以识别出这3个文件，它们的文件名都是以<code>sales_</code>形状的。如果我们要检索某个目录下的所有csv文件，则要将<code>sales_*</code>改为<code>*.csv</code>。</li>
<li><code>os.path.basename(path)</code>：这是返回<code>path</code>的基本文件名。即如果<code>path</code>是<code>C:\Users\Clinton\Desktop\my_input_file.csv</code>，那么<code>os.path.basename(path)</code>则返回的是是<code>my_input_file.csv</code>。</li>
</ol>
<h2 id="合并多个文件">合并多个文件</h2>
<p>有的时候需要将多个csv文件合并为一个csv文件，现在有几种合并方式。</p>
<h3 id="常规合并方式">常规合并方式</h3>
<p>先看常规方式来合并多个csv文件，输入以下代码，命名为<code>9csv_reader_concat_rows_from_multiple_ﬁles.py</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> csv</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> glob</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line">input_path = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line"></div><div class="line">first_file = <span class="keyword">True</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> input_file <span class="keyword">in</span> glob.glob(os.path.join(input_path,<span class="string">'sales_*'</span>)):</div><div class="line">    print(os.path.basename(input_file))</div><div class="line">    <span class="keyword">with</span> open(input_file, <span class="string">'r'</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> csv_in_file:</div><div class="line">        <span class="keyword">with</span> open(output_file, <span class="string">'a'</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> csv_out_file:</div><div class="line">            filereader = csv.reader(csv_in_file)</div><div class="line">            filewriter = csv.writer(csv_out_file)</div><div class="line">            <span class="keyword">if</span> first_file:</div><div class="line">                <span class="keyword">for</span> row <span class="keyword">in</span> filereader:</div><div class="line">                    filewriter.writerow(row)</div><div class="line">                first_file = <span class="keyword">False</span></div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                header = next(filereader, <span class="keyword">None</span>)</div><div class="line">                <span class="keyword">for</span> row <span class="keyword">in</span> filereader:</div><div class="line">                    filewriter(row)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python <span class="number">9</span>csv_reader_concat_rows_from_multiple_ﬁles.py <span class="string">"C:\Users\20161111\Desktop"</span> merge.csv</div><div class="line">sales_february_2014.csv</div><div class="line">sales_january_2014.csv</div><div class="line">sales_march_2014.csv</div></pre></td></tr></table></figure>
<p>此时在桌面上生成了一名为<code>merge.csv</code>的文件，打开后，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190629202951.png">

</div>
<h3 id="使用pandas包合并">使用<code>pandas</code>包合并</h3>
<p><code>pandas</code>包可以直接将多个csv文件合并为一个csv文件。基本过程就是将每个输入文件读取到pandas的数据框中，将所有数据框追加到一个数据框列表，然后使用<code>concat</code>函数将所有数据框连接成一个数据框。<code>concat</code>函数可以使用<code>axis</code>函数来设置合并数据框的试，其中<code>axis=0</code>表示从头到尾垂直合并，<code>axis=1</code>表示并排地合并。</p>
<p>使用<code>pandas</code>包合并多个csv文件的过程如下所示（文件命名为<code>pandas_concat_rows_from_multiple_ﬁles.py</code>）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> glob</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line">input_path = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line">all_files = glob.glob(os.path.join(input_path, <span class="string">'sales_*'</span>))</div><div class="line">all_data_frames = []</div><div class="line"><span class="keyword">for</span> file <span class="keyword">in</span> all_files:</div><div class="line">    data_frame = pd.read_csv(file, index_col = <span class="keyword">None</span>)</div><div class="line">    all_data_frames.append(data_frame)</div><div class="line"></div><div class="line">data_frame_concat = pd.concat(all_data_frames, axis = <span class="number">0</span>, ignore_index = <span class="keyword">True</span>)</div><div class="line">data_frame_concat.to_csv(output_file, index = <span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<p>运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python pandas_concat_rows_from_multiple_ﬁles.py <span class="string">"C:\Users\20161111\Desktop"</span> pandas_merge.csv</div></pre></td></tr></table></figure>
<h2 id="计算每个文件值中的总和与均值">计算每个文件值中的总和与均值</h2>
<p>在数据处理过程中，有的时候需要计算多个csv文件中的一些统计量，例如均值和总和。现在以前面的3个csv文件为例说明一下如何计算。</p>
<h3 id="常规计算方式">常规计算方式</h3>
<p>现在使用Python的常规方式来计算前面3个csv文件某列的总和和均值。代码如下所示（代码名称为<code>10csv_reader_sum_average_from_multiple_ﬁles.py</code>）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> csv</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> glob</div><div class="line"><span class="keyword">import</span> os</div><div class="line"></div><div class="line">input_path = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line"></div><div class="line">output_header_list = [<span class="string">'file_name'</span>, <span class="string">'total_sales'</span>, <span class="string">'average_sales'</span>]</div><div class="line">csv_out_file = open(output_file, <span class="string">'a'</span>, newline=<span class="string">''</span>)</div><div class="line">filewriter = csv.writer(csv_out_file)</div><div class="line">filewriter.writerow(output_header_list)</div><div class="line"></div><div class="line"><span class="keyword">for</span> input_file <span class="keyword">in</span> glob.glob(os.path.join(input_path, <span class="string">'sales_*'</span>)):</div><div class="line">    <span class="keyword">with</span> open(input_file, <span class="string">'r'</span>, newline = <span class="string">''</span>) <span class="keyword">as</span> csv_in_file:</div><div class="line">        filereader = csv.reader(csv_in_file)</div><div class="line">        output_list = []</div><div class="line">        output_list.append(os.path.basename(input_file))</div><div class="line">        header = next(filereader,<span class="keyword">None</span>)</div><div class="line">        total_sales = <span class="number">0.0</span></div><div class="line">        number_of_sales = <span class="number">0.0</span></div><div class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> filereader:</div><div class="line">            sale_amount = row[<span class="number">3</span>]</div><div class="line">            total_sales += float(str(sale_amount).strip(<span class="string">'$'</span>).replace(<span class="string">','</span>, <span class="string">''</span>))</div><div class="line">            number_of_sales += <span class="number">1</span></div><div class="line">        average_sales = <span class="string">'&#123;0:.2f&#125;'</span>.format(total_sales / number_of_sales)</div><div class="line">        output_list.append(total_sales)</div><div class="line">        output_list.append(average_sales)</div><div class="line">        filewriter.writerow(output_list)</div><div class="line">csv_out_file.close()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>\Desktop&gt;python <span class="number">10</span>csv_reader_sum_average_from_multiple_ﬁles.py <span class="string">"C:\Users\20161111\Desktop"</span> add_col.csv</div></pre></td></tr></table></figure>
<p>此时就会在桌面上创建一个<code>add_col.csv</code>文件，打开后如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190629211507.png">

</div>
<h3 id="pandas计算"><code>pandas</code>计算</h3>
<p><code>pandas</code>包中提供了各种统计函数，例如<code>sum</code>和<code>mean</code>。下面的代码功能是对多个文件中的某一列计算这两个统计量（总和与均值），并将每个输入文件的计算结果写入输出文件，代码保存文件为<code>pandas_sum_average_from_multiple_files.py</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python3</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> glob</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line">input_path = sys.argv[<span class="number">1</span>]</div><div class="line">output_file = sys.argv[<span class="number">2</span>]</div><div class="line">all_files = glob.glob(os.path.join(input_path, <span class="string">'sales_*'</span>))</div><div class="line">all_data_frames = []</div><div class="line"><span class="keyword">for</span> input_file <span class="keyword">in</span> all_files:</div><div class="line">    data_frame = pd.read_csv(input_file, index_col=<span class="keyword">None</span>)</div><div class="line"></div><div class="line">    total_sales = pd.DataFrame([float(str(value).strip(<span class="string">'$'</span>).replace(<span class="string">','</span>, <span class="string">''</span>)) \</div><div class="line">                               <span class="keyword">for</span> value <span class="keyword">in</span> data_frame.loc[:, <span class="string">'Sale Amount'</span>]]).sum()</div><div class="line"></div><div class="line">    average_sales = pd.DataFrame([float(str(value).strip(<span class="string">'$'</span>).replace(<span class="string">','</span>, <span class="string">''</span>)) \</div><div class="line">                                 <span class="keyword">for</span> value <span class="keyword">in</span> data_frame.loc[:, <span class="string">'Sale Amount'</span>]]).mean()</div><div class="line">    data = &#123;<span class="string">'file_name'</span>: os.path.basename(input_file),</div><div class="line">            <span class="string">'total_sales'</span>: total_sales,</div><div class="line">            <span class="string">'average_sales'</span>: average_sales&#125;</div><div class="line"></div><div class="line">    all_data_frames.append(pd.DataFrame(data, \</div><div class="line">                                        columns=[<span class="string">'file_name'</span>, <span class="string">'total_sales'</span>, <span class="string">'average_sales'</span>]))</div><div class="line">data_frames_concat = pd.concat(all_data_frames, axis=<span class="number">0</span>, ignore_index=<span class="keyword">True</span>)</div><div class="line">data_frames_concat.to_csv(output_file, index=<span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">PS D:\netdisk\pyton_data&gt; python .\pandas_read_and_write_excel.py sales_2013.xlsx pandas_out.xlsx</div><div class="line">PS D:\netdisk\pyton_data&gt;</div></pre></td></tr></table></figure>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><a href="https://www.zhihu.com/question/23711222" target="_blank" rel="external">sys.argv是什么？</a></li>
<li>克林顿·布朗利（Clinton，W.，Brownley） 著，陈光欣 译. Python数据分析基础[M]. 2017.</li>
<li><a href="https://www.pypandas.cn/" target="_blank" rel="external">Panadas中文文档</a></li>
<li><a href="https://blog.csdn.net/w_weiying/article/details/81411257" target="_blank" rel="external">Pandas中loc和iloc函数用法详解（源码+实例）</a></li>
<li><a href="https://github.com/cbrownley/foundations-for-analytics-with-python" target="_blank" rel="external">《Python数据分析基础》中源代码与数据文件</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2019/06/28/Experiment/6xHis标签/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/28/Experiment/6xHis标签/" itemprop="url">6xHis标签</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-28T12:00:00+08:00">
                2019-06-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物实验笔记/" itemprop="url" rel="index">
                    <span itemprop="name">生物实验笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,724
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  6
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="xhis标签简介">6xHis标签简介</h3>
<p>6xHis标签，也称为多组氨酸标签（polyhistidine ），His6标签或hexa组氨酸标签，这是一种在转染的细胞中目标蛋白的C端或N端上由至少6个组氨酸残基链接上所组成的氨基酸序列，它的序列如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">碱基序列：</div><div class="line">	CATCATCATCATCATCAT</div><div class="line">    或</div><div class="line">    CACCACCACCACCACCAC</div><div class="line"></div><div class="line">氨基酸序列：</div><div class="line">	HHHHHH</div></pre></td></tr></table></figure>
<h3 id="xhis标签的优点">6xHis标签的优点</h3>
<p>相对小的分子量，低的免疫原性，亲水性和在去污剂和其他添加剂存在的情况下的易变性，因此在天然和变性的条件下，多组氨酸标签是被公认为最广泛使用的亲和标签用于一系列的蛋白纯化目的。</p>
<p>可以检测和纯化重组蛋白而无需使用蛋白特异性的抗体或探针，同时抗His标签抗体的存在用于His标签蛋白的检测中使6xHis标签更加的普遍和受欢迎。</p>
<h3 id="his标签的用途">His标签的用途</h3>
<h4 id="亲和纯化蛋白">1. 亲和纯化蛋白</h4>
<p>6xHis标签通常在重组蛋白的纯化中使用，这是因为组氨酸残基的序列可以在特定的缓冲液条件下结合到几种类型固定的离子上（比如镍，钴和铜），从而达到容易检测和纯化His标签蛋白的目的。例如在大肠杆菌和其他原核系统中表达的多组氨酸标签重组蛋白通常使用固定的金属离子亲和色谱来纯化或称为IMAC，IMAC的全称是 <code>immobilized metal-affinity chromatography</code>，即<code>固定金属亲和层析</code>。</p>
<blockquote>
<p><code>亲和</code>的意思就是指采用抗原-抗体之间的特异性结合来分离出自己的目标抗原或抗体。</p>
</blockquote>
<p>IAMC一种非常有效的分离技术，它利用组氨酸能够与金属离子发生亲和作用的原理对蛋白质加以分离。例如伯乐的Profinity IMAC 介质以UNOsphere™ 为基质，含有作为二价、三价金属离子螯合配位体的亚氨基二乙酸 ( IDA )。当配位体结合有 Zn2+、Ni2+ 或 Cu2+ 等金属离子时，含组氨酸的蛋白会与此层析介质结合。</p>
<p>在亲和层析过程中，支撑物(通常是珠状琼脂糖凝胶或磁珠颗粒)用合适的耦合试剂来进行衍生，比如氨三乙酸nitrilotriaceticacid(NTA)或亚氨乙酸iminodiaceticacid(IDA)。这些螯合的基团会<strong>固定所需要的二价金属离子(比如镍，铜，钴和锌)</strong>，从而这些金属离子最后<strong>负责结合和分离混合液蛋白中的目标分子</strong>。在选择使用哪个配基上，你需要考虑IMAC树脂的结合能力主要取决于被纯化蛋白的性质和在纯化过程中所使用的金属离子。</p>
<p>镍，钴，铜是进行纯化His标签蛋白首选的被广泛使用的离子，由于它们在水溶液中对于<strong>组氨酸</strong>和<strong>半胱氨酸</strong>良好的亲和性。在这三个离子中，<strong>镍是最广泛使用的金属离子</strong>，它呈现出最高的亲和性和选择性对于His标签蛋白.然而，它也会非特异性的结合包含组氨酸群的内源蛋白。而钴提供最特异性的结合和组氨酸标签因此当纯度是首要选择时钴是二价阳离子的首选。铜离子和镍钴离子相比和His标签蛋白的结合非常强劲，但是它的特异性在三种离子中是最弱的。由于这个原因，当纯度不是最主要的目的时铜离子IMAC被使用。</p>
<p>在制备样品时，细胞被捕获和裂解通过酶法或机械条件。因为多组氨酸标签在生理PH值和离子强度下很好的结合到IMAC树脂上。结合在几乎中性缓冲液的条件下完成。大部分科研人员使用包含10-25mM咪唑的TBS溶液作为结合/漂洗缓冲液来防止带有组氨酸残基内源蛋白的非特异性的结合.被捕获的组氨酸标签蛋白的洗脱和回复通常使用增加的咪唑浓度(至少200mM)来实现，低PH值或一个过量的强螯合剂比如EDTA。</p>
<h4 id="检测目标蛋白">2. 检测目标蛋白</h4>
<p>ELISA或免疫印迹检测：可以使用镍螯合的辣根过氧化物酶来进行基于HRP组氨酸标签蛋白的检测而无需使用抗体。同时，抗6xHis的抗体是高度灵敏和特异性的对于那些含有组氨酸标签的蛋白。</p>
<p>凝胶染色：几种免疫分析方法利用多组氨酸标签通过抗多组氨酸标签抗体或通过SDS-PAGE来检测靶蛋白。</p>
<h4 id="蛋白相互作用">3. 蛋白相互作用</h4>
<p>蛋白相互作用pull-down：镍琼脂糖树脂可以用于纯化，鉴定和检测组氨酸标签蛋白的相互作用。</p>
<h3 id="文献解读">文献解读</h3>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190613142813.png">

</div>
<p>上面的图片来源于2016年发表在《Immunity》上的<code>Analysis of the Rab GTPase Interactome in Dendritic Cells Reveals Anti-microbial Functions of the Rab32 Complex in Bacterial Containment</code>，文献中就采用了<code>6xHis</code>标签来纯化Rab蛋白，只是文献中为了提高蛋白相互作用的可信度，提高蛋白的纯化效果，采用的是2个标签的纯化方法。</p>
<p>从<code>(a)</code>图中可以看到<code>FUYW-exact-6His-Rab</code>字样，这说明在Rab分子的N端加上了一个<code>6xHis</code>标签与<code>eXact</code>标签，eXact标签是一个能够自割切的枯草杆菌结构蛋白。在<code>(b)</code>图中我们可以继续看到，6xHis与Rab分子之间还加上了一个EYFP标签，这主要是为了方便构建慢病毒稳转细胞时筛选，因此文献中还提到了使用空的EYFP质粒来做了阴性对照。</p>
<p>文献中做蛋白相互作用的大致流程如下所示（其实图(b)就是纯化蛋白的过程）：</p>
<ol style="list-style-type: decimal">
<li>构建稳定表达的<code>eXact-6xHis-EYFP-Rab</code>整合蛋白的DC2.4细胞；</li>
<li>通过<code>eXact-6xHis</code>两个标签进行亲和纯化，其中<code>eXact</code>这个标签的特征在于它无需抗体进行纯化，因此就会降低引入高浓度外源抗体对质谱分析的影响，当溶液中的N3-离子浓度升高后，就会诱导eXact标签与目的蛋白之间的酶切，从而导致eXact标签被固定的蛋白酶滞留在介质上，此时洗脱下来的就是<code>6xHis-EYFP-Rab</code>重组蛋白；</li>
<li>使用Ni-NTA纯化柱来纯化<code>6xHis-EYFP-Rab</code>蛋白。</li>
</ol>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><a href="https://www.biomart.cn/experiment/430/465/469/2712861.htm" target="_blank" rel="external">6xHis 标签的特点以及它的使用方法</a></li>
<li><a href="https://www.sciencedirect.com/science/article/abs/pii/016777998590068X" target="_blank" rel="external">Purification of proteins by IMAC</a></li>
<li>Janeway’s Immunobiology 9th</li>
<li><a href="http://www.bio-rad.com/zh-cn/product/profinity-imac-resin?ID=e54ab03c-d281-4e6b-aa0d-193b7737626d&amp;pcp_loc=catprod" target="_blank" rel="external">Profinity IMAC 树脂</a></li>
<li>Analysis of the Rab GTPase Interactome in Dendritic Cells Reveals Anti-microbial Functions of the Rab32 Complex in Bacterial Containment</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2019/06/28/Experiment/双荧光素酶实验笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/28/Experiment/双荧光素酶实验笔记/" itemprop="url">双荧光素酶笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-28T12:00:00+08:00">
                2019-06-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物实验笔记/" itemprop="url" rel="index">
                    <span itemprop="name">生物实验笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,847
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  7
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="一-什么是双荧光素酶">(一) 什么是双荧光素酶？</h3>
<p>答：双荧光素酶通常是指萤火虫荧光素酶和海肾荧光素。其中荧火虫荧光素是从甲虫（Photinus pyralis）中分离得到，分子量为61kDa；而海肾（Renilla）荧光素酶则是从海肾（Renilla reniformis）中分离，分子量为36kDa。这两种酶的区别之一是他们的底物和辅因子不同：萤火虫荧光素酶需要荧光素、氧气、ATP和镁离子同时存在才能发光；而海肾荧光素酶仅需要腔肠素（coelenterazine）和氧气。萤火虫荧光素酶和海肾荧光素酶的区别之二是发光的颜色不同：萤火虫荧光素酶产生的光颜色呈现黄绿色，波长550-570nm；而海肾荧光素酶产生蓝光，波长480nm。正是由于这两种酶的底物和发光颜色不同，所以在双报告实验中得到广泛应用，它们的发光原理如下所示：<br>
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190707175539.png"></p>
<h3 id="二-为什么要采用双荧光素酶报告系统">(二) 为什么要采用双荧光素酶报告系统？</h3>
<p>答：单报告基因实验往往会受到各种实验条件的影响，而双报告基因则通过共转染的“对照”作为内参为试验提供一基准线，从而可以在最大程度上减小细胞活性和转染效率等外在因素对实验的影响，使得数据结果更为可信。</p>
<h3 id="三-双荧光素酶在mirna验证其靶基因方面的原理是什么">(三) 双荧光素酶在miRNA验证其靶基因方面的原理是什么？</h3>
<p>答：双萤光素酶报告基因检测系统在细胞中同时表达萤火虫萤光素酶和海肾萤光素酶，两者没有种源同源性并对应不同的反应底物，故而没有交叉干扰。得益于超强的光信号和超高的信噪比，本系统被广泛用于 miRNA 靶基因验证。 miRNA 主要通过作用于靶基因的 3’UTR 起作用，可以将目的基因 3’UTR 区域构建至载体中报告基因 luciferase 的后面，通过比较过表达或者干扰 miRNA 后，报告基因表达的改变（监测萤光素酶的活性变化）可以定量反映 miRNA 对目的基因的抑制作用，也即用荧光值来判断miRNA是否和靶基因结合。</p>
<h3 id="四-在利用双荧光素酶验证mirna的靶基因方面插入的3utr长度应该是多少">(四) 在利用双荧光素酶验证miRNA的靶基因方面，插入的3’UTR长度应该是多少？</h3>
<p>答：靶基因的3’UTR长度不一，将全长都插入载体中不切实际，通常只插入包括miRNA结合位点前后200bp左右的序列，大概就是400bp[1]，但也有文献插入的是80个bp[2]，有文献选择了200多个bp[3]，但严格来讲，应该选择400bp，以结合位点为中心，上游200bp，下游200bp。</p>
<h3 id="五-常用的双荧光素酶载体有哪些">(五) 常用的双荧光素酶载体有哪些？</h3>
<p>答：常用的载体有两种策略。第一种是两种荧光素分别位于两个载体上，第二种是两种荧光素酶位于同一个载体上。以第一种为例，这两种载体分别为pMIR-REPORT miRNA载体和pRL-TK载体。经检索发现，pMIR-REPORT miRNA载体是由Ambion开发的载体，它用来克隆插入miRNA靶序列，评估细胞内miRNA功能的载体，该载体的图谱如下所示：</p>
<p><img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190707175303.png"> 另外的一个载体是pRL-TK载体，这个载体是由Promega开发的，pRL-TK是海肾荧光素酶报告载体，含有SV40增强子，质粒图谱如下所示： <img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190707175327.png"> 从这两个图谱中可以发现，pMIR-REPORT miRNA这个载体主要是用于评估miRNA与靶基因3’UTR的结合，靶基因的3’UTR放在荧光素酶的后面，这个荧光素酶是荧火虫荧光素酶，而pRL-TK这个载体则表达海肾荧光素酶，将这两个质粒共同转染进入293细胞中来检测荧光时，pRL-TK这个质粒起到一个内参的作用。</p>
<p>第二种方案就是将荧火虫荧光素酶与海肾荧光素酶构建到一个载体上，这样偏差更小，毕竟转染一个质粒比转染两个质粒要容易，在这方面，根据检索到的资料显示，现在的这类质比较有名的是Promega公司的pmirGLO质粒，图谱如下所示： <img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190707175348.png"> 另外的质粒就是国产的，即复能基因的pEZX-MT06质粒，图谱如下所示： <img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190707175405.png"></p>
<h3 id="六-在检测mirna靶基因时需要设置多少个分组">(六) 在检测miRNA靶基因时，需要设置多少个分组？</h3>
<p>答：首先要知道，插入的靶基因原始3’UTR的质粒叫野生型质粒，除此之外，还需要在萤火虫荧光素酶3’UTR插入miRNA结合位点突变的序列载体，这个质粒通常叫突变型质粒，最后还有各种对照载体，包括萤火虫荧光素酶空载体，miRNA空载体，还有海肾素荧光载体，以文献中的案例[4]说明，此文献使用了6组来进行验证，其分组以及分组说明如下所示： <img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190707175421.png"> 注：pGL3是荧光素酶报告质粒，绿色的是对照组，即不加miRNA质粒，红色的是正常组，加miRNA质粒。思路即为荧光素酶质粒（3种情况：①空质粒；②加了WT靶基因3’UTR的质粒；③加了MUT的靶基因3’UTR的质粒）×miRNA precursor（两种情况，即加与不加），经排列组合，即为6组，详细说明如下所示：</p>
<p>第一组 荧光素酶质粒pGL3不加3’UTR片段 + miRNA载体质粒 第二组 荧光素酶质粒pGL3不加3’UTR片段 + miR-200c质粒 第三组 荧光素酶质粒pGL3 -WT-3’UTR+ + miRNA载体质粒 第四组 重点：荧光素酶质粒pGL3 -WT3’UTR + miR-200c质粒 第五组 荧光素酶质粒pGL3 -MUT-3‘UTR+ miRNA载体质粒 第六组 重点：荧光素酶质粒pGL3 -MUT-3‘UTR + miR-200c质粒 理想结果：第四组降低，即miRNA能够与靶基因的3UTR结合，第六组不变，即突变后靶基因3‘UTR不与miRNA结合。</p>
<h3 id="七-在检测荧光方面所使用的仪器是哪些">(七) 在检测荧光方面，所使用的仪器是哪些？</h3>
<p>答：最经典的仪器就是Promega的GloMax 20/20 发光检测仪，但这种仪器只适合一次检测一个酝酿。但也可以用多功能酶标仪来检测（本实验室的仪器是VARIOSKAN LUX），这种酶标仪可以实现多通量检测。萤火虫荧光素酶产生的光颜色呈现黄绿色，波长550-570nm；而海肾荧光素酶产生蓝光，波长480nm。</p>
<h3 id="八-测得结果的数据如何处理">(八) 测得结果的数据如何处理？</h3>
<p>答：测得的结果一个萤火虫荧光素酶产生的光信号，记为RL1，，海肾荧光素酶产生的信号，记为RL2。RL1/RL2将数据均一化后，每两组之间用ANOVA检测即可。</p>
<h3 id="九-参考资料">(九) 参考资料</h3>
<ol style="list-style-type: decimal">
<li>Nicolas, F.E., Experimental Validation of MicroRNA Targets Using a Luciferase Reporter System, in MicroRNAs in Development: Methods and Protocols, T. Dalmay, Editor. 2011, Humana Press: Totowa, NJ. p. 139-152.</li>
<li>Zhu, J., et al., TNF-alpha mRNA is negatively regulated by microRNA-181a-5p in maturation of dendritic cells induced by high mobility group box-1 protein. Sci Rep, 2017. 7(1): p. 12239.</li>
<li>Zhu, S., et al., MicroRNA-21 targets the tumor suppressor gene tropomyosin 1 (TPM1). J Biol Chem, 2007. 282(19): p. 14328-36.</li>
<li>Shimono, Y., et al., Downregulation of miRNA-200c links breast cancer stem cells with normal stem cells. Cell, 2009. 138(3): p. 592-603.</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2019/06/27/Experiment/蛋白质谱笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/27/Experiment/蛋白质谱笔记/" itemprop="url">蛋白质谱笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-27T12:00:00+08:00">
                2019-06-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物实验笔记/" itemprop="url" rel="index">
                    <span itemprop="name">生物实验笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  23
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>测试脚注</p>
<p>文献1<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></p>
<p>文献2<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p>
<p>30参考文献</p>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>测试444444444444444444444444<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>测试3444444444444444444444444<a href="#fnref2">↩</a></p></li>
</ol>
</div>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">RVDSD</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">192</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">74</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RVDSD</span>

  
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_pv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>

<div class="BbeiAn-info">
	<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41018102000118" style="color:#909090;text-decoration:none;padding-left:30px;no-repeat left center" rel="nofollow">豫公网安备 41018102000118</a>	  <!--这里将图标作为了背景，以使得能和后面的文字在同一行-->
</div>

  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共733.0k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
