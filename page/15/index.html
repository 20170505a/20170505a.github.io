<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="RVDSD的个人笔记本">
<meta property="og:url" content="http://rvdsd.top/page/15/index.html">
<meta property="og:site_name" content="RVDSD的个人笔记本">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RVDSD的个人笔记本">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://rvdsd.top/page/15/"/>





  <title>RVDSD的个人笔记本</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RVDSD的个人笔记本</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/16/Python/Python学习笔记（15）-异常/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/16/Python/Python学习笔记（15）-异常/" itemprop="url">Python学习笔记（15）-黑马教程-异常</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-16T12:00:00+08:00">
                2018-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,682
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  18
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="异常的概念">异常的概念</h2>
<p>程序在运行时，如果<code>Python解释器</code>遇到了一个错误，Python解释器就会停止程序的执行，并且提示一些错误信息，这就是<strong>异常</strong>。</p>
<p>程序停止执行并提示错误信息的这个动作我们称之为<strong>抛出异常</strong>。</p>
<p>现在我们来了解一下Python为什么会抛出异常，看一个简单的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">6</span>]: num = int(input(<span class="string">"请输入一个数字  "</span>))</div><div class="line">请输入一个数字  a</div><div class="line">---------------------------------------------------------------------------</div><div class="line">ValueError                                Traceback (most recent call last)</div><div class="line">&lt;ipython-input<span class="number">-6</span>-f1f596245a67&gt; <span class="keyword">in</span> &lt;module&gt;()</div><div class="line">----&gt; 1 num = int(input("请输入一个数字  "))</div><div class="line"></div><div class="line">ValueError: invalid literal <span class="keyword">for</span> int() <span class="keyword">with</span> base <span class="number">10</span>: <span class="string">'a'</span></div></pre></td></tr></table></figure>
<p>在这个案例中，我们先输入了一段代码，用于接收用户输入的整数，即<code>num = int(input(&quot;请输入一个数字  &quot;))</code>，但是当我们输入了一个<code>a</code>后，Python的解释器就报错了，并且解释器提示，输入的这个<code>a</code>无法用于<code>int()</code>函数，它只支持10进行的转换，这就是抛出异常。这说明，即使我们输入的是一段在语法上正确的代码，但是它在执行上还有可能报错的，因为我们无法判断用户在输入内容上，用户输入的是一个数字还是字母。</p>
<p>因此当我们面临类似的情况时，我们就需要处理这种特殊情况，我们看一下示意图：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190607220308.png">

</div>
<p>从示意图上我们可以知道，当程序遇到错误时，会抛出异常，这个异常就是我们在设计程序时需要考虑到的情况，这种情况是抛给最初设计程序的程序员的，程序员会针对这种情况输出一定的反馈信息，例如，我们设计程序时，如果有输入性别的选项，有人输入了一个数字，那么就是错误的，程序需要针对这种情况提前设计相应的反馈信息。</p>
<h2 id="捕获异常语法">捕获异常语法</h2>
<p>在程序开发中，如果对某些代码执行不能确定是否正确，可以增加<code>try</code>来捕获异常，捕获异常最简单的语法格式如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">    尝试执行的代码</div><div class="line"><span class="keyword">except</span>:</div><div class="line">    出现错误的处理</div></pre></td></tr></table></figure>
<p>这里解释一下：<code>try</code>是指下方编写要尝试执行的代码，也就是那些<strong>不确定是否能够正常执行的代码</strong>。<code>except</code>指的是，<code>try</code>下方执行失败后，需要执行哪些代码。</p>
<h3 id="捕获异常的案例">捕获异常的案例</h3>
<p>现在还是看前面的那个案例，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">num = int(input(<span class="string">"请输入一个整数： "</span>))</div></pre></td></tr></table></figure>
<p>现在我们输入一个<code>4</code>，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">请输入一个整数： <span class="number">4</span></div></pre></td></tr></table></figure>
<p>这种情况下，程序运行是正常的，现在我们输入一个<code>a</code>，程序运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">请输入一个整数： a</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/异常/hm_01_简单的异常捕获.py"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    num = int(input(<span class="string">"请输入一个整数： "</span>))</div><div class="line">ValueError: invalid literal <span class="keyword">for</span> int() <span class="keyword">with</span> base <span class="number">10</span>: <span class="string">'a'</span></div></pre></td></tr></table></figure>
<p>程序运行出错。</p>
<p>上面还是原来的内容，现在我们使用<code>try...except...</code>语法实现一下类似的功能，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">    num = int(input(<span class="string">"请输入一个整数： "</span>))</div><div class="line"></div><div class="line"><span class="keyword">except</span>:</div><div class="line">    print(<span class="string">"请输入正确的整数： "</span>)</div><div class="line"></div><div class="line">print(<span class="string">"-"</span> *<span class="number">50</span>)</div></pre></td></tr></table></figure>
<p>现在我们输入一个<code>4</code>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">请输入一个整数： <span class="number">4</span></div><div class="line">--------------------------------------------------</div></pre></td></tr></table></figure>
<p>现在我们输入一个<code>a</code>，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">请输入一个整数： a</div><div class="line">请输入正确的整数： </div><div class="line">--------------------------------------------------</div></pre></td></tr></table></figure>
<p>现在我们发现了，<code>except</code>下面的代码得到了执行。并且两种情况下，最后一行代码，也就是<code>print(&quot;-&quot; * 50)</code>的执行不受影响。</p>
<h2 id="错误类型的捕获">错误类型的捕获</h2>
<p>在程序执行时，可能遇到<strong>不同类型的异常</strong>，并且需要<strong>针对不同类型的异常，做出不同的响应</strong>，这个时候就需要捕获错误类型了，这种情况下的语法格式如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="comment"># 尝试执行的代码</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"><span class="keyword">except</span> 错误类型<span class="number">1</span>:</div><div class="line">    <span class="comment"># 针对错误类型1，对应的代码处理</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"><span class="keyword">except</span> (错误类型<span class="number">2</span>, 错误类型<span class="number">3</span>):</div><div class="line">    <span class="comment"># 针对错误类型2和3，对应的代码处理</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</div><div class="line">    print(<span class="string">"未知错误 %s"</span> % result)</div></pre></td></tr></table></figure>
<p>当<code>Python</code>解释器抛出异常时，最后一行错误信息的第一个单词，就是错误类型。</p>
<h3 id="异常类型捕获案例">异常类型捕获案例</h3>
<p>我们还以前面的让用户输入整数的案例为例说明一下：</p>
<p>这个程序的需求为：①提示用户输入一个整数；②使用<code>8</code>这个整数除以刚刚用户输入的整数并输出，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 提示用户输入一个整数</span></div><div class="line">num = int(input(<span class="string">"输入一个整数： "</span>))</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 使用 8 除以用户输入的整数并输入</span></div><div class="line">result = <span class="number">8</span>/num</div><div class="line">print(result)</div></pre></td></tr></table></figure>
<p>现在我们输入一个<code>10</code>，看一下运行结果，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">输入一个整数： <span class="number">10</span></div><div class="line"><span class="number">0.8</span></div></pre></td></tr></table></figure>
<p>现在我们再输入一个字母<code>a</code>，我们看一下结果，结果会出错：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">输入一个整数： a</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/异常/hm_02_捕获错误类型.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    num = int(input(<span class="string">"输入一个整数： "</span>))</div><div class="line">ValueError: invalid literal <span class="keyword">for</span> int() <span class="keyword">with</span> base <span class="number">10</span>: <span class="string">'a'</span></div></pre></td></tr></table></figure>
<p>但是，这个程序还有可能在<code>num</code>这个地方出错，因为如果用户输入的是一个<code>0</code>，那么<code>result = 8 / num</code>中除数就是0了，没有意义，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">输入一个整数： <span class="number">0</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/异常/hm_02_捕获错误类型.py"</span>, line <span class="number">6</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    result = <span class="number">8</span>/num</div><div class="line">ZeroDivisionError: division by zero</div></pre></td></tr></table></figure>
<p>因此针对上面的这些情况，我们都要考虑到这些异常的具体情况，针对每一种具体情况来进行设计。</p>
<p>现在我们还需要了解一点就是，我们如何知道错误类型，前面我们提到，当Python解释器抛出异常时，最后一行错误信息的第一个单词，就是错误类型，现在我们具体的来看一下：</p>
<p>前面的2种错误的第一个单词分别是<code>ValueError</code>和<code>ZeroDivisionError</code>，这就是错误类型，现在我们将这个错误类型添加到代码中，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="comment"># 提示用户输入一个整数</span></div><div class="line">    num = int(input(<span class="string">"输入一个整数： "</span>))</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment"># 使用 8 除以用户输入的整数并输入</span></div><div class="line">    result = <span class="number">8</span>/num</div><div class="line">    print(result)</div><div class="line"></div><div class="line"><span class="keyword">except</span> ZeroDivisionError:</div><div class="line">    print(<span class="string">"除0错误"</span>)</div></pre></td></tr></table></figure>
<p>运行代码，我们输入一个<code>0</code>，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">输入一个整数： <span class="number">0</span></div><div class="line">除<span class="number">0</span>错误</div></pre></td></tr></table></figure>
<p>当我们添加了这些代码后，Python解释器就会抛出异常了。</p>
<p>现在我们再来设计针对输入字母这种情况，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="comment"># 提示用户输入一个整数</span></div><div class="line">    num = int(input(<span class="string">"输入一个整数： "</span>))</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment"># 使用 8 除以用户输入的整数并输入</span></div><div class="line">    result = <span class="number">8</span>/num</div><div class="line">    print(result)</div><div class="line"></div><div class="line"><span class="keyword">except</span> ZeroDivisionError:</div><div class="line">    print(<span class="string">"除0错误"</span>)</div><div class="line"></div><div class="line"><span class="keyword">except</span> ValueError:</div><div class="line">    print(<span class="string">"输入的不是整数"</span>)</div></pre></td></tr></table></figure>
<p>现在我们运行代码，输入一个字母<code>a</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">输入一个整数： a</div><div class="line">输入的不是整数</div></pre></td></tr></table></figure>
<p>这个案例说明了针对不止一种错误类型的处理方式。</p>
<h3 id="捕获未知错误">捕获未知错误</h3>
<p>在开发中，我们要预判到所有可能出现的错误有一定难度。如果希望程序无论出现任何错误，都<strong>不会因为Python解释器抛出异常而被终止</strong>，我们可能再增加一个except，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</div><div class="line">    print(<span class="string">"未知错误 %s"</span> % result)</div></pre></td></tr></table></figure>
<p>现在我们把前面的案例中的那个除数为0的错误删除，使用这种未知错误来写一下，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="comment"># 提示用户输入一个整数</span></div><div class="line">    num = int(input(<span class="string">"输入一个整数： "</span>))</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment"># 使用 8 除以用户输入的整数并输入</span></div><div class="line">    result = <span class="number">8</span>/num</div><div class="line">    print(result)</div><div class="line"></div><div class="line"><span class="keyword">except</span> ValueError:</div><div class="line">    print(<span class="string">"输入的不是整数"</span>)</div><div class="line"></div><div class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</div><div class="line">    print(<span class="string">"未知错误 %s"</span> % result)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">输入一个整数： <span class="number">0</span></div><div class="line">未知错误 division by zero</div></pre></td></tr></table></figure>
<p>因此，在捕获异常时，最好在最后加上这么这么一句，即<code>except Exception as result:</code>，其中<code>Exception</code>是Python是有关错误的一个类。</p>
<h2 id="异常捕获的完整语法">异常捕获的完整语法</h2>
<p>在实际开发中，为了能够处理复杂的异常情况，完整的异常语法如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="comment"># 尝试执行的代码</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"><span class="keyword">except</span> 错误类型<span class="number">1</span>:</div><div class="line">    <span class="comment"># 针对错误类型1，对应的代码处理</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"><span class="keyword">except</span> 错误类型<span class="number">2</span>:</div><div class="line">    <span class="comment"># 针对错误类型2，对应的代码处理</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"><span class="keyword">except</span> (错误类型<span class="number">3</span>，错误类型<span class="number">4</span>):</div><div class="line">    <span class="comment"># 针对错误类型3和4，对应的代码处理</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</div><div class="line">    <span class="comment"># 打印错误信息</span></div><div class="line">    print(result)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="comment"># 没有异常才会执行的代码</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"><span class="keyword">finally</span>:</div><div class="line">    <span class="comment"># 无论是否有异常，都会执行的代码</span></div><div class="line">    print(<span class="string">"无论是否有异常，都会执行的代码"</span>)</div></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li><code>else</code>只有在没有异常时才会执行的代码；</li>
<li><code>finally</code>无论是否有异常，都会执行的代码。</li>
</ul>
<p>现在我们求救一下前面案例的<strong>完整捕获异常</strong>，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="comment"># 提示用户输入一个整数</span></div><div class="line">    num = int(input(<span class="string">"输入一个整数： "</span>))</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment"># 使用 8 除以用户输入的整数并输入</span></div><div class="line">    result = <span class="number">8</span>/num</div><div class="line">    print(result)</div><div class="line"></div><div class="line"><span class="keyword">except</span> ValueError:</div><div class="line">    print(<span class="string">"输入的不是整数"</span>)</div><div class="line"></div><div class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</div><div class="line">    print(<span class="string">"未知错误 %s"</span> % result)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">"尝试成功"</span>)</div><div class="line"><span class="keyword">finally</span>:</div><div class="line">    print(<span class="string">"无论是否出现错误，都会执行的代码"</span>)</div><div class="line"></div><div class="line">print(<span class="string">"-"</span> * <span class="number">50</span>)</div></pre></td></tr></table></figure>
<p>现在我们输入数字<code>1</code>，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">输入一个整数： <span class="number">1</span></div><div class="line"><span class="number">8.0</span></div><div class="line">尝试成功</div><div class="line">无论是否出现错误，都会执行的代码</div><div class="line">--------------------------------------------------</div></pre></td></tr></table></figure>
<p>从结果中我们可以发现，在没有错误出现的情况下，<code>else</code>与<code>finally</code>下面的代码都得到了执行。</p>
<p>现在我们输入数字<code>0</code>，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">输入一个整数： <span class="number">0</span></div><div class="line">未知错误 division by zero</div><div class="line">无论是否出现错误，都会执行的代码</div><div class="line">--------------------------------------------------</div></pre></td></tr></table></figure>
<p>从结果中我们可以发现，在出现错误出现的情况下，<code>else</code>下面的代码<strong>不执行</strong>，直接输出异常情况下的错误信息，并且<code>finally</code>下面的代码也得到了执行，因为<code>finally</code>下面的代码无论什么情况下都会执行，并且最后一行的代码<code>print(&quot;-&quot; * 50)</code>也得到了执行，因为抛出异常的完整代码部分就是从<code>try</code>开始，到<code>finally</code>结束，之后的代码就都正常执行了。</p>
<h2 id="异常的传递">异常的传递</h2>
<p>异常的传递是指，当<strong>函数/方法</strong>执行出现异常时，会将异常传递给函数/方法的调用一方，此时程序还不会被终止，如果传递到主程序，仍然没有异常处理，这个时候，程序才会被终止。</p>
<p>现在我们来验证一下异常的传递，先来看一下需求：</p>
<ol style="list-style-type: decimal">
<li>定义函数<code>demo1()</code>，提示用户输入一个整数并且返回；</li>
<li>定义函数<code>demo2()</code>，调用<code>demo1()</code>；</li>
<li>在主程序中调用<code>demo2()</code>。</li>
</ol>
<p>完整代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo1</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> int(input(<span class="string">"输入整数： "</span>))</div><div class="line"></div><div class="line">print(demo1())</div></pre></td></tr></table></figure>
<p>运行程序，我们输入一个<code>1</code>，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">输入整数： <span class="number">1</span></div><div class="line"><span class="number">1</span></div></pre></td></tr></table></figure>
<p>程序运行正常。现在我们输入一个字母<code>a</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">输入整数： a</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/异常/hm_05_异常的传递.py"</span>, line <span class="number">4</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    print(demo1())</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/异常/hm_05_异常的传递.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> demo1</div><div class="line">    <span class="keyword">return</span> int(input(<span class="string">"输入整数： "</span>))</div><div class="line">ValueError: invalid literal <span class="keyword">for</span> int() <span class="keyword">with</span> base <span class="number">10</span>: <span class="string">'a'</span></div></pre></td></tr></table></figure>
<p>程序报错，最下面的错误信息是<code>ValueError: invalid literal for int() with base 10: 'a'</code>，这是说明，输入的字母无法被<code>int()</code>函数识别。</p>
<p>我们再往上看，有<code>line 2, in demo1 return int(input(&quot;输入整数： &quot;))</code>字样，也就是说错误出现在了第2行，第2行在转换整数的时候出现了问题。但是，第2行代码出现问题的时候，会把异常交给第4行，也就是解释器出现的这个信息<code>line 4, in &lt;module&gt;     print(demo1())</code>。第4行代码是主程序，也就是<code>print(demo1())</code>，它是在调用第2行的函数，第2行代码本身是不做异常处理的，主程序中没有做异常处理，因此程序就终止了。</p>
<p>现在我们再改造一下原代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo1</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> int(input(<span class="string">"输入整数： "</span>))</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo2</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> demo1()</div><div class="line"></div><div class="line"></div><div class="line">print(demo1())</div></pre></td></tr></table></figure>
<p>现在我们再输入一个字母<code>a</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">输入整数： a</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/异常/hm_05_异常的传递.py"</span>, line <span class="number">9</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    print(demo2())</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/异常/hm_05_异常的传递.py"</span>, line <span class="number">6</span>, <span class="keyword">in</span> demo2</div><div class="line">    <span class="keyword">return</span> demo1()</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/异常/hm_05_异常的传递.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> demo1</div><div class="line">    <span class="keyword">return</span> int(input(<span class="string">"输入整数： "</span>))</div><div class="line">ValueError: invalid literal <span class="keyword">for</span> int() <span class="keyword">with</span> base <span class="number">10</span>: <span class="string">'a'</span></div></pre></td></tr></table></figure>
<p>从错误信息中我们可以知道这些信息：</p>
<ol style="list-style-type: decimal">
<li>出错的代码还是第2行，提示demo1函数出现的问题；</li>
<li>错误信息往上，我们发现了第2行代码出错时，会把错误传递给第6行，因为第6行中的demo2()函数调用了demo1()函数，继续提示demo2出现了问题，但此时我们并没有在demo2内部针对异常进行处理，此时继续向上传递，传递到了第9行；</li>
<li>第9行传递到了主程序，也就是<code>print(deom2())</code>。</li>
</ol>
<p>从上面的结果我们可以知道，一旦出现异常，异常会一级一级向上传递，一直到主程序，直到主程序终止运行。</p>
<p>如果我们在实际设计程序中，如果在每一个函数中都设计异常处理，这样代码量会非常大，不现实。因此我们可以利用异常的传递性，可以在主程序中捕获异常即可，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo1</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> int(input(<span class="string">"输入整数： "</span>))</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo2</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> demo1()</div><div class="line"></div><div class="line"><span class="comment"># 利用异常的传递性，在主程序捕获异常</span></div><div class="line"><span class="keyword">try</span>:</div><div class="line">    print(demo2())</div><div class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</div><div class="line">    print(<span class="string">"未知3错误 %s"</span> % result)</div></pre></td></tr></table></figure>
<p>现在运行程序，输入一个字母<code>a</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">输入整数： a</div><div class="line">未知错误 invalid literal <span class="keyword">for</span> int() <span class="keyword">with</span> base <span class="number">10</span>: <span class="string">'a'</span></div></pre></td></tr></table></figure>
<p>从结果中我们可以发现，我们只在主程序中添加了异常捕获，就不用在每个函数中对异常进行捕获了。</p>
<p>现在总结一下，利用异常的传递性在开发程序中的好处：可以将精力放在函数的代码逻辑上，不用花太多精力放在异常捕获上，只要函数开发完成，就可以在主程序中添加异常捕获。</p>
<h2 id="抛出异常">抛出异常</h2>
<p>在开发中，除了代码执行出错，Python解释会自己抛出异常之外。我们还可以根据应用程序特有的功能来主动抛出异常，现在我们来看一个案例。</p>
<p>例如我们要添加一个用户登录模块，里面有一个函数，这个函数的功能是：提示用户输入密码，如果长度少于8，那么就抛出异常，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190607233243.png">

</div>
<p>这里需要注意的是，当前这个函数<strong>只负责</strong>提示用户输入密码，如果密码长度不正确，需要其他的函数进行额外处理。</p>
<h3 id="抛出异常-1">抛出异常</h3>
<p>Python中提供了一个<code>Exception</code>异常类。在开发时，如果满足特定功能需求时，希望抛出异常，可以做两件事情：</p>
<ol style="list-style-type: decimal">
<li>创建一个<code>Exception</code>的<strong>对象</strong>；</li>
<li>使用<code>raise</code>关键字抛出<strong>异常对象</strong>。</li>
</ol>
<p>我们来看一下前面案例的需求：</p>
<ol style="list-style-type: decimal">
<li>定义<code>input_password</code>函数，提示用户输入密码；</li>
<li>如果用户输入长度小于8，抛出异常；</li>
<li>如果用户输入长度大于等于8，返回输入的密码。</li>
</ol>
<p>现在来看一下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">input_password</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 1. 提示用户输入密码</span></div><div class="line">    pwd = input(<span class="string">"请输入密码： "</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 2. 判断密码长度 &gt;= 8， 返回用户输入的密码</span></div><div class="line">    <span class="keyword">if</span> len(pwd) &gt;= <span class="number">8</span>:</div><div class="line">        <span class="keyword">return</span> pwd</div><div class="line"></div><div class="line">    <span class="comment"># 3. 如果密码 &lt; 8，主动抛出异常</span></div><div class="line">    print(<span class="string">"主动抛出异常"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 提示用户输入密码</span></div><div class="line">print(input_password())</div></pre></td></tr></table></figure>
<p>现在运行代码，我们输入12345678，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">请输入密码： <span class="number">123456789</span></div><div class="line"><span class="number">123456789</span></div></pre></td></tr></table></figure>
<p>现在我们输入123，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">请输入密码： <span class="number">123</span></div><div class="line">主动抛出异常</div><div class="line"><span class="keyword">None</span></div></pre></td></tr></table></figure>
<p>从结果中我们可以发现，输出了异常，并且还有一个<code>None</code>，这里为什么会输出<code>None</code>呢，这是因为在代码中，抛出异常时，并没有任何返回，所以就返回了<code>None</code>。</p>
<p>现在再更改一下代码，需要创建一个<code>Exception</code>类对象，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">input_password</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 1. 提示用户输入密码</span></div><div class="line">    pwd = input(<span class="string">"请输入密码： "</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 2. 判断密码长度 &gt;= 8， 返回用户输入的密码</span></div><div class="line">    <span class="keyword">if</span> len(pwd) &gt;= <span class="number">8</span>:</div><div class="line">        <span class="keyword">return</span> pwd</div><div class="line"></div><div class="line">    <span class="comment"># 3. 如果密码 &lt; 8，主动抛出异常</span></div><div class="line">    print(<span class="string">"主动抛出异常"</span>)</div><div class="line">    <span class="comment"># 第一步：创建异常对象</span></div><div class="line">    ex = Exception(<span class="string">"密码长度不够"</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 第二步：主动抛出异常</span></div><div class="line">    <span class="keyword">raise</span> ex</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 提示用户输入密码</span></div><div class="line">print(input_password())</div></pre></td></tr></table></figure>
<p>运行结果，我们输入123，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">请输入密码： <span class="number">123</span></div><div class="line">主动抛出异常</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/异常/hm_06_抛出异常.py"</span>, line <span class="number">21</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    print(input_password())</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/异常/hm_06_抛出异常.py"</span>, line <span class="number">16</span>, <span class="keyword">in</span> input_password</div><div class="line">    <span class="keyword">raise</span> ex</div><div class="line">Exception: 密码长度不够</div></pre></td></tr></table></figure>
<p>从结果我们可以看出现，程序出错的代码在第16行，也就是<code>raise ex</code>这一句。根据异常的传递性，继续向上看，异常传递到第22行，也就是<code>print(input_password())</code>这一句，此时我们使用try来改一下这句，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">input_password</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 1. 提示用户输入密码</span></div><div class="line">    pwd = input(<span class="string">"请输入密码： "</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 2. 判断密码长度 &gt;= 8， 返回用户输入的密码</span></div><div class="line">    <span class="keyword">if</span> len(pwd) &gt;= <span class="number">8</span>:</div><div class="line">        <span class="keyword">return</span> pwd</div><div class="line"></div><div class="line">    <span class="comment"># 3. 如果密码 &lt; 8，主动抛出异常</span></div><div class="line">    print(<span class="string">"主动抛出异常"</span>)</div><div class="line">    <span class="comment"># 第一步：创建异常对象-可以使用错误信息字符串作为参数</span></div><div class="line">    ex = Exception(<span class="string">"密码长度不够"</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 第二步：主动抛出异常</span></div><div class="line">    <span class="keyword">raise</span> ex</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 提示用户输入密码</span></div><div class="line"><span class="keyword">try</span>:</div><div class="line">    print(input_password())</div><div class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</div><div class="line">    print(result)</div></pre></td></tr></table></figure>
<p>继续运行，还是输入123，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">请输入密码： <span class="number">123</span></div><div class="line">主动抛出异常</div><div class="line">密码长度不够</div></pre></td></tr></table></figure>
<p>这一次我们就可以发现，运行正常。</p>
<p>在这个案例中我们其实就发现了，我们写了<code>Exception</code>这个类的对象，程序最终输出的结果就是我们定义的那个对象，即<code>ex = Exception(&quot;密码长度不够&quot;)</code>。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/15/Python/Python学习笔记（14）-面向对象之多态和类属性/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/15/Python/Python学习笔记（14）-面向对象之多态和类属性/" itemprop="url">Python学习笔记（14）-黑马教程-面向对象之多态和类属性</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-15T12:00:00+08:00">
                2018-04-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  6,620
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  25
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="多态">多态</h2>
<h3 id="前言">前言</h3>
<p>面向对象的三大特征分别是：封装，继承，多态，如下所示：</p>
<ol style="list-style-type: decimal">
<li><p>封装是根据需求将属性和方法封装到一个抽象的类中</p></li>
<li><p>继承则能够实现代码的重用，相同的代码不需要重复编写；</p></li>
<li><p>多态：不同的子类对象调用相同的父类方法，产生不同的执行结果，多态的思路：</p></li>
</ol>
<ul>
<li>多态可以增加代码的灵活度</li>
<li>以继承和重写父类方法为前提</li>
<li>是调用方法的技巧，不会影响到类的内部设计</li>
</ul>
<p>示意图如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190523153900.png">

</div>
<p>在这个示意图中，假设我们定义了一个人类，然后从人类中派生出了程序员类与设计师类，而程序员类的工作产出了代码，设计师的工作产生了设计图，这两个类都有一个共同的父类，即人类，但他们的产出则不同。</p>
<p>在设计代码时，通常是先封装，有了封装后，等到代码比较复杂时，我们就会用到继承，产生各种子类，有些子类会继承自相同的父类，这就是多态，代码的灵活度就会增强。</p>
<h2 id="多态polymorphism">多态(Polymorphism)</h2>
<p>书中原文说的多态是指：术语多态（polymorphism）源自希腊语，意思是“有多种形态”。这大致意味着即便你不知道变量指向的是哪种对象，也能够对其执行操作，且操作的行为将随对象所属的类型（类）而异。</p>
<p>书中列举了几个案例，例如当你收到一个对象时，却根本不知道它是如何实现的，它就有可能是众多“多态”中的任何一种，例如当设计一个购物系统中，有一项功能是获取某个物品的价格，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>object.get_price()</div><div class="line"><span class="number">2.5</span></div></pre></td></tr></table></figure>
<p>像这样与对象属性相关联的函数称为方法，在常规的Python对象，例如字符串、列表或字典中也会见到这样的方法，例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'abc'</span>.count(<span class="string">'a'</span>)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">1</span>,<span class="number">2</span>,<span class="string">'a'</span>].count(<span class="string">'a'</span>)</div><div class="line"><span class="number">1</span></div></pre></td></tr></table></figure>
<p>就像上面的案例，如果有一个变量x，你需要知道它是字符串，还是列表，就能调用方法count，你只需要向这个方法提供一个字符作为参数，它就能正常运行，这就是多态的表现之一。下面再来做一个实验，标准库模块random包含一个名为choice的函数，它会从序列中随机选择一个元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> random <span class="keyword">import</span> choice</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = choice([<span class="string">'Hello world!'</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="string">'e'</span>,<span class="string">'e'</span>,<span class="number">4</span>]])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line"><span class="string">'Hello world!'</span></div></pre></td></tr></table></figure>
<p>x可能包含字符串`Hello, world!‘，也可能包含列表[1,2,‘e’,‘e’,4]，具体是哪一个，我们并不需要关心，我们只关心x包含多个e，而不管x是字符串还是列表，此时我们再调用count方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.count(<span class="string">'e'</span>)</div><div class="line"><span class="number">1</span></div></pre></td></tr></table></figure>
<p>从结果来看，x包括的应该是字符串（其实前面也显示了这个结果），但关键在于你无需执行相关的检查，只要x有一个名为count的方法，它将单个字符作为参数并返回一个整数就行。</p>
<h3 id="多态形式的多样性">多态形式的多样性</h3>
<p>每当无需知道对象是什么样时，就能对其进行操作时，就是多态在起作用。这不仅仅适用于方法，内置运算符和函数都大量使用了多态，可以看下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> + <span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Fish'</span> + <span class="string">'License'</span></div><div class="line"><span class="string">'FishLicense'</span></div></pre></td></tr></table></figure>
<p>上面的案例说明，<code>+</code>运算符即可以用于整数的加法，还可以用于字符串的连接，这就是多态的体现。</p>
<p>再看一个案例，如果要编写一个函数，通过打印一条消息来指出对象的长度，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">length_message</span><span class="params">(x)</span>:</span></div><div class="line">    print(<span class="string">"The length of "</span>,repr(x), <span class="string">"is"</span>, len(x))</div><div class="line"></div><div class="line"></div><div class="line">length_message(<span class="string">'Fonrd'</span>)</div><div class="line">length_message([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</div></pre></td></tr></table></figure>
<p>运行结果为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>length_message(<span class="string">'Fonrd'</span>)</div><div class="line">The length of  <span class="string">'Fonrd'</span> <span class="keyword">is</span> <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>length_message([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</div><div class="line">The length of  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] <span class="keyword">is</span></div></pre></td></tr></table></figure>
<p>可以看出来，无论对象是列表，还是字符串，此函数都能运行。当使用多有态的函数和运算符时，多态都将发挥作用，事实上，要破坏多态，唯一的办法就是使用诸如type，issubclass等函数显式地执行类型检查，但你应尽可能避免以这种方式破坏多态。</p>
<h3 id="多态的案例">多态的案例</h3>
<p>现在我们来看一个案例需求：</p>
<ol style="list-style-type: decimal">
<li>我们需要定义3个类，分别是人类(Person)，狗类(Dog)，哮天犬类(XiaoTianQuan)类；</li>
<li>狗类(Dog)中封装一个玩耍的方法(game)；</li>
<li>定义一个哮天犬类(XiaoTianQuan)类，这个类继承自(Dog)，但是这个类中的game方法需要进行修改，例如普通玩耍变成飞到天上玩耍；</li>
<li>定义一个人类(Person)，在这个类中，让人(Person)与狗类(Dog)玩耍(game)，示意图如下所示：</li>
</ol>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190523154717.png">

</div>
<p>代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line">        self.name = name</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">game</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 蹦蹦跳跳的玩耍..."</span> % self.name)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaoTianQuan</span><span class="params">(Dog)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">game</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 飞到天上去玩耍..."</span>% self.name)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></div><div class="line">        self.name = name</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">game_with_dog</span><span class="params">(self,dog)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"%s 和 %s 快乐地玩耍..."</span>% (self.name, dog.name))</div><div class="line"></div><div class="line">        <span class="comment"># 让狗玩耍</span></div><div class="line">        dog.game()</div><div class="line"></div><div class="line"><span class="comment"># 1. 创建狗对象</span></div><div class="line">wangcai = Dog(<span class="string">"旺财"</span>)</div><div class="line"><span class="comment"># 创建普通的狗对象</span></div><div class="line"></div><div class="line">feitianwangcai = XiaoTianQuan(<span class="string">"飞天旺财"</span>)</div><div class="line"><span class="comment"># 创建哮天犬类的对象</span></div><div class="line"></div><div class="line"><span class="comment"># 2. 创建一个小明对象</span></div><div class="line">xiaoming = Person(<span class="string">"小明"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 3. 让小明调用和狗玩的方法</span></div><div class="line">xiaoming.game_with_dog(wangcai)</div><div class="line">xiaoming.game_with_dog(feitianwangcai)</div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">小明 和 旺财 快乐地玩耍...</div><div class="line">旺财 蹦蹦跳跳的玩耍...</div><div class="line">小明 和 飞天旺财 快乐地玩耍...</div><div class="line">飞天旺财 飞到天上去玩耍...</div></pre></td></tr></table></figure>
<p>从结果可以看出来，不同的狗，(Dog)与(XiaoTianQuan)调用相的方法时，产生的结果不一样。</p>
<h3 id="实例">实例</h3>
<p>面向对象开发步骤如下：</p>
<ol style="list-style-type: decimal">
<li>使用面向对象开发，第1步是设计<strong>类</strong>；</li>
<li>使用<code>类名()</code>创建对象，<strong>创建对象</strong>的动作有两步：①在内存中为对象分配空间；②调用初始化方法<code>__init__</code>为对象初始化；</li>
<li>对象创建后，<strong>内存</strong>中就有一个对象的实实在在的存在，这个存在就是<strong>实例</strong>。</li>
</ol>
<p>因此，通常也会有以下这种叫法：</p>
<ol style="list-style-type: decimal">
<li>创建出来的对象叫做<strong>类</strong>的<strong>实例</strong>；</li>
<li>创建对象的动作叫做<strong>实例化</strong>；</li>
<li>对象的属性叫做<strong>实例属性</strong>；</li>
<li>对象调用的方法叫做<strong>实例方法</strong>。</li>
</ol>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190524142813.png">

</div>
<p>在程序执行时：</p>
<ol style="list-style-type: decimal">
<li>对象各自拥有自己的<strong>实例属性</strong>；</li>
<li>调用对象方法，可以通过<code>self</code>来访问自己的属性，以及调用自己的方法。</li>
</ol>
<p><strong>结论</strong></p>
<ul>
<li>每一个对象都有自己<strong>独立的内存空间</strong>，保存<strong>各自不同的属性</strong>；</li>
<li><strong>多个对象的方法，在内存中只有一份</strong>，在调用方法时，需要把对象的引用传递到方法内部。</li>
</ul>
<h3 id="类是一个特殊的对象">类是一个特殊的对象</h3>
<p>在学习Python时，我们常常听到这样的话：</p>
<blockquote>
<p><code>Python</code>中一切皆无明：</p>
<ul>
<li><code>class AAA:</code>定义的类属于<strong>类对象</strong></li>
<li><code>obj1 = AAA()</code>属于<strong>实例对象</strong></li>
</ul>
</blockquote>
<ul>
<li>在程序运行时，<strong>类</strong>同样会被加载到内存中；</li>
<li>在<code>Python</code>中，<strong>类</strong>是一个特殊的对象——<strong>类对象</strong>；</li>
<li>在程序运行时，<strong>类对象</strong>在内存中<strong>只有一份</strong>，使用<strong>一个类</strong>可以创建出<strong>很多个对象实例</strong>；</li>
<li>除了封装<strong>实例</strong>的<strong>属性</strong>和<strong>方法</strong>外，<strong>类对象</strong>还可以拥有自己的<strong>属性</strong>和<strong>方法</strong>：即①<strong>类属性</strong>；②<strong>类方法</strong>。</li>
<li>通过<strong>类名.</strong>的方式哦可以<strong>访问类的属性</strong>或者<strong>调用类的方法</strong>，如下所示：</li>
</ul>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190524143316.png">

</div>
<h2 id="补充知识什么是对象">补充知识：什么是对象</h2>
<p>在面向对象的编程中，经常听到的一句话就是“一切皆对象”这句话到底是什么意思，可以看知乎的一个帖子，从Python的源码角度解释的：<a href="https://www.zhihu.com/question/27026782#answer-9368341" target="_blank" rel="external">《关于python中“赋值就是建立一个对象的引用”，大家怎么看？》</a></p>
<h2 id="类属性和实例属性">类属性和实例属性</h2>
<h3 id="概念和使用">概念和使用</h3>
<ul>
<li>类属性主浊给类对象中定义的属性</li>
<li>通常用来记录与这个类相关的特征</li>
<li>类属性不会以用于记录具体对象的特征。</li>
</ul>
<h4 id="示例需求">示例需求</h4>
<p>我们先来看一个案例：</p>
<ul>
<li>定义一个工具类</li>
<li>每件工具都有自己的<code>name</code></li>
<li>需求——知道使用这个类，创建了多少个工具对象？</li>
</ul>
<p>如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tool</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="comment">#  使用赋值语句定义类属性， 记录所有工具对象的数量</span></div><div class="line">    count = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line">        self.name = name</div><div class="line"></div><div class="line">        <span class="comment"># 让类属性的值 + 1</span></div><div class="line">        Tool.count += <span class="number">1</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 1. 创建工具对象</span></div><div class="line">tool1 = Tool(<span class="string">"斧头"</span>)</div><div class="line">tool2 = Tool(<span class="string">"榔头"</span>)</div><div class="line">tool3 = Tool(<span class="string">"水桶"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 2. 输出工具对象的总数</span></div><div class="line">print(Tool.count)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">3</span></div></pre></td></tr></table></figure>
<p>从代码中我们可以看出来，我们先定义了一个<code>Tool</code>类，并且定义了相应的类属性，用来记录与这个类相关的特征。</p>
<h3 id="属性的获取机制">属性的获取机制</h3>
<p>属性的获取机制指的是，我们要编写代码时，在一个变量的后面接一点，再接这个变量的属性，Python的解释器是如何找到这个值的。</p>
<p>Python中属性的获取存在一个<strong>向上查找机制</strong>。这个机制的具体表现就是，先在对象的属性中查找类属性，如果没有找到类属性，就向上，向类中寻找这个类属性，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190524145829.png">

</div>
<p>因此，要访问类属性有两种方式：①<strong>类名.类属性</strong>；②<strong>对象.类属性</strong>（不推荐）。</p>
<p>需要注意的是，如何使用<code>对象.类属性 = 值</code>这样的赋值语句，只会给对象添加一个属性，而不会影响到类属性的值（从前面的笔记中可以了解到这些内容）。</p>
<p>前面我们看到，当我们输出<code>print(&quot;工具/对象总数 %d&quot; % tool3.count)</code>这个结果时，结果为<code>3</code>，因为通过对象可以访问类的创建数目，但是，如果我们使用了<code>对象.类属性 = 值</code>这样的赋值语句时，就会出问题，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tool</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="comment">#  使用赋值语句定义类属性， 记录所有工具对象的数量</span></div><div class="line">    count = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line">        self.name = name</div><div class="line"></div><div class="line">        <span class="comment"># 让类属性的值 + 1</span></div><div class="line">        Tool.count += <span class="number">1</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 1. 创建工具对象</span></div><div class="line">tool1 = Tool(<span class="string">"斧头"</span>)</div><div class="line">tool2 = Tool(<span class="string">"榔头"</span>)</div><div class="line">tool3 = Tool(<span class="string">"水桶"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 2. 输出工具对象的总数</span></div><div class="line">print(Tool.count)</div><div class="line">tool3.count = <span class="number">99</span></div><div class="line">print(<span class="string">"工具/对象总数 %d"</span> % tool3.count)</div><div class="line">print(<span class="string">"===&gt; %d"</span> % Tool.count)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">3</span></div><div class="line">工具/对象总数 <span class="number">99</span></div><div class="line">===&gt; 3</div></pre></td></tr></table></figure>
<p>从结果可以看出来，<code>tools.count</code>它此时就代表的是不是类属性的值（类的值是<code>Tool.count</code>），而是又给它赋的值（因为解释器会先查找对象内部的count，如果没有，它再向上，在类中寻找count），因此在访问类的属性时，并不采用这种方式（也就是对过<code>对象.属性</code>这样的方式）。</p>
<h2 id="类方法和静态方法">类方法和静态方法</h2>
<p>注：需要补充类方法与实例方法的区别，以及应用范围，什么情况下使用。</p>
<h3 id="类方法">类方法</h3>
<ul>
<li><p>类属性就是针对类对象定义的属性</p></li>
<li>使用赋值语句在<code>class</code>关键字下方可以定义类属性；</li>
<li><p>类属性用于记录与这个类相关的特征</p></li>
<li><p>类方法就是针对类对象定义的方法</p></li>
<li><p>在类方法内部可以直接访问类属性或者调用其他的类方法</p></li>
</ul>
<h4 id="类方法语法">类方法语法</h4>
<p>类方法的语法与实例方法的语法非常类似，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@classmethod</span></div><div class="line"><span class="function"><span class="keyword">def</span> 类方法名<span class="params">(cls)</span></span></div><div class="line"><span class="function">    <span class="title">pass</span></span></div></pre></td></tr></table></figure>
<p>关于类方法需要注意以下几点：</p>
<ul>
<li>类方法需要用修饰器(<code>@classmethod</code>)来标记，<strong>告诉解释器这是一个类方法</strong>；</li>
<li>类方法的第一个参数应该是<code>cls</code>：</li>
<li>由哪一个类调用的方法，方法内的<code>cls</code>就是哪一个类的引用；</li>
<li>这个参数和实例方法的第一个参数是<code>self</code>类似；</li>
<li>提示使用其他名称也可以，不过习惯使用<code>cls</code></li>
<li>通过<code>类名.</code>调用<code>类方法</code>，调用方法时，不需要传递<code>cls</code>参数；</li>
<li>在方法内部：</li>
<li>可以通过<code>cls.</code>访问类的属性；</li>
<li>也可以通过<code>cls.</code>调用其他的类方法。</li>
</ul>
<h4 id="示意需求">示意需求</h4>
<p>现在我们看一下需求：</p>
<ul>
<li>定义一个工具类；</li>
<li>每件工具都有自己的<code>name</code>；</li>
<li>需求——在<code>类</code>中封装一个<code>show_tool_count</code>的类方法，输出使用当前这个类创建的对象个数，那么需求的大致要求就如下所示：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Tool</div><div class="line">Tool.count</div><div class="line">name</div><div class="line"></div><div class="line">__init__(self, name)：</div><div class="line">show_tool_count(cls)</div></pre></td></tr></table></figure>
<p>完整的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tool</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="comment">#  使用赋值语句定义类属性， 记录所有工具对象的数量</span></div><div class="line">    count = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="comment"># 定义一个类方法</span></div><div class="line"><span class="meta">    @classmethod</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show_tool_count</span><span class="params">(cls)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"工具对象的数据 %d"</span> % cls.count)</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line">        self.name = name</div><div class="line"></div><div class="line">        <span class="comment"># 让类属性的值 + 1</span></div><div class="line">        Tool.count += <span class="number">1</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 1. 创建工具对象</span></div><div class="line">tool1 = Tool(<span class="string">"斧头"</span>)</div><div class="line">tool2 = Tool(<span class="string">"榔头"</span>)</div><div class="line">tool3 = Tool(<span class="string">"水桶"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 2. 输出工具对象的总数</span></div><div class="line">print(Tool.count)</div><div class="line">tool3.count = <span class="number">99</span></div><div class="line">print(<span class="string">"工具/对象总数 %d"</span> % tool3.count)</div><div class="line">print(<span class="string">"===&gt; %d"</span> % Tool.count)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">3</span></div><div class="line">工具/对象总数 <span class="number">99</span></div><div class="line">===&gt; 3</div></pre></td></tr></table></figure>
<p>从上面的案例我们就知道，在<code>Tool</code>这个类内部，我们定义了一个类方法，也就是<code>@classmethod</code>这一部分的内容。</p>
<h3 id="静态方法">静态方法</h3>
<p>如果我们在开发过程中，霜肆在类中封装一个方法，这个方法有以下特性：</p>
<ul>
<li><strong>不需要</strong>访问<strong>实例属性</strong>或者<strong>调用实例方法</strong>；</li>
<li><strong>不需要</strong>访问<strong>类属性</strong>或者<strong>调用类方法</strong>。</li>
</ul>
<p>这个时候，我们就可以把这个方法封装成一个<strong>静态方法</strong>，静态方法的语法格式如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@staticmethod</span></div><div class="line"><span class="function"><span class="keyword">def</span> 静态方法名<span class="params">()</span>:</span></div><div class="line">    <span class="comment"># 需要注意的是，括号里面没有self，也没有cls</span></div><div class="line">     <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<ul>
<li>静态方法需要用修饰器<code>@staticmethod</code>来标记，告诉解释器这是一个静态方法；</li>
<li>通过<code>类名.</code>来调用静态方法。</li>
</ul>
<p>下面来看一个简单的应用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line"><span class="meta">    @staticmethod</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">()</span>:</span></div><div class="line">        print(<span class="string">"小狗要跑..."</span>)</div><div class="line"></div><div class="line"><span class="comment"># 通过类名.调用静态方法</span></div><div class="line"><span class="comment"># 调用静态方法不需要创建对象</span></div><div class="line">Dog.run()</div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">小狗要跑...</div></pre></td></tr></table></figure>
<p>在这个案例中，我们并没有创建实例对象，就调用了类中的方法。这里再说一下什么时候需要创建静态方法，那就是既不访问实例属性，也不访问类属性的情况下，我们就可以定义一个静态方法。</p>
<h4 id="案例分析">案例分析</h4>
<p>在这个案例中，我们先看一下需求：</p>
<ol style="list-style-type: decimal">
<li>设计一个<code>Game</code>类；</li>
<li>属性：</li>
</ol>
<ul>
<li>定义一个<code>类属性</code>，即<code>top_score</code>记录游戏的<strong>历史最高分</strong>；</li>
<li>定义一个<code>实例属性</code>，即<code>player_name</code>，记录当前游戏的玩家姓名。</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>方法：</li>
</ol>
<ul>
<li><strong>静态方法</strong>（<code>show_help</code>）显示游戏帮助信息；</li>
<li><strong>类方法</strong>（<code>show_top_score</code>）显示历史最高分，它跟所有的类有关；</li>
<li><strong>实例方法</strong>（<code>start_game</code>）开始当前玩家的游戏。</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>主程序步骤：</li>
</ol>
<ul>
<li>查看帮助信息；</li>
<li>查看历史最高分；</li>
<li>创建游戏对象，开始游戏。</li>
</ul>
<p>那么这个游戏的大致框架如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Game</div><div class="line">Game.top_score</div><div class="line">player_name</div><div class="line"></div><div class="line">__init__(self, player_name):</div><div class="line">show_help():</div><div class="line">show_top_score(cls):</div><div class="line">start_game(self)</div></pre></td></tr></table></figure>
<p>具体代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Game</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 历史最高分</span></div><div class="line">    top_score = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, player_name)</span>:</span></div><div class="line">        self.player_name = player_name</div><div class="line"></div><div class="line"><span class="meta">    @staticmethod</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show_help</span><span class="params">()</span>:</span></div><div class="line">        print(<span class="string">"帮助信息： 让僵尸进入大门"</span>)</div><div class="line"></div><div class="line"><span class="meta">    @classmethod</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show_top_score</span><span class="params">(cls)</span>:</span></div><div class="line">        print(<span class="string">"历史记录 %d"</span> % cls.top_score)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_game</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 开始游戏了..."</span> % self.player_name)</div><div class="line"></div><div class="line"><span class="comment"># 1. 查看游戏的帮助信息</span></div><div class="line">Game.show_help()</div><div class="line"></div><div class="line"><span class="comment"># 2. 查看历史最高分</span></div><div class="line">Game.show_top_score()</div><div class="line"><span class="comment"># 3. 创建游戏对象</span></div><div class="line">game = Game(<span class="string">"小明"</span>)</div><div class="line">game.start_game()</div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">帮助信息： 让僵尸进入大门</div><div class="line">历史记录 <span class="number">0</span></div><div class="line">小明 开始游戏了...</div></pre></td></tr></table></figure>
<h4 id="案例总结">案例总结</h4>
<ol style="list-style-type: decimal">
<li>实例方法——方法内部需要访问实例属性，实例方法内部可以使用<code>类名.</code>来访问属性。</li>
<li>类方法——方法内部只需要访问类属性；</li>
<li>静态方法——谅地内部，不需要访问实例属性和类属性。</li>
</ol>
<h2 id="单例">单例</h2>
<h3 id="单例设计模式">单例设计模式</h3>
<h5 id="什么是设计模式">什么是设计模式？</h5>
<p>直接引用菜鸟教程里面的话：</p>
<blockquote>
<p>设计模式（Design pattern）代表了最佳的实践，通常被有经验的面向对象的软件开发人员所采用。设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。</p>
</blockquote>
<p>使用设计模型是为了可重用代码、让仍茇以更容易被他人理解、保证代码的可靠性。</p>
<ul>
<li>目的——让<strong>类</strong>创建的对象，在系统中只有唯一的一个实例；</li>
<li>每一次执行<code>类名()</code>返回的对象，内存地址是相同的（内存地址相同，说明每次由这个类创建的这个对象只有一个）。</li>
</ul>
<h3 id="单例设计模式的应用场景">单例设计模式的应用场景</h3>
<ul>
<li>音乐播放对象（一次只播放一首歌曲）</li>
<li>回收站对象（一个电脑通常只有一个回收站）</li>
<li>打印机对象（打印一些文件时，通常是在同一台打印机进行打印）</li>
<li>……</li>
</ul>
<h3 id="new__方法"><code>__new__</code>方法</h3>
<p>在Python中，当我们使用<code>类名()</code>创建对象时，Python解释器<strong>首先</strong>会调用<code>__new__</code>方法为对象<strong>分配空间</strong>。这个<code>__new__</code>方法是一个由object基类提供的<strong>内置的静态方法</strong>，它的作用主要有两个：</p>
<ul>
<li><ol style="list-style-type: decimal">
<li>在内存溃为对象分配空间；</li>
</ol></li>
<li>2)<strong>返回</strong>对象的引用。</li>
</ul>
<p>当Python的解释器获得对象的引用后，将引用作为<strong>第一个参数</strong>，传递给<code>__init__</code>方法。重写<code>__new__</code>方法的代码非常固定，只需要注意以下几点：</p>
<ul>
<li><p>重写<code>__new__</code>方法一定要<code>return super().__new__(cls)</code></p></li>
<li><p>否则Python解释器<strong>得不到</strong>分配了空间的<strong>对象引用</strong>，就不会调用对象的初始化方法；</p></li>
<li><p>注意：<code>__new__</code>是一个静态方法，在调用时需要<strong>主动传递(cls)</strong>参数。</p></li>
</ul>
<p>以创建一个<code>MusicPlayer</code>类为例说明一下：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190607184737.png">

</div>
<p>现在看一下代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MusicPlayer</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"播放器初始化"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建播放器对象</span></div><div class="line">player = MusicPlayer()</div><div class="line"></div><div class="line">print(player)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">播放器初始化</div><div class="line">&lt;__main__.MusicPlayer object at <span class="number">0x000001C0FDC7B0F0</span>&gt;</div></pre></td></tr></table></figure>
<p>现在输出了对象中的内容（<code>播放器初始化</code>），并且还输出了对象的内存地址。现在我们重写<code>__new__</code>方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MusicPlayer</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 创建对象时， new方法会被自动调用</span></div><div class="line">        print(<span class="string">"创建对象， 分配空间"</span>)</div><div class="line"></div><div class="line">        </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"播放器初始化"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建播放器对象</span></div><div class="line">player = MusicPlayer()</div><div class="line"></div><div class="line">print(player)</div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">创建对象， 分配空间</div><div class="line"><span class="keyword">None</span></div></pre></td></tr></table></figure>
<p>此时的结果中出现了<code>None</code>，这说明初始化方法并没有被调用（也就是没有出现<code>播放器初始化</code>字样）。</p>
<p>现在回顾一下前面的内容，也就是下面这一段文字：</p>
<blockquote>
<p>重写<code>__new__</code>方法一定要<code>return super().__new__(cls)</code></p>
</blockquote>
<p>再对照代码，也就是下面的这些内容：</p>
<blockquote>
<pre><code>def __new__(cls, *args, **kwargs):

    # 1. 创建对象时， new方法会被自动调用
    print(&quot;创建对象， 分配空间&quot;)</code></pre>
</blockquote>
<p>因此我们在重写<code>__new__</code>方法时，并没有写<code>return super().__new__(cls)</code>，因此Python解释器就得不到<strong>分配了空间的</strong>对象引用，因此就不会调用对象的初始化方法（也就是输出<code>播放器初始化</code>字样），只能输出<code>None</code>，现在我们输入下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MusicPlayer</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 创建对象时， new方法会被自动调用</span></div><div class="line">        print(<span class="string">"创建对象， 分配空间"</span>)</div><div class="line"></div><div class="line">        <span class="comment"># 2. 为对象分配空间</span></div><div class="line">        instance = super().__new__(cls)</div><div class="line"></div><div class="line">        <span class="comment"># 3. 返回对象的引用</span></div><div class="line">        <span class="keyword">return</span> instance</div></pre></td></tr></table></figure>
<p>完整的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MusicPlayer</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 创建对象时， new方法会被自动调用</span></div><div class="line">        print(<span class="string">"创建对象， 分配空间"</span>)</div><div class="line"></div><div class="line">        <span class="comment"># 2. 为对象分配空间</span></div><div class="line">        instance = super().__new__(cls)</div><div class="line"></div><div class="line">        <span class="comment"># 3. 返回对象的引用</span></div><div class="line">        <span class="keyword">return</span> instance</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"播放器初始化"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建播放器对象</span></div><div class="line">player = MusicPlayer()</div><div class="line"></div><div class="line">print(player)</div></pre></td></tr></table></figure>
<p>上述代码运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">创建对象， 分配空间</div><div class="line">播放器初始化</div><div class="line">&lt;__main__.MusicPlayer object at <span class="number">0x000002F2EDE6B2B0</span>&gt;</div></pre></td></tr></table></figure>
<p>上面的案例就说明了<code>__new__</code>方法的说用几。</p>
<h2 id="python中的单例">Python中的单例</h2>
<p><strong>单例</strong>——让<strong>类</strong>创建的对象，在系统中<strong>只有唯一的一个实例</strong>，它的设计流程如下所示：</p>
<ol style="list-style-type: decimal">
<li>定义一个<strong>类属性</strong>，初始值是<code>None</code>，用于记录<strong>单例对象的引用</strong></li>
<li>重写<code>__new__</code>方法；</li>
<li>如果<strong>类属性</strong><code>is None</code>，调用父类方法分配空间，并在类属性中记录结果；</li>
<li>返回<strong>类属性</strong>中记录的<strong>对象引用</strong>，整个流程如下所示：</li>
</ol>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190607190254.png">

</div>
<p>现在我们先来验证一个Python中单例是否是这个类创建出来的唯一实例，具体方法就是，我们创建几个对象，并返回对象的一内存地址，看它们是否一样，先来看一段简单的代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MusicPlayer</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line"><span class="comment"># 创建多个对象</span></div><div class="line">player1= MusicPlayer()</div><div class="line">print(player1)</div><div class="line"></div><div class="line">player2 = MusicPlayer()</div><div class="line">print(player2)</div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;__main__.MusicPlayer object at <span class="number">0x0000020CBAA5B0B8</span>&gt;</div><div class="line">&lt;__main__.MusicPlayer object at <span class="number">0x0000020CBAA5B160</span>&gt;</div></pre></td></tr></table></figure>
<p>从结果中我们可以发现，<code>player1</code>和<code>player2</code>这两个对象的内存地址并不相同，说明这两个对象是完全不同的对象。而单例设计模型则是，无论调用多少次对象创立的方法，得到的对象引用是相同的，也就是说控制台输出的内存地址都是相同的。</p>
<p>现在我们就来说明一下单例设计是如何实现的，流程就是前面的那些说明与示意图。</p>
<h3 id="单例案例分析">单例案例分析</h3>
<p>在这个案例中，我们会看一下，无论我们创建了多少个实例，它们的内存地址都是一样的，也就是说由这个类创建出来的对象只有一个，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MusicPlayer</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 记录第一个被创建对象的引用</span></div><div class="line">    instance = <span class="keyword">None</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 判断类属性是否是空对象</span></div><div class="line">        <span class="keyword">if</span> cls.instance <span class="keyword">is</span> <span class="keyword">None</span>:</div><div class="line">            <span class="comment"># 2. 调用父类的方法，为第一个对象分配空间</span></div><div class="line">            cls.instance = super().__new__(cls)</div><div class="line">        <span class="comment"># 3. 返回类属性保存的对象引用</span></div><div class="line">        <span class="keyword">return</span> cls.instance</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line"><span class="comment"># 创建多个对象</span></div><div class="line">player1= MusicPlayer()</div><div class="line">print(player1)</div><div class="line"></div><div class="line">player2 = MusicPlayer()</div><div class="line">print(player2)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;__main__.MusicPlayer object at <span class="number">0x000001CA0EF2B2B0</span>&gt;</div><div class="line">&lt;__main__.MusicPlayer object at <span class="number">0x000001CA0EF2B2B0</span>&gt;</div></pre></td></tr></table></figure>
<p>从结果中我们可以看出来，<code>player1</code>和<code>player2</code>是一个对象，它们的内存地址是一样的。</p>
<h3 id="只执行一次初始化工作">只执行一次初始化工作</h3>
<p>前面的暗到，当我们每次使用<code>类名()</code>创建对象时，Python的解释器都会自动调用两个方法：①<code>__new__</code>用来分配空间；②<code>__init__</code>对象初始化。</p>
<p>在前面一部分我们对<code>__new__</code>方法改造之后，每次都会得到<strong>第一次被创建对象的引用</strong>，但是，<strong>初始化方法还会被再次调用</strong>。</p>
<p>如果我们只想让<strong>初始化动作</strong>只被<strong>执行一次</strong>，那么就需要以下解决方法：</p>
<ol style="list-style-type: decimal">
<li>定义一个类属性<code>init_flag</code>标记是否<strong>执行过初始化动作</strong>，初始值为<code>False</code>；</li>
<li>在<code>__init__</code>方法中，判断<code>init_flag</code>，如果为<code>False</code>，就执行初始化动作；</li>
<li>然后将<code>init_flag</code>设置为<code>True</code>；</li>
<li>这样，再次<strong>自动</strong>调用<code>__init__</code>方法时，<strong>初始化动作就不会补再次执行了</strong>。</li>
</ol>
<p>我们来看一个案例，我们在前面代码的基础上，加上下面的这段代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">    print(<span class="string">"初始化播放器"</span>)</div></pre></td></tr></table></figure>
<p>完整代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MusicPlayer</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 记录第一个被创建对象的引用</span></div><div class="line">    instance = <span class="keyword">None</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 判断类属性是否是空对象</span></div><div class="line">        <span class="keyword">if</span> cls.instance <span class="keyword">is</span> <span class="keyword">None</span>:</div><div class="line">            <span class="comment"># 2. 调用父类的方法，为第一个对象分配空间</span></div><div class="line">            cls.instance = super().__new__(cls)</div><div class="line">        <span class="comment"># 3. 返回类属性保存的对象引用</span></div><div class="line">        <span class="keyword">return</span> cls.instance</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"初始化播放器"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 创建多个对象</span></div><div class="line">player1= MusicPlayer()</div><div class="line">print(player1)</div><div class="line"></div><div class="line">player2 = MusicPlayer()</div><div class="line">print(player2)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">初始化播放器</div><div class="line">&lt;__main__.MusicPlayer object at <span class="number">0x000001B09074B2B0</span>&gt;</div><div class="line">初始化播放器</div><div class="line">&lt;__main__.MusicPlayer object at <span class="number">0x000001B09074B2B0</span>&gt;</div></pre></td></tr></table></figure>
<p>从结果中我们可以知道，我们用类创建了两个对象，因此初始化方法就被调用了2次。但是，我们在开发的过程中，有可能遇到这样的需求，也就是说，我们只想让初始化方法执行一次，解决方法前面已经提到，如下所示：</p>
<blockquote>
<ol style="list-style-type: decimal">
<li>定义一个类属性<code>init_flag</code>标记是否<strong>执行过初始化动作</strong>，初始值为<code>False</code>；</li>
<li>在<code>__init__</code>方法中，判断<code>init_flag</code>，如果为<code>False</code>，就执行初始化动作；</li>
<li>然后将<code>init_flag</code>设置为<code>True</code>；</li>
<li>这样，再次<strong>自动</strong>调用<code>__init__</code>方法时，<strong>初始化动作就不会补再次执行了</strong>。</li>
</ol>
</blockquote>
<p>现在我们把下面的代码加到原代码中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 记录第一个被创建对象的引用</span></div><div class="line">instance = <span class="keyword">None</span></div><div class="line"></div><div class="line"><span class="comment"># 记录是否执行过初始化动作</span></div><div class="line">init_flag = <span class="keyword">False</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 1. 判断类属性是否是空对象</span></div><div class="line">    <span class="keyword">if</span> cls.instance <span class="keyword">is</span> <span class="keyword">None</span>:</div><div class="line">        <span class="comment"># 2. 调用父类的方法，为第一个对象分配空间</span></div><div class="line">        cls.instance = super().__new__(cls)</div><div class="line">    <span class="comment"># 3. 返回类属性保存的对象引用</span></div><div class="line">    <span class="keyword">return</span> cls.instance</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="comment"># 1. 判断是否执行过初始化动作</span></div><div class="line">    <span class="keyword">if</span> MusicPlayer.init_flag:</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    <span class="comment"># 2. 如果没有执行过，再执行初始化动作</span></div><div class="line">    print(<span class="string">"初始化播放器"</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 3. 修改类属性的标记</span></div><div class="line">    MusicPlayer.init_flag = <span class="keyword">True</span></div></pre></td></tr></table></figure>
<p>完整代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MusicPlayer</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 记录第一个被创建对象的引用</span></div><div class="line">    instance = <span class="keyword">None</span></div><div class="line"></div><div class="line">    <span class="comment"># 记录是否执行过初始化动作</span></div><div class="line">    init_flag = <span class="keyword">False</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 判断类属性是否是空对象</span></div><div class="line">        <span class="keyword">if</span> cls.instance <span class="keyword">is</span> <span class="keyword">None</span>:</div><div class="line">            <span class="comment"># 2. 调用父类的方法，为第一个对象分配空间</span></div><div class="line">            cls.instance = super().__new__(cls)</div><div class="line">        <span class="comment"># 3. 返回类属性保存的对象引用</span></div><div class="line">        <span class="keyword">return</span> cls.instance</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 1. 判断是否执行过初始化动作</span></div><div class="line">        <span class="keyword">if</span> MusicPlayer.init_flag:</div><div class="line">            <span class="keyword">return</span></div><div class="line"></div><div class="line">        <span class="comment"># 2. 如果没有执行过，再执行初始化动作</span></div><div class="line">        print(<span class="string">"初始化播放器"</span>)</div><div class="line"></div><div class="line">        <span class="comment"># 3. 修改类属性的标记</span></div><div class="line">        MusicPlayer.init_flag = <span class="keyword">True</span></div><div class="line"></div><div class="line"><span class="comment"># 创建多个对象</span></div><div class="line">player1= MusicPlayer()</div><div class="line">print(player1)</div><div class="line"></div><div class="line">player2 = MusicPlayer()</div><div class="line">print(player2)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">初始化播放器</div><div class="line">&lt;__main__.MusicPlayer object at <span class="number">0x000001922204B2B0</span>&gt;</div><div class="line">&lt;__main__.MusicPlayer object at <span class="number">0x000001922204B2B0</span>&gt;</div></pre></td></tr></table></figure>
<p>将代码更改后，从运行结果中我们就可以发现，初始化动作就只被执行了1次。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/14/Python/Python学习笔记（13）-面向对象之继承/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/14/Python/Python学习笔记（13）-面向对象之继承/" itemprop="url">Python学习笔记（13）-黑马教程面向对象之继承</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-14T12:00:00+08:00">
                2018-04-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  7,858
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  30
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言">前言</h2>
<p>这是黑马Python培训教程面向对象这一章中的<strong>继承(inheritance)</strong>部分。</p>
<h2 id="什么是继承inheritance">什么是继承(inheritance)</h2>
<p>观向对象的三大特征</p>
<ul>
<li>封装：根据需求将属性和方法封装到一个抽象的类中；</li>
<li>继承：实现代码的重用，也就是说相同部分的代码不需要重复编写；</li>
<li>多态：不同的对象调用相同的方法，产生不同的执行结果，增加代码的灵活度。</li>
</ul>
<h3 id="为什么要有继承">为什么要有继承</h3>
<p>现在我们假设我们已经有了一个类，并且还要创建一个与之很像的类（可能只是新增了几个方法），该如何办呢（不能复制旧类的代码），解决思路如下：</p>
<p>例如我们有了一个名为Shape的类，它知道将自己绘制到屏幕上，现在我们想创建一个名为Rectangle的类，但它不仅知道如何将自己绘制到屏幕上，而且还知道如何计算其面积，我们不想重新编写方法draw，因此Shape已经了这样一个方法，且效果很好，那么我们就可以让Rectange继承Shape的方法，使得对Rectangle对象调用方法draw时，将自动调用Shape类的方法。</p>
<p>继承概念：子类拥有父母的所有方法和属性。</p>
<p>现在我们先看一下继承的一个优点，也就是前面提到的<strong>相同部分的代码不需要重复编写</strong>，现在先看一个简单的案例，在这个案例中，我们先不用继承这个特点来实现这一功能。</p>
<h3 id="通过案例说明为什么需要继承">通过案例说明为什么需要继承</h3>
<p>明确需求：假如我们在一个需求中，我们要定义动物类(Animal)与狗类(Dog)，而动物类中则有4个方法，分别是吃(eat)、喝(drink)，跑(run)和睡(sleep)，而狗类(Dog)除了动物类(Animal)中的4个方法外，还有一个独特的方法，就是叫(bark)，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190522132843.png">

</div>
<p>按照前面的原始方法（也就是不使用继承的思路），我们先定义一个动物类(Animal)，然后使用这个动物类(Animail)创建一个叫“旺财”的狗对象，输入以下代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"吃"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"喝"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"跑"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sleep</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"睡"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 创建一个叫“旺财”的狗对象，如下所示：</span></div><div class="line">wangcai = Animal()</div><div class="line"></div><div class="line">wangcai.eat()</div><div class="line">wangcai.drink()</div><div class="line">wangcai.run()</div><div class="line">wangcai.sleep()</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"吃"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"喝"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"跑"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sleep</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"睡"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 创建一个叫“旺财”的狗对象，如下所示：</span></div><div class="line">wangcai = Animal()</div><div class="line"></div><div class="line">wangcai.eat()</div><div class="line">wangcai.drink()</div><div class="line">wangcai.run()</div><div class="line">wangcai.sleep()</div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">吃</div><div class="line">喝</div><div class="line">跑</div><div class="line">睡</div></pre></td></tr></table></figure>
<p>假设，我们要在同一个代码中再定义一个狗类(Dog)，前面提到，狗类(Dog)与动物类(Animal)的区别就在于狗类(Dog)多了一个叫(bark)的方法，定义完后，我们再通过个狗类(Dog)生成一个叫旺财(wangcai)的对象，此时我们定义如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"吃"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"喝"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"跑"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sleep</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"睡"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"汪汪叫"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建一个叫“旺财”的狗对象，如下所示：</span></div><div class="line">wangcai = Dog()</div><div class="line"></div><div class="line">wangcai.eat()</div><div class="line">wangcai.drink()</div><div class="line">wangcai.run()</div><div class="line">wangcai.sleep()</div><div class="line">wangcai.bark()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">吃</div><div class="line">喝</div><div class="line">跑</div><div class="line">睡</div><div class="line">汪汪叫</div></pre></td></tr></table></figure>
<p>现在我们回顾一下动物类(Animal)与狗类(Dog)的代码，我们就可以发现，狗类(Dog)代码的前4个方法是直接从动物类(Animal)中复制过来的，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190522134103.png">

</div>
<p>如果在一个项目中，我们就这样定义了2个类，即动物类(Animal)与狗类(Dog)，并且狗类(Dog)中的一部分与动物类(Animal)相同，我们可以把相同的代码复制过来，但是，如果还有其他的类，例如我们再定义一个哮天犬类(XiaoTianQuan)，它比狗类(Dog)又多了一个方法，即飞(fly)，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">XiaoTianQuan</div><div class="line">eat(self):</div><div class="line">drink(self):</div><div class="line">run(self):</div><div class="line">sleep(self):</div><div class="line">bark(self):</div><div class="line">fly(self):</div></pre></td></tr></table></figure>
<p>那么，如果我们不使用继承的思路，还要复制相同部分的代码。此时，如果我们要修改<code>eat(self)</code>这个方法，就需要三次，即动物类(Animal)、狗类(Dog)、哮天犬类(XiaoTianQuan)都要修改，因此效率非常低下，代码量还多，容易出错。</p>
<p>为了解决这类问题（也就是A类，B类，C类中有相同的部分，并且C类由B类衍生而来，B类由A类衍生而来），因此面向对象中就有了继承这种思路。</p>
<h2 id="继承的概念语法和特点">继承的概念、语法和特点</h2>
<p>类继承的概念：子类拥有父类的所有方法和属性。</p>
<p>前面我们提到了，我们定义了3个类，分别是动物类(Animal)、狗类(Dog)、哮天犬类(XiaoTianQuan)。在动物类(Animal)中有四个方法，即吃(eat)、喝(drink)、跑(run)、睡(sleep)这4个方法，这4种方法都是动物的基本特征。而狗(Dog)类可以看作是动物(Animal)的一个子集，也就是说狗类必然也有这4个方法，因此我们不需要重复编写这部分代码，可以从动物类中继承过来。</p>
<p>这里我们就可以说动物类(Animal)是父类，狗类(Dog)就是子类。</p>
<ul>
<li>子类继承自父类，可以直接享受父类中已经封装好的方法，不需要再次编写相同的代码；</li>
<li>子类中应根据需求，封专门讲用子类特有的属性和方法。</li>
</ul>
<h3 id="继承的语法">继承的语法</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> 类名<span class="params">(父类)</span>:</span></div><div class="line">    </div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p>现在我们就以前面的动物类(Animal)与狗类(Dog)说明一下，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"吃"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"喝"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"跑"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sleep</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"睡"</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"汪汪叫"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建一个叫“旺财”的狗对象，如下所示：</span></div><div class="line">wangcai = Dog()</div><div class="line"></div><div class="line">wangcai.eat()</div><div class="line">wangcai.drink()</div><div class="line">wangcai.run()</div><div class="line">wangcai.sleep()</div><div class="line">wangcai.bark()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">吃</div><div class="line">喝</div><div class="line">跑</div><div class="line">睡</div><div class="line">汪汪叫</div></pre></td></tr></table></figure>
<p>从前面的代码我们可以知道，狗类(Dog)继承自动物类(Animal)，现在我们修改一下父类中的代码，例如将<code>print(&quot;吃&quot;)</code>改为<code>print(&quot;吃---&quot;)</code>如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"吃---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"喝---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"跑---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sleep</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"睡---"</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"汪汪叫"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建一个叫“旺财”的狗对象，如下所示：</span></div><div class="line">wangcai = Dog()</div><div class="line"></div><div class="line">wangcai.eat()</div><div class="line">wangcai.drink()</div><div class="line">wangcai.run()</div><div class="line">wangcai.sleep()</div><div class="line">wangcai.bark()</div></pre></td></tr></table></figure>
<p>运行结果，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">吃---</div><div class="line">喝---</div><div class="line">跑---</div><div class="line">睡---</div><div class="line">汪汪叫</div></pre></td></tr></table></figure>
<p>当我们修改了父类后，子类中的相应方法也出现了变化，并且我们没有修改子类中的任何代码，子类继承自父类的东西，这就是继承的概念，也就是说，子类拥有父类的所有属性和方法。</p>
<p>再看一个案例：</p>
<p>前面提到过，子类扩展了超类的定义。要指定超类，可以在class语句中的类名后加上超类名，并将其用圆括号括起来，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Filter</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">init</span><span class="params">(self)</span>:</span></div><div class="line">        self.blocked = []</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">filter</span><span class="params">(self, sequence)</span>:</span></div><div class="line">        <span class="keyword">return</span> [x <span class="keyword">for</span> x <span class="keyword">in</span> sequence <span class="keyword">if</span> x <span class="keyword">not</span> <span class="keyword">in</span> self.blocked]</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SPAMFilter</span><span class="params">(Filter)</span>:</span> <span class="comment"># SPAMFilter是Filter的子类</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">init</span><span class="params">(self)</span>:</span> <span class="comment"># 重写超类Filter的方法init</span></div><div class="line">        self.blocked = [<span class="string">'SPAM'</span>]</div><div class="line"></div><div class="line">f = Filter()</div><div class="line">f.init()</div><div class="line">f.filter([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>f = Filter()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.init()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.filter([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div></pre></td></tr></table></figure>
<p>Filter是一个过滤序列的通用类。实际上，它不会过滤掉任何东西。 Filter类的用途在于可用作其他类（如将’SPAM’从序列中过滤掉的SPAMFilter类）的基类（超类），如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">s = SPAMFilter()</div><div class="line">s.init()</div><div class="line">s.filter([<span class="string">'SPAM'</span>,<span class="string">'SPAM'</span>,<span class="string">'SPAM'</span>,<span class="string">'SPAM'</span>,<span class="string">'eggs'</span>,<span class="string">'bacon'</span>,<span class="string">'SPAM'</span>])</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.filter([<span class="string">'SPAM'</span>,<span class="string">'SPAM'</span>,<span class="string">'SPAM'</span>,<span class="string">'SPAM'</span>,<span class="string">'eggs'</span>,<span class="string">'bacon'</span>,<span class="string">'SPAM'</span>])</div><div class="line">[<span class="string">'eggs'</span>, <span class="string">'bacon'</span>]</div></pre></td></tr></table></figure>
<p>需要注意SPAMFilter类的定义中有两个要点：</p>
<p>第一，以提供新定义的方式重写了Filter类中方法init的定义</p>
<p>第二，直接从Filter类继承了方法filter的定义，因此无需要重新编写其定义。第二点说明了继承很有用的原因：可以创建大量不同的过滤器类，它们都从Filter类派生而来，并且都使用已编写好的方法filter。</p>
<h2 id="深入继承">深入继承</h2>
<p>如果要确定一个类是否是另一个类的子类，可以使用<code>issubclass</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>issubclass(SPAMFilter,Filter)</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>issubclass(Filter,SPAMFilter)</div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure>
<p>如果有一个类，想知道它的基类，可以访问其特殊属性<code>__bases__</code>，（需要注意的是，这里是复数，后来会提到），如下所示；</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>SPAMFilter.__bases__</div><div class="line">(&lt;class '__main__.Filter'&gt;,)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>Filter.__bases__</div><div class="line">(&lt;class 'object'&gt;,)</div></pre></td></tr></table></figure>
<p>同样的，如果要确定某个对象是否是特定类的实例，可以使用isinstance，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = SPAMFilter()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(s, SPAMFilter)</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(s, Filter)</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(s, str)</div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure>
<p>从上面的案例我们可以看出，s是SPAMFilter类的直接实例，但它也是Filter类的间接实例，因为SPMAFilter是Filter的子类，换句话讲，所有SPAMFilter对象都是Filter对象，从前面一个案例可以知道，isinstance也可用于类型，如字符串类型str，如果要想知道对象属于哪个类，可以使用属性<code>__class__</code>，或<code>type</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.__class__</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">__main__</span>.<span class="title">SPAMFilter</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">type</span><span class="params">(s)</span></span></div><div class="line"><span class="class">&lt;<span class="title">class</span> '<span class="title">__main__</span>.<span class="title">SPAMFilter</span>'&gt;</span></div></pre></td></tr></table></figure>
<h3 id="相关术语">相关术语</h3>
<p>现在了解一些有关继承的相关术语，还以前面的案例为例说明一下：</p>
<ul>
<li><code>Dog</code>类是<code>Animal</code>类的子类，<code>Animal</code>类是<code>Dog</code>类的父类，<code>Dog</code>类从<code>Animal</code>类继承。</li>
<li><code>Dog</code>类是<code>Animal</code>类的派生类，<code>Animal</code>类是<code>Dog</code>类的基类，<code>Dog</code>类从<code>Animal</code>类派生。</li>
</ul>
<h3 id="继承的传递性">继承的传递性</h3>
<ul>
<li><code>C</code>类从<code>B</code>类继承，<code>B</code>类又从<code>A</code>类继承；</li>
<li>那么<code>C</code>类就具有<code>B</code>类和<code>A</code>类的所有属性的方法。</li>
</ul>
<p><strong>子类</strong>拥有<strong>父类</strong>以及<strong>父类的父类</strong>中封闭的所有属性和方法。</p>
<h3 id="案例分析">案例分析</h3>
<p>现在再看一个简单的案例，继续以前面的案例进行演示，我们先定义一个动物类(Animal)，再创建一个动物类(Animal)的子类，即狗类(Dog)，再创建一个狗类(Dog)的子类（在这个子类中增加一个叫(bard)的方法），哮天犬类(XiaoTianQuan)（在这个类中，再添加一个飞(fly)的方法），如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190522183421.png">

</div>
<p>代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"吃---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"喝---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"跑---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sleep</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"睡---"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"汪汪叫"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaoTianQuan</span><span class="params">(Dog)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"我会飞"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 创建一个哮天犬对象</span></div><div class="line">xtq = XiaoTianQuan()</div><div class="line"></div><div class="line">xtq.fly()</div><div class="line"><span class="comment"># 使用哮天犬（XiaoTianQuan）这个类中的方法</span></div><div class="line"></div><div class="line">xtq.bark()</div><div class="line"><span class="comment"># 使用狗类(Dog)中的叫(bark)这个方法</span></div><div class="line"></div><div class="line">xtq.sleep()</div><div class="line"><span class="comment"># 使用动物类(Animal)中的睡觉(sleep)这个方法</span></div></pre></td></tr></table></figure>
<p>结果运行，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">我会飞</div><div class="line">汪汪叫</div><div class="line">睡---</div></pre></td></tr></table></figure>
<p>从结果我们可以发现，子类中的方法可以由父类继承，也可以由父类的父类继承，这就是继承的传递性，可以从解释器（这里的解释器是PyCharm）中看到这些继承关系：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190522184214.png">

</div>
<p>图1中显示：PyCharm中左侧有一个圆圈，鼠标移过去可以看到，图2中显示：Animal的子类是Dog与XiaoTianQuan，点击一下，显示图3，分别是这几个类。</p>
<p>现在再看一个案例，还是接上面的动物(Animal)类、狗类(Dog)和哮天犬类(XiaoTianQuan)案例，现在我们从动物类中派生出一个猫类(Cat)，猫类(Cat)中我们添加一个抓(Catch)这个方法，我们再看一下哮天犬类(XiaoTianQuan)还能否调用猫类(Cat)中的这个方法(Catch)，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190523124609.png">

</div>
<p>代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"吃---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"喝---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"跑---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sleep</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"睡---"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"汪汪叫"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaoTianQuan</span><span class="params">(Dog)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"我会飞"</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span><span class="params">(Animal)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">catch</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"抓老鼠"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 创建一个哮天犬对象</span></div><div class="line">xtq = XiaoTianQuan()</div><div class="line"></div><div class="line">xtq.fly()</div><div class="line"><span class="comment"># 使用哮天犬（XiaoTianQuan）这个类中的方法</span></div><div class="line"></div><div class="line">xtq.bark()</div><div class="line"><span class="comment"># 使用狗类(Dog)中的叫(bark)这个方法</span></div><div class="line"></div><div class="line">xtq.sleep()</div><div class="line"><span class="comment"># 使用动物类(Animal)中的睡觉(sleep)这个方法</span></div><div class="line"></div><div class="line">xtq.catch()</div><div class="line"><span class="comment"># 调用catch这个方法</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">汪汪叫</div><div class="line">睡---</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/封装/hm_04_继承的传递注意事项.py"</span>, line <span class="number">44</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    xtq.catch()</div><div class="line">AttributeError: <span class="string">'XiaoTianQuan'</span> object has no attribute <span class="string">'catch'</span></div></pre></td></tr></table></figure>
<p>运行出错，因为根据继承的传递性，XiaoTianQuan可以继承Dog中的方法，也可以继承Animal中的方法，而Cat是Animal的子类，与Dog是平行关系，XiaoTianQuan无法继承Cat中的方法。</p>
<h2 id="方法的重写">方法的重写</h2>
<p>当我们遇到一种情况，例如当父类的方法实现不能满足子类需要时，就需要对方法进行重写(override)，例如Animal的子类是Dog，Dog的子类的XiaoTianQuan，而XiaoTianQuan中的叫(bark)这个方法与Dog中的(bark)不一样怎么办，这个时候就需要在XiaoTianQuan类中再次重写bark，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190523125502.png">

</div>
<p><strong>重写</strong>父类方法有两种情况：</p>
<ul>
<li><strong>覆盖</strong>父类的方法；</li>
<li><strong>扩展</strong>父类的方法。</li>
</ul>
<h3 id="覆盖父类的方法">覆盖父类的方法</h3>
<p>​ 如果在开发中，父类的方兴未艾实现和子类的方法实现完全不同，就可以采用覆盖的方式，在子类中重新编写父类的方法。具体的实现方法就是在子类中定义一个与父类相同的方法，但代码不同。</p>
<p>重写之后，代码运行时只会调用子类中重写的方法，而不会调用父类中封装的方法，下面看一下案例。</p>
<h3 id="覆盖方法案例分析">覆盖方法案例分析</h3>
<p>先看一下原来的代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"吃---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"喝---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"跑---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sleep</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"睡---"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"汪汪叫"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaoTianQuan</span><span class="params">(Dog)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"我会飞"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 创建一个哮天犬对象</span></div><div class="line">xtq = XiaoTianQuan()</div><div class="line">xtq.bark()</div><div class="line"><span class="comment"># 使用狗类(Dog)中的叫(bark)这个方法</span></div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">汪汪叫</div></pre></td></tr></table></figure>
<p>在这个案例中，我们创建了一个叫<code>xtq</code>的<code>XiaoTianQuan</code>的对象，调用了<code>XiaoTianQuan</code>中的<code>bark</code>方法，如果我们改变了需求，使用哮天犬(xtq)是一种神犬，它叫的方式跟普通的狗不一样，也就是说我们要让<code>xtq</code>中的叫法发生改变，例如由<code>汪汪叫</code>变成了<code>叫得跟神一样...</code>，那么如何实现呢，此时就需要在<code>XiaoTianQuan</code>这个类中重新再次定义<code>bark</code>这个方法，输入以下代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">    print(<span class="string">"叫得跟神一样。。。"</span>)</div></pre></td></tr></table></figure>
<p>再次运行时，这段代码就会屏蔽父类Dog中的bark方法，只使用XiaoTianQuan类中的方法，完整代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"吃---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"喝---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"跑---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sleep</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"睡---"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"汪汪叫"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaoTianQuan</span><span class="params">(Dog)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"我会飞"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"叫得跟神一样..."</span>)</div><div class="line"></div><div class="line"><span class="comment"># 创建一个哮天犬对象</span></div><div class="line">xtq = XiaoTianQuan()</div><div class="line">xtq.bark()</div><div class="line"><span class="comment"># 使用XiaoTianQuan类中的叫(bark)这个方法</span></div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">叫得跟神一样...</div></pre></td></tr></table></figure>
<p>从结果中我们就可以看到，xtq中调用了XiaoTianQuan类中重新定义的bark方法。</p>
<h3 id="扩展方法案例分析">扩展方法案例分析</h3>
<p>现在再看一下重写的另外一种形式，就是对父类方法进行<strong>扩展</strong>。</p>
<p>在实际开发中，有些子类中的方法实现包含了父类的方法实现，并且父类中的这些是子类中这些方法一部分，此时就用到了重写中的<strong>扩展</strong>形式，它的具体步骤如下所示：</p>
<ol style="list-style-type: decimal">
<li>在子类中重写<strong>父类</strong>（有的教程称为<strong>超类</strong>）的方法；</li>
<li>在需要的位置使用<code>super().父类方法</code>来调用<strong>父类中同样的方法</strong>；</li>
<li>代码其他的位置针对子类的需求，编写<strong>子类中特有的代码实现方式</strong>。</li>
</ol>
<h4 id="关于super">关于super</h4>
<p>此处介绍一下Python中的<code>super</code>：</p>
<ul>
<li><code>super</code>是Python中的一个特殊的类；</li>
<li><code>super()</code>就是使用<code>super</code>类创建出来的对象；</li>
<li>最常用的场景就是在重写父类方法时，调用父类中封装好的方法。</li>
</ul>
<h4 id="具体案例">具体案例</h4>
<p>现在再来分析一下案例，还以前面的案例说明一下，我们此时又改变了需求，既要求xtq能够像普通狗一样叫（即“汪汪叫”），也能表达出它与普通狗不同的地方，此时们就需要对Dog类中的<code>bark</code>方法进行扩展，因此我们要做以下三点改变：</p>
<ol style="list-style-type: decimal">
<li>针对子类特有的需求编写代码；</li>
<li>使用<code>super().父类中的方法</code>来调用原本在父类中封装的方法；</li>
<li>增加其他子类的代码。</li>
</ol>
<p>也就是说我们要在<code>XiaoTianQuan</code>这个类中重写<code>bark</code>这个方法，并且进行改变，这一部分的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="comment"># 1. 针对子类特有的需求进行编写</span></div><div class="line">    print(<span class="string">"神一样的叫唤..."</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 2. 使用super().调用原本在父类中封装的方法</span></div><div class="line">    super().bark()</div><div class="line"></div><div class="line">    <span class="comment"># 3. 增加其他子类的代码</span></div><div class="line">    print(<span class="string">"#$@#@!@#@$!!@"</span>)</div></pre></td></tr></table></figure>
<p>完整代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"吃---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"喝---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"跑---"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sleep</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"睡---"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"汪汪叫"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaoTianQuan</span><span class="params">(Dog)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"我会飞"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bark</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 针对子类特有的需求进行编写</span></div><div class="line">        print(<span class="string">"神一样的叫唤..."</span>)</div><div class="line"></div><div class="line">        <span class="comment"># 2. 使用super().调用原本在父类中封装的方法</span></div><div class="line">        super().bark()</div><div class="line"></div><div class="line">        <span class="comment"># 3. 增加其他子类的代码</span></div><div class="line">        print(<span class="string">"#$@#@!@#@$!!@"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 创建一个哮天犬对象</span></div><div class="line">xtq = XiaoTianQuan()</div><div class="line">xtq.bark()</div><div class="line"><span class="comment"># 使用狗类(Dog)中的叫(bark)这个方法</span></div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">神一样的叫唤...</div><div class="line">汪汪叫</div><div class="line"><span class="comment">#$@#@!@#@$!!@</span></div></pre></td></tr></table></figure>
<p>从结果中我们可以看到，我们为<code>bark</code>方法添加了新的功能，它不仅继承了原来父类中的功能，还有新的功能。</p>
<h4 id="注意事项">注意事项</h4>
<p>在<code>python2.x</code>中调用父类方法中无法使用前面提到的<code>super()</code>，它只能使用<code>父类名.方法(self)</code>来实现，这一区别需要注意，这里不再详述。</p>
<h2 id="父类的私有属性和私有方法">父类的私有属性和私有方法</h2>
<p>前面我们提到了<strong>私有属性</strong>和<strong>私有方法</strong>的一些知识：</p>
<blockquote>
<ul>
<li><strong>私有属性、方法</strong>是对象的隐私，不对外公开，<strong>外界</strong>以及<strong>子类</strong>都不能直接访问；</li>
<li><strong>私有属性、方法</strong>通常用于做一些内部的事情。</li>
</ul>
</blockquote>
<p>从原来的知识点中我们知道了：</p>
<ol style="list-style-type: decimal">
<li><strong>子类对象</strong>不能在自己的方法内部<strong>直接</strong>访问父类的<strong>私有属性或私有方法</strong>；</li>
<li><strong>子类对象</strong>可以通过父类的公有方法<strong>间接</strong>访问到<strong>私有属性或私有方法</strong>。</li>
</ol>
<p>先看下面的一张示意图：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190523133308.png">

</div>
<p>从上面的示意图我们知道，<code>A</code>是父类，<code>B</code>是<code>A</code>的子类，其中：</p>
<ul>
<li><code>B</code>的对象不能直接访问<code>__num2</code>属性；</li>
<li><code>B</code>的对象不能在<code>demo</code>方法内访问<code>__num2</code>的属性；</li>
<li><code>B</code>的对象可以在<code>demo</code>方法内调用父类的<code>test</code>方法；</li>
<li>父类的<code>test</code>方法内部，能够访问<code>__num2</code>属性和<code>__test</code>方法。</li>
</ul>
<h3 id="案例分析1子类无法直接访问父类的属性与方法">案例分析1——子类无法直接访问父类的属性与方法</h3>
<p>现在用代码来分析一下上面提到的父类私有属性和私有方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        self.num1 = <span class="number">100</span></div><div class="line">        self.__num2 = <span class="number">200</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__test</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"私有方法　%d %d"</span> %(self.num1, self.__num2))</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建一个子类对象</span></div><div class="line">b = B()</div><div class="line">print(b)</div><div class="line"></div><div class="line"><span class="comment"># 在外界不能直接访问对象的私有属性/调用私有方法</span></div><div class="line">print(b.__num2)</div><div class="line">b.__test()</div></pre></td></tr></table></figure>
<p>代码运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Traceback (most recent call last):</div><div class="line">&lt;__main__.B object at <span class="number">0x00000170DA378BA8</span>&gt;</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/封装/hm_07_父类的私有属性和私有方法.py"</span>, line <span class="number">20</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    print(b.__num2)</div><div class="line">AttributeError: <span class="string">'B'</span> object has no attribute <span class="string">'__num2'</span></div></pre></td></tr></table></figure>
<p>结果出错。因此可以看出来，虽然<code>B</code>的父类是<code>A</code>，但在<code>B</code>中也无法调用<code>A</code>的私有属性和方法。</p>
<p>再修改一下代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        self.num1 = <span class="number">100</span></div><div class="line">        self.__num2 = <span class="number">200</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__test</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"私有方法　%d %d"</span> %(self.num1, self.__num2))</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 在子类的对象方法中，无法访问父类的私有属性</span></div><div class="line">        print(<span class="string">"访问父类的私有属性 %d"</span> % self.__num2)</div><div class="line"></div><div class="line">        <span class="comment"># 2. 在子类的对象方法中，无法调用父类的私有方法</span></div><div class="line">        self.__test()</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建一个子类对象</span></div><div class="line">b = B(A)</div><div class="line">print(b)</div><div class="line"></div><div class="line"><span class="comment"># 在外界不能直接访问对象的私有属性/调用私有方法</span></div><div class="line">print(b.__num2)</div><div class="line">b.__test()</div></pre></td></tr></table></figure>
<p>结果运行仍然出错，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/封装/hm_07_父类的私有属性和私有方法.py"</span>, line <span class="number">23</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    b = B(A)</div><div class="line">TypeError: object() takes no parameters</div></pre></td></tr></table></figure>
<p>在子类中无法调用父类的方法。</p>
<h3 id="案例分析2间接访问父类私有属性调用私有方法">案例分析2——间接访问父类私有属性，调用私有方法</h3>
<p>虽然子类不能在自己的方法内部直接访问父类的私有属性和私有方法，但是可以访问其公有属性与公有方法，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        self.num1 = <span class="number">100</span></div><div class="line">        self.__num2 = <span class="number">200</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__test</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"私有方法　%d %d"</span> %(self.num1, self.__num2))</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"父类的公有方法"</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">b = B() <span class="comment"># 创建一个子类对象</span></div><div class="line">print(b) <span class="comment"># 输出b的内存地址</span></div><div class="line">print(b.num1) <span class="comment"># 输出B的父类的公有属性num1</span></div><div class="line">b.test() <span class="comment"># 调用父类的公有方法</span></div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;__main__.B object at <span class="number">0x000002291BB00550</span>&gt;</div><div class="line"><span class="number">100</span></div><div class="line">父类的公有方法</div></pre></td></tr></table></figure>
<p>从结果我们可以知道，子类可以访问父类的公有属性，调用公有方法。</p>
<p>现在我们继续看案例，在子类<code>B</code>中的方法<code>demo()</code>能否访问父类的公有属性，调用父类的公有方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        self.num1 = <span class="number">100</span></div><div class="line">        self.__num2 = <span class="number">200</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__test</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"私有方法　%d %d"</span> %(self.num1, self.__num2))</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"父类的公有方法"</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 在子类的对象方法中，不能访问父类的私有属性</span></div><div class="line">        <span class="comment"># print("访问父类的私有属性 %d" % self.__num2)</span></div><div class="line"></div><div class="line">        <span class="comment"># 2. 在子类的对象方法中，不能调用父类的私有方法</span></div><div class="line">        <span class="comment"># self.__test()</span></div><div class="line"></div><div class="line">        <span class="comment"># 3. 访问父类的公有属性</span></div><div class="line">        print(<span class="string">"子类方法 %d"</span> % self.num1)</div><div class="line"></div><div class="line">        <span class="comment"># 4. 调用父类的公有方法</span></div><div class="line">        self.test()</div><div class="line">        <span class="keyword">pass</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">b = B() <span class="comment"># 创建一个子类对象</span></div><div class="line">b.demo()</div><div class="line"><span class="comment"># print(b) # 输出b的内存地址</span></div><div class="line"><span class="comment"># print(b.num1) # 输出B的父类的公有属性num1</span></div><div class="line"><span class="comment"># b.test() # 调用父类的公有方法</span></div></pre></td></tr></table></figure>
<p>从结果中我们可以看到，子类中可以调用父类中的公有方法。</p>
<p>再继续看案例，在这个案例中，我们会看到：①在父类中，通过父类的公用方法（假设是<code>abc</code>这个方法）调用父类私有方法或访问父类的私有属性；②在子类中，调用父类的这个公有方法（就是<code>abc</code>这个方法）。</p>
<p>这种情况会是什么样子，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        self.num1 = <span class="number">100</span></div><div class="line">        self.__num2 = <span class="number">200</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__test</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"私有方法　%d %d"</span> %(self.num1, self.__num2))</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"父类的公有方法 %d"</span> % self.__num2)</div><div class="line">        <span class="comment"># 在父类中，test()是一个公有方法，而__num2是一个私有属性</span></div><div class="line">        self.__test()</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 在子类的对象方法中，不能访问父类的私有属性</span></div><div class="line">        <span class="comment"># print("访问父类的私有属性 %d" % self.__num2)</span></div><div class="line"></div><div class="line">        <span class="comment"># 2. 在子类的对象方法中，不能调用父类的私有方法</span></div><div class="line">        <span class="comment"># self.__test()</span></div><div class="line"></div><div class="line">        <span class="comment"># 3. 访问父类的公有属性</span></div><div class="line">        print(<span class="string">"子类方法 %d"</span> % self.num1)</div><div class="line"></div><div class="line">        <span class="comment"># 4. 调用父类的公有方法</span></div><div class="line">        self.test()</div><div class="line">        <span class="keyword">pass</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">b = B() <span class="comment"># 创建一个子类对象</span></div><div class="line">b.demo()</div><div class="line"><span class="comment"># print(b) # 输出b的内存地址</span></div><div class="line"><span class="comment"># print(b.num1) # 输出B的父类的公有属性num1</span></div><div class="line"><span class="comment"># b.test() # 调用父类的公有方法</span></div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">子类方法 <span class="number">100</span></div><div class="line">父类的公有方法 <span class="number">200</span></div><div class="line">私有方法　<span class="number">100</span> <span class="number">200</span></div></pre></td></tr></table></figure>
<p>从结果中我们可以看到：</p>
<ol style="list-style-type: decimal">
<li><code>b</code>是<code>B</code>的对象，<code>B</code>是<code>A</code>的子类；</li>
<li><code>b</code>无法直接访问<code>A</code>的私有属性，也无法直接调用<code>A</code>的私有方法；</li>
<li><code>A</code>中定义了一个公有方法<code>test()</code>，这个公有方法中调用了私有方法<code>__test()</code>，访问了私有属性<code>__num2</code>；</li>
<li><code>b</code>中调用了<code>A</code>的公有方法<code>test()</code>，因此<code>b</code>也能调用<code>A</code>的私有方法<code>__test()</code>，访问了私有属性<code>__num2</code>，这种途径是间接实现的，而非直接实现的，相当于使用<code>test()</code>来做了一个中转。</li>
</ol>
<h2 id="多继承">多继承</h2>
<h3 id="单继承与多继承">单继承与多继承</h3>
<p>前面我们提到的案例都是单继承，也就是一个子类只有一个父类，在这一部分中，我们会涉及到多继承：</p>
<ul>
<li>子类可以拥有<strong>多个父类</strong>，并且具有<strong>所有父类</strong>的<strong>属性</strong>和<strong>方法</strong>；</li>
<li>例如：孩子会继承息父类和母亲的特性，如下所示：</li>
</ul>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190523141917.png">

</div>
<h4 id="多继承的语法">多继承的语法</h4>
<p>多继承的语法如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> 子类名<span class="params">(父类名<span class="number">1</span>, 父类名<span class="number">2.</span>..)</span></span></div><div class="line"><span class="class">    <span class="title">pass</span></span></div></pre></td></tr></table></figure>
<h4 id="多继承案例分析">多继承案例分析</h4>
<p>现在我们根据前面的多继承示意图来看一个案例，在这个案例中，我们定义2个父类，分别是<code>A</code>和<code>B</code>，在<code>A</code>中定义一个<code>test()</code>方法，在<code>B</code>中定义一个<code>demo()</code>方法，然后再定义一个子类，即<code>C</code>类，让<code>C</code>类继承<code>A</code>类和<code>B</code>类，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"test 方法"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"demo 方法"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A, B)</span>:</span></div><div class="line"></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line">c = C()</div><div class="line">c.test()</div><div class="line">c.demo()</div></pre></td></tr></table></figure>
<p>代码运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">test 方法</div><div class="line">demo 方法</div></pre></td></tr></table></figure>
<p>从结果中我们可以发现，<code>C</code>既可以调用<code>A</code>中的<code>test()</code>方法，也能调用<code>B</code>中的<code>demo()</code>方法。多继承可以在很大程度上节省代码量。</p>
<h4 id="多继承的注意事项">多继承的注意事项</h4>
<p>在使用多继承的时候，我们可以会遇到这样的问题：如果不同的父类中存在同名的方法，子类对象在调用方法时，会调用哪一个父类的方法呢？就像下面的这个样子：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190523142920.png">

</div>
<p><code>A</code>中有<code>test()</code>方法，<code>B</code>中也有<code>test()</code>方法，如果<code>C</code>同时继承A与B，那么在调用<code>test()</code>方法时，就会有问题。</p>
<p>我们来分析一下这种情况，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"A --- test 方法"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"A --- demo 方法"</span>)</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"B --- demo 方法"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"B --- test 方法"</span>)</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A, B)</span>:</span></div><div class="line"></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line">c = C()</div><div class="line">c.test()</div><div class="line">c.demo()</div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">A --- test 方法</div><div class="line">A --- demo 方法</div></pre></td></tr></table></figure>
<p>从结果中可以发现，<code>C</code>中的<code>test()</code>与<code>demo()</code>方法都继承自<code>A</code>。从<code>class C(A,B)</code>这段代码中我们可以知道，<code>C</code>是先继承自<code>A</code>，再继承自<code>B</code>，因此，如果遇到相同名称的方法，那么就是先<code>A</code>后<code>B</code>，如果我们把代码改为<code>class C(B,A)</code>，那么运行结果就是下面的这个样子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">B --- test 方法</div><div class="line">B --- demo 方法</div></pre></td></tr></table></figure>
<p>此时就会发现，<code>C</code>中的方法都继承自<code>B</code>。但Python中子类关于父类的继承顺序并不是如此简单，举这个例子主要是为了说明，当两个父类中含有相同名称的方法时，慎重选择多继承。</p>
<h4 id="mro">MRO</h4>
<p>MRO全称是Method Resolution Order，即方法解析顺序。它用于在多继承时判断方法、属性的调用路径。Python中针对类提供了一个内置属性<code>__mro__</code>用于查看方法搜索顺序。</p>
<p>在前面的代码中补充一句<code>print(C.__mro__)</code>，结果如下所示：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(&lt;class '__main__.C'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;)</div></pre></td></tr></table></figure>
<p>从结果中可以看出以下信息：</p>
<ol style="list-style-type: decimal">
<li>输出结果是一个元组；</li>
<li>元组中的顺序就是一些类，分别是C，B，A，原来结果中的运行原理就是，当我们使用<code>c=C()</code>来创建一个<code>C</code>类的<code>c</code>对象时，如果有<code>C</code>类，那么就调用<code>C</code>类中的方法，如果没有，就按照从左到右的顺序进行搜索，也就是按C，B，A这三个类中方法进行调用，的顺序来进行调用。</li>
<li>最后一个是<code>&lt;class 'object'&gt;</code>，它是Python3中的所有类的基类，也就是说，只要我们定义了一个类，所有类的基类都是<code>&lt;class 'object'&gt;</code>，此处先不详述。</li>
<li>如果查找到最后一个基类，还没有找到相应的类，python就会报错。</li>
</ol>
<h2 id="多个超类">多个超类</h2>
<p>前面我们说了，<code>__bases__</code>是复数形式，我们可以用它来知道类的基类，而基类可能有多个，为说明如何继承多个类，下面我们来看一下案例，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculatro</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">calculate</span><span class="params">(selfself, expression)</span>:</span></div><div class="line">        self.value = eval(expression)</div><div class="line">        </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Talker</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"Hi, my value is "</span>, self.value)</div><div class="line">        </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TalkingCalculator</span><span class="params">(Calculator, Talker)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p>子类TalkingCalculator本身无所作为，其所有的行为都是从超类那里继承的，关键是通过Calculator那里继承calculate，并从Talker那里继承talk，它能了会说话的计算器，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">calculate</span><span class="params">(self, expression)</span>:</span></div><div class="line">        self.value = eval(expression)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Talker</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"Hi, my value is "</span>, self.value)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TalkingCalculator</span><span class="params">(Calculator, Talker)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line">tc = TalkingCalculator()</div><div class="line">tc.calculate(<span class="string">'1 + 2 *3'</span>)</div><div class="line">tc.talk()</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>tc = TalkingCalculator()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tc.calculate(<span class="string">'1 + 2 *3'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tc.talk()</div><div class="line">Hi, my value <span class="keyword">is</span>  <span class="number">7</span></div></pre></td></tr></table></figure>
<p>这种情况称为多重继承，这是一种功能强大的工具，然而除非万不得已，尽量避免使用这种方法。在使用多重继承时，有一点需要注意：如果多个超类以不同的方式实现了同一个方法（即有多个同名方法），必须在class语句中仔细排列这些超类，因此位于前面的类的方法会覆盖位于后面的类的方法。因此，在前面的救命中，如何Calculator类包含方法talk，那么这个方法将覆盖Talker类的方法talk，导致它不可访问，如果像下面这样反转超类的排列顺序，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TalkingCalculator</span><span class="params">(Talker, Calculator)</span>:</span><span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p>这将导致Talker的方法talk是可以访问的，多个超类的超类相同时，查找特定方法或属性时访问超类的顺序称为方法解析顺序（MRO）。</p>
<h3 id="新式类与旧式经典类">新式类与旧式（经典）类</h3>
<p>上面提到，<code>object</code>是Python为所有对象提供的基类，提供有一些内置的属性和方法，可以使用<code>dir</code>函数查看。</p>
<p>Python中有新式类与旧式类区分，其中：</p>
<ul>
<li>新式类：以<code>object</code>为基类的类，推荐使用；</li>
<li>经典类：不以<code>object</code>为基类的类，不推荐使用。</li>
<li>在<code>Python 3.x</code>中定义的类，如果没有指定父类，会默认使用<code>object</code>作为该类的基类，<code>Python 3.x</code>中定义的类都是新式类；</li>
<li>在<code>Python 2.x</code>中定义类时，如果没有指定父类，则不会以<code>object</code>作为基类。</li>
<li>新式类和经典类在多继承时会影响到方法的搜索顺序。</li>
<li>为了保证编写的代码能够同时在<code>Python 2.x</code>和<code>Python 3.x</code>中同时运行，在定义类时，如果没有父类，建议统一继承自<code>object</code>类。</li>
</ul>
<p>现在我们看一下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">1</span>]: <span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></div><div class="line">   ...:     <span class="keyword">pass</span></div><div class="line">   ...:</div><div class="line"></div><div class="line">In [<span class="number">2</span>]: a = A()</div><div class="line"></div><div class="line">In [<span class="number">3</span>]: dir(a)</div><div class="line">Out[<span class="number">3</span>]:</div><div class="line">[<span class="string">'__class__'</span>,</div><div class="line"> <span class="string">'__delattr__'</span>,</div><div class="line"> <span class="string">'__dict__'</span>,</div><div class="line"> <span class="string">'__dir__'</span>,</div><div class="line"> <span class="string">'__doc__'</span>,</div><div class="line"> <span class="string">'__eq__'</span>,</div><div class="line"> <span class="string">'__format__'</span>,</div><div class="line"> <span class="string">'__ge__'</span>,</div><div class="line"> <span class="string">'__getattribute__'</span>,</div><div class="line"> <span class="string">'__gt__'</span>,</div><div class="line"> <span class="string">'__hash__'</span>,</div><div class="line"> <span class="string">'__init__'</span>,</div><div class="line"> <span class="string">'__init_subclass__'</span>,</div><div class="line"> <span class="string">'__le__'</span>,</div><div class="line"> <span class="string">'__lt__'</span>,</div><div class="line"> <span class="string">'__module__'</span>,</div><div class="line"> <span class="string">'__ne__'</span>,</div><div class="line"> <span class="string">'__new__'</span>,</div><div class="line"> <span class="string">'__reduce__'</span>,</div><div class="line"> <span class="string">'__reduce_ex__'</span>,</div><div class="line"> <span class="string">'__repr__'</span>,</div><div class="line"> <span class="string">'__setattr__'</span>,</div><div class="line"> <span class="string">'__sizeof__'</span>,</div><div class="line"> <span class="string">'__str__'</span>,</div><div class="line"> <span class="string">'__subclasshook__'</span>,</div><div class="line"> <span class="string">'__weakref__'</span>]</div></pre></td></tr></table></figure>
<p>在上面的代码中我们可以知道，我们开始定义了一个A类，代码为<code>class A(object):</code>，从这里可以看出来，这是一个新式类，然后我们使用了<code>dir(a)</code>来查看这个类的方法，可以看到许多方法，但是，如果在Python3中，即使你输入的是<code>class A():</code>，没有指定继承自<code>object</code>，那么A类也是新式类，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">5</span>]: <span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></div><div class="line">   ...:     <span class="keyword">pass</span></div><div class="line">   ...:</div><div class="line"></div><div class="line">In [<span class="number">6</span>]: b = B()</div><div class="line"></div><div class="line">In [<span class="number">7</span>]: dir(b)</div><div class="line">Out[<span class="number">7</span>]:</div><div class="line">[<span class="string">'__class__'</span>,</div><div class="line"> <span class="string">'__delattr__'</span>,</div><div class="line"> <span class="string">'__dict__'</span>,</div><div class="line"> <span class="string">'__dir__'</span>,</div><div class="line"> <span class="string">'__doc__'</span>,</div><div class="line"> <span class="string">'__eq__'</span>,</div><div class="line"> <span class="string">'__format__'</span>,</div><div class="line"> <span class="string">'__ge__'</span>,</div><div class="line"> <span class="string">'__getattribute__'</span>,</div><div class="line"> <span class="string">'__gt__'</span>,</div><div class="line"> <span class="string">'__hash__'</span>,</div><div class="line"> <span class="string">'__init__'</span>,</div><div class="line"> <span class="string">'__init_subclass__'</span>,</div><div class="line"> <span class="string">'__le__'</span>,</div><div class="line"> <span class="string">'__lt__'</span>,</div><div class="line"> <span class="string">'__module__'</span>,</div><div class="line"> <span class="string">'__ne__'</span>,</div><div class="line"> <span class="string">'__new__'</span>,</div><div class="line"> <span class="string">'__reduce__'</span>,</div><div class="line"> <span class="string">'__reduce_ex__'</span>,</div><div class="line"> <span class="string">'__repr__'</span>,</div><div class="line"> <span class="string">'__setattr__'</span>,</div><div class="line"> <span class="string">'__sizeof__'</span>,</div><div class="line"> <span class="string">'__str__'</span>,</div><div class="line"> <span class="string">'__subclasshook__'</span>,</div><div class="line"> <span class="string">'__weakref__'</span>]</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/13/Python/Python学习笔记（12）-面向对象之封装/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/13/Python/Python学习笔记（12）-面向对象之封装/" itemprop="url">Python学习笔记（12）-黑马教程-面向对象之封装</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-13T12:00:00+08:00">
                2018-04-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  12,884
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  50
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="面向对象相关知识背景">面向对象相关知识背景</h2>
<p>面向对象即Object Oriented,OO，这是一种软件开发方法，具体的定义也说不清楚，根据书中的描述，对象大致意味着一系列数据或属性以及一套访问这些数据的方法。在《Python无师自通》这本书中提到：</p>
<blockquote>
<p>在 Python 中，每一个数据值，如 2 或“Hello, World!”，被称为对象（object）。可以把对象看作拥有 3 个属性的数据值：唯一标识（identity）、数据类型和值。</p>
<p>对象的唯一标识，指的是其在计算机内存中的地址，该地址不会变化。</p>
<p>对象的数据类型是对象所属的数据类别，这决定了对象的属性，也不会变化。</p>
<p>对象的值是其表示的数据，例如数字 2 的值即为 2。</p>
<p>“Hello, World!”这个对象的数据类型为字符串（str，string 的缩写），值为“Hello, World!”。如果提及数据类型为 str 的对象，可以称其为字符串。</p>
</blockquote>
<p>与面向对象有关的一些术语有多态、封装、方法、属性、超类和继承。</p>
<p>多态：可对不同类型的对象执行相同的损伤；；</p>
<p>封装：对外部隐藏有关对象工作原理的细节。</p>
<p>继承：可基于通用类创建出专用类。</p>
<p>在后面的笔记中会详细说明这是什么意思。</p>
<h2 id="什么是类">什么是类</h2>
<p>类是一种对象，每个对象都属于特定的类，并被称为该类的实例。例如，如果你在窗外看到一只鸟，这只鸟就是“鸟类”的一个实例，鸟类是一个非常通用（抽象）的类，它有许多个子类：你看到的那只鸟可能属于子类”云雀“。你可以将“鸟类”视为由所有鸟组成的集合，而“云雀”是其一个子集，一个类的对象为另一个类的对象的子集时，前者就是后者的子类。因此“云雀”为“鸟类”的子类，而“鸟类”为“云雀”的超类。并且在面向对象的编程中，是先定义类，然后再由类生成一个实例。</p>
<p>通过上面的比喻，我们大致就理解了类，子类，超类。但在面向对象的编程中，子类可能还要更复些，因为类是由其支持的方法定义的。类的所有实例都有该类的所有方法，因此子类的所有实例都有超类的所有方法。因此，要定义子类，只需要定义多出来的方法（或者是重写某个方法）即可。例如鸟类（我们用Bird替代）可能提供方法fly，而Penguin类（Bird的一个子类）可能新增方法eat_fish。创建Penguin类时，我们还可能要重写超类方法，即方法fly，企鹅Penguin不会飞，我们要在Penguin的实例中，方法fly应什么都不做或引发异常。</p>
<h3 id="创建类">创建类</h3>
<p>在使用面向对象开发之前，应该首先分析一下需要，确定程序中需要包括哪些类。在程度开发中，要设计一个类，通常需要满足以下三个要求：</p>
<ol style="list-style-type: decimal">
<li>类名。类名的命名要以驼峰式命名法进行命名，也就是每个单词的首字母要大写，例如<code>CapWords</code>；</li>
<li>属性。属性赋予事物具有什么样的特性；</li>
<li>方法。方法赋予事物具有什么样的行为。</li>
<li></li>
</ol>
<h2 id="封装encapsulation">封装(encapsulation)</h2>
<p>封装指的是向外部隐藏不必要的细节。这听起来有点像多态（无需知道对象的内部细节就可使用它）。这两个概念很像，因为它们都是抽象的原则。它们都像函数一样，可帮助你处理程序的组成部分，让你无需关心不必要的细节。</p>
<p>但封装与多态又有所不同，多态让你无需知道对象所属的类（对象的类型）就能调用其方法，而封闭则是让你需知道对象的构造就能使用它，下面展示一个案例，在这个案例中，使用了多态，但是没有使用封闭，发吭你有一个名为OpenObject的类，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;o = OpenObject()</div><div class="line">&gt;&gt;&gt;o.set_name(<span class="string">'Sir Lancelot'</span>)</div><div class="line">&gt;&gt;&gt;o.get_names()</div><div class="line">&gt;&gt;&gt;<span class="string">'Sir Lancelot'</span></div></pre></td></tr></table></figure>
<p>在上面的案例中，我们像调用函数一样调用了类，创建了一个对象，并将其关联到变量o，然后使用了<code>set_name</code>和<code>get_name</code>这两个方法（假设OpenObject支持这些方法），但是，如果o将其名称储存在全局变量global_name中，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;gloabl_name</div><div class="line"><span class="string">'Sir Lancelot'</span></div></pre></td></tr></table></figure>
<p>这就意味着使用OpenObject类的实例（对象）时，就需要考虑global_name的内容，事实上，必须确保无人能修改它。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;global_name = <span class="string">'Sir Gumby'</span></div><div class="line">&gt;&gt;&gt;o.get_name()</div><div class="line"><span class="string">'Sir Gumby'</span></div></pre></td></tr></table></figure>
<p>d如果浓度创建多个OpenObject对象，则会出现问题，因为它们共用同一个变量，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>o1 = OpenObject() </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>o2 = OpenObject() </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>o1.set_name(<span class="string">'Robin Hood'</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>o2.get_name() </div><div class="line"><span class="string">'Robin Hood'</span></div></pre></td></tr></table></figure>
<p>在上面的这个案例中，设置一个对象的名称时，将自动设置另一个对象的名称，这可能不是我们想要的结果。基本上，你希望对象是抽象的：当调用方法时，无需操心其他的事情，如避免干扰全局变量。如何将名称“封装”在对象中呢，将其作为一种<code>属性</code>即可，属性是归属于对象的变量，就像方法一样，实际上，方法差不多就是与函数相关联的属性，如果你使用属性而非全局变量重新编写前面的类，并将其重命名为ClosedObject，就可以像下面这样使用它，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = ClosedObject() </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c.set_name(<span class="string">'Sir Lancelot'</span>) </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c.get_name() </div><div class="line"><span class="string">'Sir Lancelot'</span></div></pre></td></tr></table></figure>
<p>到目前为止，一切顺利，但这并不能证明名称不是存储在全局变量中的，现在再来创建一个对象，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = ClosedObject() </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r.set_name(<span class="string">'Sir Robin'</span>) </div><div class="line">r.get_name()</div><div class="line"><span class="string">'Sir Robin'</span></div></pre></td></tr></table></figure>
<p>从中可知正确地设置了新对象的名称，此时再来看一下第一个对象，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>c.get_name() </div><div class="line"><span class="string">'Sir Lancelot'</span></div></pre></td></tr></table></figure>
<p>其名称还在，因为这个对象有自己的状态，对象的状态由其属性（如名称）描述，对象的方法可能修改这些属性，因此对象将一系列函数（方法）组合起来，并赋予它们访问一些变量（属性）的权限，而属性可用于在两次函数调用之间存储值。</p>
<h3 id="属性和方法的确定">属性和方法的确定</h3>
<p>描述对象特征的内容可以定义为<code>属性</code>。对象具有的某些行为（动词），就可以定义为<code>方法</code>。</p>
<p>例如我们看下面一个案例：</p>
<ul>
<li><strong>小明</strong>今年<strong>18岁</strong>，身高<strong>1.75</strong>，每天早上<strong>跑</strong>完步，会去<strong>吃</strong>东西。</li>
<li><strong>小美</strong>今年<strong>17岁</strong>，身高<strong>1.65</strong>，小美<strong>不跑步</strong>，小美喜<strong>欢</strong>吃东西。</li>
</ul>
<p>从上面的描述我们可以这么思考，我们可以设计一个人类，例如<code>persion</code>，这个类中需要包含3个属性，即名字<code>name</code>，年龄<code>age</code>，和身高<code>height</code>，此外，还要包括2个动作，分别为是跑步<code>run</code>和吃东西<code>eat</code>。</p>
<p>再看一个案例：</p>
<p>我们有以下需求：</p>
<ul>
<li>一只<strong>黄颜色</strong>的狗，叫<strong>大黄</strong></li>
<li>看见生人<strong>叫</strong></li>
<li>看见家人<strong>摇尾巴</strong></li>
</ul>
<p>那么我们就会设计这样一个狗类(<code>Dog</code>)，这个类中含有2个属性，分别是名字(<code>name</code>）用于记录狗的名字，颜色(<code>color</code>)用于记录狗的颜色；含有2个方法，分别是叫(<code>shout</code>)和摇尾巴(<code>shake</code>)。</p>
<p>以上就是类是如何设计的，总之就是一句话，先考虑需求，然后考虑类，描述性的文字是属性，动作性的文字是方法。</p>
<h2 id="面向对象基础语法">面向对象基础语法</h2>
<p>在Python中，对象无所不在，变量、数据、函数都是对象。在Python中，可能通过两种方法来验证以对象：</p>
<ol style="list-style-type: decimal">
<li>在标记符/数据后输入一个<code>.</code>，然后按下<code>TAB</code>键，<code>ipython</code>就会提示该对象能够调用的<code>方法列表</code>。</li>
<li>使用内置函数<code>dir</code>传入标识符/数据，可以查看对象内的<strong>所有属性及方法</strong>。</li>
</ol>
<p>先看第一种方法，在<code>ipython</code>中定义一个列表变量，即<code>gl_list=[]</code>，然后输入<code>gl_list.</code>（后面有一个点），按下<code>TAB</code>键，后面就会出现这个对象能使用的方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">3</span>]: gl_list = []</div><div class="line"></div><div class="line">In [<span class="number">4</span>]: gl_list.</div><div class="line">    append() count() insert() reverse()</div><div class="line">    clear() extend() pop() sort()</div><div class="line">    copy() index() remove()</div></pre></td></tr></table></figure>
<p>现在定义一个函数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">6</span>]: <span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">()</span>:</span></div><div class="line">   ...:     <span class="string">"""这是一个测试函数"""</span></div><div class="line">   ...:     print(<span class="string">"Hello python"</span>)</div><div class="line">   ...:</div><div class="line"></div><div class="line">In [<span class="number">7</span>]: demo()</div><div class="line">Hello python</div><div class="line"></div><div class="line">In [<span class="number">8</span>]: demo.</div></pre></td></tr></table></figure>
<p>此时输入demo后面再加一个点<code>.</code>，没有任何信息，此时就需要用另外一种方法来验证它是一个对象，也就是使用<code>dir</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">10</span>]: dir(demo)</div><div class="line">Out[<span class="number">10</span>]:</div><div class="line">[<span class="string">'__annotations__'</span>,</div><div class="line"> <span class="string">'__call__'</span>,</div><div class="line"> <span class="string">'__class__'</span>,</div><div class="line"> <span class="string">'__closure__'</span>,</div><div class="line"> <span class="string">'__code__'</span>,</div><div class="line"> <span class="string">'__defaults__'</span>,</div><div class="line"> <span class="string">'__delattr__'</span>,</div><div class="line"> <span class="string">'__dict__'</span>,</div><div class="line"> <span class="string">'__dir__'</span>,</div><div class="line"> <span class="string">'__doc__'</span>,</div><div class="line"> <span class="string">'__eq__'</span>,</div><div class="line"> <span class="string">'__format__'</span>,</div><div class="line"> <span class="string">'__ge__'</span>,</div><div class="line"> <span class="string">'__get__'</span>,</div><div class="line"> <span class="string">'__getattribute__'</span>,</div><div class="line"> <span class="string">'__globals__'</span>,</div><div class="line"> <span class="string">'__gt__'</span>,</div><div class="line"> <span class="string">'__hash__'</span>,</div><div class="line"> <span class="string">'__init__'</span>,</div><div class="line"> <span class="string">'__init_subclass__'</span>,</div><div class="line"> <span class="string">'__kwdefaults__'</span>,</div><div class="line"> <span class="string">'__le__'</span>,</div><div class="line"> <span class="string">'__lt__'</span>,</div><div class="line"> <span class="string">'__module__'</span>,</div><div class="line"> <span class="string">'__name__'</span>,</div><div class="line"> <span class="string">'__ne__'</span>,</div><div class="line"> <span class="string">'__new__'</span>,</div><div class="line"> <span class="string">'__qualname__'</span>,</div><div class="line"> <span class="string">'__reduce__'</span>,</div><div class="line"> <span class="string">'__reduce_ex__'</span>,</div><div class="line"> <span class="string">'__repr__'</span>,</div><div class="line"> <span class="string">'__setattr__'</span>,</div><div class="line"> <span class="string">'__sizeof__'</span>,</div><div class="line"> <span class="string">'__str__'</span>,</div><div class="line"> <span class="string">'__subclasshook__'</span>]</div></pre></td></tr></table></figure>
<p>从上面的我们可以看出来，这里面是一个列表，它列出了很多方法，这些方法都是双下划线开头，双下划线结尾，这些东西都是Python内置的方法（<code>__方法名__</code>)，有些可以直接使用，例如<code>__doc__</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">11</span>]: demo.__doc__</div><div class="line">Out[<span class="number">11</span>]: <span class="string">'这是一个测试函数'</span></div></pre></td></tr></table></figure>
<p>此时我们就可以看到，使用<code>__doc__</code>这个内置方法就能查看函数的文档说明，常用的一些内置方法/属性有以下这些：</p>
<table>
<thead>
<tr class="header">
<th>序号</th>
<th>方法名</th>
<th>类型</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td><code>__new__</code></td>
<td>方法</td>
<td>创建对象时，会被自动调用</td>
</tr>
<tr class="even">
<td>2</td>
<td><code>__init__</code></td>
<td>方法</td>
<td>对象被初始化时，会被自动调用</td>
</tr>
<tr class="odd">
<td>3</td>
<td><code>__del__</code></td>
<td>方法</td>
<td>对象被从内存中销毁之前，会被自动调用</td>
</tr>
<tr class="even">
<td>4</td>
<td><code>__str__</code></td>
<td>方法</td>
<td>返回对象的工描述信息，print函数输出使用</td>
</tr>
</tbody>
</table>
<p>因此，<code>dir()</code>这个函数很有用，例如当我想调用某个函数的方法时，一时想不想来，就可以使用<code>dir()</code>这个函数。</p>
<h2 id="定义简单的类">定义简单的类</h2>
<h3 id="格式">格式</h3>
<p>在Python中要定义一个只包含方法的类，格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> 类名</span></div><div class="line"><span class="class">    <span class="title">def</span> 方法1<span class="params">(self, 参数列表)</span>:</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">def</span> 方法2<span class="params">(self, 参数列表)</span>:</span></div><div class="line">        <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p>先看下面的一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_name</span><span class="params">(self, name)</span>:</span></div><div class="line">        self.name = name</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_name</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.name</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">greet</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"Hello, wolrd! I'm &#123;&#125;."</span>.format(self.name))</div></pre></td></tr></table></figure>
<p>在上面的这个案例中，一共定义了3种方法，它们类似于函数定义，但都位于class语句语，Person是类的名称。class语句创建独立的命名空间，用于在其中定义方法（其实就是定义函数）。self它指向对象本身，具体是哪个对象呢，我们再来看下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">foo = Person()</div><div class="line">bar = Person()</div><div class="line">foo.set_name(<span class="string">'Luke Skywalker'</span>)</div><div class="line">bar.set_name(<span class="string">'Anakin Skywalker'</span>)</div><div class="line">foo.greet()</div><div class="line">bar.greet()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Hello, wolrd! I<span class="string">'m Luke Skywalker.</span></div><div class="line"><span class="string">Hello, wolrd! I'</span>m Anakin Skywalker.</div></pre></td></tr></table></figure>
<p>这个案例主要是用来说明self是什么，对foo调用set_name和greet时，foo都会做为第一个参数自动传递给它们，也就是命名为self的原因（其实可以任意命名），如果没有self，所有的方法都无法访问对象本身，也就是要损伤的属性所属的对象。此外，也可以从外部访问这些属性，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">foo.name</div><div class="line">bar.name = <span class="string">'Yoda'</span></div><div class="line">bar.greet()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Hello, wolrd! I<span class="string">'m Luke Skywalker.</span></div><div class="line"><span class="string">Hello, wolrd! I'</span>m Anakin Skywalker.</div><div class="line">Hello, wolrd! I<span class="string">'m Yoda.</span></div></pre></td></tr></table></figure>
<h2 id="属性函数和方法">属性、函数和方法</h2>
<p>方法和函数的区别表现在前面提到的参数self上，方法更准确地说是关联的方法，是将第一个参数关联到它所属的实例中，因此无需提供这个参数。也可以将属性关联到一个普通的函数，但这样就没有特殊的self参数了，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Class</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">method</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"I have a self"</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">function</span><span class="params">()</span>:</span></div><div class="line">    print(<span class="string">"I don't..."</span>)</div><div class="line"></div><div class="line">instance = Class()</div><div class="line">instance.method()</div><div class="line">instance.method= function</div><div class="line">instance.method()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">I have a self</div><div class="line">I don<span class="string">'t...</span></div></pre></td></tr></table></figure>
<p>从上面可以知道，有没有参数self并不取决于是否以刚才使用的方式（如instance.method）调用方法。实际上，完全可以让另一个变量指向同一个方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bird</span>:</span></div><div class="line">    song = <span class="string">'Squaawk!'</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sing</span><span class="params">(self)</span>:</span></div><div class="line">        print(self.song)</div><div class="line"></div><div class="line">bird = Bird()</div><div class="line">bird.sing()</div><div class="line">birdsong = bird.sing</div><div class="line">birdsong()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Squaawk!</div><div class="line">Squaawk!</div></pre></td></tr></table></figure>
<p>最后一个方法调用看起来很像函数调用，但变量birdsong指向的是关联的方法bird.song，这意味着它也能够访问参数self（即使它被关联到类的实例）。</p>
<h2 id="隐藏">隐藏</h2>
<p>默认情况下，我们可以从外部访问对象的属性，看下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;c.name</div><div class="line"><span class="string">'Sir Lancelot'</span></div><div class="line">&gt;&gt;&gt;c.name = <span class="string">'Sir Gumby'</span></div><div class="line">&gt;&gt;&gt;c.get_name()</div><div class="line"><span class="string">'Sir Gumby'</span></div></pre></td></tr></table></figure>
<p>如果我们不让其他人从外部访问属性，就可能将属性定义为私有，私有属性不能从对象外部访问，而只能通过存取器（例如get_name和set_name）来访问。</p>
<p>要让方法或属性成为私有的（不能从外部访问），只需要让其名称以两个下划线打头即可，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Secrective</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__inaccessible</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"Bet you can't see me..."</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">accessible</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"The secret message is: "</span>)</div><div class="line">        self.__inaccessible()</div><div class="line"></div><div class="line">s = Secrective()</div><div class="line">s.accessible()</div><div class="line">s.__inaccessible()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">s.accessible()</div><div class="line">The secret message <span class="keyword">is</span>: </div><div class="line">Bet you can<span class="string">'t see me...</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">s.__inaccessible()</span></div><div class="line"><span class="string">Traceback (most recent call last):</span></div><div class="line"><span class="string">  File "C:/Users/20161111/PycharmProjects/untitled2/test.py", line 11, in &lt;module&gt;</span></div><div class="line"><span class="string">    s.__inaccessible()</span></div><div class="line"><span class="string">AttributeError: '</span>Secrective<span class="string">' object has no attribute '</span>__inaccessible<span class="string">'</span></div></pre></td></tr></table></figure>
<p>从上面的案例我们可以看出来，无法从外部访问<code>__inaccessible</code>，但是在类中，例如<code>accessible</code>中我们仍然可以使用它。虽然以两个下划线打头有点奇怪，但这样的方法类似于其他语言中的标准私有方法。然后背后的处理手法并不标准：在类定义中，对所有以两个下划线打头的名称都进行转换，即在开头加上一个下划线和类名，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>Secretive._Secretive__inaccessible </div><div class="line">&lt;unbound method Secretive.__inaccessible&gt;</div></pre></td></tr></table></figure>
<p>上面的代码在我的编辑器中无法运行，可以直接跳过，但知道了这种幕后处理手法，就能从类外部访问私有方法，但是不建议这么做，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">s=Secrective()</div><div class="line">s._Secrective__inaccessible()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Bet you can<span class="string">'t see me...</span></div></pre></td></tr></table></figure>
<p>总之，你无法禁止别人访问对象的私有方法和属性，但这种名称修改方式发出了强烈的信号，让他们不要这样做。如果你不希望名称被悠，又想发出不要从外部修改属性或方法的信号，可以用一个下划线打头，这虽然只是一种约定，但也有些作用，例如使用<code>from module import *</code>就不会导入以一个下划线打头的名称。</p>
<h2 id="类的命名空间">类的命名空间</h2>
<p>下面的两条语句大致等价：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(x)</span>:</span><span class="keyword">return</span> x*x</div><div class="line">foo = <span class="keyword">lambda</span> x: x*x</div></pre></td></tr></table></figure>
<p>它们𨝌会创建一个返回参数平方的函数，并将这个函数关联到变量foo，可以在全局（模块）作用域内定义名称foo，也可以在函数或方法内定义。定义类时情况也是如此，在class语句中定义的代码都是在一个特殊的命名空间（类的命名空间）内执行的，而类的所有成员都可以访问这个命名空间。类定义其实就是要执行的代码段。例如，在类定义中，并非只能包括def语句，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></div><div class="line"><span class="meta">... </span>    print(<span class="string">'Class C being defined...'</span>)</div><div class="line">...</div><div class="line">Class C being defined...</div></pre></td></tr></table></figure>
<p>这个案例非常简单，再看下一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MemberCounter</span>:</span></div><div class="line">   members = <span class="number">0</span></div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">init</span><span class="params">(self)</span>:</span></div><div class="line">       MemberCounter.members += <span class="number">1</span></div><div class="line"></div><div class="line">m1 = MemberCounter()</div><div class="line">m1.init()</div><div class="line">MemberCounter.members</div><div class="line">m2 = MemberCounter()</div><div class="line">m2.init()</div><div class="line">MemberCounter.members</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<p>上述代码在类作用域内定义了一个变量，所有的成员（实例）都可以访问它，这里使用它来计算类实例的数量，注意到这里使用了init来初始化所有的实例，也就是将init转换为合适的构造函数，每个实例都可以访问这个类作用域内的变化，就像方法一样，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>m1.members</div><div class="line"><span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.members</div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<p>如果在一个实例中给属性members赋值，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>m1.members=<span class="string">'two'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m1.members</div><div class="line"><span class="string">'two'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.members</div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<p>新值被写入m1的一个属性中，这个属性遮住了类的变量。</p>
<h2 id="创建对象">创建对象</h2>
<p>当一个类定义完全成，要使用这个类来创建对象，语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">对象变量=类名()</div></pre></td></tr></table></figure>
<h3 id="创建对象-1">创建对象</h3>
<p>先看一个案例：例如小猫爱吃鱼，小猫要喝水。</p>
<p>分析：</p>
<ol style="list-style-type: decimal">
<li>定义一个猫类，Cat()</li>
<li>定义两个方法<code>eat</code>和<code>drink</code></li>
<li>此时并没有涉及属性，因此我们不用定义属性。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"小猫爱吃鱼"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"小猫要喝水"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建猫对象</span></div><div class="line">tom = Cat()</div><div class="line"></div><div class="line">tom.eat()</div><div class="line">tom.drink()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">小猫爱吃鱼</div><div class="line">小猫要喝水</div></pre></td></tr></table></figure>
<p>在这个案例中，我们先定义了一个猫类(Cat)，然后创建了一个猫对象，再后，使这个对象赋予了吃与喝这两个方法，这两个方法已经封装到了类中，并不需要知道它的执行细节。</p>
<p>如果要用<code>print</code>函数直接输出对象，那么输出结果就是此对象创建的内存地址，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print(tom)</div><div class="line">&lt;__main__.Cat object at <span class="number">0x0000017F72807A90</span>&gt;</div></pre></td></tr></table></figure>
<h2 id="创建多个对象">创建多个对象</h2>
<p>类只有一个，类只是一个模板，使用这个模板可以创建多个对象，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"小猫爱吃鱼"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"小猫要喝水"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建猫对象</span></div><div class="line">tom = Cat()</div><div class="line"></div><div class="line">tom.eat()</div><div class="line">tom.drink()</div><div class="line"></div><div class="line"><span class="comment"># 再创建一个猫对象</span></div><div class="line">lazy_cat = Cat()</div><div class="line">lazy_cat.drink()</div><div class="line">lazy_cat.eat()</div><div class="line"></div><div class="line">print(tom)</div><div class="line">print(lazy_cat)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"小猫爱吃鱼"</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"小猫要喝水"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建猫对象</span></div><div class="line">tom = Cat()</div><div class="line"><span class="comment"># 再创建一个猫对象</span></div><div class="line">lazy_cat = Cat()</div><div class="line"></div><div class="line">print(tom)</div><div class="line">print(lazy_cat)</div></pre></td></tr></table></figure>
<p>我们来看一下结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;__main__.Cat object at <span class="number">0x0000020AF8E47A90</span>&gt;</div><div class="line">&lt;__main__.Cat object at <span class="number">0x0000020AF8E5F4E0</span>&gt;</div></pre></td></tr></table></figure>
<p>从结果可以看出来，tom与lazy_cat这两个对象的内存地址不一样，它们是不一样的对象，再看一下以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">lazy_cat2 = lazy_cat</div><div class="line">print(lazy_cat2)</div><div class="line">print(lazy_cat)</div></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;__main__.Cat object at <span class="number">0x000001C0424B7A90</span>&gt;</div><div class="line">&lt;__main__.Cat object at <span class="number">0x000001C0424B7A90</span>&gt;</div></pre></td></tr></table></figure>
<p>可以发现，lazy_cat和lazy_cat2这两个对象是一样的。</p>
<h2 id="方法中的self参数">方法中的self参数</h2>
<h3 id="给对象添加属性">给对象添加属性</h3>
<p>在Python中很容易给对象添加属性，但是这种做法并不推荐，因为对象的属性通常都已经封装到类中了，没必要再单独给对象添加属性，虽然不推荐，但还是要看一下案例，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tom.name = <span class="string">"Tom"</span></div></pre></td></tr></table></figure>
<h3 id="输出对象属性">输出对象属性</h3>
<p>前面是找到，在类中定义的方法中的一个参数<code>self</code>，这个self是指：哪一个对象调用的方法，self就是哪一个对象的引用。</p>
<p>例如代码中的<code>tom = Cat()</code>，tom指向的对象就是由Cat这个类创建的，此时这个对象调用了Cat中的eat这个方法时，self指的也是这个对象，如果要想访问这个对象的属性，那么就是self加一个点(<code>.</code>)即可，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 爱吃鱼"</span>% self.name)<span class="comment">#这一步我们可以使用self.name来访问对象的属性</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">""</span>%s 要喝水<span class="string">"% self.name)</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string"># 创建猫对象</span></div><div class="line"><span class="string">tom = Cat()</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string"># 可能使用 .属性名 利用赋值语句就可以为对象添加属性</span></div><div class="line"><span class="string">tom.name = "</span>Tom<span class="string">"</span></div><div class="line"><span class="string">tom.eat()</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string"># 再创建一个猫对象</span></div><div class="line"><span class="string">lazy_cat = Cat()</span></div><div class="line"><span class="string">lazy_cat.name = "</span>大懒猫<span class="string">"</span></div><div class="line"><span class="string">lazy_cat.eat()</span></div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Tom 爱吃鱼</div><div class="line">大懒猫 爱吃鱼</div></pre></td></tr></table></figure>
<p>我们可以看到，原来的“小猫”就被替换成了“Tom”和“大懒猫”。也就是说，由哪一个对象调用的方法，方法内的self就是哪一个对象的引用。在类封装的方法内部，self就表示当前调用方法的对象自己。调用方法时，程序员不需要传递self参数。在方法内部，可以通过<code>self.</code>访问对象的属性，也可以通过<code>self.</code>调用其它的对象方法。</p>
<h2 id="初始化方法">初始化方法</h2>
<p>当使用<code>类名()</code>创建对象时，会自动执行以下操作：</p>
<ol style="list-style-type: decimal">
<li>为对象在内存中分配空间——创建对象</li>
<li>为对象的属性设置初始值——初始化方法(init)</li>
</ol>
<p>这个初始化方法就是<code>__init__</code>方法，<code>__init__</code>是对象的内置的方法，此方法是<strong>专门用来定义一个类具有哪些属性的方法</strong>，这个方法是固定的。我们在<code>Cat</code>中增加<code>__init__</code>方法，验证此方法在创建对象时会被自动调用，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"这是一个初始化方法"</span>)</div><div class="line"></div><div class="line"></div><div class="line">tom = Cat()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">这是一个初始化方法</div></pre></td></tr></table></figure>
<p>从结果我们可以发现，使用类名()来创建对象的时候，会自动调用初始化方法<code>__init__</code>。</p>
<h3 id="在初始化方法内部定义属性">在初始化方法内部定义属性</h3>
<p>在<code>__init__</code>方法内部使用<code>self.属性名 = 属性的初始值</code>就可以定义属性</p>
<p>定义属性之后，再使用Cat类创建的对象都会拥有该属性，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"这是一个初始化方法"</span>)</div><div class="line"></div><div class="line">        <span class="comment"># self.属性名 = 属性的初始值</span></div><div class="line">        self.name = <span class="string">"Tom"</span></div><div class="line"></div><div class="line"></div><div class="line">tom = Cat()</div><div class="line"></div><div class="line">print(tom.name)</div></pre></td></tr></table></figure>
<p>运行结果，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">这是一个初始化方法</div><div class="line">Tom</div></pre></td></tr></table></figure>
<p>现在解释一下上面的代码，代码是从上到下执行的：</p>
<ol style="list-style-type: decimal">
<li>当Python解释器遇到<code>class Cat:</code>时，这段代码是不执行的，直接跳过去，跳到<code>tom=Cat()</code>处；</li>
<li>我们的代码运行到<code>tom=Cat()</code>处时，Python解释器此时会做两件事情：①在内存中为Cat对象分配一块空间，假设就是0x1234这块空间（16进制）；②然后执行<code>class Cat</code>这块的代码，类代码中的<code>self</code>也会指向这块空间（即0x1234），此时也是从上到下执行的，执行到<code>self.name = &quot;Tom&quot;</code>时，这块空间就被命名为了Tom，因此在使用<code>print(tom.name)</code>时，就输出了空间的名字。</li>
</ol>
<h3 id="初始化方法的改造">初始化方法的改造</h3>
<p>在前面代码的基础上，我们再创建一个对象，<code>lazy_cat</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"这是一个初始化方法"</span>)</div><div class="line"></div><div class="line">        <span class="comment"># self.属性名 = 属性的初始值</span></div><div class="line">        self.name = <span class="string">"Tom"</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s爱吃鱼"</span>%self.name)</div><div class="line"></div><div class="line"></div><div class="line">tom = Cat()</div><div class="line"></div><div class="line">print(tom.name)</div><div class="line"></div><div class="line">lazy_cat = Cat()</div><div class="line">lazy_cat.eat()</div></pre></td></tr></table></figure>
<p>从上面代码我们可知，<code>lazy_cat</code>这个对象的名称还是<code>Tom</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">这是一个初始化方法</div><div class="line">Tom</div><div class="line">这是一个初始化方法</div><div class="line">Tom爱吃鱼</div></pre></td></tr></table></figure>
<p>运行后，发现果然如此。因为我们在初始化时，已经把对象的名称固定了，就是<code>self.name = &quot;Tom&quot;</code>这句代码。现在我们要解决这个问题。</p>
<p>如果要解决这个问题，我们需要在初始化方法中再定义一个形参，用于输入不同对象的名称，现在我们在<code>def __init__(self)</code>中添加一个参数，new_name，即<code>def __init__(self, new_name)</code>，当我们已经添加了这个形参后，在原来代码创建一个新对象时，也要添加相应的实参，例如<code>tom = Cat()</code>就需要写为<code>tom= Cat(&quot;Tom&quot;)</code>，完整代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, new_name)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"这是一个初始化方法"</span>)</div><div class="line"></div><div class="line">        <span class="comment"># self.属性名 = 属性的初始值</span></div><div class="line">        self.name = new_name</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s爱吃鱼"</span>%self.name)</div><div class="line"></div><div class="line"></div><div class="line">tom = Cat(<span class="string">"Tom"</span>)</div><div class="line"></div><div class="line">print(tom.name)</div><div class="line"></div><div class="line">lazy_cat = Cat(<span class="string">"大懒猫"</span>)</div><div class="line">lazy_cat.eat()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">这是一个初始化方法</div><div class="line">Tom</div><div class="line">这是一个初始化方法</div><div class="line">大懒猫爱吃鱼</div></pre></td></tr></table></figure>
<p>此时我们就发现了，一个对象对应一个名称。</p>
<p>总结一下就是，在开发中，如果希望在创建对象的同时就设置对象的属性，就可以对<code>__init__</code>方法进行改造：</p>
<ol style="list-style-type: decimal">
<li>把希望设置的属性值，定义成<code>__init__</code>方法的参数；</li>
<li>在方法内部使用<code>self.属性 = 形参</code>接收外部 传递的参数；</li>
<li>在创建对象时，使用<code>类名(属性1,属性2...)</code>调用。</li>
</ol>
<h2 id="内置方法和属性">内置方法和属性</h2>
<p>这一部分介绍两个内置方法，如下所示：</p>
<table>
<thead>
<tr class="header">
<th>序号</th>
<th>方法名</th>
<th>类型</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>01</td>
<td><code>__del__</code></td>
<td>方法</td>
<td>对象被从内存中销毁之前，会被自动调用</td>
</tr>
<tr class="even">
<td>02</td>
<td><code>__str__</code></td>
<td>方法</td>
<td>返回对象的描述信息，print函数输出使用</td>
</tr>
</tbody>
</table>
<h3 id="del__方法"><code>__del__</code>方法</h3>
<ul>
<li>在Python中，当使用<code>类名()</code>创建对象时，为对象分配完空间后，自动调用<code>__init__</code>方法。</li>
<li>当一个对象被从内存中销毁之前，会自动调用<code>__del__</code>方法。</li>
</ul>
<h3 id="应用场景">应用场景</h3>
<ul>
<li><code>__init__</code>改造初始化方法，可以让创建对象更加灵活。</li>
<li><code>__del___</code>如果希望在对象被销毁之前，再做一些事情，可以使用<code>__del__</code>方法。</li>
</ul>
<h3 id="生命周期">生命周期</h3>
<ul>
<li>一个对象从调用<code>类名()</code>创建，生命周期开始。</li>
<li>一个对象的<code>__del__</code>方法一旦被调用，生命周期结束。</li>
<li>在对象的生命周期内，可以访问对象属性，或者让对象调用方法。</li>
</ul>
<p>先来看一个案例，代码如下所示：</p>
<p>代码A：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, new_name)</span>:</span></div><div class="line"></div><div class="line">        self.name = new_name</div><div class="line"></div><div class="line">        print(<span class="string">"%s 来了"</span> % self.name)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"%s 我去了"</span>% self.name)</div><div class="line"></div><div class="line"><span class="comment"># tom是一个全局变量</span></div><div class="line">tom = Cat(<span class="string">"Tom"</span>)</div><div class="line">print(tom.name)</div><div class="line"></div><div class="line"><span class="comment"># del tom</span></div><div class="line"></div><div class="line">print(<span class="string">"-"</span>*<span class="number">50</span>)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Tom 来了</div><div class="line">Tom</div><div class="line">--------------------------------------------------</div><div class="line">Tom 我去了</div></pre></td></tr></table></figure>
<p>现在，我们将代码中的<code>del tom</code>显示出来，如下所示：</p>
<p>代码B：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, new_name)</span>:</span></div><div class="line"></div><div class="line">        self.name = new_name</div><div class="line"></div><div class="line">        print(<span class="string">"%s 来了"</span> % self.name)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"%s 我去了"</span>% self.name)</div><div class="line"></div><div class="line"><span class="comment"># tom是一个全局变量</span></div><div class="line">tom = Cat(<span class="string">"Tom"</span>)</div><div class="line">print(tom.name)</div><div class="line"></div><div class="line"><span class="keyword">del</span> tom</div><div class="line"></div><div class="line">print(<span class="string">"-"</span>*<span class="number">50</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Tom 来了</div><div class="line">Tom</div><div class="line">Tom 我去了</div><div class="line">--------------------------------------------------</div></pre></td></tr></table></figure>
<p>从结果中我们可以发现，代码A中的运行结果中，<code>Tom 我去了</code>出现在了点线下面，而代码B中的<code>Tom 我去了</code>则出现在了点线上面。而代码A与代码B的区别就在于，代码A中没有<code>del tom</code>这段代码，而代码B中有。</p>
<p>代码A中没有<code>del tom</code>这段代码，就说明，只有Python把tom这个对象自动删除（不是指操作者自己操作）后，才会出现<code>__del__</code>方法中的字符。我猜测这可能是Python自动回收内存的一种机制（注：关于Python的内存回收机制我也不太懂，有空了再补上）。而如果你自己亲自操作，也就是说使用了<code>del tom</code>这个代码后，Python就知道你把tom这个对象删除了，就开始运行<code>__del__</code>方法中的内容，然后再运行<code>print(&quot;-&quot;*50)</code>这段代码。</p>
<h3 id="str__方法"><code>__str__</code>方法</h3>
<ul>
<li><p>在Python中，使用<code>print</code>输出对象变量，默认情况下，会输出这个变量引用的对象是由哪一个类创建的对象，以及在内存中的地址（十六进制表示）。</p></li>
<li><p>如果在开发中，希望使用<code>print</code>输出对象变量时，能够打印自定义的内容，就可以利用<code>__str__</code>这个内置方法了。需要注意的是，<code>__str__</code>方法必须返回一个字符。</p></li>
</ul>
<p>看下面的案例，在这个案例，我们直接输出一个对象（有的教程在此处称之为“实例”），如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, new_name)</span>:</span></div><div class="line"></div><div class="line">        self.name = new_name</div><div class="line"></div><div class="line">        print(<span class="string">"%s 来了"</span> % self.name)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"%s 我去了"</span>% self.name)</div><div class="line"></div><div class="line"><span class="comment"># tom是一个全局变量</span></div><div class="line">tom = Cat(<span class="string">"Tom"</span>)</div><div class="line">print(tom)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Tom 来了</div><div class="line">&lt;__main__.Cat object at <span class="number">0x0000021E1311B278</span>&gt;</div><div class="line">Tom 我去了</div></pre></td></tr></table></figure>
<p>其中第二行，即<code>&lt;__main__.Cat object at 0x0000021E1311B278&gt;</code>这里输出的是Cat这个类，并把tom这个对象在内存中的地址显示出来。现在我们在类中增加<code>__str___</code>这个方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, new_name)</span>:</span></div><div class="line"></div><div class="line">        self.name = new_name</div><div class="line"></div><div class="line">        print(<span class="string">"%s 来了"</span> % self.name)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"%s 我去了"</span>% self.name)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="string">"我是小猫"</span></div><div class="line"></div><div class="line"><span class="comment"># tom是一个全局变量</span></div><div class="line">tom = Cat(<span class="string">"Tom"</span>)</div><div class="line">print(tom)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Tom 来了</div><div class="line">我是小猫</div><div class="line">Tom 我去了</div></pre></td></tr></table></figure>
<p>此时，我们改造了<code>__str__</code>这个方法后，输出的就不再是这个对象的类，以及这个对象的地址了。而是我们自定义的内容，现在把<code>__str__</code>中的方法再改造一下，改成<code>return &quot;我是小猫[%s]&quot;% self.name</code>，则结果就如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Tom 来了</div><div class="line">我是小猫[Tom]</div><div class="line">Tom 我去了</div></pre></td></tr></table></figure>
<h2 id="面向对象封装encapsulation案例">面向对象封装(encapsulation)案例</h2>
<h3 id="封装">封装</h3>
<ol style="list-style-type: decimal">
<li>封装是面向对象编程的一大特点；</li>
<li>面向对象编程的第一步就是将属性和方法封装到一个抽象的类中；</li>
<li>外界使用类创建对象（有的教程叫实例），然后让对象调用方法；</li>
<li>对象方法中的细节都被封装在类的内部。</li>
</ol>
<h3 id="案例分析小明爱跑步">案例分析——小明爱跑步</h3>
<p>我们以“小明爱跑步”为例说明一下，先分析需求，如下所示：</p>
<ol style="list-style-type: decimal">
<li>小明体重75.0公斤；</li>
<li>小明每次跑步会减肥0.5公斤；</li>
<li>小明每次吃东西体重增加1公斤。</li>
</ol>
<h3 id="代码分析">代码分析</h3>
<p>代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, weight)</span>:</span></div><div class="line"></div><div class="line"></div><div class="line">        self.name = name</div><div class="line">        self.weight = weight</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">            <span class="keyword">return</span> <span class="string">"我的名字叫 %s 体重是 %.2f 公斤"</span> %(self.name, self.weight)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 爱跑步， 跑步锻炼身体"</span>%self.name)</div><div class="line"></div><div class="line">        self.weight -= <span class="number">0.5</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 是吃货，吃完这顿再减肥"</span>%self.name)</div><div class="line"></div><div class="line">        self.weight += <span class="number">1</span></div><div class="line"></div><div class="line">xiaoming = Person(<span class="string">"小明"</span>, <span class="number">75.0</span>)</div><div class="line"></div><div class="line">xiaoming.run()</div><div class="line">xiaoming.eat()</div><div class="line"></div><div class="line">print(xiaoming)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">小明 爱跑步， 跑步锻炼身体</div><div class="line">小明 是吃货，吃完这顿再减肥</div><div class="line">我的名字叫 小明 体重是 <span class="number">75.50</span> 公斤</div></pre></td></tr></table></figure>
<p>如果我们把<code>Person</code>这个类折叠起来，就是下面的这个样子，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>...</div><div class="line"></div><div class="line">xiaoming = Person(<span class="string">"小明"</span>, <span class="number">75.0</span>)</div><div class="line"></div><div class="line">xiaoming.run()</div><div class="line">xiaoming.eat()</div><div class="line"></div><div class="line">print(xiaoming)</div></pre></td></tr></table></figure>
<p>从上面折叠后的代码我们就知道，我们创建了一个<code>Person</code>这个类，再由这个类创建了一个叫<code>xiaoming</code>的对象，然后这个对象进行了跑步(<code>run</code>)和吃东西(<code>eat</code>)，具体这跑步与吃东西它们的代码，都已经封装到了<code>Person</code>这个类中，我们直接调用即可。</p>
<h3 id="案例扩展小美也爱跑步">案例扩展——小美也爱跑步</h3>
<p>在原来案例的基础上进行扩展，先看一下需要：</p>
<ol style="list-style-type: decimal">
<li>小明和小美都爱跑步；</li>
<li>小明体重75.0公斤；</li>
<li>小美体重45.0公斤；</li>
<li>每次跑步都会减少0.5公斤；</li>
<li>每次吃东西都会增加1公斤。</li>
</ol>
<h4 id="代码分析案例扩展">代码分析——案例扩展</h4>
<p>再使用<code>Persion</code>这个类创建一个新对象，即<code>xiaomei</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, weight)</span>:</span></div><div class="line"></div><div class="line"></div><div class="line">        self.name = name</div><div class="line">        self.weight = weight</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">            <span class="keyword">return</span> <span class="string">"我的名字叫 %s 体重是 %.2f 公斤"</span> %(self.name, self.weight)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 爱跑步， 跑步锻炼身体"</span>%self.name)</div><div class="line"></div><div class="line">        self.weight -= <span class="number">0.5</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 是吃货，吃完这顿再减肥"</span>%self.name)</div><div class="line"></div><div class="line">        self.weight += <span class="number">1</span></div><div class="line"></div><div class="line">xiaoming = Person(<span class="string">"小明"</span>, <span class="number">75.0</span>)</div><div class="line"></div><div class="line">xiaoming.run()</div><div class="line">xiaoming.eat()</div><div class="line"></div><div class="line">print(xiaoming)</div><div class="line"></div><div class="line"><span class="comment"># 小美爱跑步</span></div><div class="line">xiaomei = Person(<span class="string">"小美"</span>, <span class="number">45</span>)</div><div class="line"></div><div class="line">xiaomei.eat()</div><div class="line">xiaomei.run()</div><div class="line"></div><div class="line">print(xiaomei)</div><div class="line">print(xiaoming)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">小明 爱跑步， 跑步锻炼身体</div><div class="line">小明 是吃货，吃完这顿再减肥</div><div class="line">我的名字叫 小明 体重是 <span class="number">75.50</span> 公斤</div><div class="line">小美 是吃货，吃完这顿再减肥</div><div class="line">小美 爱跑步， 跑步锻炼身体</div><div class="line">我的名字叫 小美 体重是 <span class="number">45.50</span> 公斤</div><div class="line">我的名字叫 小明 体重是 <span class="number">75.50</span> 公斤</div></pre></td></tr></table></figure>
<p>我们可以看到，由一个类创建的两个对象。在每个对象的方法内部，可以直接访问对象的属性。每个对象各自使用各自的方法，属性互不影响。</p>
<h3 id="案例分析三摆放家具">案例分析三——摆放家具</h3>
<p>现在我们再看一个案例，摆放家具，看一下需求：</p>
<ol style="list-style-type: decimal">
<li>房子(House)有户型、总面积和家具名称列表，而新房子没有任何家具；</li>
<li>家具(HouseItem)有名字和占地面积，其中不同的家具占地面积也不一样，例如床(bed)占地4平方米，衣柜(chest)占地2平方米，餐桌(table)占地1.5平方米；</li>
<li>现在我们要将2中的3样家具添加到房子中；</li>
<li>输出房子时，要求输出这些信息：户型、总面积、剩余面积和家具名称列表。</li>
</ol>
<p>有了上面需求后，我们要考虑一下如何设计代码：</p>
<ol style="list-style-type: decimal">
<li>定义2个类，一个是房子(House)，一个是家具(HouseItem)。</li>
<li>房子有4个属性；</li>
<li>家具有2个属性。</li>
</ol>
<p>但是，房子与家具这两个类先定义哪个？思路就是，由于房子这个类中要用到家具（家具有面积，房子的剩余面积与家具有关），因此我们要先定义家具这个类，总之就是，被使用的类要先定义。</p>
<h4 id="定义家具类">定义家具类</h4>
<p>根据前面的分析思路，现在先定义一个家具类，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HouseItem</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, area)</span>:</span></div><div class="line"></div><div class="line">        self.name = name</div><div class="line">        self.area = area</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="string">"[%s] 占地 %.2f"</span>%(self.name, self.area)</div><div class="line"></div><div class="line"><span class="comment"># 创建家具</span></div><div class="line">bed = HouseItem(<span class="string">"床"</span>, <span class="number">4</span>)</div><div class="line">chest = HouseItem(<span class="string">"衣柜"</span>, <span class="number">2</span>)</div><div class="line">table = HouseItem(<span class="string">"餐桌"</span>, <span class="number">1.5</span>)</div><div class="line"></div><div class="line">print(bed)</div><div class="line">print(chest)</div><div class="line">print(table)</div></pre></td></tr></table></figure>
<p>结果运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[床] 占地 <span class="number">4.00</span></div><div class="line">[衣柜] 占地 <span class="number">2.00</span></div><div class="line">[餐桌] 占地 <span class="number">1.50</span></div></pre></td></tr></table></figure>
<h4 id="定义房子类">定义房子类</h4>
<p>思路：房子中需要定义4个属性，分别为房子类型(house_type)，面积(area)，剩余面积(free_area)，家具列表(item_list)。但是，在给房子传递参数时，只需要传递其中的2个即可，分别是房子类型(house_type)与面积(area)，因为剩余面积(free_area)可以由这2个参数算出来，而家具列表(item_list)在初始情况下是一个空列表，，也不需要传入。</p>
<p>注：在同一个代码文件中，如果要定义2个以及2个以上的类，类与类的代码之间要空两行，现在前2个属性的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">House</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, house_type, area)</span>:</span></div><div class="line"></div><div class="line">        self.house_type = house_type </div><div class="line">        self.area = area</div></pre></td></tr></table></figure>
<p>这段代码定义了房子的2个需要传入的属性，现在再定义剩余面积(free_area)和家具名称列表，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">House</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, house_type, area)</span>:</span></div><div class="line"></div><div class="line">        self.house_type = house_type</div><div class="line">        self.area = area</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">#剩余面积</span></div><div class="line">        self.free_area = area</div><div class="line"></div><div class="line">    <span class="comment">#家具名称</span></div><div class="line">        self.item_list = []</div><div class="line">        <span class="comment"># 刚开始的时候，就是一个空列表</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="comment"># 定义描述方法</span></div><div class="line">    <span class="comment"># 这里显示的是return返回的内容，如下所示：</span></div><div class="line">        <span class="keyword">return</span> (<span class="string">"户型：%s \n总面积： %.2f[剩余: %.2f]\n家具: %s"</span></div><div class="line">                % (self.house_type,</div><div class="line">                   self.area,</div><div class="line">                   self.free_area,</div><div class="line">                   self.item_list))</div><div class="line">    </div><div class="line">    <span class="comment"># 创建房子对象</span></div><div class="line">my_house = House(<span class="string">"两室一厅"</span>, <span class="number">60</span>)</div><div class="line"></div><div class="line">my_house.add_item(bed)</div><div class="line"><span class="comment"># 添加一张床</span></div><div class="line"></div><div class="line">my_house.add_item(chest)</div><div class="line"><span class="comment"># 添加一个衣柜</span></div><div class="line"></div><div class="line">my_house.add_item(table)</div><div class="line"><span class="comment"># 添加一张餐桌</span></div></pre></td></tr></table></figure>
<p>此时，完成的任务包括：定义了一个家具类，定义了一个房子类。当输入了房子类型与面积这2个参数后，代码可以显示用房输入的这些内容，前面的这些代码运行的结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[床] 占地 <span class="number">4.00</span></div><div class="line">[衣柜] 占地 <span class="number">2.00</span></div><div class="line">[餐桌] 占地 <span class="number">1.50</span></div><div class="line">要添加 [床] 占地 <span class="number">4.00</span></div><div class="line">要添加 [衣柜] 占地 <span class="number">2.00</span></div><div class="line">要添加 [餐桌] 占地 <span class="number">1.50</span></div><div class="line">户型：两室一厅 </div><div class="line">总面积： <span class="number">60.00</span>[剩余: <span class="number">60.00</span>]</div><div class="line">家具: []</div></pre></td></tr></table></figure>
<p>但是，还有2个任务没有完成，分别是①剩余面积还没有计算；②家具列表还是空的。下面完成这2个任务，思路是这个样子的：</p>
<ol style="list-style-type: decimal">
<li>我们需要判断一下家具的面积是否超过了剩余面积，如果超过，则提示不能添加这些家具；</li>
<li>将家具的名称追加到家具名称的列表中；</li>
<li>用房子的剩余面积减去家具面积。</li>
</ol>
<p>现在我们往代码中补充一个添加家具(add_item)方法，这个方法的代码以及要实现的功能如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_item</span><span class="params">(self, item)</span>:</span></div><div class="line"></div><div class="line">    print(<span class="string">"要添加 %s"</span> % item)</div><div class="line">    <span class="comment"># 1. 判断家具的面积</span></div><div class="line">    <span class="keyword">if</span> item.area &gt; self.free_area:</div><div class="line">        print(<span class="string">"%s 的面积太大了，无法添加"</span>% item.name)</div><div class="line"></div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    <span class="comment"># 2. 将家具的名称添加到列表中</span></div><div class="line">    self.item_list.append(item.name)</div><div class="line"></div><div class="line">    <span class="comment"># 3. 计算剩余面积</span></div><div class="line">    self.free_area -= item.area</div></pre></td></tr></table></figure>
<p>实现全部功能的完整代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HouseItem</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, area)</span>:</span></div><div class="line"></div><div class="line">        self.name = name</div><div class="line">        self.area = area</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="string">"[%s] 占地 %.2f"</span>%(self.name, self.area)</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">House</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, house_type, area)</span>:</span></div><div class="line"></div><div class="line">        self.house_type = house_type</div><div class="line">        self.area = area</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">#剩余面积</span></div><div class="line">        self.free_area = area</div><div class="line"></div><div class="line">    <span class="comment">#家具名称</span></div><div class="line">        self.item_list = []</div><div class="line">        <span class="comment"># 刚开始的时候，就是一个空列表</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="comment"># 这里显示的是return返回的内容，如下所示：</span></div><div class="line">        <span class="keyword">return</span> (<span class="string">"户型：%s \n总面积： %.2f[剩余: %.2f]\n家具: %s"</span></div><div class="line">                % (self.house_type,</div><div class="line">                   self.area,</div><div class="line">                   self.free_area,</div><div class="line">                   self.item_list))</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add_item</span><span class="params">(self, item)</span>:</span></div><div class="line"></div><div class="line">        print(<span class="string">"要添加 %s"</span> % item)</div><div class="line">        <span class="comment"># 1. 判断家具的面积</span></div><div class="line">        <span class="keyword">if</span> item.area &gt; self.free_area:</div><div class="line">            print(<span class="string">"%s 的面积太大了，无法添加"</span>% item.name)</div><div class="line"></div><div class="line">            <span class="keyword">return</span></div><div class="line"></div><div class="line">        <span class="comment"># 2. 将家具的名称添加到列表中</span></div><div class="line">        self.item_list.append(item.name)</div><div class="line"></div><div class="line">        <span class="comment"># 3. 计算剩余面积</span></div><div class="line">        self.free_area -= item.area</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建家具</span></div><div class="line">bed = HouseItem(<span class="string">"床"</span>, <span class="number">4</span>)</div><div class="line">chest = HouseItem(<span class="string">"衣柜"</span>, <span class="number">2</span>)</div><div class="line">table = HouseItem(<span class="string">"餐桌"</span>, <span class="number">1.5</span>)</div><div class="line"></div><div class="line">print(bed)</div><div class="line">print(chest)</div><div class="line">print(table)</div><div class="line"></div><div class="line"><span class="comment"># # 创建房子对象</span></div><div class="line">my_house = House(<span class="string">"两室一厅"</span>, <span class="number">60</span>)</div><div class="line"><span class="comment">#</span></div><div class="line">my_house.add_item(bed)</div><div class="line"><span class="comment"># # 添加一张床</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># my_house.add_item(chest)</span></div><div class="line"><span class="comment"># # 添加一个衣柜</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># my_house.add_item(table)</span></div><div class="line"><span class="comment"># # 添加一张餐桌</span></div><div class="line"></div><div class="line">print(my_house)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[床] 占地 <span class="number">4.00</span></div><div class="line">[衣柜] 占地 <span class="number">2.00</span></div><div class="line">[餐桌] 占地 <span class="number">1.50</span></div><div class="line">要添加 [床] 占地 <span class="number">4.00</span></div><div class="line">户型：两室一厅 </div><div class="line">总面积： <span class="number">60.00</span>[剩余: <span class="number">56.00</span>]</div><div class="line">家具: [<span class="string">'床'</span>]</div></pre></td></tr></table></figure>
<p>如果我们把床的面积改为40，那么运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[床] 占地 <span class="number">40.00</span></div><div class="line">[衣柜] 占地 <span class="number">2.00</span></div><div class="line">[餐桌] 占地 <span class="number">1.50</span></div><div class="line">要添加 [床] 占地 <span class="number">40.00</span></div><div class="line">户型：两室一厅 </div><div class="line">总面积： <span class="number">60.00</span>[剩余: <span class="number">20.00</span>]</div><div class="line">家具: [<span class="string">'床'</span>]</div></pre></td></tr></table></figure>
<p>如果我们把这三个家具的总面积改为大于60（例如床面积为40，餐桌为20，衣柜为20），结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[床] 占地 <span class="number">40.00</span></div><div class="line">[衣柜] 占地 <span class="number">20.00</span></div><div class="line">[餐桌] 占地 <span class="number">20.00</span></div><div class="line">要添加 [床] 占地 <span class="number">40.00</span></div><div class="line">要添加 [衣柜] 占地 <span class="number">20.00</span></div><div class="line">要添加 [餐桌] 占地 <span class="number">20.00</span></div><div class="line">餐桌 的面积太大了，无法添加</div><div class="line">户型：两室一厅 </div><div class="line">总面积： <span class="number">60.00</span>[剩余: <span class="number">0.00</span>]</div><div class="line">家具: [<span class="string">'床'</span>, <span class="string">'衣柜'</span>]</div></pre></td></tr></table></figure>
<p>从添加家具这个案例我们可以知道这个案例中的面向对象思想：</p>
<ol style="list-style-type: decimal">
<li>主程序只负责创建房子对象和家具对象；</li>
<li>让房子对象调用add_item方法将家具添加到房子中；</li>
<li>面积计算、剩余面积、家具列表等处理都被封装到房子类的内部中。</li>
</ol>
<h3 id="案例分析四士兵突击">案例分析四——士兵突击</h3>
<p>在这里再次复习一下封装：</p>
<ol style="list-style-type: decimal">
<li>封装是面积对象编程的一个特点；；</li>
<li>面积对象编程的第一步就是将属性和方法封装到一个抽象的类中；</li>
<li>外界使用类创建对象（有的教程叫实例），然后让对象调用方法；</li>
<li>对象方法的细节都被封装到类的内部。</li>
</ol>
<p>在这一小节中，还要学到一个知识点就是：一个对象的属性可以是另外一个类创建的对象。</p>
<h4 id="案例需求">案例需求</h4>
<p>现在我们先看一下这个案例的需求：</p>
<ol style="list-style-type: decimal">
<li>士兵许三多有一把AK47</li>
<li>士兵可以开火；</li>
<li>枪能发射子弹；</li>
<li>枪装填子弹——增加子弹的数量。</li>
</ol>
<p>从第一项需求中我们可以知道，我们要创建一个士兵类(Soldier)以及一个枪类(Gun)，并且这个士兵类(Soldier)中含有枪类(Gun)这样一个属性，而这个属性则是由枪类(Gun)创建出来的一个对象。这就对应了我们前面提到的这个知识点，也就是说<strong>一个对象的属性可以是另外一个类创建的对象</strong>。</p>
<p>从第二项和第三项需求我们可以知道，士兵(Solider)对象中有一个开火(fire)的方法，而开火则是由枪发射子弹，那么还要在枪类(Gun)中创建一个发射的方法(shoot)。</p>
<p>从第四项需求可以知道，枪里面还应该有一个子弹数量这个属性，同时还要给枪创建一个装填子弹方法。</p>
<p>因此总结如下：</p>
<ol style="list-style-type: decimal">
<li>需要创建一个士兵类(Soldier)，这个类中含有2属性，一个是士兵的名字(name)，一个是枪(gun)，同时还要定义一个方法，即开火(fire)；</li>
<li>需要创建一个枪类(Gun)，这个类中含有2个属性，一个是型号(model)，即AK47，还有一个是子弹数量(count)，同时还要定义2个方法，即装填子弹(add_bullet)与射击(shoot)这两个方法。</li>
<li>这里还有一个问题，是先定义枪类，还是士兵类，根据前面的知识，哪个类要被使用，就先定义哪个类。在这个案例中，是士兵使用枪，就先定义枪类。因为如果我们先定义士兵类，那么在士兵类的内部，还要用到枪的对象，此时枪类还没有被定义，就会比较麻烦。个人觉得，这个思路就是从小范围到大范围，从局部到整体。</li>
</ol>
<p>以上两个类的示意图如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190520193938.png">

</div>
<h4 id="创建枪gun类">创建枪(Gun)类</h4>
<p>在枪这个类中，型号(model)需要外界传递，而子弹数量(bullet_count)这个属性，我们假定开始的时候是没有子弹的，设为0，子弹需要人工装填，因此这个属性在初始阶段不需要外界输入，从上面的类图可以知道，枪里还有一个装填子弹方法(add_bullet)和发射子弹方法(shoot)，因此枪类代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Gun</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, model)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 枪的型号</span></div><div class="line">        self.model = model</div><div class="line"></div><div class="line">        <span class="comment"># 2. 子弹的数量</span></div><div class="line">        self.bullet_count = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add_bullet</span><span class="params">(self, count)</span>:</span></div><div class="line">        self.bullet_count += count</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shoot</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 判断子弹数量</span></div><div class="line">        <span class="keyword">if</span> self.bullet_count &lt;= <span class="number">0</span>:</div><div class="line">            print(<span class="string">"[%s] 没有子弹了..."</span> % self.model)</div><div class="line"></div><div class="line">            <span class="keyword">return</span></div><div class="line"></div><div class="line">        <span class="comment"># 2. 发射子弹</span></div><div class="line">        self.bullet_count -= <span class="number">1</span></div><div class="line"></div><div class="line">        <span class="comment"># 3. 提示发射信息</span></div><div class="line">        print(<span class="string">"[%s] 突突突...[%d]"</span> % (self.model, self.bullet_count))</div><div class="line"></div><div class="line"></div><div class="line">ak47 = Gun(<span class="string">"AK47"</span>)</div><div class="line">ak47.add_bullet(<span class="number">50</span>)</div><div class="line">ak47.shoot()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[AK47] 突突突...[<span class="number">49</span>]</div></pre></td></tr></table></figure>
<p>代码能够正常运行，到此，枪类(Gun)的定义已经完成。</p>
<p>现在设计士兵类(Soldier)，这个类中含有2个属性，分别是姓名(name)和枪(gun)，不过在这里，先假设每一个新兵都没有枪。在这里还要提示一下，如果不知道设置什么初始值，可以设置为<code>None</code>。</p>
<ul>
<li><code>None</code>关键字表示什么都没有；</li>
<li>表示一个空对象，没有方法和属性，是一个特殊的常量；</li>
<li>可以将<code>None</code>赋值给任何一个变量。</li>
</ul>
<p>现在分析一下士兵类中的<code>fire</code>方法需求：</p>
<ol style="list-style-type: decimal">
<li>判断是否有枪，没有枪法没法冲锋；</li>
<li>减一声口号；</li>
<li>装填子弹；</li>
<li>射击。</li>
</ol>
<p>完整代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Gun</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, model)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 枪的型号</span></div><div class="line">        self.model = model</div><div class="line"></div><div class="line">        <span class="comment"># 2. 子弹的数量</span></div><div class="line">        self.bullet_count = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add_bullet</span><span class="params">(self, count)</span>:</span></div><div class="line">        self.bullet_count += count</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shoot</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 判断子弹数量</span></div><div class="line">        <span class="keyword">if</span> self.bullet_count &lt;= <span class="number">0</span>:</div><div class="line">            print(<span class="string">"[%s] 没有子弹了..."</span> % self.model)</div><div class="line"></div><div class="line">            <span class="keyword">return</span></div><div class="line"></div><div class="line">        <span class="comment"># 2. 发射子弹</span></div><div class="line">        self.bullet_count -= <span class="number">1</span></div><div class="line"></div><div class="line">        <span class="comment"># 3. 提示发射信息</span></div><div class="line">        print(<span class="string">"[%s] 突突突...[%d]"</span> % (self.model, self.bullet_count))</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Soldier</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 姓名</span></div><div class="line">        self.name = name</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment"># 2. 枪 - 新兵没有枪</span></div><div class="line">        self.gun = <span class="keyword">None</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fire</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        <span class="comment"># 1. 判断士兵是否有枪</span></div><div class="line">        <span class="keyword">if</span> self.gun == <span class="keyword">None</span>:</div><div class="line">            print(<span class="string">"[%s] 还没有枪..."</span>% self.name)</div><div class="line"></div><div class="line">            <span class="keyword">return</span></div><div class="line">        <span class="comment"># 2. 高喊口号</span></div><div class="line">        print(<span class="string">"冲啊...[%s]"</span>% self.name)</div><div class="line"></div><div class="line">        <span class="comment"># 3. 让枪装填子弹</span></div><div class="line">        self.gun.add_bullet(<span class="number">50</span>)</div><div class="line"></div><div class="line">        <span class="comment"># 4. 发射子弹</span></div><div class="line">        self.gun.shoot()</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">ak47 = Gun(<span class="string">"AK47"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 2. 创建许三多</span></div><div class="line">xusanduo = Soldier(<span class="string">"许三多"</span>)</div><div class="line">xusanduo.gun = ak47</div><div class="line">xusanduo.fire()</div><div class="line">print(xusanduo.gun)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">冲啊...[许三多]</div><div class="line">[AK47] 突突突...[<span class="number">49</span>]</div><div class="line">&lt;__main__.Gun object at <span class="number">0x000002E8B48D9668</span>&gt;</div></pre></td></tr></table></figure>
<p>在这个案例中，我们学到的内容就是：如果我们要实现某个任务，这个任务中有两个类，例如A类与B类，那么通过A类创建的对象中的属性可以是B类来源的对象，此时A创建的这个对象中的属性就是能调用B类中的方法。这个案例我觉得有点复杂，笔记不太可能记得很详细，可以多看几遍视频。</p>
<h4 id="身份运算符">身份运算符</h4>
<p>再来看一下前面代码中的某一句，即<code>if self.gun == None</code>，选中后，会出现如下提示信息：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190521124623.png">

</div>
<p>PyCharm的提示信息显示，如果与<code>None</code>进行比较时，最好使用<code>is</code>或<code>is not</code>，而不是使用<code>==</code>。这里的<code>is</code>就是身份运算符。</p>
<p>身份运算符用于比较两个对象的内存地址是否一致，也就是说是否是对同一个对象的引用。在Python中，针对<code>None</code>进行比较时，建议使用<code>is</code>判断。Python中的身份运算符有2个，分别是<code>is</code>与<code>is not</code>，它们的功能如下所示：</p>
<table>
<thead>
<tr class="header">
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>is</td>
<td>is是判断两个标识符是不是引用同一个对象</td>
<td>x is y，类似id(x)==id(y)</td>
</tr>
<tr class="even">
<td>is not</td>
<td>is not是判断两个标识符是不是引用不同的对象</td>
<td>x is not y，类似id(x)!=id(y)</td>
</tr>
</tbody>
</table>
<p>这里需要区分一下<code>is</code>与<code>==</code>的区别</p>
<p><code>is</code>用于判断两个变量引用对象是否为同一个；</p>
<p><code>==</code>用于判断引用变量的值是否相等，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">1</span>]: a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"></div><div class="line">In [<span class="number">2</span>]: id(a)</div><div class="line">Out[<span class="number">2</span>]: <span class="number">2681339468296</span></div><div class="line"></div><div class="line">In [<span class="number">3</span>]: b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"></div><div class="line">In [<span class="number">4</span>]: id(b)</div><div class="line">Out[<span class="number">4</span>]: <span class="number">2681339465864</span></div><div class="line"></div><div class="line">In [<span class="number">5</span>]: a == b</div><div class="line">Out[<span class="number">5</span>]: <span class="keyword">True</span></div><div class="line"></div><div class="line">In [<span class="number">6</span>]: a <span class="keyword">is</span> b</div><div class="line">Out[<span class="number">6</span>]: <span class="keyword">False</span></div></pre></td></tr></table></figure>
<p>从上面的案例我们可以知道，a与b这两个列表的值相等，但引用不相等（也就是说这两个变量引用的内存地址不相同）。</p>
<p>而<code>None</code>在Python中算是一个空对象，空对象不能把它理解为零，它是Python中的一个特殊的常量，指向内存中的一个地址，一个变量如果是None，它一定和None指向同一个内存地址。在上面的代码中，即<code>if self.gun == None</code>这句中，<code>==</code>后面接的是一个对象，因此最好使用<code>is</code>，因为<code>is</code>主要用于判断对象的引用，而不是值，因此Python建议使用<code>is</code>来判断None。</p>
<p>网上又检索到了一些资料，如下所示：</p>
<p>在区分<code>is</code>和<code>==</code>这两种运算符区别之前，首先要知道Python中对象包含的三个基本要素，分别是：<code>id</code>(身份标识)、<code>type</code>(数据类型)和<code>value</code>(值)。<code>is</code>和<code>==</code>都是对对象进行比较判断作用的，但对对象比较判断的内容并不相同。<code>==</code>比较操作符和<code>is</code>同一性运算符区别</p>
<p><code>==</code>是python标准操作符中的比较操作符，用来比较判断两个对象的value(值)是否相等，<code>is</code>也被叫做同一性运算符，这个运算符比较判断的是对象间的唯一身份标识，也就是id是否相同。</p>
<h2 id="私有属性和私有方法">私有属性和私有方法</h2>
<h3 id="应用场景及定义方式">应用场景及定义方式</h3>
<h4 id="应用场景-1">应用场景</h4>
<ul>
<li>在实际开发中，对象的某些属性和方法可能只希望在对象的内部被使用，而不希望在外部被访问到；</li>
<li>私有属性就是对象不希望公开的属性；</li>
<li>私有方法就是对象不希望公开的方法。</li>
</ul>
<h4 id="定义方式">定义方式</h4>
<ul>
<li>在定义属性和方法时，在属性名或者方法名前增加两个下划线，定义的就是私有属性或方法；</li>
<li>我们先看一个最常规的案例，如下所示：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Women</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line"></div><div class="line">        self.name = name</div><div class="line">        self.age = <span class="number">18</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">secret</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 的年龄是%d"</span>%(self.name, self.age))</div><div class="line"></div><div class="line">xiaofang = Women(<span class="string">"小芳"</span>)</div><div class="line"></div><div class="line">print(xiaofang.age)</div><div class="line"></div><div class="line">xiaofang.secret()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">18</span></div><div class="line">小芳 的年龄是<span class="number">18</span></div></pre></td></tr></table></figure>
<p>在这个案例中，我们定义了一个女人类(Women)，通过这个类创建了一个xiaofang对象，然后输出了这个对象的属性(age)与方法(secret)。</p>
<p>现在我们将age这个属性与方法改为私有属性，也就是在它们前面加两个下划线，变成<code>__age</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Women</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line"></div><div class="line">        self.name = name</div><div class="line">        self.__age = <span class="number">18</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">secret</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 的年龄是%d"</span>%(self.name, self.__age))</div><div class="line"></div><div class="line">xiaofang = Women(<span class="string">"小芳"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 私有属性在外界不能被直接访问</span></div><div class="line">print(xiaofang.__age)</div><div class="line"></div><div class="line">xiaofang.secret()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/面向对象/hm_17_私有属性和方法.py"</span>, line <span class="number">13</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    print(xiaofang.__age)</div><div class="line">AttributeError: <span class="string">'Women'</span> object has no attribute <span class="string">'__age'</span></div></pre></td></tr></table></figure>
<p>运行结果出错，系统提示缺少属性<code>__age</code>。现在我们将<code>print(xiaofang.__age)</code>这句注释掉，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Women</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line"></div><div class="line">        self.name = name</div><div class="line">        self.__age = <span class="number">18</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">secret</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 在对象的方法内部，是可以访问对象的私有属性的</span></div><div class="line">        print(<span class="string">"%s 的年龄是%d"</span>%(self.name, self.__age))</div><div class="line"></div><div class="line">xiaofang = Women(<span class="string">"小芳"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 私有属性在外界不能被直接访问</span></div><div class="line"><span class="comment"># print(xiaofang.__age)</span></div><div class="line"></div><div class="line">xiaofang.secret()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">小芳 的年龄是<span class="number">18</span></div></pre></td></tr></table></figure>
<p>能够正常运行，这说明在对象的<code>secret</code>这个方法内部，可以访问这个对象的私有属性，也就是<code>self.__age</code>。</p>
<p>现在我们把<code>secret</code>这个方法也改为私有方法，即改为<code>__secret</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Women</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line"></div><div class="line">        self.name = name</div><div class="line">        self.__age = <span class="number">18</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__secret</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 的年龄是%d"</span>%(self.name, self.__age))</div><div class="line"></div><div class="line">xiaofang = Women(<span class="string">"小芳"</span>)</div><div class="line"></div><div class="line"><span class="comment"># print(xiaofang.__age)</span></div><div class="line"></div><div class="line">xiaofang.__secret()</div></pre></td></tr></table></figure>
<p>结果运算如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/面向对象/hm_17_私有属性和方法.py"</span>, line <span class="number">15</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    xiaofang.__secret()</div><div class="line">AttributeError: <span class="string">'Women'</span> object has no attribute <span class="string">'__secret'</span></div></pre></td></tr></table></figure>
<p>结果也无法运行，提示没有<code>__secret</code>这个方法。</p>
<h3 id="伪私有属性和伪私有方法">伪私有属性和伪私有方法</h3>
<p>在Python中并没有真正意义上的私有：</p>
<ul>
<li>在给属性、方法命名时，实际是对名称做了一些特殊处理，使得外界无法访问到；</li>
<li>如果我们要强行访问这些智能属性与方法，处理方式就是在名称前面加上<code>__类名</code>=&gt;<code>_类名__名称</code></li>
</ul>
<p>因此在Python中是有办法访问这些私有属性和私有方法，但在日常开发中，我们最好不要用这种方式来访问对象的私有属性或私有方法。</p>
<p>还来看一下前面的案例，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Women</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line"></div><div class="line">        self.name = name</div><div class="line">        self.__age = <span class="number">18</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__secret</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 的年龄是%d"</span>%(self.name, self.__age))</div><div class="line"></div><div class="line">xiaofang = Women(<span class="string">"小芳"</span>)</div><div class="line"></div><div class="line">print(xiaofang.__age)</div><div class="line"></div><div class="line"><span class="comment"># xiaofang.__secret()</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/黑马教程笔记/面向对象/hm_18_伪私有属性和方法.py"</span>, line <span class="number">13</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    print(xiaofang.__age)</div><div class="line">AttributeError: <span class="string">'Women'</span> object has no attribute <span class="string">'__age'</span></div></pre></td></tr></table></figure>
<p>解释器提示，没有<code>__age</code>这个属性，现在我们改变一下代码，也就是将<code>print(xiaofang.__age)</code>这句改为<code>print(xiaofang._Women__age)</code>，改动的地方就是将私有属性前面添加上类名，并在类名前面再加一个下划线，完整代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Women</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line"></div><div class="line">        self.name = name</div><div class="line">        self.__age = <span class="number">18</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__secret</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 的年龄是%d"</span>%(self.name, self.__age))</div><div class="line"></div><div class="line">xiaofang = Women(<span class="string">"小芳"</span>)</div><div class="line"></div><div class="line">print(xiaofang._Women__age)</div><div class="line"></div><div class="line"><span class="comment"># xiaofang.__secret()</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">18</span></div></pre></td></tr></table></figure>
<p>通过这种方法，我们就能访问对象的私有属性。再来看一下<code>__secret</code>这个私有方法的访问，也是同样的方法，即<code>xiaofang._Women__secret</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Women</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></div><div class="line"></div><div class="line">        self.name = name</div><div class="line">        self.__age = <span class="number">18</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__secret</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"%s 的年龄是%d"</span>%(self.name, self.__age))</div><div class="line"></div><div class="line">xiaofang = Women(<span class="string">"小芳"</span>)</div><div class="line"></div><div class="line">print(xiaofang._Women__age)</div><div class="line"></div><div class="line">xiaofang._Women__secret()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">18</span></div><div class="line">小芳 的年龄是<span class="number">18</span></div></pre></td></tr></table></figure>
<p>我们现在也能访问这个私有方法，因此在Python中，没有绝对意义上的私有属性与私有方法，因此可以称为<code>伪私有属性和伪私有方法</code>。</p>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li>黑马Python视频教程</li>
<li>Python基础教程(第3版).Magnus Lie Hetland</li>
<li>Python无师自通：专业程序员的养成</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/12/Python/Python学习笔记（10）-输入输入与文件及目录操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/12/Python/Python学习笔记（10）-输入输入与文件及目录操作/" itemprop="url">Python学习笔记（10）-文件、目录和输入输出操作</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-12T12:00:00+08:00">
                2018-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,841
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  8
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="读取键盘的输入">读取键盘的输入</h2>
<p>Python提供了<code>input()</code>内置函数从标准输入读入一行文本，默认的标准输入是键盘。<code>input</code>可以接收一个Python表达式作为输入，并将运算结果返回，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat input.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">str=input(<span class="string">"Please input:  "</span>)</div><div class="line">print(<span class="string">"What you input is: "</span>,str)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 input.py </div><div class="line">Please input:  Hello</div><div class="line">What you input <span class="keyword">is</span>:  Hello</div></pre></td></tr></table></figure>
<h2 id="文件目录的斜杠处理">文件目录的斜杠处理</h2>
<p>在Python中，<code>\</code>是转义字符的标志，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(<span class="string">"Hello, \npython"</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Hello, </div><div class="line">python</div></pre></td></tr></table></figure>
<p>如果文件目录的首字母有<code>n</code>，那么就容易出错，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(<span class="string">"c:\nowhere"</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">c:</div><div class="line">owhere</div></pre></td></tr></table></figure>
<h4 id="目录的处理方法之一加r">目录的处理方法之一加<code>r</code></h4>
<p>此时可以在目录前面加一个<code>r</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(<span class="string">r"c:\nowhere"</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">c:\nowhere</div></pre></td></tr></table></figure>
<h4 id="目录的处理方法之二加双斜杠">目录的处理方法之二加双斜杠<code>\\</code></h4>
<p>加双斜杠<code>\\</code>其实就是把<code>\</code>进行转义，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(<span class="string">"c:\\nowhere"</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">c:\nowhere</div></pre></td></tr></table></figure>
<h4 id="末尾左斜杠的处理">末尾左斜杠的处理</h4>
<p>但是还要注意的是，如果目录后面还有<code>\</code>，上面的两种方式就不合适了，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(<span class="string">r"c:\nowhere\")</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  File <span class="string">"&lt;ipython-input-8-2406b3e40ced&gt;"</span>, line <span class="number">1</span></div><div class="line">    print(<span class="string">r"c:\nowhere\")</span></div><div class="line"><span class="string">                         ^</span></div><div class="line"><span class="string">SyntaxError: EOL while scanning string literal</span></div></pre></td></tr></table></figure>
<p>运行出错，EOL是End-of-life(项目终止/停产)的缩写。此时位于末尾的左斜杠的前面应该再加一个左斜杠，并用引号隔开，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(<span class="string">r"c:\nowhere"</span> <span class="string">"\\"</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">c:\nowhere\</div></pre></td></tr></table></figure>
<h2 id="文件对象的方法">文件对象的方法</h2>
<h3 id="file对象常用函数">file对象常用函数</h3>
<p>file对象使用open函数来创建，下表列出了file对象常用的函数：</p>
<table style="width:92%;">
<colgroup>
<col width="6%">
<col width="84%">
</colgroup>
<thead>
<tr class="header">
<th>序号</th>
<th>方法及描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>file.close()：关闭文件。关闭后文件不能再进行读写操作。</td>
</tr>
<tr class="even">
<td>2</td>
<td>file.flush()：刷新文件内部缓冲，直接把内部缓冲区的数据立刻写入文件, 而不是被动的等待输出缓冲区写入。</td>
</tr>
<tr class="odd">
<td>3</td>
<td>file.fileno()：返回一个整型的文件描述符(file descriptor FD 整型), 可以用在如os模块的read方法等一些底层操作上。</td>
</tr>
<tr class="even">
<td>4</td>
<td>file.isatty()：如果文件连接到一个终端设备返回 True，否则返回 False。</td>
</tr>
<tr class="odd">
<td>5</td>
<td>file.next()：返回文件下一行。</td>
</tr>
<tr class="even">
<td>6</td>
<td>file.read([size])：从文件读取指定的字节数，如果未给定或为负则读取所有。</td>
</tr>
<tr class="odd">
<td>7</td>
<td>file.readline([size])：读取整行，包括 “” 字符。</td>
</tr>
<tr class="even">
<td>8</td>
<td>file.readlines([sizeint])：读取所有行并返回列表，若给定sizeint&gt;0，返回总和大约为sizeint字节的行, 实际读取值可能比 sizeint 较大, 因为需要填充缓冲区。</td>
</tr>
<tr class="odd">
<td>9</td>
<td>file.seek(offset[, whence])：设置文件当前位置</td>
</tr>
<tr class="even">
<td>10</td>
<td>file.tell()：返回文件当前位置。</td>
</tr>
<tr class="odd">
<td>11</td>
<td>file.truncate([size])：从文件的首行首字符开始截断，截断文件为 size 个字符，无 size 表示从当前位置截断；截断之后后面的所有字符被删除，其中 Widnows 系统下的换行代表2个字符大小。</td>
</tr>
<tr class="even">
<td>12</td>
<td>file.write(str)：将字符串写入文件，没有返回值。</td>
</tr>
<tr class="odd">
<td>13</td>
<td>file.writelines(sequence)：向文件写入一个序列字符串列表，如果需要换行则要自己加入每行的换行符。</td>
</tr>
</tbody>
</table>
<h3 id="f.read">f.read()</h3>
<p>为了读取一个文件的内容，调用<code>f.read(size)</code>,这将读取一定数目的数据,然后作为字符串或字节对象返回。<code>size</code>是一个可选的数字类型的参数。当<code>size</code>被忽略了或者为负,那么该文件的所有内容都将被读取并且返回，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat foo.txt</div><div class="line">Python <span class="keyword">is</span> a good program language.</div><div class="line"> Yes, it <span class="keyword">is</span> very good!</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat read.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="comment"># open a file</span></div><div class="line">f = open(<span class="string">"foo.txt"</span>,<span class="string">"r"</span>)</div><div class="line"></div><div class="line">str=f.read()</div><div class="line">print(str)</div><div class="line">f.close()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 read.py </div><div class="line">Python <span class="keyword">is</span> a good program language.</div><div class="line"> Yes, it <span class="keyword">is</span> very good!</div></pre></td></tr></table></figure>
<h3 id="f.readline">f.readline()</h3>
<p><code>f.readline()</code>会从文件中读取单独的一行，换行符为<code>\n</code>，<code>f.readline()</code>如果返回一个空字符串，说明已经读取到了最后一下，看下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat foo.txt </div><div class="line">Python <span class="keyword">is</span> a good program language.</div><div class="line"> Yes, it <span class="keyword">is</span> very good!</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat readline.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">f=open(<span class="string">"foo.txt"</span>,<span class="string">"r"</span>)</div><div class="line"></div><div class="line">str=f.readline()</div><div class="line">print(str)</div><div class="line">f.close()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 readline.py </div><div class="line">Python <span class="keyword">is</span> a good program language.</div></pre></td></tr></table></figure>
<h3 id="f.readlines">f.readlines()</h3>
<p><code>f.readlines()</code>将返回该文件中包含的所有行。如果设置可选参数<code>sizehint</code>,则读取指定长度的字节,并且将这些字节按行分割，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat foo.txt </div><div class="line">Python <span class="keyword">is</span> a good program language.</div><div class="line"> Yes, it <span class="keyword">is</span> very good!</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat readlines.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">f = open(<span class="string">"foo.txt"</span>,<span class="string">"r"</span>)</div><div class="line">str=f.readlines()</div><div class="line">print(str)</div><div class="line">f.close()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 readlines.py </div><div class="line">[<span class="string">'Python is a good program language.\n'</span>, <span class="string">' Yes, it is very good!\n'</span>]</div></pre></td></tr></table></figure>
<p>另外一种读取文件内容的方式就是对文件中的行进行迭代，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat foo.txt </div><div class="line">Python <span class="keyword">is</span> a good program language.</div><div class="line"> Yes, it <span class="keyword">is</span> very good!</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat iteration.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line">f=open(<span class="string">"foo.txt"</span>,<span class="string">"r"</span>)</div><div class="line"></div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</div><div class="line">    print(line,end=<span class="string">" "</span>)</div><div class="line"></div><div class="line">f.close()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 iteration.py </div><div class="line">Python <span class="keyword">is</span> a good program language.</div><div class="line">  Yes, it <span class="keyword">is</span> very good!</div></pre></td></tr></table></figure>
<h3 id="f.write">f.write()</h3>
<p>f.write(string)会将string写入到文件中，然后返回写入的字符数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat foo.txt </div><div class="line">Python <span class="keyword">is</span> a good program language.</div><div class="line"> Yes, it <span class="keyword">is</span> very good!</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat f_write.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">f = open(<span class="string">"foo.txt"</span>,<span class="string">"w"</span>)</div><div class="line"></div><div class="line">num = f.write(<span class="string">"Python is a good tool.\n Yes, it is good!\n"</span>)</div><div class="line">print(num)</div><div class="line">f.close()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 f_write.py </div><div class="line"><span class="number">41</span></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat foo.txt </div><div class="line">Python <span class="keyword">is</span> a good tool.</div><div class="line"> Yes, it <span class="keyword">is</span> good!</div></pre></td></tr></table></figure>
<p>如果要写入一些非字符串的东西, 那么将需要先进行转换，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat string_trans.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">f = open(<span class="string">"foo1.txt"</span>,<span class="string">"w"</span>)</div><div class="line">value = (<span class="string">'www.runoob.com'</span>,<span class="number">14</span>)</div><div class="line">s = str(value)+<span class="string">"\n"</span></div><div class="line">f.write(s)</div><div class="line">f.close()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 string_trans.py </div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat foo1.txt </div><div class="line">(<span class="string">'www.runoob.com'</span>, <span class="number">14</span>)</div></pre></td></tr></table></figure>
<h3 id="f.tell">f.tell()</h3>
<p><code>f.tell()</code>返回文件对象当前所处的位置,它是从文件开头开始算起的字节数。</p>
<h3 id="f.seek">f.seek()</h3>
<p>如果要改变文件当前的位置,可以使用<code>f.seek(offset,from_what)</code>函数。 <code>from_what</code>的值,如果是0表示开头,如果是1表示当前位置,2表示文件的结尾，例如：</p>
<ol style="list-style-type: decimal">
<li>seek(x,0)：从起始位置即文件首行首字符开始移动x个字符</li>
<li>seek(x,1)：表示从当前位置往后移动x个字符</li>
<li>seek(-x,2)：表示从文件的结尾往前移动x个字符</li>
<li>from_what值为默认为0，即文件开头。</li>
</ol>
<p>看下面的案例： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>f=open(<span class="string">'foo.txt'</span>,<span class="string">'rb+'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.write(<span class="string">b'0123456789abcdef'</span>)</div><div class="line"><span class="number">16</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.seek(<span class="number">5</span>)</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.read(<span class="number">1</span>)</div><div class="line"><span class="string">b'5'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.seek(<span class="number">-3</span>,<span class="number">2</span>)</div><div class="line"><span class="number">38</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.read(<span class="number">1</span>)</div><div class="line"><span class="string">b'd'</span></div></pre></td></tr></table></figure></p>
<h3 id="f.close">f.close()</h3>
<p>在文本文件中(那些打开文件的模式下没有<code>b</code>的)，只会相对于文件起始位置进行定位。当你处理完一个文件后，调用<code>f.close()</code>来关闭文件并释放系统的资源，如果尝试再调用该文件，则会抛出异常，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.close()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.read()</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">ValueError: read of closed file</div></pre></td></tr></table></figure>
<p>当处理一个文件对象时,使用<code>with</code>关键字是非常好的方式。在结束后,它会帮你正确的关闭文件，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> open(<span class="string">'foo.txt'</span>,<span class="string">'r'</span>) <span class="keyword">as</span> f:</div><div class="line"><span class="meta">... </span>    read_data = f.read()</div><div class="line"><span class="meta">... </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>f.closed</div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li>菜鸟教程</li>
<li>MagnusLieHetland. Python基础教程.第3版[M]. 人民邮电出版社, 2018.</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/12/Python/Python学习笔记（11）-魔法方法、特性和迭代器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/12/Python/Python学习笔记（11）-魔法方法、特性和迭代器/" itemprop="url">Python学习笔记（11）-魔法方法、特性和迭代器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-12T12:00:00+08:00">
                2018-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  9,808
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  38
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="魔法方法">魔法方法</h2>
<p>魔法方法(Magic methods)在Python中是一类特殊的方法，它们的形式就是前后有两个下划线，例如<code>__init__</code>这个方法，这个方法是我们最常见的魔法方法之一。</p>
<h2 id="构造函数">构造函数</h2>
<p>构造函数(constructor)是Python中的一个魔法方法，例如我们在创建某个类的时候使用的初始化方法<code>__init__</code>。<code>构造函数</code>不同的于普通方法的地方在于，对象创建后会自动调用魔法方法，例如常规的方法使用如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">f = FooBar()</div><div class="line">f.init()</div></pre></td></tr></table></figure>
<p>但是构造函数的使用如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">f = FooBar()</div></pre></td></tr></table></figure>
<p>从上面可以看出，构造函数不用初始化，只要创建这个对象，它自己就自动初始化了，来看一个简单的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooBar</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.somevar = <span class="number">42</span></div><div class="line">        </div><div class="line">f = FooBar()</div><div class="line">f.somevar</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooBar</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.somevar = <span class="number">42</span></div><div class="line">f = FooBar()</div><div class="line">f.somevar</div><div class="line">Out[<span class="number">2</span>]: <span class="number">42</span></div></pre></td></tr></table></figure>
<p>从上面的结果可以看出来，在创建了<code>f</code>这个对象后，我们并没有给<code>f.somevar</code>添加属性，但是在<code>__init__</code>中我们已经初始化了这个属性，因此不用再次定义属性。</p>
<p>再给这个构造函数添加几个参数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooBar</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, value = <span class="number">24</span>)</span>:</span></div><div class="line">        self.somevar = value</div><div class="line"></div><div class="line">f = FooBar(<span class="string">"This is a constructor argument"</span>)</div><div class="line">f.somevar</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">1</span>]: <span class="class"><span class="keyword">class</span> <span class="title">FooBar</span>:</span>^M</div><div class="line">   ...:     <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, value = <span class="number">24</span>)</span>:</span>^M</div><div class="line">   ...:         self.somevar = value^M</div><div class="line">   ...: ^M</div><div class="line">   ...: f = FooBar(<span class="string">"This is a constructor argument"</span>)^M</div><div class="line">   ...: f.somevar</div><div class="line">   ...:</div><div class="line">Out[<span class="number">1</span>]: <span class="string">'This is a constructor argument'</span></div></pre></td></tr></table></figure>
<p>从这个案例中可以知道，如果指定了参数，那么最终属性显示的结果就是添加的指定的参数。</p>
<h3 id="重写普通方法和特殊的构造函数">重写普通方法和特殊的构造函数</h3>
<p>在面向对象的编程中，每个类都有一个或多个超类，并从它们那里继承行为，对<code>类B</code>的实例调用方法或访问其属性时，如果找不到该方法或属性，将在其<code>超类A</code>中查找，可以看下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"Hello, I'm A."</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line">a = A()</div><div class="line">b = B()</div><div class="line">a.hello()</div><div class="line">b.hello()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Hello, I<span class="string">'m A.</span></div><div class="line"><span class="string">Hello, I'</span>m A.</div></pre></td></tr></table></figure>
<p>在这个案例中，我们可以看到，由于<code>类B</code>自己没有定义方法<code>hello</code>，因此对其调用方法<code>hello</code>时，打印的消息是<code>Hello, I'm A.</code>。要在子类中添加功能，一种基本方法是添加方法，但是如果你想写超类的某些方法，以定制继承而来的行为。还以上面的案例为例说明一下，<code>类B</code>可以重写方法<code>hello</code>，如下述修改后的<code>类B</code>定义如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"Hello, I'm A."</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"Hello, I'm B"</span>)</div><div class="line"></div><div class="line">a = A()</div><div class="line">b = B()</div><div class="line">a.hello()</div><div class="line">b.hello()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Hello, I<span class="string">'m A.</span></div><div class="line"><span class="string">Hello, I'</span>m B</div></pre></td></tr></table></figure>
<p>重写是继承机制的一个重要方法，对构造函数来说万为重要，构造函数用于初始化新建对象的状态，而对于大多数子类来说，除超类的初始化代码外，还要有自己的初始化值代码。虽然所有方法的重写机制都相同，但与重写普通方法相比，重写构造函数时更有可能遇到一个特别的问题：重写构造函数时，必须调用超类（继承的类）的构建函数，否则无法正确地初始化对象，看下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bird</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.hungry = <span class="keyword">True</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.hungry:</div><div class="line">            print(<span class="string">"Aaaah ..."</span>)</div><div class="line">            self.hungry = <span class="keyword">False</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            print(<span class="string">"No, thanks!"</span>)</div><div class="line"></div><div class="line">b = Bird()</div><div class="line">b.eat()</div><div class="line">b.eat()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Aaaah ...</div><div class="line">No, thanks!</div></pre></td></tr></table></figure>
<p>从这个案例中我们可以知道，初始情况下，<code>鸟b</code>处于饥饿状态(<code>hungry = True</code>)，第一次<code>b.eat()</code>后，输出的是<code>Aaaah ...</code>， 此时并把<code>hungry = True</code>切换为<code>hungry = False</code>，当第二次<code>b.eat()</code>后，就输出了<code>No, thanks !</code>。</p>
<p>再看下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bird</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.hungry = <span class="keyword">True</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.hungry:</div><div class="line">            print(<span class="string">"Aaaah ..."</span>)</div><div class="line">            self.hungry = <span class="keyword">False</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            print(<span class="string">"No, thanks!"</span>)</div><div class="line"></div><div class="line">b = Bird()</div><div class="line">b.eat()</div><div class="line">b.eat()</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SongBird</span><span class="params">(Bird)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.sound = <span class="string">"Squawk!"</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sing</span><span class="params">(self)</span>:</span></div><div class="line">        print(self.sound)</div><div class="line"></div><div class="line">singbird = SongBird()</div><div class="line">singbird.sing()</div><div class="line">singbird.eat()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Aaaah ...</div><div class="line">Traceback (most recent call last):</div><div class="line">No, thanks!</div><div class="line">Squawk!</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/python_bio/PythonBio/test.py"</span>, line <span class="number">24</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    singbird.eat()</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/python_bio/PythonBio/test.py"</span>, line <span class="number">6</span>, <span class="keyword">in</span> eat</div><div class="line">    <span class="keyword">if</span> self.hungry:</div><div class="line">AttributeError: <span class="string">'SongBird'</span> object has no attribute <span class="string">'hungry'</span></div></pre></td></tr></table></figure>
<p>在这个案例中，<code>SongBird</code>是<code>Bird</code>的子类，继承了方法<code>est</code>，但如果你要尝试调用它，就出现了问题。</p>
<p>异常提示，<code>SongBird</code>没有属性<code>hungry</code>，这是因为，在<code>SongBird</code>类中重写了构造函数，但新的构造函数中没有包含任何初始化属性<code>hungry</code>的代码。如果要消除这种错误，<code>SongBird</code>的构造函数必须调用其超类<code>Bird</code>的构造函数，以确保基本的初始化得以执行。</p>
<p>为此，有两种方法：</p>
<p>第一，调用未关联的超类构造函数；</p>
<p>第二，使用函数<code>super</code>。</p>
<h3 id="调用未关联的超类构建函数">调用未关联的超类构建函数</h3>
<p>还以上面的案例为例说明一下，如果要调用未关联的超类方法，就要添加一行<code>Bird.__init__(self)</code>，完整代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bird</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.hungry = <span class="keyword">True</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.hungry:</div><div class="line">            print(<span class="string">"Aaaah ..."</span>)</div><div class="line">            self.hungry = <span class="keyword">False</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            print(<span class="string">"No, thanks!"</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SongBird</span><span class="params">(Bird)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        Bird.__init__(self)</div><div class="line">        self.sound = <span class="string">"Squawk!"</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sing</span><span class="params">(self)</span>:</span></div><div class="line">        print(self.sound)</div><div class="line"></div><div class="line">singbird = SongBird()</div><div class="line">singbird.sing()</div><div class="line">singbird.eat()</div><div class="line">singbird.eat()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Squawk!</div><div class="line">Aaaah ...</div><div class="line">No, thanks!</div></pre></td></tr></table></figure>
<p>在常规的面向对象编程中，对<code>实例调用方法时</code>，方法的参数<code>self</code>将自动关联到实例（称为关联的方法）。</p>
<p>如果通过<code>类调用方法</code>（例如<code>Bird.__init__</code>），就没有实例与其相关联，在这种情况下，可以随便设置参数<code>self</code>，这样的方法称为<code>未关联</code>。参过将这个未关联方法的<code>self</code>参数设置为当前实例，将使用超类的构造函数来初始化<code>singbird</code>对象，这表明将设置其属性<code>hungry</code>。</p>
<h3 id="使用super函数">使用<code>super()</code>函数</h3>
<p>这一种方法只适用Python3。调用<code>super</code>这个函数时，将当前类和当前实例作为参数。对其返回的对象调用方法时，调用的是将是超类（而不是当前类）的方法，因此在<code>singbird</code>的构造函数中，可以不使用<code>Bird</code>而是使用了<code>super(singbird, self)</code>，另外，可以像常规调用方法那样（也就是调用关联的方法那样）调用方法<code>__init__</code>。在Python3中调用函数<code>super</code>，可以不提供任何参数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bird</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.hungry = <span class="keyword">True</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.hungry:</div><div class="line">            print(<span class="string">"Aaaah ..."</span>)</div><div class="line">            self.hungry = <span class="keyword">False</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            print(<span class="string">"No, thanks!"</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SongBird</span><span class="params">(Bird)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        super().__init__()</div><div class="line">        self.sound = <span class="string">"Squawk!"</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sing</span><span class="params">(self)</span>:</span></div><div class="line">        print(self.sound)</div><div class="line"></div><div class="line">singbird = SongBird()</div><div class="line">singbird.sing()</div><div class="line">singbird.eat()</div><div class="line">singbird.eat()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Squawk!</div><div class="line">Aaaah ...</div><div class="line">No, thanks!</div></pre></td></tr></table></figure>
<h2 id="元素访问">元素访问</h2>
<p>这一部分是其他的魔法方法。</p>
<h3 id="基本的序列和映射协议">基本的序列和映射协议</h3>
<p>序列和映射基本上是<code>元素(item)</code>的集合，要实现它们的基本行为（协议），不可变对象需要实现2个方法，而可变对象要实现4个：</p>
<ul>
<li><code>__len__(self)</code>：这个方法返回集合包含的项数，对序列来说就是元素个数，对映射来说，就是<code>键-值</code>对。如果<code>__len__(self)</code>返回零（且没有实现覆盖这种行为的<code>__nonzero__</code>），对象在布尔上下文中将被视为假（就像空的列表、元组、字符串和字典一样）。</li>
<li><code>__getitem__(self, key)</code>：返回与指定键相关联的值。对序列来说，键应该是<code>0~n-1</code>的整数（也可以是负数），其中<code>n</code>为序列的长度，对映射来说，键可以是任何类型。如果键为负责，应从末尾往前数，也就是说<code>x[-n]</code>应与<code>x[len(x)-n]</code>等效。</li>
<li><code>__setitem__(self, key8, value)</code>：这个方法应以与键相关联的方式存储值，以便以后能够使用<code>__getitem__</code>来获取。</li>
<li><code>__delitem__(self, key)</code>：这个方法在对对象的组成部分使用<code>__del__</code>语句时被调用，应删除与key相关联的值，同样，仅当对象可变（且允许其值被删除）时，才需要实现这个方法。</li>
</ul>
<p>另外，如果键的类型不合适（如对序列使用字符串键），可能引发<code>TypeError</code>异常。对于序列，如果索引的类型是正确的，但不在允许的范围内，会引发<code>IndexError</code>异常。</p>
<p>下面看一个案例，观察一下能否创建一个无穷序列，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding=utf8</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_index</span><span class="params">(key)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line"><span class="string">    指定的键上是否是可接受的索引？</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">    键必须是非负整数，才是可接受的；</span></div><div class="line"><span class="string">    如果不是整数，将引发TypeError异常；</span></div><div class="line"><span class="string">    如果是负数，将引发IndexError异常（因为这个序列是无穷的）</span></div><div class="line"><span class="string">    """</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> isinstance(key, int): <span class="keyword">raise</span> TypeError</div><div class="line">    <span class="keyword">if</span> key &lt; <span class="number">0</span>:<span class="keyword">raise</span> IndexError</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArithmeticSequence</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start = <span class="number">0</span>, step = <span class="number">1</span>)</span>:</span></div><div class="line">        <span class="string">"""</span></div><div class="line"><span class="string">        初始化这个算术序列</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">        start --- 序列中的第一个值</span></div><div class="line"><span class="string">        step  --- 两个相邻的值的差</span></div><div class="line"><span class="string">        changed - 一个字典，包含用户修改后的值</span></div><div class="line"><span class="string">        """</span></div><div class="line">        self.start = start <span class="comment">#存储起始值</span></div><div class="line">        self.step = step</div><div class="line">        self.changed = &#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, key)</span>:</span></div><div class="line">        <span class="string">"""</span></div><div class="line"><span class="string">        从算术序列中获取一个元素</span></div><div class="line"><span class="string">        """</span></div><div class="line">        check_index(key)</div><div class="line"></div><div class="line">        <span class="keyword">try</span>: <span class="keyword">return</span> self.changed[key]</div><div class="line">        <span class="keyword">except</span> KeyError:</div><div class="line">            <span class="keyword">return</span> self.start + key*self.step</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></div><div class="line">        <span class="string">"""</span></div><div class="line"><span class="string">        修改算术序列中的元素</span></div><div class="line"><span class="string">        """</span></div><div class="line">        check_index(key)</div><div class="line">        self.changed[key] = value</div><div class="line"></div><div class="line">s = ArithmeticSequence(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line">s[<span class="number">4</span>]</div><div class="line">s[<span class="number">4</span>] = <span class="number">2</span></div><div class="line">s[<span class="number">4</span>]</div><div class="line">s[<span class="number">5</span>]</div><div class="line">print(s[<span class="number">4</span>])</div><div class="line">print(s[<span class="number">5</span>])</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">2</span></div><div class="line"><span class="number">11</span></div></pre></td></tr></table></figure>
<p>这些代码实现的是一个<code>算术序列</code>，其中任何两个相邻数字的差都相同，第一值是由构造函数的参数<code>start</code>（默认为0）指定的，而相邻值之间的差是由参数<code>step</code>（默认为1）指定的。允许允许修改某些元素，这是通过将不符合规则的值保存在字典<code>changed</code>中实现的。如果元素未被修改，就用公式<code>self.start + key*self.step</code>来计算它的值。</p>
<p>这段代码中禁止删除元素，因此没有实现<code>__del__</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">del</span> s[<span class="number">4</span>]</div><div class="line">File <span class="string">"D:/netdisk/bioinfo.notes/Python/python_bio/PythonBio/test.py"</span>, line <span class="number">52</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    <span class="keyword">del</span> s[<span class="number">4</span>]</div><div class="line">AttributeError: __delitem__</div></pre></td></tr></table></figure>
<p>另外这个类中没有方法<code>__len__</code>，因此其长度是无穷的，如果所使用考虑综的类型非法，将引发TypeError异常，如果索引的类型正确，但不在允许的范围内（即为负数），将引发IndexError异常，其中索引的检查是源代码中的<code>check_index</code>这个函数负责的，如果出现索引错误，就是如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">s[<span class="string">"four"</span>]</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/python_bio/PythonBio/test.py"</span>, line <span class="number">49</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    s[<span class="string">"four"</span>]</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/python_bio/PythonBio/test.py"</span>, line <span class="number">31</span>, <span class="keyword">in</span> __getitem__</div><div class="line">    check_index(key)</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/python_bio/PythonBio/test.py"</span>, line <span class="number">11</span>, <span class="keyword">in</span> check_index</div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> isinstance(key, int): <span class="keyword">raise</span> TypeError</div><div class="line">TypeError</div><div class="line">s[<span class="number">-42</span>]</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/python_bio/PythonBio/test.py"</span>, line <span class="number">49</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    s[<span class="number">-42</span>]</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/python_bio/PythonBio/test.py"</span>, line <span class="number">31</span>, <span class="keyword">in</span> __getitem__</div><div class="line">    check_index(key)</div><div class="line">  File <span class="string">"D:/netdisk/bioinfo.notes/Python/python_bio/PythonBio/test.py"</span>, line <span class="number">12</span>, <span class="keyword">in</span> check_index</div><div class="line">    <span class="keyword">if</span> key &lt; <span class="number">0</span>:<span class="keyword">raise</span> IndexError</div><div class="line">IndexError</div></pre></td></tr></table></figure>
<h3 id="从listdict和str派生">从list、dict和str派生</h3>
<p>关于序列/映射的一些方法可以还从已有方法中继承，在标准库<code>collections</code>这个模块中提供了抽象和具体的基类，用户也能继承内置类型。因此如果要实现一种行为类似于内置列表的序列类型，可以直接继承list，在下面这个案例中，来实现一个带访问计数器的列表，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterList</span><span class="params">(list)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, *args)</span>:</span></div><div class="line">        super().__init__(*args)</div><div class="line">        self.counter = <span class="number">0</span></div><div class="line">        </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, index)</span>:</span></div><div class="line">        self.counter += <span class="number">1</span></div><div class="line">        <span class="keyword">return</span> super(CounterList, self).__getitem__(index)</div></pre></td></tr></table></figure>
<p>在上面的这段代码中，<code>CounterList</code>类依赖于其超类<code>List</code>的行为。<code>CounterList</code>没有重写的方法（如<code>append</code>、<code>extend</code>，<code>index</code>等）都可以直接使用。在两个被重写的方法中，使用<code>super</code>来调用超类的相应方法，并添加了必要的行为：初始化属性<code>counter</code>（在<code>__init__</code>中）和更新属性<code>counter</code>（在<code>__getitem__</code>）。需要注意的是，重写<code>__getitem__</code>并不能保证一定会捕捉用户的访问操作，因为还有其他访问列表内容的方法，例如通过方法<code>pop</code>，下面来演示一下<code>CounterList</code>的可能用法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterList</span><span class="params">(list)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, *args)</span>:</span></div><div class="line">        super().__init__(*args)</div><div class="line">        self.counter = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, index)</span>:</span></div><div class="line">        self.counter += <span class="number">1</span></div><div class="line">        <span class="keyword">return</span> super(CounterList, self).__getitem__(index)</div><div class="line"></div><div class="line">cl = CounterList(range(<span class="number">10</span>))</div><div class="line">print(cl)</div><div class="line">cl.reverse()</div><div class="line">print(cl)</div><div class="line"><span class="keyword">del</span> cl[<span class="number">3</span>:<span class="number">6</span>]</div><div class="line">print(cl.counter)</div><div class="line">print(cl[<span class="number">4</span>] + cl[<span class="number">2</span>])</div><div class="line">print(cl.counter)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</div><div class="line">[<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>]</div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">9</span></div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<p>在上面的案例中，<code>CounterList</code>的行为在大多数方面的都类型于列表，但它有一个<code>counter</code>属性（其初始值为0），每当访问列表元素时，这个属性的值就都加1，执行加法运算<code>cl[4] + cl[2]</code>后，<code>counter</code>的值递增了2次，变成了2。</p>
<h2 id="特性">特性</h2>
<p><code>存取方法</code>是名称类似于<code>getHeight</code>和<code>setHeight</code>的方法，用于获取或设置属性，如果访问给定属性时，必须采取特定的措施，那么像这样的封装状态变量（属性）很重要，例如看下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.width = <span class="number">0</span></div><div class="line">        self.height = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_size</span><span class="params">(self, size)</span>:</span></div><div class="line">        self.width, self.height = size</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_size</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.width, self.height</div><div class="line"></div><div class="line">r = Rectangle()</div><div class="line">r.width = <span class="number">10</span></div><div class="line">r.height = <span class="number">5</span></div><div class="line">print(r.get_size())</div><div class="line">r.set_size((<span class="number">150</span>, <span class="number">100</span>))</div><div class="line">print(r.width)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">print(r.get_size())</div><div class="line">(<span class="number">10</span>, <span class="number">5</span>)</div><div class="line">print(r.width)</div><div class="line"><span class="number">150</span></div></pre></td></tr></table></figure>
<p><code>get_size</code>和<code>set_size</code>是假想属性<code>size</code>的存取方法，这个属性是一个由<code>width</code>和<code>height</code>组成的元组，这些代码并非完全错误，但存在缺陷。使用这个类时，用户无需关心它是如何被封装的。如果用户想要修改实现，让size成为真正的属性，而width和height是动态计算出来的，就需要提供用于访问width和height的存取方法，使用这个类的程序也必须重写。应当客户代码能够以同样的方式对待所有的属性。</p>
<p>那么如何解决这个问题呢？给所有的属性都提供存取方法并不现实。而Python能够隐藏存取方法，让所有的属性看起来都一样，通过存取方法定义的属性通常称为<code>特性(property)</code>。在Python中有两种创建特性的机制，但Python中只用<code>property</code>函数。</p>
<h3 id="property函数"><code>property</code>函数</h3>
<p>以前面的<code>Rectangle</code>类为例说明一下，在使用<code>property</code>函数时，只需要添加一行代码，即<code>size = property(get_size, set_size)</code>即可，完整代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.width = <span class="number">0</span></div><div class="line">        self.height = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_size</span><span class="params">(self, size)</span>:</span></div><div class="line">        self.width, self.height = size</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_size</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.width, self.height</div><div class="line">    size = property(get_size, set_size)</div><div class="line"></div><div class="line">r = Rectangle()</div><div class="line">r.width = <span class="number">10</span></div><div class="line">r.height = <span class="number">5</span></div><div class="line">print(r.size)</div><div class="line">r.size = <span class="number">150</span>, <span class="number">100</span></div><div class="line">print(r.width)</div></pre></td></tr></table></figure>
<p>在上面的这段代码中，通过调用<code>property</code>函数，将存取方法作为参数（<code>获取方法</code>在前，<code>设置方法</code>在后）创建了一个特性，然后将名称<code>size</code>关联到这个特性。这样就能以同样的方式对待width、height和size了，而无需关心它们是如何实现的，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">print(r.size)</div><div class="line">(<span class="number">10</span>, <span class="number">5</span>)</div><div class="line">print(r.width)</div><div class="line"><span class="number">150</span></div></pre></td></tr></table></figure>
<p>从运行结果中可以看到，属性<code>size</code>依然受制于<code>get_size</code>和<code>set_size</code>执行的计算，但是看起来就像普通属性一样。</p>
<p>事实上，调用函数<code>property</code>时，还可以①不指定参数；②指定一个参数；③指定三个参数或四个参数。</p>
<p>如果没有指定任何参数，创建的特性将既不可读，也不可写。如果只指定一个参数（获取方法），创建的特性将是只读的。第三个参数是可选的，指定用于删除属性的方法（这个方法不接受任何参数）。第四个参数也是可选的，指定一个文档字符串，这些参数分别命名为<code>fget</code>、<code>fset</code>、<code>fdel</code>和<code>doc</code>。如果要创建一个只可写且带文档字符串的特性，可使用它们作为关键字参数。</p>
<h3 id="property函数的工作原理"><code>property</code>函数的工作原理</h3>
<p><code>property</code>其实并不一个函数，而是一个类，它的实例包含一些魔法方法，而所有的魔法都是由这些方法完成的。这些魔法方法为<code>__get__</code>，<code>__set__</code>和<code>__delete__</code>，它们一道定义了所谓的描述符协议。只要对象实现了这些方法中的任何一个，它就是一个描述符。描述符的独特之处在于其访问方式。例如，读取属性（具体来说，是在实例中访问类中定义的属性）时，如果它关联的是一个实现了<code>__get__</code>的对象，将不会返回这个对象，而是调用方法<code>__get__</code>并将其结果返回。实际上，这是隐藏在特性、关联的方法、静态方法和类方法。</p>
<h3 id="静态方法和类方法">静态方法和类方法</h3>
<p>静态方法和类方法是这样创建的：将它们分别包装在<code>staticmethod</code>和<code>classmethod</code>类的对象中。静态方法的定义中没有参数<code>self</code>，可直接通过类来调用。类方法的定义中包含类似于self的参数，通常被命令为cls，对于类方法，也可通过对象直接调用，但参数cls将自动关联到类。</p>
<p>看下面的一个简单案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">smeth</span><span class="params">()</span>:</span></div><div class="line">        print(<span class="string">"This is a static method"</span>)</div><div class="line">    smeth = staticmethod(smeth)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cmeth</span><span class="params">(cls)</span>:</span></div><div class="line">        print(<span class="string">"This is a class method of"</span>,cls)</div><div class="line">    cmeth = classmethod(cmeth)</div></pre></td></tr></table></figure>
<p>像这样手工包装和替换方法有点繁琐。在Python2中，引入了一种名为<code>装饰器</code>的新语法，可用于像这样包装方法（实际上，装饰器可用于包装任何可调用的对象，并且可用于方法和函数）。要指定一个或多个装饰器，为此可在方法（或函数）前面使用运算符<code>@</code>列出这些装饰器（指定了多少装饰器时，应用的顺序与列出的顺序相反），如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>:</span></div><div class="line"></div><div class="line"><span class="meta">    @staticmethod</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">smeth</span><span class="params">()</span>:</span></div><div class="line">        print(<span class="string">"This is a static method"</span>)</div><div class="line"></div><div class="line"><span class="meta">    @classmethod</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cmeth</span><span class="params">(cls)</span>:</span></div><div class="line">        print(<span class="string">"This is a class methods of "</span>, cls)</div><div class="line"></div><div class="line">MyClass.smeth()</div><div class="line">MyClass.cmeth()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">This <span class="keyword">is</span> a static method</div><div class="line">This <span class="keyword">is</span> a <span class="class"><span class="keyword">class</span> <span class="title">methods</span> <span class="title">of</span>  &lt;<span class="title">class</span> '<span class="title">__main__</span>.<span class="title">MyClass</span>'&gt;</span></div></pre></td></tr></table></figure>
<h3 id="getattr____setattr__等方法"><code>__getattr__</code>、<code>__setattr__</code>等方法</h3>
<p>可以拦截对象属性的所有访问企图、其用途之一是在旧式类中实现特性（在旧类中，函数<code>property</code>的行为可能不符合预期）。要在属性被访问时执行一段代码，必须使用一些魔法方法，以下的4个魔法方法提供了你需要的所有功能：</p>
<ul>
<li><code>__getattribute__(self, name)</code>：在属性被访问时自动调用；</li>
<li><code>__getattr__(self, name)</code>：在属性被访问而对象没有这样的属性时自动调用；</li>
<li><code>__setattr__(self, name, value)</code>：试图给属性赋值时自动调用；</li>
<li><code>__delattr__(self, name)</code>：试图删除属性时自动调用。</li>
</ul>
<p>相比函数<code>property</code>，这些魔法方法使用起来比较麻烦。但它们很有用，因为用户可以在这些方法中编写处理多个特性的代码。然而在可能的情况下，最好还是首选<code>property</code>函数。</p>
<p>还看一下前面的<code>Rectangle</code>的案例，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.width = <span class="number">0</span></div><div class="line">        self.height = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setattr__</span><span class="params">(self, name, value)</span>:</span></div><div class="line">        <span class="keyword">if</span> name == <span class="string">"size"</span>:</div><div class="line">            self.width, self.height = value</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            self.__dict__[name] = value</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, name)</span>:</span></div><div class="line">        <span class="keyword">if</span> name == <span class="string">"size"</span>:</div><div class="line">            <span class="keyword">return</span> self.width, self.height</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">raise</span> AttributeError()</div></pre></td></tr></table></figure>
<p>如上面代码所示，这个版本需要处理额外的管理细节，对于这段代码，需要注意以下两点：</p>
<ol style="list-style-type: decimal">
<li>即使涉及的属性不是<code>size</code>，也将调用方法<code>__setattr__</code>。因此这个方法必须考虑如下两种情形：如果涉及的属性为<code>size</code>，就执行与以前一样的操作；否则就使用魔法属性<code>__dict__</code>。<code>__dict__</code>属性是一个字典，其中包含所有的实例属性。使用它们而不是执行常规属性赋值，是因为旨在避免再次调用<code>__setattr__</code>，进而导致无限循环。</li>
<li>仅当没有找到指定的属性时，才会调用方法<code>__getattr__</code>。这意味着如果指定的名称不是<code>size</code>，这个方法将引发<code>AttributeError</code>异常。这在要让类能够正确地支持<code>__hasattr__</code>和<code>__getattr__</code>等内置函数时非常重要。如果指定的名称为<code>size</code>，就使用前一个实现中的表达式。</li>
</ol>
<p>需要注意的是：编写方法<code>__setattr__</code>时需要避开无限循环陷阱，编写<code>__getattribute__</code>时也是如此。由于它拦截对所有属性的访问，因此将拦截对<code>__dict__</code>的访问。在<code>__getattribute__</code>中访问当前实例的属性时，唯一案例的方式是使用父类的方法<code>__getattribute__</code>（使用<code>super</code>）。</p>
<h2 id="迭代器">迭代器</h2>
<p>有关迭代器的魔法方法是<code>__iter__</code>，它是迭代器协议的基础。</p>
<h3 id="迭代器协议">迭代器协议</h3>
<p><code>迭代(iterate)</code>意味着重复多次，就像循环那样。方法<code>__iter__</code>返回一个迭代器，它是包含方法<code>__next__</code>的对象，而调用这个方法时可不提供任何参数，当调用<code>__next__</code>方法时，迭代器应返回其下一个值。如果迭代器没有可供返回的值，应引发<code>StopIteration</code>异常。另外，还可以使用内置的函数<code>next</code>，在这种情况下<code>next(it)</code>与<code>it.__next__()</code>等效。</p>
<p>这有什么意义呢，为什么不使用列表？</p>
<p>因为在很多情况下，使用列表都点大材小用。例如，现在有一个可逐个计算值的函数，你可能只想逐个地获取值，而不是使用列表一次性获取。这是因为如果有很多值，列表可以战用太多的内存。但还有其他原因：使用迭代器更通用与简便。</p>
<p>在下面的案例中就可以看到不能使用列表的案例，因为如果要使用列表，这个列表的长度必须是无穷大的，下面的这个案例是有关斐波那契数列的，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fibs</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.a = <span class="number">0</span></div><div class="line">        self.b = <span class="number">1</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></div><div class="line">        self.a, self.b = self.b, self.a + self.b</div><div class="line">        <span class="keyword">return</span> self.a</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self</div></pre></td></tr></table></figure>
<p>这个迭代器实现了方法<code>__iter__</code>，而这个方法返回迭代器本身，在很多情况下，都在<code>另一个</code>对象中实现返回迭代器的方法<code>__iter__</code>，并在for循环中使用这个对象。在推荐在迭代器中也实现方法<code>__iter__</code>（并像刚才那样让它返回self），这样迭代器就可直接用于for循环中。</p>
<p>有关<code>迭代</code>更正规的定义是，实现了方法<code>__iter__</code>的对象是<strong>可迭代的</strong>，而实现了方法<code>__next__</code>的对象是<strong>迭代器</strong>。</p>
<p>来看一下迭代器的for循环案例，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fibs</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.a = <span class="number">0</span></div><div class="line">        self.b = <span class="number">1</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></div><div class="line">        self.a, self.b = self.b, self.a + self.b</div><div class="line">        <span class="keyword">return</span> self.a</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line"></div><div class="line">fibs = Fibs()</div><div class="line"><span class="keyword">for</span> f <span class="keyword">in</span> fibs:</div><div class="line">    <span class="keyword">if</span> f &gt; <span class="number">1000</span>:</div><div class="line">        print(f)</div><div class="line">        <span class="keyword">break</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1597</span></div></pre></td></tr></table></figure>
<p>这个循环会停止是因为其中包含break语句，否则这个for循环会一直执行下去。</p>
<p>通过对可迭代对象调用内置函数<code>iter</code>就可以获得一个迭代器，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>it = iter([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(it)</div><div class="line"><span class="number">1</span></div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(it)</div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<h3 id="从迭代器创建序列">从迭代器创建序列</h3>
<p>除了对迭代器和可迭代对象进行迭代外，还可以将它们转换为序列。在可以使用序列的情况下，大多数也可以使用迭代器或可迭代对象（索引和切片这种操作除外）。</p>
<p>看下面的一个案例，使用构造函数list显式地将迭代器转换为列表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestIterator</span>:</span></div><div class="line">    value = <span class="number">0</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></div><div class="line">        self.value += <span class="number">1</span></div><div class="line">        <span class="keyword">if</span> self.value &gt; <span class="number">10</span>:<span class="keyword">raise</span> StopIteration</div><div class="line">        <span class="keyword">return</span> self.value</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">ti = TestIterator()</div><div class="line">list(ti)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div></pre></td></tr></table></figure>
<h2 id="生成器">生成器</h2>
<p>生成器是一种使用普通函数语法定义的迭代器。</p>
<h3 id="创建生成器">创建生成器</h3>
<p>现在创建一个将嵌套列表展开的函数，这个函数以类似于下面的列表作为参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nested = [[<span class="number">1</span>,<span class="number">2</span>], [<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>]]</div></pre></td></tr></table></figure>
<p>上面的这个参数其实是一个列表的列表，现在定义这样的函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatten</span><span class="params">(nested)</span>:</span></div><div class="line">    <span class="keyword">for</span> sublist <span class="keyword">in</span> nested:</div><div class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> sublist:</div><div class="line">            <span class="keyword">yield</span> element</div></pre></td></tr></table></figure>
<p>这个函数首选迭代所提供嵌套列表中的所有子列表，然后按顺序迭代每个子列表的元素。</p>
<p>这个函数的最后一行含有<code>yield</code>语句，像含有<code>yield</code>语句的函数都被称为<strong>生成器</strong>。生成器与普通函数的区别在于，生成器不是使用<code>return</code>返回一个值，而是生成多个值，一次一个。每次使用<code>yield</code>生成一个值后，函数都将冻结，即在此停止执行，等待被重新唤醒，被唤醒后，函数将从停止的地方开始继续执行。</p>
<p>为使用所有的值，可对生成器进行迭代，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">nested = [[<span class="number">1</span>,<span class="number">2</span>], [<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>]]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatten</span><span class="params">(nested)</span>:</span></div><div class="line">    <span class="keyword">for</span> sublist <span class="keyword">in</span> nested:</div><div class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> sublist:</div><div class="line">            <span class="keyword">yield</span> element</div><div class="line"></div><div class="line"><span class="keyword">for</span> num <span class="keyword">in</span> flatten(nested):</div><div class="line">    print(num)</div><div class="line">    </div><div class="line"><span class="comment"># 或者如下所示</span></div><div class="line">list(flatten(nested))</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> num <span class="keyword">in</span> flatten(nested):</div><div class="line"><span class="meta">... </span>    print(num)</div><div class="line">...</div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">5</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 或者如下所示</span></div><div class="line"><span class="meta">... </span>list(flatten(nested))</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div></pre></td></tr></table></figure>
<h3 id="生成器推导">生成器推导</h3>
<p><strong>生成器推导</strong>也叫<strong>生成器表达式</strong>，这是一个类似于列表推导的概念。其工作原理与列表推导相同，但不是创建一个列表，而是返回一个生成器，让你能够逐步执行计算，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>g = ((i + <span class="number">2</span> **<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, <span class="number">27</span>)))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(g)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(g)</div><div class="line"><span class="number">7</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>在这段代码中，使用的是圆括号。像在这种简单的情形下，不如使用列表推导；但如果要包装可迭代对象（可能生成大量的值），使用列表推导将立即实例化一个列表，从而丧失迭代的优势。另一个好处是，直接在一对既有的圆括号内（如在函数中调用）使用生成器推导时，无需再添加一对圆括号。也就是可编写下面这样的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>sum(i ** <span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>))</div><div class="line"><span class="number">285</span></div></pre></td></tr></table></figure>
<h3 id="递归生成器">递归生成器</h3>
<p>前面的生成器是使用了2个for循环实现的，如果要处理更多层的嵌套列表，此时就需要使用递归的思路，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatten</span><span class="params">(nested)</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="keyword">for</span> sublist <span class="keyword">in</span> nested:</div><div class="line">            <span class="keyword">for</span> element <span class="keyword">in</span> flatten(sublist):</div><div class="line">                <span class="keyword">yield</span> element</div><div class="line">    <span class="keyword">except</span> TypeError:</div><div class="line">        <span class="keyword">yield</span> nested</div></pre></td></tr></table></figure>
<p>调用<code>flatten</code>时，有两种可能性：</p>
<p>第一，<strong>基线条件</strong>。在基线条件下，要求这个函数展开单个元素，例如一个数，在这种情况下，for循环将引发TypeError异常（因为用户此时试图迭代一个数），而这个生成器只生成一个元素。</p>
<p>第二，<strong>递归条件</strong>。如果要展开的是一个列表，就需要做这些工作：遍历所有的子列表，并对它们调用<code>flatten</code>，然后使用另一个for循环生成展开后的子列表中的所有元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(flatten([[[<span class="number">1</span>],<span class="number">2</span>],<span class="number">3</span>,<span class="number">4</span>,[<span class="number">5</span>,[<span class="number">6</span>,<span class="number">7</span>]],<span class="number">8</span>]))</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</div></pre></td></tr></table></figure>
<p>但是这种方案存在一个问题，如果<code>nested</code>是字符串或类似于字符串的对象，它就属于序列，因此不会引发TypeError异常。要处理这种问题，必须要在生成器开头进行检查。要检查对象是否类似于字符串，最简单的方式就是尝试将对象与一个字符串拼接起来，并检查这是否会引发TypeError异常，添加后的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding=utf8</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatten</span><span class="params">(nested)</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="comment"># 不迭代类似于字符串的对象：</span></div><div class="line">        <span class="keyword">try</span>:nested +<span class="string">""</span></div><div class="line">        <span class="keyword">except</span> TypeError:<span class="keyword">pass</span></div><div class="line">        <span class="keyword">else</span>:<span class="keyword">raise</span> TypeError</div><div class="line">        <span class="keyword">for</span> sublist <span class="keyword">in</span> nested:</div><div class="line">            <span class="keyword">for</span> element <span class="keyword">in</span> flatten(sublist):</div><div class="line">                <span class="keyword">yield</span> element</div><div class="line">    <span class="keyword">except</span> TypeError:</div><div class="line">        <span class="keyword">yield</span> nested</div><div class="line"></div><div class="line">list(flatten([<span class="string">'foo'</span>, [<span class="string">'bar'</span>,[<span class="string">'baz'</span>]]]))</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(flatten([<span class="string">'foo'</span>, [<span class="string">'bar'</span>,[<span class="string">'baz'</span>]]]))</div><div class="line">[<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>]</div></pre></td></tr></table></figure>
<p>在这个案例中，如查表达式<code>nested + &quot;&quot;</code>引发了TypeError异常，就忽略这种异常；如果没有引发TypeError异常，内部<code>try</code>语句中的else语句就引发TypeError异常，这样将在外部的except中生成类似于字符串的对象。</p>
<p>需要注意的是，这段代码没有进行类型检查，也就是说没有检查<code>nested</code>是否为字符串，而是只检查了它的行为是否类似于字符串，即能否与字符串拼接。对于这种检查，更符合常规思路的方案是使用<code>isinstance</code>以及字符串和类似于字符串的对象的一些抽象父类，但是Python中没这样的标准类。</p>
<h3 id="通用生成器">通用生成器</h3>
<p>这里再描述一下生成器，生成器是含有<code>yield</code>的函数，但被调用时不会执行函数体内的代码，而是返回一个迭代器，每次请求值时，都将执行生成器的代码，直到遇到<code>yield</code>或<code>return</code>，<code>yield</code>意味着应生成一个值，而<code>return</code>意味着生成器应停止执行（即不再生成值，仅当在生成器调用<code>return</code>时，才能不提供任何参数）。</p>
<p>换句话讲就是，生成器由两个单独的部分构成：①<strong>生成器的函数</strong>和②<strong>生成器的迭代器</strong>。生成器的函数是由<code>def</code>语句定义的，其中包含<code>yield</code>。生成器迭代器是这个函数返回的结果。用不太精准的话讲，生成器就是这两个东西的组合，看下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">simple_generator</span><span class="params">()</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="number">1</span></div><div class="line">...</div><div class="line">...</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>simple_generator</div><div class="line">&lt;function simple_generator at <span class="number">0x0000021C0C224840</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>simple_generator()</div><div class="line">&lt;generator object simple_generator at <span class="number">0x0000021C0C203F68</span>&gt;</div></pre></td></tr></table></figure>
<h3 id="生成器的方法">生成器的方法</h3>
<p>在生成器开始运行后，可使用生成器和外部之间的通信渠道向它提供值，这个通信渠道包含如下两个商战：</p>
<ul>
<li><strong>外部世界</strong>：外部世界可访问生成器的方法<code>send</code>，这个方法类似于<code>next</code>，但接受一个参数（要发挥的<code>消息</code>可以是任何对象）。</li>
<li><strong>生成器</strong>：在挂起的生成器内部，<code>yield</code>可能用作<strong>表达式</strong>而不是<strong>语句</strong>。也就是说，在生成器重新运行时，<code>yield</code>返回一个值，也就是通过<code>send</code>从外部世界发达的值。如果使用的是<code>next</code>，<code>yield</code>将返回<code>None</code>。需要注意的是，仅当生成器被挂起（也就是遇到第一个<code>yield</code>）后，使用<code>send</code>（而不是<code>next</code>）才有意义。要在此之前向生成器提供消息，可使用生成器的函数的参数，下面的一个简单的案例就说明了这个机制：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">repeater</span><span class="params">(value)</span>:</span></div><div class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">        new = (<span class="keyword">yield</span> value)</div><div class="line">        <span class="keyword">if</span> new <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:value = new</div><div class="line">        </div><div class="line">r = repeater(<span class="number">42</span>)</div><div class="line">next(r)</div><div class="line">r.send(<span class="string">"Hello, python"</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>r = repeater(<span class="number">42</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(r)</div><div class="line"><span class="number">42</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>r.send(<span class="string">"Hello, python"</span>)</div><div class="line"><span class="string">'Hello, python'</span></div></pre></td></tr></table></figure>
<p>在上面代码中，使用圆括号将<code>yield</code>表达式圈了起来。</p>
<p>生成器还有另外两种方法，分别是<code>throw</code>与<code>close</code>。其中：</p>
<p><code>throw</code>方法用于在生成器中（yield表达式处）引发异常调用时可提供一个异常类型、一个可选值和一个<code>traceback</code>对象。</p>
<p><code>close</code>方法用于停止生成器，调用时无需提供任何参数。方法<code>close</code>也是基于异常的。在<code>yield</code>处引发<code>GeneratorExit</code>异常。因此如果要在生成器中提供一些清理代码，可将<code>yield</code>放在一条<code>try/finally</code>语句中。如果愿意，也可以捕获<code>GeneratorExit</code>异常，但随后必须重新引发它（可能在清理后）、引发其他 异常或直接返回。对生成器调用<code>close</code>方法后，再试图从它那里获取值将导致<code>RuntimeError</code>异常。</p>
<h2 id="生成器的使用案例八皇后问题">生成器的使用案例——八皇后问题</h2>
<p>现在使用生成器来解决一个经典的编程问题。</p>
<h3 id="问题背景">问题背景</h3>
<p>对于逐步得到结果的复杂递归算法，非常适合使用生成器来实现。要在不使用生成器的情况下实现这些算法，通常必须通过额外的参数来传递部分结果，让递归调用能够接着往下计算。通过使用生成器，所有的递归调用进乞只需要生成其负责部分的结果。在前面的递归函数<code>flatten</code>就是这样做的，可以使用这种策略来遍历<code>图结构</code>和<code>树结构</code>。</p>
<p>然而在有些应用程序中，你不能马上得到答案。你必须尝试多次，且在每个递归层级中都如此。</p>
<p>这里讲一个简单的案例。假设你要去参加一个很重要的会议，你不知道会议在哪里召开，但前面有两扇门，而会议室就在其中一扇门的后面。你选择进入左边的那扇门后，又看到两扇门。你再次选择进入左边的那扇门，但发现走错了。因此你往回走，并进入右边那扇门，但发现也走错了。因此你继续往回走到起始，现在可以尝试进入右边那扇门了。</p>
<p>对于需要尝试所有组合直到找到答案的问题，这种回溯策略对其解决很有帮助。这种问题的解决方案类似于以下代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> each possibility at level <span class="number">1</span>:</div><div class="line">    <span class="keyword">for</span> each possibility at level <span class="number">2</span>:</div><div class="line">        ...</div><div class="line">            <span class="keyword">for</span> each possibility at level n:</div><div class="line">                is it viable?</div></pre></td></tr></table></figure>
<p>如果要直接使用for循环来实现，就要写许多层，此时就可以使用递归。</p>
<h3 id="问题描述">问题描述</h3>
<p>将8个皇后（这个皇后指的是国际象棋中的皇后）放在棋盘上，条件是任何一个皇后都不能威胁其他皇后，即任何两个皇后都不能吃掉对方。</p>
<p>这里再讲一下国际象棋的部分规则。</p>
<p>第一，国际象棋的棋盘是<code>8 x 8</code>的方格，如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190626144020.png">

</div>
<p>第二，皇后是国际象棋中的一个柜子，并且是棋局中实力最强的一种棋子，但同时也是最容易被吃掉的棋子。皇后可横着走，可以直着走，可以斜着走，且格数不限。</p>
<p>第三，因此如果不想让8个皇后中的任何1个被其他的皇后吃掉，那么要满足：①任意2个皇后不能处于同一条横线上；②任意2个皇不能处于同一条竖线上；③任意2个皇后不能处于同一条斜线上。</p>
<h3 id="解决思路">解决思路</h3>
<p>八皇后问题是一个典型的回溯问题：</p>
<p>第一，在棋盘的第一行尝试为第一个皇后选择一个位置；</p>
<p>第二，在第二行尝试为第二个皇后选择一个位置，依次类推；</p>
<p>第三，当发现无法为一个皇后选择合适的位置后，回溯到前一个皇后，并尝试为它选择另外一个位置；</p>
<p>第四，最终要么要尝试完所有的可能性，要么找到答案。</p>
<h3 id="代码实现">代码实现</h3>
<p>现在使用Python来解决一下这个问题。</p>
<h4 id="状态表示">状态表示</h4>
<p>可以简单地使用元组或列表来表示可能的解，其中每个元素表示相应行中皇后所在的位置（即列）。因此如果<code>state[0] = 3</code>就说明第1行的皇后放在第4列。在特定的递归层级（特定的行），你只需要知道上面各皇后的位置即可，因此状态元组的长度是小于8（即皇后的总数）。</p>
<h4 id="检测冲突">检测冲突</h4>
<p>先来做些简单的抽象。要找到没有冲突，即任何一个皇后都无法吃掉其他皇后的位置组合，首选必须定义冲突是什么。此时我们就可以使用一个函数<code>conflict</code>来定义一下。</p>
<p>函数<code>conflict</code>接受现有皇后的位置，并确定下一个皇后的位置是否会导致冲突，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">conflict</span><span class="params">(state, nextX)</span>:</span></div><div class="line">    nextY = len(state)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(nextY):</div><div class="line">        <span class="keyword">if</span> abs(state[i] - nextX) <span class="keyword">in</span> (<span class="number">0</span>, nextY - i):</div><div class="line">            <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">False</span></div></pre></td></tr></table></figure>
<p>参数描述：</p>
<ol style="list-style-type: decimal">
<li><code>nextX</code>表示下一个皇后的水平位置，也就是x坐标；</li>
<li><code>nextY</code>表示下一个皇后的垂直位置，也就是y坐标；</li>
<li>这个函数对现有的每个皇后执行简单的检查：如果下一个皇后与当前皇后的<code>x</code>坐标相同或在同一条对角线上，将发生冲突，因此会返回<code>True</code>，如果没有发生冲突，就返回<code>False</code>；</li>
<li><code>abs(state[i] - nextX) in (0, nextY - i)</code>表示：如果下一个皇后和当前皇后的水平距离为0，就表示他们同一列；或者是他们的垂直距离相等，这表示他们位于同一条对角线上，这个表达式就为真，否则为假。</li>
</ol>
<h4 id="基线条件">基线条件</h4>
<p>基线条件：最后一个皇后，对于这个皇后，代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">queens</span><span class="params">(num, state)</span>:</span></div><div class="line">    <span class="keyword">if</span> len(state) == num - <span class="number">1</span>:</div><div class="line">        <span class="keyword">for</span> pos <span class="keyword">in</span> range(num):</div><div class="line">            <span class="keyword">if</span> <span class="keyword">not</span> conflict(state, pos):</div><div class="line">                <span class="keyword">yield</span> pos</div></pre></td></tr></table></figure>
<p>这段代码的意思是：</p>
<ol style="list-style-type: decimal">
<li>如果只剩下最后一个皇后没有放好，就遍历所有可能的位置，并返回那些不会引发冲突的位置；</li>
<li>参数<code>num</code>是皇后总数，而参数<code>state</code>是一个元组，包含已经放好的皇后位置，例如，假设总共有4个皇后，而前3个皇后的位置分别是1、3和0，如下所示：</li>
</ol>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190626184432.png">

</div>
<p>从上图可知，每个皇后都占据一行，而皇后的位置是从0开始编号的，<code>queens</code>函数的代码运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">conflict</span><span class="params">(state, nextX)</span>:</span></div><div class="line"><span class="meta">... </span>    nextY = len(state)</div><div class="line"><span class="meta">... </span>    <span class="keyword">for</span> i <span class="keyword">in</span> range(nextY):</div><div class="line"><span class="meta">... </span>        <span class="keyword">if</span> abs(state[i] - nextX) <span class="keyword">in</span> (<span class="number">0</span>, nextY - i):</div><div class="line"><span class="meta">... </span>            <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line"><span class="meta">... </span>        <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">queens</span><span class="params">(num, state)</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">if</span> len(state) == num - <span class="number">1</span>:</div><div class="line"><span class="meta">... </span>        <span class="keyword">for</span> pos <span class="keyword">in</span> range(num):</div><div class="line"><span class="meta">... </span>            <span class="keyword">if</span> <span class="keyword">not</span> conflict(state, pos):</div><div class="line"><span class="meta">... </span>                <span class="keyword">yield</span> pos</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(queens(<span class="number">4</span>, (<span class="number">1</span>,<span class="number">3</span>,<span class="number">0</span>)))</div><div class="line">[<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>]</div></pre></td></tr></table></figure>
<p>使用list旨在让生成器生成所有的值，在这个案例中，只有一个位置符合条件，就是上面白色棋子的位置。</p>
<h4 id="递归条件">递归条件</h4>
<p>处理好基线条件后，可在递归条件中假设来自更低层级（编号更大的皇后）的结果都是正确的，因此，只需要在函数queens的前述实现中给if语句添加一个else语句。最终我们想要的返回结果是当前行下面所有皇后的位置，假设位置是以元组的形式返回的，因此需要修改基线条件，使其返回一个（长度为1的）元组。</p>
<p>因此，对于递归调用，向它提供的是当前行上面的皇后位置组成的元组。对于当前皇后的每个合法位置，递归调用返回的是由下面的皇后位置组成的元组。为了让这个过程不断进行下去，只需将当前皇后的位置插入返回结果的开头即可，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">queens</span><span class="params">(num=<span class="number">8</span>, state=<span class="params">()</span>)</span>:</span></div><div class="line">    <span class="keyword">if</span> len(state) == num - <span class="number">1</span>:</div><div class="line">        <span class="keyword">for</span> pos <span class="keyword">in</span> range(num):</div><div class="line">            <span class="keyword">if</span> <span class="keyword">not</span> conflict(state, pos):</div><div class="line">                <span class="keyword">yield</span> pos</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">for</span> pos <span class="keyword">in</span> range(num):</div><div class="line">            <span class="keyword">if</span> <span class="keyword">not</span> conflict(state, pos):</div><div class="line">                <span class="keyword">for</span> result <span class="keyword">in</span> queens(num, state + (pos, )):</div><div class="line">                    <span class="keyword">yield</span> (pos, ) + result</div></pre></td></tr></table></figure>
<p>这里的<code>for pos</code>和前面的<code>if not conflict</code>部分与前面相同，因此哦可以稍微简化一下代码，另外还可以给参数指定默认值，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">queens</span><span class="params">(num = <span class="number">8</span>, state = <span class="params">()</span>)</span>:</span></div><div class="line">    <span class="keyword">for</span> pos <span class="keyword">in</span> range(num):</div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> conflict(state, pos):</div><div class="line">            <span class="keyword">if</span> len(state) == num - <span class="number">1</span>:</div><div class="line">                <span class="keyword">yield</span> (pos,)</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                <span class="keyword">for</span> result <span class="keyword">in</span> queens(num, state + (pos, )):</div><div class="line">                    <span class="keyword">yield</span> (pos, ) + result</div></pre></td></tr></table></figure>
<h4 id="扫尾工作">扫尾工作</h4>
<p>在代码结束部分，可以让输出更容易理解一些，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">prettyprint</span><span class="params">(solution)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">line</span><span class="params">(pos, length=len<span class="params">(solution)</span>)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'. '</span>*(pos) + <span class="string">'X '</span> + <span class="string">'. '</span> *(length - pos - <span class="number">1</span>)</div><div class="line">    <span class="keyword">for</span> pos <span class="keyword">in</span> solution:</div><div class="line">        print(line(pos))</div></pre></td></tr></table></figure>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li>MagnusLieHetland. Python基础教程.第3版[M]. 人民邮电出版社, 2018.</li>
</ol>
<h2 id="参考资料-1">参考资料</h2>
<ol style="list-style-type: decimal">
<li><a href="">A Guide to Python’s Magic Methods</a></li>
<li></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/11/Python/Python学习笔记（9）-迭代器与生成器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/11/Python/Python学习笔记（9）-迭代器与生成器/" itemprop="url">Python学习笔记（9）-迭代器与生成器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-11T12:00:00+08:00">
                2018-04-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,395
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  17
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言">前言</h2>
<p>在学Python时，我对于生成器和迭代器理解得不清楚，检索到了一篇文章，把这两个东西讲得很透，应该是我能找到的最好的理解迭代器与生成器的文章，原文是《<a href="https://foofish.net/iterators-vs-generators.html" target="_blank" rel="external">完全理解Python迭代对象、迭代器、生成器》</a>，原文章作者提到，他是参考了别人的另外一篇文章写的，另外的文章题目是<a href="http://nvie.com/posts/iterators-vs-generators/" target="_blank" rel="external">《Iterables vs. Iterators vs. Generators》</a>。</p>
<h2 id="数据结构背景">数据结构背景</h2>
<p>在了解迭代器与生成器之前，需要了解一下Python的一些数据结构方面的知识，下图说明了容器(container)、可迭代对象(iterable)、迭代器(iterator)、生成器(generator)、列表/集合/字典推导式(list,set,dict comprehension)这些概念的关系图：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190628194512.png">

</div>
<h3 id="容器container">容器(container)</h3>
<p>容器是一种把多个元素组织在一起的数据结构，容器中的元素可以逐个地迭代获取，可以用in, not in关键字判断元素是否包含在容器中。通常这类数据结构把所有的元素存储在内存中（也有一些特例，并不是所有的元素都放在内存，比如迭代器和生成器对象）在Python中，常见的容器对象有：</p>
<ol style="list-style-type: decimal">
<li>list, deque（双端队列）, ….</li>
<li>set, frozensets, ….</li>
<li>dict, defaultdict, OrderedDict, Counter, ….</li>
<li>tuple, namedtuple, …</li>
<li>str</li>
</ol>
<p>容器比较容易理解，因为你就可以把它看作是一个盒子、一栋房子、一个柜子，里面可以塞任何东西。从技术角度来说，当它可以用来询问某个元素是否包含在其中时，那么这个对象就可以认为是一个容器，比如 list，set，tuples都是容器对象，看下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h4 id="assert函数">assert()函数</h4>
<p>关于<code>assert</code>这个函数，这个函数是Python断言句，它的功能就是判断某个表达式是否为真，运行后，如果什么都不返回，它就是True，如果语句是假，就返回异常，看一个案例，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="number">1</span> <span class="keyword">in</span> [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>] <span class="comment"># 1不在[11,22,33]里面，这个表达式就是False，返回异常</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">AssertionError</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="number">2</span> &lt; <span class="number">1</span> <span class="comment"># 2小于1，是False，返回异常</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">AssertionError</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="number">1</span> <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment"># 1在[1,2,3]里，是True，不返回任何信息</span></div></pre></td></tr></table></figure>
<p>再继续看容器的相关知识。可以寻问某元素是否在dict中用dict中的key：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="number">1</span>:<span class="string">'foo'</span>,<span class="number">2</span>:<span class="string">'bar'</span>,<span class="number">3</span>:<span class="string">'qux'</span>&#125; <span class="comment"># dict</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(d)</div><div class="line">&#123;<span class="number">1</span>: <span class="string">'foo'</span>, <span class="number">2</span>: <span class="string">'bar'</span>, <span class="number">3</span>: <span class="string">'qux'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="number">1</span> <span class="keyword">in</span> d</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> <span class="keyword">in</span> d</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="string">'foo'</span> <span class="keyword">not</span> <span class="keyword">in</span> d <span class="comment"># 'foo'不是d的元素，它只是一个值，不是key</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>询问某substring是否在string中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">'test'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="string">'a'</span> <span class="keyword">in</span> s</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">AssertionError</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="string">'a'</span> <span class="keyword">not</span> <span class="keyword">in</span> s</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="string">'te'</span> <span class="keyword">in</span> s</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>尽管绝大多数容器都提供了某种方式来获取其中的每一个元素，但这并不是容器本身提供的能力，而是<strong>可迭代对象</strong>赋予了容器这种能力，当然并不是所有的容器都是可迭代的，比如：Bloom filter（布隆过滤器），虽然Bloom filter可以用来检测某个元素是否包含在容器中，但是并不能从容器中获取其中的每一个值，因为Bloom filter压根就没把元素存储在容器中，而是通过一个散列函数映射成一个值保存在数组中。</p>
<blockquote>
<p>Bloom Filter是一种空间效率很高的随机数据结构，它利用位数组很简洁地表示一个集合，并能判断一个元素是否属于这个集合。Bloom Filter的这种高效是有一定代价的：在判断一个元素是否属于某个集合时，有可能会把不属于这个集合的元素误认为属于这个集合（false positive）。因此，Bloom Filter不适合那些“零错误”的应用场合。而在能容忍低错误率的应用场合下，Bloom Filter通过极少的错误换取了存储空间的极大节省。</p>
</blockquote>
<h3 id="可迭代对象iterable">可迭代对象（iterable）</h3>
<p>很多容器都是可迭代对象，此外还有更多的对象同样也是可迭代对象，比如处于打开状态的files，sockets等等。但凡是可以返回一个迭代器的对象都可称之为可迭代对象，看下面的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = iter(x) <span class="comment">#创建迭代对象</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(y)</div><div class="line">&lt;list_iterator object at <span class="number">0x000001F8308B7470</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>z = iter(x)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(y)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(y)</div><div class="line"><span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(z)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(x)</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">list</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">type</span><span class="params">(y)</span></span></div><div class="line"><span class="class">&lt;<span class="title">class</span> '<span class="title">list_iterator</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>代码解释：在这段代码中，<code>x</code>是一个可迭代对象，可迭代对象和容器一样是一种总称，范围很大，在Python中，它并不是指某种具体的数据类型，例如list是可迭代对象，dict是可迭代对象，set也是可迭代对象。在这段代码中，<code>y</code>和<code>z</code>是两个独立的迭代器，迭代器内部持有一个状态，该状态用于记录当前迭代所在的位置，以方便下次迭代的时候获取正确的元素。迭代器有一种具体的迭代器类型，比如<code>list_iterator</code>，<code>set_iterator</code>，可迭代对象实现了<code>__iter__</code>方法，这种方法会返回一个迭代对象，现在运行以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="keyword">for</span> elem <span class="keyword">in</span> x:</div><div class="line">    ...</div></pre></td></tr></table></figure>
<p>这段代码的执行过程如下所示：</p>
<div class="figure">
<img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190628194555.png">

</div>
<p>反编译该段代码，你可以看到解释器显示地调用<code>GET_ITER</code>指令，相当于调用<code>iter(x)</code>，<code>FOR_ITER</code>指令就是调用<code>next()</code>方法，不断地获取迭代器中的下一个元素，但是你没法直接从指令中看出来，因为他被解释器优化过了，下面是反编译的过程：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> dis</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dis.dis(<span class="string">'for _ in x: pass'</span>)</div><div class="line">  <span class="number">1</span>           <span class="number">0</span> SETUP_LOOP              <span class="number">14</span> (to <span class="number">17</span>)</div><div class="line">              <span class="number">3</span> LOAD_NAME                <span class="number">0</span> (x)</div><div class="line">              <span class="number">6</span> GET_ITER</div><div class="line">        &gt;&gt;    <span class="number">7</span> FOR_ITER                 <span class="number">6</span> (to <span class="number">16</span>)</div><div class="line">             <span class="number">10</span> STORE_NAME               <span class="number">1</span> (_)</div><div class="line">             <span class="number">13</span> JUMP_ABSOLUTE            <span class="number">7</span></div><div class="line">        &gt;&gt;   <span class="number">16</span> POP_BLOCK</div><div class="line">        &gt;&gt;   <span class="number">17</span> LOAD_CONST               <span class="number">0</span> (<span class="keyword">None</span>)</div><div class="line">             <span class="number">20</span> RETURN_VALUE</div></pre></td></tr></table></figure>
<p>注：dis模块主要是用来分析字节码的一个内置模块，经常会用到的方法是dis.dis，它支持对Python代码进行反汇编，生成字节码指令。</p>
<h3 id="判断可迭代对象">判断可迭代对象</h3>
<p>判断一个对象是否是迭代器，可以使用<code>isinstance</code>函数来判断，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">34</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(a,Iterable)</div><div class="line"><span class="keyword">True</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="迭代器iterator">迭代器(iterator)</h2>
<h3 id="迭代器协议">迭代器协议</h3>
<p>迭代器协议是指：对象需要提供<code>next</code>方法，它要么回返迭代中的下一项，要么引起一个StopIteration异常，以终止迭代。协议是一种约定，可迭代对象实现迭代器协议，Python的内置工具，例如for循环，sum，min，max等函数都可以使用迭代器协议访问对象。</p>
<p>在Python中可以使用for循环来遍历数组，PYhton的list底层就是一个数组，因此也可以使用for循环来遍历list，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> [<span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>]:</div><div class="line"><span class="meta">... </span>    print(n)</div><div class="line">...</div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">3</span></div></pre></td></tr></table></figure>
<p>Python的for循环也可以用于遍历文件（文件位于<code>C:\Users\20161111</code>目录下，内容是1到4这四个数字）如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>os.getcwd()</div><div class="line"><span class="string">'C:\\Users\\20161111'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> open(<span class="string">'practice.py'</span>) <span class="keyword">as</span> text:</div><div class="line"><span class="meta">... </span>    <span class="keyword">for</span> line <span class="keyword">in</span> text:</div><div class="line"><span class="meta">... </span>        print(line)</div><div class="line">...</div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div></pre></td></tr></table></figure>
<p>在Python中，文件也能使用for循环，这是因为在Python中，文件对象实现了迭代器协议，for循环使用迭代器协议访问即对象时，并不需要对象是否是一个文件。</p>
<h3 id="迭代器定义">迭代器定义</h3>
<p>那么什么迭代器呢？它是一个带状态的对象，他能在你调用next()方法的时候返回容器中的下一个值，任何实现了<code>__iter__</code>和<code>__next__()</code>方法的对象都是迭代器，<code>__iter__</code>返回迭代器自身，<code>__next__</code>返回容器中的下一个值，如果容器中没有更多元素了，则抛出Stop Iteration异常。</p>
<p>所以，迭代器就是实现了工厂模式（什么是工厂模式？有空了补充笔记）的对象，它在你每次你询问要下一个值的时候给你返回。有很多关于迭代器的例子，比如itertools函数返回的都是迭代器对象。</p>
<h3 id="生成无限序列">生成无限序列</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> itertools <span class="keyword">import</span> count</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>counter = count(start=<span class="number">13</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(counter)</div><div class="line"><span class="number">13</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(counter)</div><div class="line"><span class="number">14</span></div></pre></td></tr></table></figure>
<p>代码解释：<code>itertools</code>这个模块用于构建迭代器，<code>count</code>这个函数用于生成连续的整数，<code>count(start=13)</code>表示生成从13开始的整数无限序列，即13,14,15….。</p>
<h3 id="从一个有限序列中生成无限序列">从一个有限序列中生成无限序列</h3>
<p>代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> itertools <span class="keyword">import</span> cycle</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>colors = cycle([<span class="string">'red'</span>,<span class="string">'white'</span>,<span class="string">'blue'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(colors)</div><div class="line"><span class="string">'red'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(colors)</div><div class="line"><span class="string">'white'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(colors)</div><div class="line"><span class="string">'blue'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(colors)</div><div class="line"><span class="string">'red'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(colors)</div><div class="line"><span class="string">'white'</span></div></pre></td></tr></table></figure>
<p>这段代码使用了<code>cycle</code>函数，它的功能在于生成一个循环的无限序列。</p>
<h3 id="从无限的序列中生成有限序列">从无限的序列中生成有限序列</h3>
<p>代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> itertools <span class="keyword">import</span> islice</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>counter = count(start=<span class="number">13</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>limited = islice(counter,<span class="number">2</span>,<span class="number">5</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x <span class="keyword">in</span> limited:</div><div class="line"><span class="meta">... </span>    print(x)</div><div class="line">...</div><div class="line"><span class="number">15</span></div><div class="line"><span class="number">16</span></div><div class="line"><span class="number">17</span></div></pre></td></tr></table></figure>
<p>代码解释，先用<code>count</code>生成了一个无限的整数序列，即13，14，15，16，17，18…..，接着使用<code>islice</code>从这个无限序列中提取第2到第4个元素（第2个元素是15，因为Python计数时，是从0开始的），15,16,17。</p>
<h3 id="自定义迭代器">自定义迭代器</h3>
<p>为了更直观地感受迭代器内部的执行过程，我们自定义一个迭代器，以斐波那契数列为例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> islice</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fib</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.prev = <span class="number">0</span></div><div class="line">        self.curr = <span class="number">1</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></div><div class="line">        value = self.curr</div><div class="line">        self.curr += self.prev</div><div class="line">        self.prev = value</div><div class="line">        <span class="keyword">return</span> value</div><div class="line"></div><div class="line">f = Fib()</div><div class="line">print(list(islice(f,<span class="number">0</span>,<span class="number">10</span>)))</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python practice.py</div><div class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>, <span class="number">34</span>, <span class="number">55</span>]</div></pre></td></tr></table></figure>
<p>Fib是一个可迭代对象，因为它有<code>__iter__</code>方法，又是一个迭代器，因为它实现了<code>__next__</code>方法，实例变量<code>prev</code>和<code>curr</code>用于维持迭代器的内部状态，每次调用<code>next()</code>方法时，做两件事情，第一：为下一次调用<code>next()</code>方法修改状态；第二：为当前这次调用生成返回结果。</p>
<p>迭代器就像一个懒加载的工厂，等到有人需要的时候才给它生成值返回，没调用的时候就处于休眠状态等待下一次调用。</p>
<h3 id="为什么要使用迭代器">为什么要使用迭代器？</h3>
<p>先看一段代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">list = [<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line">it = iter(list)</div><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> it:</div><div class="line">    print(x,end=<span class="string">" "</span>)</div><div class="line"></div><div class="line">print(<span class="string">"\n---------"</span>)</div><div class="line"><span class="keyword">for</span> y <span class="keyword">in</span> list:</div><div class="line">    print(y,end=<span class="string">" "</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python practice.py</div><div class="line"><span class="number">3</span> <span class="number">5</span> <span class="number">1</span> <span class="number">4</span> <span class="number">5</span></div><div class="line">---------</div><div class="line"><span class="number">3</span> <span class="number">5</span> <span class="number">1</span> <span class="number">4</span> <span class="number">5</span></div></pre></td></tr></table></figure>
<p>从运行结果来看，貌似迭代器与普通的for循环没什么区别。但Python中为什么设计出迭代器种对象？下面列出了一些迭代器的使用场景：</p>
<h4 id="场景1访问集合中的一个元素">场景1：访问集合中的一个元素。</h4>
<p>例如我要访问集合中的一个元素，怎么处理？</p>
<p>思路：集合是没有顺序的，因此也没有索引，要访问元素，有两种方法：第一，将集合转换为列表；第二，使用迭代器，先看第一种方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>set1 = &#123;<span class="number">5</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">11</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(set1)</div><div class="line">&#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">11</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = list(set1)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list1)</div><div class="line">[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">11</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1[<span class="number">2</span>]</div><div class="line"><span class="number">5</span></div></pre></td></tr></table></figure>
<p>再看第2种方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>set1=iter(set1)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(set1)</div><div class="line"><span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(set1)</div><div class="line"><span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(set1)</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(set1)</div><div class="line"><span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(set1)</div><div class="line"><span class="number">11</span></div></pre></td></tr></table></figure>
<h4 id="场景2">场景2:</h4>
<p>如果我有一个文件，例如6G的测序文件，要遍历里面的所有元素，此时如果使用列表，元组等序列明显不现实。此时就需要使用迭代器子，它的一大优点就是不需要事先准备好整个迭代过程中所有的元素 ，迭代器仅仅在迭代到某个元素时才计算该元素，而在这之前或之后，元素可以不存在或者被销毁。 这个特点使得它特别适合用于遍历一些巨大的或是无限的集合。因此，它的使用过程有点像内存，我们把正在运行的程序放进内存，运行完就退出内存，每次只放正在运行的程序进入，而不是一次把全部内容都扔进去。</p>
<h2 id="生成器generator">生成器（generator）</h2>
<p>在Python中，使用了<code>yield</code>的函数被称为生成器（generator），跟普通函数不同的是，生成器是一个返回迭代器的函数，只能用于迭代操作，更简单点理解生成器就是一个特殊的迭代器，调用一个生成器函数，返回的是一个迭代器对象。它不需要再像上面的类一样写<code>__iter__()</code>和<code>__next__()</code>方法了，只需要一个<code>yiled</code>关键字，每次遇到<code>yield</code>时函数会暂停并保存当前所有的运行信息，返回<code>yield</code>的值,并在下一次执行<code>next()</code>方法时从当前位置继续运行（这也是生成器的主要使用场景）。</p>
<p>从上述描述中可以知道，生成器可以支持延迟操作，延迟操作是指，只在需要的时候产生结果，而不是立即产生结果，这是生成器的主要好处。Python有两种不同的方式提供生成器：第一，生成器函数：常规函数定义，但是，使用yield语句而不是return语句返回结果。yield语句一次返回一个结果，在每个结果中间，挂起函数的状态，以便下次重它离开的地方继续执行。第二，生成器表达式：类似于列表推导，但是，生成器返回按需产生结果的一个对象，而不是一次构建一个结果列表</p>
<p>用生成器来实现斐波那契数列的例子是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> islice</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">()</span>:</span></div><div class="line">    prev, curr = <span class="number">0</span>, <span class="number">1</span></div><div class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">        <span class="keyword">yield</span> curr</div><div class="line">        prev, curr = curr, curr + prev</div><div class="line"></div><div class="line">f = fib()</div><div class="line">print(list(islice(f, <span class="number">0</span>, <span class="number">10</span>)))</div></pre></td></tr></table></figure>
<p>代码运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python practice.py</div><div class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>, <span class="number">34</span>, <span class="number">55</span>]</div></pre></td></tr></table></figure>
<p>fib就是一个普通的python函数，它特殊的地方在于函数体中没有<code>return</code>关键字，函数的返回值是一个生成器对象。当执行<code>f=fib()</code>返回的是一个生成器对象，此时函数体中的代码并不会执行，只有显示或隐示地调用<code>next</code>的时候才会真正执行里面的代码。</p>
<h3 id="生成器表达式">生成器表达式</h3>
<p>生成器表达式是列表推倒式的生成器版本，看起来像列表推导式，但是它返回的是一个生成器对象而不是列表对象。，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">something</span><span class="params">()</span>:</span></div><div class="line">    result = []</div><div class="line">    <span class="keyword">for</span> ... <span class="keyword">in</span> ...:</div><div class="line">        result.append(x)</div><div class="line">    <span class="keyword">return</span> result</div></pre></td></tr></table></figure>
<h3 id="生成器的优点">生成器的优点</h3>
<p>第一，代码量更少。</p>
<p>生成器在Python中是一个非常强大的编程结构，可以用更少地中间变量写流式代码，此外，相比其它容器对象它更能节省内存和CPU，当然它可以用更少的代码来实现相似的功能。但凡看到类似以下的代码，就能够用生成器替代：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">something</span><span class="params">()</span>:</span></div><div class="line">    result = []</div><div class="line">    <span class="keyword">for</span> ... <span class="keyword">in</span> ...:</div><div class="line">        result.append(x)</div><div class="line">    <span class="keyword">return</span> result</div></pre></td></tr></table></figure>
<p>将上述代码用生成器函数来替换：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">iter_something</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">for</span> ... <span class="keyword">in</span> ...:</div><div class="line">        <span class="keyword">yield</span> x</div></pre></td></tr></table></figure>
<p>再看一个案例：</p>
<p>使用生成器返回自然数的平方</p>
<p>常规写法如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;type practice.py</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_square</span><span class="params">(n)</span>:</span></div><div class="line">    res = []</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</div><div class="line">        res.append(i*i)</div><div class="line">    <span class="keyword">return</span> res</div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> get_square(<span class="number">5</span>):</div><div class="line">    print(item)</div><div class="line">    </div><div class="line">    </div><div class="line">C:\Users\<span class="number">20161111</span>&gt;python practice.py</div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">9</span></div><div class="line"><span class="number">16</span></div></pre></td></tr></table></figure>
<p>生成器函数写法如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;type practice.py</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_square</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</div><div class="line">        <span class="keyword">yield</span> i*i</div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> get_square(<span class="number">5</span>):</div><div class="line">    print(item)</div><div class="line">    </div><div class="line">C:\Users\<span class="number">20161111</span>&gt;python practice.py</div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">9</span></div><div class="line"><span class="number">16</span></div></pre></td></tr></table></figure>
<p>生成器表达式的写法如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>squares = (x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">5</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>squares</div><div class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x000001F167983DB0</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line"><span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line"><span class="number">9</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line"><span class="number">16</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">StopIteration</div></pre></td></tr></table></figure>
<h3 id="生成器总结">生成器总结</h3>
<p>现在总结一下生成器函数的格式，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> 函数名:</span></div><div class="line">    statements</div><div class="line">        <span class="keyword">yield</span></div></pre></td></tr></table></figure>
<ol style="list-style-type: decimal">
<li>生成器函数和常规函数几乎是一样的。它们都是使用def语句进行定义，差别在于，生成器使用yield语句返回一个值，而常规函数使用return语句返回一个值。</li>
<li>自动实现迭代器协议：对于生成器，Python会自动实现迭代器协议，以便应用到迭代背景中（如for循环，sum函数）。由于生成器自动实现了迭代器协议，所以，我们可以调用它的next方法，并且，在没有值可以返回的时候，生成器自动产生StopIteration异常。</li>
<li>状态挂起：生成器使用yield语句返回一个值。yield语句挂起该生成器函数的状态，保留足够的信息，以便之后从它离开的地方继续执行。</li>
</ol>
<h2 id="结论">结论</h2>
<ol style="list-style-type: decimal">
<li>容器是一系列元素的集合，str、list、set、dict、file、sockets对象都可以看作是容器，容器都可以被迭代（用在for，while等语句中），因此他们被称为可迭代对象。</li>
<li>可迭代对象实现了<code>__iter__</code>方法，该方法返回一个迭代器对象。</li>
<li>迭代器持有一个内部状态的字段，用于记录下次迭代返回值，它实现了<code>__next__</code>和<code>__iter__</code>方法，迭代器不会一次性把所有元素加载到内存，而是需要的时候才生成返回结果。</li>
<li>生成器是一种特殊的迭代器，它的返回值不是通过return而是用yield。</li>
</ol>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><a href="https://zhuanlan.zhihu.com/p/24499698" target="_blank" rel="external">Python 迭代器和生成器</a></li>
<li><a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1526953288&amp;ver=890&amp;signature=o-XNyigidmZsfz1Gnqygf99H1c1gAYf1ZkBTEMtwoNrkkRfLGM4HPAjbxudh2SPkNqwb6GtXTh8QbcZS4x9Uovz8hcAIEng1iFbJfgSllVIm5mMzpuYLgWnGs2Rwquxe&amp;new=1" target="_blank" rel="external">完全理解Python迭代器对象、迭代器、生成器</a></li>
<li><a href="http://nvie.com/posts/iterators-vs-generators/" target="_blank" rel="external">Iterables vs. Iterators vs. Generators</a></li>
<li><a href="https://blog.csdn.net/jiaomeng/article/details/1495500" target="_blank" rel="external">Bloom Filter概念和原理</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/33662628" target="_blank" rel="external">Python进阶系列连载（4）——迭代器</a></li>
<li><a href="https://www.zhihu.com/question/20829330" target="_blank" rel="external">如何更好地理解Python迭代器与生成器.知乎.赖明星的回答</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/10/Python/Python学习笔记（8）-正则表达式学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/10/Python/Python学习笔记（8）-正则表达式学习笔记/" itemprop="url">Python学习笔记（8）-正则表达式学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-10T12:00:00+08:00">
                2018-04-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/正则表达式/" itemprop="url" rel="index">
                    <span itemprop="name">正则表达式</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  7,035
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  29
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="什是正则表达式">1. 什是正则表达式？</h2>
<p>答：正则表达式又称规则表达式，英语是Regular Expression，在代码中常简写为regex、regexp或RE，这计算机科学的一个概念。正则表达式通常被用来检索、替换那些符合某个模式(规则)的文本。 许多程序设计语言都支持利用正则表达式进行字符串操作。正则表达式包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为“元字符(metacharacter)”）。正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。它的使用类似于通配符（wildchars），例如在Linux的命令行中输入<code>ls *.py</code>就会列出所有以“.py”结尾的文件。</p>
<p>有时候我们要处理一些字符串，例如，我要提取一些位于<code>&lt;pre&gt;</code>和<code>&lt;/pre&gt;</code>之间的广西，或者是从一个文件中清除一些非ATCG的字符，都要用到正则表达式。</p>
<h2 id="正则表达式在生物学方面有什么用处">2. 正则表达式在生物学方面有什么用处?</h2>
<p>答:正则表达式的这种特征在生物学方面使用极为,广泛，利用正则表达式，可以很好地定位蛋白质的结构域，DNA的一些序列模式，例如CpG岛，重复序列，限制性内切酶位点，核酸识别位点。</p>
<h2 id="不同编程语言之间的正则表达式相同不">3. 不同编程语言之间的正则表达式相同不？</h2>
<p>答：许多编程语言都支持正则表达式，每种编程语言都有自己的正则表达式语法，不过大体上是相同的。Python的正则表达式与Perl接近，如果会使用Perl，那么Python的正则表达式学起来也非常容易。</p>
<h2 id="正则表达式是按照哪些规则来匹配文本的">4. 正则表达式是按照哪些规则来匹配文本的？</h2>
<p>答：在Python中，通常情况下，字母与单词匹配他们本身，例如“Python”就匹配“Python”，而不是“python”，还有一些特殊的字符用于特殊的匹配，以<code>. ^ $ *  + ? { [ ] \ | ( )</code>为例说明一下，如下表所示：</p>
<ol style="list-style-type: decimal">
<li><p><code>.</code>号：匹配除除换行符 之外的任何字符，例如“ATT.T”会匹配“ATTCT”，“ATTFT”，但不会匹配“ATTTCT”。</p></li>
<li><p><code>^</code>（克拉符号）：匹配输入字符串的开始位置，例如“AUG”会匹配“AUGAGC”，但不匹配“AAUGC”。如果是在方括号里使用，例如[^AUG]表示相反的意思，即不匹配以AUG开头的字符串。</p></li>
<li><p><code>$</code>(美元符号)：在一行字符串中，匹配输入字符串的结尾位置，例如“UAA$”匹配“AGCUAA”，但不匹配“ACUAAG”。</p></li>
<li><p><code>*</code>（星号）：匹配前面的子表达式零次或多次重复。例如“AT*”会匹配“AAT”，“A”，但不匹配“TT”。</p></li>
<li><p><code>+</code>（加号）：匹配前面的子表达式一次或多次重复。“AT+”会匹配“ATT”，但不匹配“A”。</p></li>
<li><p><code>?</code>匹配前面的子表达式零次或一次重复，“AT?”会匹配“A”或“AT”。</p></li>
<li><p><code>(...)</code>（括号）：匹配圆括号中的表达式，用于表明匹配的开始与结构，如果只匹配括号，例如匹配“（”或“）”时，可以使用(或)，或者是将它们放到中括号里[(][)]。</p></li>
<li><p><code>(?:...)</code>：匹配但不捕获该匹配的子表达式。</p></li>
<li><p><code>{n}</code>：n是一个非负整数，匹配重复的某字符串的n次。例如，“(ATTG){3}”匹配ATTGATTGATTG，但是不匹配“ATTGATTG”。（第1个是重复了3次，第2个是重复了2次）。</p></li>
<li><p><code>{m,n}</code>：m和n均为非负整数，其中m&lt;=n，它表示最少匹配n次且最多匹配m次。例如“(AT){3,5}”会匹配“ATATTATATAT”，但是不匹配“ATATTATAT”，如果不加m，则是从匹配0次的开始，如果没有n，则匹配任意重复的某字符串。</p></li>
<li><p><code>[]</code>：表示一组字符串。“[A-Z]”会匹配任何大写的字母，而“[a-z0-9]”则会匹配任何小写的字母以及数字。“[AT*]”匹配“A”，“T”，或“*（星号）”。在中括号里，<code>^</code>表示相反的含义，例如“[^R]”会匹配任何除了“R”之外的字母。</p></li>
<li><p><code>\</code>：将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， ‘n’ 匹配字符 ‘n’。‘’ 匹配换行符。序列 ‘\’ 匹配 “&quot;，而 ‘(’ 则匹配”(“。</p></li>
<li><p><code>|</code>：表达“或”的意思，指明两项之间的一个选择，例如“A|T”会匹配“A”，“T”或“AT”</p>
<p>。</p>
<p>Python中的一些特殊字符总结如下所示：</p>
<table style="width:99%;">
<colgroup>
<col width="41%">
<col width="56%">
</colgroup>
<thead>
<tr class="header">
<th>元字符</th>
<th>功能说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>()</td>
<td>将位于()中的内容作为一个整体来对待</td>
</tr>
<tr class="even">
<td>{}</td>
<td>按{}中的次数进行匹配</td>
</tr>
<tr class="odd">
<td>[]</td>
<td>匹配位于[]中的任意一个字符</td>
</tr>
<tr class="even">
<td>[^xyz]</td>
<td>^放在[]内表示反向字符集，匹配除x、y、z之外的任何字符</td>
</tr>
<tr class="odd">
<td>[a-z]</td>
<td>字符范围，匹配指定范围内的任何字符</td>
</tr>
<tr class="even">
<td>[^a-z]</td>
<td>反向范围字符，匹配除小写英文字母之外的任何字符</td>
</tr>
<tr class="odd">
<td>.</td>
<td>匹配除换行符以外的任意单个字符</td>
</tr>
<tr class="even">
<td>*</td>
<td>匹配位于“*”之前的字符或子模式的0次或多次出现</td>
</tr>
<tr class="odd">
<td>+</td>
<td>匹配位于“+”之前的字符或子模式的1次或多次出现</td>
</tr>
<tr class="even">
<td>-</td>
<td>用在[]之内用来表示范围</td>
</tr>
<tr class="odd">
<td>|</td>
<td>匹配位于“|”之前或之后的字符</td>
</tr>
<tr class="even">
<td>^</td>
<td>匹配行首，匹配以^后面的字符开头的字符串</td>
</tr>
<tr class="odd">
<td>$</td>
<td>匹配行尾，匹配以$之前的字符结束的字符串</td>
</tr>
<tr class="even">
<td>?</td>
<td>匹配位于“？”之前的0个或1个字符，当此字符紧随任何其他限定符（*，+，?，{n}，{n,}，{n,m}之后时，匹配模式是“非贪心的“。“非贪心的“模式匹配搜索到的、尽可能短的字符串，而默认的”贪心的“模式匹配搜索一的，尽可能长的字符串。例如在字符串“oooo”中，“o+?”只匹配单个o，而“o+”匹配所有o</td>
</tr>
<tr class="odd">
<td></td>
<td>表示位于</td>
</tr>
<tr class="even">
<td></td>
<td>此处的num是一个正整数，例如，“(.)”匹配两个连续的相同字符</td>
</tr>
<tr class="odd">
<td></td>
<td>换页符匹配</td>
</tr>
<tr class="even">
<td></td>
<td>换行符匹配</td>
</tr>
<tr class="odd">
<td></td>
<td>匹配一个回车符</td>
</tr>
<tr class="even">
<td></td>
<td>匹配单词头或单词尾</td>
</tr>
<tr class="odd">
<td></td>
<td>与</td>
</tr>
<tr class="even">
<td></td>
<td>匹配任何数字，相当于[0-9]</td>
</tr>
<tr class="odd">
<td></td>
<td>代表非数字，等效于[^0-9</td>
</tr>
<tr class="even">
<td></td>
<td>匹配任何空白字符，包括空格、制表符、换页符，与[]等效</td>
</tr>
<tr class="odd">
<td></td>
<td>与，代表非空白字符</td>
</tr>
<tr class="even">
<td></td>
<td>匹配要任何字母、数字以及下画线，相当于[a-zA-Z0-9]</td>
</tr>
<tr class="odd">
<td></td>
<td>与，与<code>[^A-Za-z0-9]</code>等效</td>
</tr>
</tbody>
</table></li>
</ol>
<h2 id="python中有没有正则表达式专门用的模块">5. Python中有没有正则表达式专门用的模块？</h2>
<p>答：在Python中，它的标准库<code>re</code>提供了正则表达式操作所需要的功能。它的基础用法如下所示，用search来说明一下，re.search()方法的功能：在给定字符串中寻找第一个匹配给定正则表达式的子字符串。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re <span class="comment"># 导入python的标准re库</span></div><div class="line">mo = re.search(<span class="string">"hello"</span>,<span class="string">"hello world, hello Python!"</span>)</div></pre></td></tr></table></figure>
<p>其中<code>search</code>方法的具体用法：使用公式为<code>re.search(pattern,string,flags=0)</code>，其中flags的值可以是re.I（大写的字母I，不是1），大写表示忽略查找时的大小写，re.L（支持本地字符集的字符），re.M（多行匹配区栖），re.S（使用元字符“.”，匹配单字）。它可以在字符串内查找模式匹配，只要找到第一个匹配，然后就返回一个match object对象，如果字符串没有匹配，就返回None。mathch object对象有以下的方法：</p>
<p>group() 返回被 RE 匹配的字符串</p>
<p>start() 返回匹配开始的位置</p>
<p>end() 返回匹配结束的位置</p>
<p>span() 返回一个元组包含匹配 (开始,结束) 的位置</p>
<p>group() 返回re整体匹配的字符串，可以一次输入多个组号，对应组号匹配的字符串。</p>
<p>上述的代码运行如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180424/7bFhFjJDfG.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>个结果非常类似于index()方法，如下所示：</p>
<blockquote>
<p>“hello”,“hello world, hello Python!”.index(“hello”)</p>
<p>(‘hello’, 0)</p>
</blockquote>
<p>不过index()与re.search()方法的不同之处在于所选用的是正则表达式，还是普通的字符串，再看一下例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">mo = re.search(<span class="string">"[Hh]ello"</span>,<span class="string">"Hello world, hello Python!"</span>)</div><div class="line">mo.group()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<blockquote>
<p>mo.group() ‘Hello’</p>
</blockquote>
<p>其中以大写H开头的字符串是第一个被匹配的模式，返回。</p>
<h2 id="python中的re库还有哪些常用的方法">6. Python中的re库还有哪些常用的方法？</h2>
<p>答：可以查看地一下re库中的方法，用命令``即可，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">impor re <span class="comment"># 导入re标准库</span></div><div class="line">dir(re) <span class="comment"># 查看re库中所有的方法</span></div></pre></td></tr></table></figure>
<p>可以看到有这些方法：</p>
<blockquote>
<p>dir(re) [‘A’, ‘ASCII’, ‘DEBUG’, ‘DOTALL’, ‘I’, ‘IGNORECASE’, ‘L’, ‘LOCALE’, ‘M’, ‘MULTILINE’, ‘RegexFlag’, ‘S’, ‘Scanner’, ‘T’, ‘TEMPLATE’, ‘U’, ‘UNICODE’, ‘VERBOSE’, ‘X’, ’_MAXCACHE’, ‘<strong>all</strong>’, ‘<strong>builtins</strong>’, ‘<strong>cached</strong>’, ‘<strong>doc</strong>’, ‘<strong>file</strong>’, ‘<strong>loader</strong>’, ‘<strong>name</strong>’, ‘<strong>package</strong>’, ‘<strong>spec</strong>’, ‘<strong>version</strong>’, ’_alphanum_bytes’, ’_alphanum_str’, ’_cache’, ’_compile’, ’_compile_repl’, ’_expand’, ’_locale’, ’_pattern_type’, ’_pickle’, ’_subx’, ‘compile’, ‘copyreg’, ‘enum’, ‘error’, ‘escape’, ‘findall’, ‘finditer’, ‘fullmatch’, ‘functools’, ‘match’, ‘purge’, ‘search’, ‘split’, ‘sre_compile’, ‘sre_parse’, ‘sub’, ‘subn’, ‘template’]</p>
</blockquote>
<p>常用的方法还有re.findall()，re.finditer()，re.match()，</p>
<p>re.findall()：列出字符串中模式的所有匹配项，与re.search()不同的是，re.findall()是查找所有的匹配结果，而后者只是找到第1个匹配结果，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = re.findall(<span class="string">"[Hh]ello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</div><div class="line">[<span class="string">'Hello'</span>, <span class="string">'hello'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(result))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">list</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>从上述结果可以看出，re.findall()返回的结果是一个list，而不是一个match object。</p>
<p>re.finditer()：列出字符串中模式的所有匹配项，返回一个match object，这是re.finditer()与re.findall()的区别，re.finditer()返回来的是一个迭代器，后者返回来的是一个list，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = re.finditer(<span class="string">"[Hh]ello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</div><div class="line">&lt;callable_iterator object at <span class="number">0x00000276F7ABEC18</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(result))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">callable_iterator</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>如果要查看结果，可以按下操作，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = re.finditer(<span class="string">"[Hh]ello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x <span class="keyword">in</span> result:</div><div class="line"><span class="meta">... </span>    print(x.group())</div><div class="line"><span class="meta">... </span>    print(x.span())</div><div class="line">...</div><div class="line">Hello</div><div class="line">(<span class="number">0</span>, <span class="number">5</span>)</div><div class="line">hello</div><div class="line">(<span class="number">13</span>, <span class="number">18</span>)</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>re.match()：从字符串的开始处匹配，返回match对象或None，它与re.search()类似，不同之处在于，re.match()只在字符串的开头进行匹配，而re.search()会在整个字符串中进行匹配，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; result = re.match(&quot;hello&quot;,&quot;Hello world, hello Python,!&quot;)</div><div class="line">&gt;&gt;&gt; print(result)</div><div class="line">None</div></pre></td></tr></table></figure>
<p>如果找到了匹配结果，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = re.match(<span class="string">"Hello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</div><div class="line">&lt;_sre.SRE_Match object; span=(<span class="number">0</span>, <span class="number">5</span>), match=<span class="string">'Hello'</span>&gt;</div></pre></td></tr></table></figure>
<p>可以通过group()和span()来查看匹配的结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = re.match(<span class="string">"Hello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</div><div class="line">&lt;_sre.SRE_Match object; span=(<span class="number">0</span>, <span class="number">5</span>), match=<span class="string">'Hello'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group()</div><div class="line"><span class="string">'Hello'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.span()</div><div class="line">(<span class="number">0</span>, <span class="number">5</span>)</div></pre></td></tr></table></figure>
<h2 id="在python中如何构建一个模式对象">7. 在Python中，如何构建一个模式对象？</h2>
<p>答：在Python的re模块中，可以使用compile()方法将正则表达式编译生成正则表达式对象，然后再使用正则表达式对象提供的方法进行字符串处理，使用编译后的正则表达式对象不仅可以提高字符串处理速度，还提供了更加强大的字符串处理功能，尤其是对于大文本文件来说，这一步不是强制的，但推荐这么做。先来看一下findall的匹配，然后再来看一下“创建”的模式匹配。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>re.findall(<span class="string">"[Hh]ello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line">[<span class="string">'Hello'</span>, <span class="string">'hello'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reg  = re.compile(<span class="string">"[Hh]ello"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reg.findall(<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line">[<span class="string">'Hello'</span>, <span class="string">'hello'</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>编译好的模式可以使用re库中所有的方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"[Hh]ello"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx.search(<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line">&lt;_sre.SRE_Match object; span=(<span class="number">0</span>, <span class="number">5</span>), match=<span class="string">'Hello'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx.match(<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line">&lt;_sre.SRE_Match object; span=(<span class="number">0</span>, <span class="number">5</span>), match=<span class="string">'Hello'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx.findall(<span class="string">"Hello world, hello Python, !"</span>)</div><div class="line">[<span class="string">'Hello'</span>, <span class="string">'hello'</span>]</div></pre></td></tr></table></figure>
<h2 id="example1搜索第一个tat重复序列">Example1:搜索第一个”TAT“重复序列</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">rgx = re.compile(<span class="string">"TAT"</span>)     <span class="comment"># 编译了模式（TAT），编译好的模式就可以使用re中的方法，例如finditer</span></div><div class="line">i = <span class="number">1</span> </div><div class="line"></div><div class="line"><span class="keyword">for</span> mo <span class="keyword">in</span> rgx.finditer(seq): <span class="comment"># finditer()方法返回了一个“匹配”类型的对象，就是mo</span></div><div class="line">    print(<span class="string">'Ocurrence&#123;&#125;:&#123;&#125;'</span>.format(i, mo.group()))  <span class="comment"># 用group()方法操作了mo对象</span></div><div class="line">    print(<span class="string">'Position: From &#123;&#125; to &#123;&#125;'</span>.format(mo.start(),mo.end())) <span class="comment"># 用span()方法操作了mo对象，</span></div><div class="line">    <span class="comment"># 这里使用的是mo.start()与mo.end()，它们等价于mo.span[0]和mo.span()[1]</span></div><div class="line">    <span class="comment"># 即价于  print('Position: From &#123;&#125; to &#123;&#125;'.format(mo.span()[0],mo.span()[1]))</span></div><div class="line">    i += <span class="number">1</span></div></pre></td></tr></table></figure>
<p>运行后，结果如下所示（具体代码的解释看注释）：</p>
<blockquote>
<p>Ocurrence1:TAT</p>
<p>Position: From 1 to 4</p>
<p>Ocurrence2:TAT</p>
<p>Position: From 18 to 21</p>
</blockquote>
<h2 id="如果我要匹配超过一种模式如何操作">8. 如果我要匹配超过一种模式，如何操作？</h2>
<p>答：如果要匹配超过一种模式，则需要用到组操作（grouping）。用括号()来将标一个组，。组可以被“捕获（capturing）或非捕获（non-capturing），按照这种分类方法，组合就有捕获组和非捕获组。捕获组就是把正则表达式中子表达式匹配的内容，保存到内存中以数字编号或显式命名的组里，方便检索。<code>groups()</code>方法可以用于捕获组，需要注意的是<code>groups()</code>和<code>group()</code>是两种不同的方法。<code>group()</code>返回匹配的字符串，groups()返回的是元组，它们的用法可以用几个案例来说明，如下所示：</p>
<h2 id="example2-常规匹配">Example2: 常规匹配</h2>
<p>下面的代码匹配的是“单词，逗号，单词”这个模式，里面有2个括号，group()默认会返回整个匹配结果，它等同于group(0)，而group(1)会返回第1个亚组，group(2)会返回第2个亚组，关于亚组的划分，如下图所示： <img src="http://ortxpw68f.bkt.clouddn.com/professional/180424/eF5bmKCjDB.png?imageslim" alt="mark"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">m = re.search(<span class="string">r"(\w+)\,(\w+)"</span>, <span class="string">"Isaac Newton,physicist"</span>)</div><div class="line"><span class="comment"># 匹配一个“单词，逗号，一个单词”</span></div><div class="line">m.group()</div><div class="line">m.group(<span class="number">0</span>)</div><div class="line">print(type(m.group(<span class="number">0</span>)))</div><div class="line"><span class="comment"># m.group(0)和group()都是返回整个匹配结果，就是group(0)的内容</span></div><div class="line"><span class="comment"># m.group(0)的结果是一个字符串</span></div><div class="line">m.group(<span class="number">1</span>)</div><div class="line"><span class="comment"># 返回第1个亚组（就是group(1)的内容</span></div><div class="line">m.group(<span class="number">2</span>)</div><div class="line"><span class="comment"># 返回第2个亚组（就是group(2)的内容</span></div><div class="line">m.group(<span class="number">10</span>) </div><div class="line"><span class="comment"># group一共就0,1,2三个，如果是gruop(10)则会出错</span></div><div class="line">m.group(<span class="number">1</span>,<span class="number">2</span>) </div><div class="line"><span class="comment"># 输出多个匹配结果，m.gorup(1,2)表示输出</span></div><div class="line">m.groups()</div><div class="line"><span class="comment"># 返回一个包含所有亚组字符串的元组，从1 到所含的小组号,具体的案例可以往后看</span></div></pre></td></tr></table></figure>
<p>结果如下所示： <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import re</div><div class="line">&gt;&gt;&gt; m = re.search(r&quot;(\w+)\,(\w+)&quot;, &quot;Isaac Newton,physicist&quot;)</div><div class="line">&gt;&gt;&gt; # 匹配一个&quot;单词，逗号，一个单词&quot;</div><div class="line">... m.group()</div><div class="line">&apos;Newton,physicist&apos;</div><div class="line">&gt;&gt;&gt; m.group(0)</div><div class="line">&apos;Newton,physicist&apos;</div><div class="line">&gt;&gt;&gt; print(type(m.group(0)))</div><div class="line">&lt;class &apos;str&apos;&gt;</div><div class="line">&gt;&gt;&gt; # m.group(0)和group()都是返回整个匹配结果，就是group(0)的内容</div><div class="line">... # m.group(0)的结果是一个字符串</div><div class="line">...</div><div class="line">&gt;&gt;&gt; m.group(1)</div><div class="line">&apos;Newton&apos;</div><div class="line">&gt;&gt;&gt; # 返回第1个亚组（就是group(1)的内容</div><div class="line">...</div><div class="line">&gt;&gt;&gt; m.group(2)</div><div class="line">&apos;physicist&apos;</div><div class="line">&gt;&gt;&gt; # 返回第2个亚组（就是group(2)的内容</div><div class="line">&gt;&gt;&gt; </div><div class="line">&gt;&gt;&gt; m.groups()</div><div class="line">(&apos;Newton&apos;, &apos;physicist&apos;)</div></pre></td></tr></table></figure></p>
<h3 id="example-3-gruop1的返回值">Example 3: gruop(1)的返回值</h3>
<p>如果有多个匹配结果,gruop(1)则返回最后1个匹配结果,如下所示:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">m0 = re.match(<span class="string">r"(..)+"</span>, <span class="string">"a1b2c3"</span>)</div><div class="line">m0.group(<span class="number">0</span>) </div><div class="line">m0.group(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>结果如下所示:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; m0 = re.match(r&quot;(..)+&quot;, &quot;a1b2c3&quot;)</div><div class="line">&gt;&gt;&gt; m0.group(0)</div><div class="line">&apos;a1b2c3&apos;</div><div class="line">&gt;&gt;&gt; m0.group(1)</div><div class="line">&apos;c3&apos;</div></pre></td></tr></table></figure>
<p>需要注意的是,m0.group(0)返回的是整个匹配结果,而group(1)返回的是则是最后1个匹配结果,因为m0 = re.match(r“(..)+”, “a1b2c3”)中只有1个括号,它会逐步地进行匹配,第1次匹配的是a1,第2次匹配的是b2，此时匹配的结果是b2，覆盖掉a1，接着再匹配，是c3，然后c3覆盖b2，这是最后的匹配结果，因此m0.group(1)返回的是就是c3，如果有3个括号，就会连续匹配a1b2c3，有3个亚组，即如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">m01 = re.match(<span class="string">r"(..)(..)(..)+"</span>, <span class="string">"a1b2c3"</span>)</div><div class="line">m01.group()</div><div class="line">m01.group(<span class="number">1</span>)</div><div class="line">m01.group(<span class="number">2</span>)</div><div class="line">m01.group(<span class="number">3</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>m01 = re.match(<span class="string">r"(..)(..)(..)+"</span>, <span class="string">"a1b2c3"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m01.group()</div><div class="line"><span class="string">'a1b2c3'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m01.group(<span class="number">1</span>)</div><div class="line"><span class="string">'a1'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m01.group(<span class="number">2</span>)</div><div class="line"><span class="string">'b2'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m01.group(<span class="number">3</span>)</div><div class="line"><span class="string">'c3'</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="example4-group与groups返回的数值类型">Example4: group()与groups()返回的数值类型</h3>
<p>group()返回的结果是一个字符串，groups()返回的结果是一个元组，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">m = re.search(<span class="string">r"(\w+)\,(\w+)"</span>, <span class="string">"Isaac Newton,physicist"</span>)</div><div class="line">print(type(m.group()))</div><div class="line">print(type(m.groups()))</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>m02.group(<span class="number">2</span>)</div><div class="line"><span class="string">'2c'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.search(<span class="string">r"(\w+)\,(\w+)"</span>, <span class="string">"Isaac Newton,physicist"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(m.group()))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">str</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">print</span><span class="params">(type<span class="params">(m.groups<span class="params">()</span>)</span>)</span></span></div><div class="line"><span class="class">&lt;<span class="title">class</span> '<span class="title">tuple</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt;</span></div></pre></td></tr></table></figure>
<h3 id="example5-group与groups的区别">Example5: group()与groups()的区别</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">m2 = re.match(<span class="string">r"(\d)(\d)(\d)(\d)"</span>,<span class="string">"1234"</span>)</div><div class="line">m2.group()</div><div class="line">m2.group(<span class="number">1</span>)</div><div class="line">m2.group(<span class="number">2</span>)</div><div class="line">m2.group(<span class="number">3</span>)</div><div class="line">m2.group(<span class="number">4</span>)</div><div class="line">m2.groups()</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2 = re.match(<span class="string">r"(\d)(\d)(\d)(\d)"</span>,<span class="string">"1234"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.group()</div><div class="line"><span class="string">'1234'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.group(<span class="number">1</span>)</div><div class="line"><span class="string">'1'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.group(<span class="number">2</span>)</div><div class="line"><span class="string">'2'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.group(<span class="number">3</span>)</div><div class="line"><span class="string">'3'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.group(<span class="number">4</span>)</div><div class="line"><span class="string">'4'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.groups()</div><div class="line">(<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>)</div></pre></td></tr></table></figure>
<h2 id="example6-group和groups的应用">Example6: group()和groups()的应用。</h2>
<p>现在一条碱基，它的序列是ATATAAGATGCGCGCGCTTATGCGCGCA，现在找到它的GC序列，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">rgx = re.compile(<span class="string">"(GC)&#123;3,&#125;"</span>)   </div><div class="line"><span class="comment"># (GC)&#123;3,&#125;表示至少匹配3次，如果有4个连续的GC也匹配，5个也是如此</span></div><div class="line"></div><div class="line">result = rgx.search(seq)</div><div class="line">result.group()</div><div class="line">result.groups()</div><div class="line">result.group(<span class="number">0</span>)</div><div class="line">result.group(<span class="number">1</span>)</div><div class="line">result.group(<span class="number">0</span>,<span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"(GC)&#123;3,&#125;"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># (GC)&#123;3,&#125;表示至少匹配3次，如果有4个连续的GC也匹配，5个也是如此</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = rgx.search(seq)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group()</div><div class="line"><span class="string">'GCGCGCGC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.groups()</div><div class="line">(<span class="string">'GC'</span>,)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group(<span class="number">0</span>)</div><div class="line"><span class="string">'GCGCGCGC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group(<span class="number">1</span>)</div><div class="line"><span class="string">'GC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group(<span class="number">0</span>,<span class="number">1</span>)</div><div class="line">(<span class="string">'GCGCGCGC'</span>, <span class="string">'GC'</span>)</div></pre></td></tr></table></figure>
<p>从结果中可以看出，group()如果不填写参数，或者是填写了参数0，就会返回完全匹配的子字符串，如果写了参数1，会返回第2个匹配结果，如果填写了0,1，则返回所有的匹配结果。它的原理如下所示：</p>
<p><code>(GC){3,}</code>表示表示至少匹配3次，ATATAAGATGCGCGCGCTTATGCGCGCA序列中有GCGCGCGC，就匹配上了,groups()返回的是一个包含唯一或者全部子组的元组。</p>
<table>
<thead>
<tr class="header">
<th align="center">捕获组</th>
<th align="center">正则表达式</th>
<th align="center">结果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">group(0)</td>
<td align="center">(GC){3,}</td>
<td align="center">GCGCGCGC</td>
</tr>
<tr class="even">
<td align="center">group(1)</td>
<td align="center">(GC)</td>
<td align="center">GC</td>
</tr>
</tbody>
</table>
<p>接着再来看一下groups()的使用方法，groups()方法返回的是匹配的所有亚组的结果，在这种情况下，由于search返回的是一个匹配对象（match object），在模式中有一个组（即GC），返回的匹配结果是一个元组（tuple），如下所示：</p>
<p>这种情况，就是常规的使用方法，跟前面第5个问题中描述的情况一样。如果是<code>groups()</code>方法，它返回的是匹配的所有亚组的结果，在这种情况下，由于search返回的是一个匹配对象（match object），在模式中只有一个组（即GC），返回的匹配结果是一个元组（tuple），即(“GC”,)，如果想让groups返回整个模式，需要在编译模式中添加上括号，像下面这个案例一样操作：如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">rgx = re.compile(<span class="string">"((GC)&#123;3,&#125;)"</span>)</div><div class="line">result = rgx.search(seq)</div><div class="line">result.groups()</div><div class="line">result.group()</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"((GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = rgx.search(seq)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.groups()</div><div class="line">(<span class="string">'GCGCGCGC'</span>, <span class="string">'GC'</span>)</div></pre></td></tr></table></figure>
<p>在这种模式下，group()与groups()都能被检索（从左向右），因为这两种组都是默认能“捕获”的。如果不需要内部的这个子组（“CG”组），可以将其标为非捕获组（non-capturing），方法就是在组的开始添加上<code>?:</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">rgx = re.compile(<span class="string">"((?:GC)&#123;3,&#125;)"</span>)</div><div class="line">result = rgx.search(seq)</div><div class="line">result.groups()</div><div class="line">result.group()</div></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"((?:GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = rgx.search(seq)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.groups()</div><div class="line">(<span class="string">'GCGCGCGC'</span>,)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group()</div><div class="line"><span class="string">'GCGCGCGC'</span></div></pre></td></tr></table></figure>
<h2 id="re.search方法匹配的是都是第一个结果如何匹配多个结果">9. re.search()方法匹配的是都是第一个结果，如何匹配多个结果？</h2>
<p>答：如果要进行所有的匹配，需要用到re.findall()方法，它的用法如下：</p>
<blockquote>
<p>findall(pattern, string, flags=0)</p>
</blockquote>
<p>re.findall()方法能够以列表的形式返回能匹配的子字符串。如果模式中存在一个组，那么findall也有不同的作用。如果没有组，那么findall返回的是匹配字符串的列表。如果模式中存在组，它会返回含有组的列表，如果有超过1组，返回一个元组列表，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">rgx = re.compile(<span class="string">"TAT"</span>)</div><div class="line"><span class="comment"># 没有组</span></div><div class="line">rgx.findall(seq)</div><div class="line"><span class="comment"># 返回匹配的字符串的列表</span></div><div class="line">type(rgx.findall(seq))</div><div class="line">rgx = re.compile(<span class="string">"(GC)&#123;3,&#125;"</span>)</div><div class="line"><span class="comment"># 模式中含有1个组，返回1个列表</span></div><div class="line"></div><div class="line">rgx.findall(seq)</div><div class="line"><span class="comment"># 每个匹配对应的组</span></div><div class="line"></div><div class="line">rgx = re.compile(<span class="string">"((GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="comment"># 含有2个组，为每个匹配返回一个元组，整体就是一个元组列表</span></div><div class="line">rgx.findall(seq)</div><div class="line">rgx = re.compile(<span class="string">"((?:GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="comment"># 利用非捕获组得到唯一的匹配</span></div><div class="line">rgx.findall(seq)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"TAT"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 没有组，反回字符串列表</span></div><div class="line"><span class="meta">... </span>rgx.findall(seq)</div><div class="line">[<span class="string">'TAT'</span>, <span class="string">'TAT'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 返回匹配的字符串的列表</span></div><div class="line"><span class="meta">... </span>type(rgx.findall(seq))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">list</span>'&gt;</span></div><div class="line">&gt;&gt;&gt; rgx = re.compile("(GC)&#123;3,&#125;")</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 模式中含有1个组，返回1个列表</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx.findall(seq)</div><div class="line">[<span class="string">'GC'</span>, <span class="string">'GC'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 每个匹配对应的组</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"((GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 含有2个组，为每个匹配返回一个元组，整体就是一个元组列表</span></div><div class="line"><span class="meta">... </span>rgx.findall(seq)</div><div class="line">[(<span class="string">'GCGCGCGC'</span>, <span class="string">'GC'</span>), (<span class="string">'GCGCGC'</span>, <span class="string">'GC'</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"((?:GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 利用非捕获组得到唯一的匹配</span></div><div class="line"><span class="meta">... </span>rgx.findall(seq)</div><div class="line">[<span class="string">'GCGCGCGC'</span>, <span class="string">'GCGCGC'</span>]</div></pre></td></tr></table></figure>
<h2 id="案例第六寻找多个亚模式sub-patterns">案例第六：寻找多个亚模式（sub-patterns）</h2>
<p>不同的组可以用于标记，其格式为<code>?P&lt;组名字&gt;</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">rgx = re.compile(<span class="string">"(?P&lt;TBX&gt;TATA..).*(?P&lt;CGislands&gt;(?:GC)&#123;3,&#125;)"</span>)</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">result = rgx.search(seq)</div><div class="line">print(result.group(<span class="string">'CGislands'</span>))</div><div class="line">print(result.group(<span class="string">'TBX'</span>))</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python t.py</div><div class="line">GCGCGC</div><div class="line">TATAAG</div></pre></td></tr></table></figure>
<h3 id="example7用户支持的模式匹配行">Example7:用户支持的模式匹配行</h3>
<p>这行代码主要是为了统计某个单词在文本文件中有多少个，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re, sys</div><div class="line">myregex = re.compile(sys.argv[<span class="number">2</span>])</div><div class="line">counter = <span class="number">0</span></div><div class="line">fh = open(sys.argv[<span class="number">1</span>])</div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fh:</div><div class="line">    <span class="keyword">if</span> myregex.search(line):</div><div class="line">        counter += <span class="number">1</span></div><div class="line">fh.closer()</div><div class="line">print(counter)</div></pre></td></tr></table></figure>
<p>代码解释如下：</p>
<p>第一，第2行代码：关于sys.argv[2]的用法，举1个小例子，在C盘的<code>C:\Users\20161111</code>目录下建立一个<code>.py</code>脚本，命名为<code>test.py</code>，输入下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line">a = sys.argv[<span class="number">0</span>]</div><div class="line">print(a)</div></pre></td></tr></table></figure>
<p>保存，快捷键<code>Win+R</code>，打开cmd，输入<code>python test.py</code>，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">test.py</div></pre></td></tr></table></figure>
<p>由此可见，sys.argv[0]表示的就是<code>test.py</code>这个文件本身，现在将<code>tetst.py</code>代码中的sys.argv[0]更改为<code>sys.argv[1]</code>,再次运行，输入<code>python test.py what</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py what</div><div class="line">what</div></pre></td></tr></table></figure>
<p>运行的结果变成了what，再次修改，将sys.argv[1]改为sys.argv[2:]，运行，输入<code>python test.py test0 what1 how3 apple4</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py test0 what1 how3 apple4</div><div class="line">[<span class="string">'what1'</span>, <span class="string">'how3'</span>, <span class="string">'apple4'</span>]</div><div class="line"></div><div class="line">C:\Users\<span class="number">20161111</span>&gt;</div></pre></td></tr></table></figure>
<p>得到的结果是：‘what1’, ‘how3’, ‘apple4’。再倒回去想一下，sys.argv[0]表示的是test.py本身，sys.argv[1]表示的是输入的第1个参数，sys.argv[2:]表示的是第2个参数往后，这与切片的表示形式是一样的。</p>
<p>结论就是，sys.argv[ ]其实就是一个列表，里边的项为用户输入的参数，关键就是要明白这参数是从程序外部输入的，而非代码本身的什么地方，要想看到它的效果就应该将程序保存了，从外部来运行程序并给出参数（参考资料：<a href="https://www.cnblogs.com/aland-1415/p/6613449.html" target="_blank" rel="external">Python中 sys.argv[]的用法简明解释</a>）。</p>
<p>第二，第4行代码，fh = open(sys.argv[1])表示的就是打开某个文件。</p>
<p>第三，现在运行一下这个脚本，将脚本保存到C盘的根目录下，命名为<code>count_line.py</code>，同时在同一个目录新建一个文本文件，输入以下文字：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">line1</div><div class="line">line2</div><div class="line">line3</div><div class="line">line4</div></pre></td></tr></table></figure>
<p>将文件命名为<code>line_test.txt</code>，打开cmd，输入命令<code>python count_line.py count_test,line</code>，一共是2个参数（前面的python不算），参数1是脚本名称，即count_line.py，参数2是文本文件，即count_test，参数3是要统计的文字，即line，运行结果如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\20161111&gt;python count_line.py line_test.txt line</div><div class="line">4</div></pre></td></tr></table></figure>
<p>可以发现，这个文本文件中有4个line这个单词。但是这个脚本有个缺陷，就是，如果一行中有两个line这个单词，它还是会统计为1个，如下所示，将文本文件更改为这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">line1</div><div class="line">line2</div><div class="line">line3</div><div class="line">line4 line5</div></pre></td></tr></table></figure>
<p>继续运行上述脚本，结果如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\20161111&gt;python count_line.py line_test.txt line</div><div class="line">4</div></pre></td></tr></table></figure>
<p>因此，需要对脚本进行更改，更改后的版本如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re, sys</div><div class="line">myregex = re.compile(sys.argv[<span class="number">2</span>])</div><div class="line">counter = <span class="number">0</span></div><div class="line"></div><div class="line">fh = open(sys.argv[<span class="number">1</span>])</div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fh:</div><div class="line">    counter += len(myregex.findall(line))</div><div class="line">fh.close()</div><div class="line"></div><div class="line">print(counter)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\20161111&gt;python count_line.py line_test.txt line</div><div class="line">5</div></pre></td></tr></table></figure>
<h2 id="在python中正则表达式的规则非常难记有没有工具可以用来检测正则表达式的正确与否">10. 在Python中，正则表达式的规则非常难记，有没有工具可以用来检测正则表达式的正确与否？</h2>
<p>答：有个工具是Kodos，这个工具是用Python写成的，输入正则表达式，它能够在相应的输出框显示出正则表达式的结查，官网是：http://kodos.sourceforge.net/，软件是在WIndows下运行的，打开后界面如下所示：</p>
<div class="figure">
<img src="http://kodos.sourceforge.net/images/match.gif" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="如何通过正则表达式替换一些字符串">11. 如何通过正则表达式替换一些字符串？</h2>
<p>答：如果要实现这个目的，需要用到re.sub()方法，sub就是substitution的简写，它的用法是<code>sub(rpl,str[,count=0])</code></p>
<p>具体参数的含义如下所示：</p>
<ol style="list-style-type: decimal">
<li>rpl：原始的字符串；</li>
<li>str，需要替换原始字符串的字符串。</li>
<li>[,count=0]，可选参数，表示替换的最大次数，默认是0，表示替换所有匹配。</li>
</ol>
<p>re.sub的使用非常类似于replace方法，参见下面的案例，代码如下所示：</p>
<p>这个案例展示的是：删除GC重复（该行有超过3个GC），代码解释参见注释 <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">regex = re.compile(<span class="string">"(?:GC)&#123;3,&#125;"</span>) <span class="comment"># 匹配至少3个GC结边的字符串</span></div><div class="line">seq = <span class="string">"ATGATCGTACTGCGCGCTTCATGTGATGCGCGCGCGCAGACTATAAG"</span></div><div class="line">print(<span class="string">"Before:"</span>, seq)</div><div class="line">print(<span class="string">"After:"</span>, regex.sub(<span class="string">""</span>,seq))</div></pre></td></tr></table></figure></p>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">Before: ATGATCGTACTGCGCGCTTCATGTGATGCGCGCGCGCAGACTATAAG</div><div class="line">After: ATGATCGTACTTTCATGTGATAGACTATAAG</div></pre></td></tr></table></figure>
<p>第二个方法：<code>subn(rpl,str[,count=0])</code>也能实现<code>re.sub</code>的功能。</p>
<p>不同之处在于，subn会返回替换后的字符串和替换的次数，将上述代码用subn演示，就如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">regex = re.compile(<span class="string">"(?:GC)&#123;3,&#125;"</span>) <span class="comment"># 匹配至少3个GC结边的字符串</span></div><div class="line">seq = <span class="string">"ATGATCGTACTGCGCGCTTCATGTGATGCGCGCGCGCAGACTATAAG"</span></div><div class="line">print(<span class="string">"Before:"</span>, seq)</div><div class="line">print(<span class="string">"After:"</span>, regex.subn(<span class="string">""</span>,seq))</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">Before: ATGATCGTACTGCGCGCTTCATGTGATGCGCGCGCGCAGACTATAAG</div><div class="line">After: (<span class="string">'ATGATCGTACTTTCATGTGATAGACTATAAG'</span>, <span class="number">2</span>)</div></pre></td></tr></table></figure>
<h2 id="正则表达式在生物信息学方面有什么用处">12. 正则表达式在生物信息学方面有什么用处？</h2>
<p>答：正则表达式可以用于搜索PROSITE（这是一个蛋白质拉点和序列模式数据库），这个数据库的信息模式就是序列与描述序列的字符串。例如下面的这段字符串：</p>
<p><code>K-[KR]-C-G-H-[LMQR]</code>，这段字符串表示的是异柠檬酸酶的活性位点。具体的每个字母含义如下：</p>
<p>位于第1个位置的是K，位于第2个位置提是K或R，随后是CGH，最后是一段氨基酸序列，即L，M，Q或R。如果要在这个序列中搜索，必须要把PROSITE的格式转化为符合Python正则表达式的表示方式，就像这样<code>K[KR]CGH[LMQR]</code>。</p>
<p>为了将PROSITE转化为REGEX的基本格式，这个过程中包括移除连接符（“-”），将括号之间的数字替换为大括号之间的数字，并将“x”替换为点号，接着看一个腺苷酸环化酶相关蛋白2（ adenylyl cyclase associated protein 2）的例子。</p>
<p>此蛋白在PROSITE中的版本如下：</p>
<p><code>[LIVM](2)-x-R-L-[DE]-x(4)-R-L-E</code>，这种序列是一致性模式（Consensus pattern）。</p>
<p>其中，L是亮氨酸，I是异亮氨酸，V是缬氨酸，M是甲硫氨酸，x代表任意氨基酸，R是精氨酸，D是天冬氨酸，E是谷氨酸。</p>
<p>REGEX（正则表达式）版本如下：</p>
<p><code>[LIVM]{2}.RL[DE].{4}RLE</code></p>
<h3 id="example8在fasta格式中搜索蛋白质的模式">Example8：在FASTA格式中搜索蛋白质的模式</h3>
<p>现在假设我们要在一个FASTA格式的文件中寻找这个模式。除了要找到这个模式外，我们有可能还需要在上下文中检索它的位置，即位于在这个模式之前与之后的10个氨基酸序列（代码中用小写字母表示），下面是一个Fasta格式的文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;Q5R5X8|CAP2_PONPY CAP <span class="number">2</span> - Pongo pygmaeus (Orangutan).</div><div class="line">MANMQGLVERLERAVSRLESLSAESHRPPGNCGEVNGVIGGVAPSVEAFDKLMDSMVAEFLKNSRILAGDVETHAEMVHSAFQAQRAFLLMASQYQQPHENDVAALLKPISEKIQEIQTFRERNRGSNMFNHLSAVSESIPALGWIAVSPKPGPYVKEMNDAATFYTNRVLKDYKHSDLRHVDWVKSYLNIWSELQAYIKEHHTTGLTWSKTGPVASTVSAFSVLSSGPGLPPPPPPPPPPGPPPLLENEGKKEESSPSRSALFAQLNQGEAITKGLRHVTDDQKTYKNPSLRAQGGQTRSPTKSHTPSPTSPKSYPSQKHAPVLELEGKKWRVEYQEDRNDLVISETELKQVAYIFKCEKSTLQIKGKVNSIIIDNCKKLGLVFDNVVGIVEVINSQDIQIQVMGRVPTISINKTEGCHIYLSEDALDCEIVSAKSSEMNILIPQDGDYREFPIPEQFKTAWDGSKLITEPAEIMA</div></pre></td></tr></table></figure>
<p>下面的代码实现的就是这个功能，即在1个FASTA文件中寻找这个模式，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">pattern = <span class="string">"[LIVM]&#123;2&#125;.RL[DE].&#123;4&#125;RLE"</span></div><div class="line">fh = open(<span class="string">'D:/prot.fas'</span>)</div><div class="line">fh.readline()</div><div class="line">seq = <span class="string">""</span></div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fh:</div><div class="line">    seq += line.strip()</div><div class="line">rgx = re.compile(pattern)</div><div class="line">result = rgx.search(seq)</div><div class="line">patternfound = result.group()</div><div class="line">span = result.span()</div><div class="line">leftpos = span[<span class="number">0</span>]<span class="number">-10</span></div><div class="line"><span class="keyword">if</span> leftpos &lt; <span class="number">0</span>:</div><div class="line">    leftpos = <span class="number">0</span></div><div class="line">print(seq[leftpos:span[<span class="number">0</span>]].lower() + patternfound + seq[span[<span class="number">1</span>]:span[<span class="number">1</span>]+<span class="number">10</span>].lower())</div><div class="line">fh.close()</div></pre></td></tr></table></figure>
<p>运行代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">manmqgLVERLERAVSRLEslsaeshrpp</div></pre></td></tr></table></figure>
<h3 id="example9-清洗序列">Example9： 清洗序列</h3>
<p>正则表达式在清除序列方面更加常用，需要清理的序列通常是一些非标准的序列，就像下面的这样：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> ATGACCATGA TTACGCCAAG CTCTAATACG ACTCACTATA GGGAAAGCTT GCATGCCTGC</div><div class="line"><span class="number">61</span> AGGTCGACTC TAGAGGATCT ACTAGTCATA TGGATATCGG ATCCCCGGGT ACCGAGCTCG</div><div class="line"><span class="number">121</span> AATTCACTGG CCGTCGTTTT</div></pre></td></tr></table></figure>
<p>这个序列里面有空格，有数字，这些都不是我们所需要的，需要把它们的清除掉，清除序列的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">regex = re.compile(<span class="string">' |\d|\n|\t'</span>) <span class="comment"># 有一个空格</span></div><div class="line">seq = <span class="string">''</span></div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> open(<span class="string">'D:/pMOSBlue.txt'</span>):</div><div class="line">    seq += regex.sub(<span class="string">''</span>,line)</div><div class="line">print(seq)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">ATGACCATGATTACGCCAAGCTCTAATACGACTCACTATAGGGAAAGCTTGCATGCCTGCAGGTCGACTCTAGAGGATCTACTAGTCATATGGATATCGGATCCCCGGGTACCGAGCTCGAATTCACTGGCCGTCGTTTT</div></pre></td></tr></table></figure>
<p>代码解释：最重要的就是这个模式：<code>regex = re.compile(' |\d|\n|\t')</code>，其中’ |||’表示的是，数字或换行，或空格。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/07/Python/Python学习笔记（7）-条件与循环语句/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/07/Python/Python学习笔记（7）-条件与循环语句/" itemprop="url">Python学习笔记（7）-条件与循环语句</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-07T12:00:00+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,102
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  19
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="条件与循环语句">条件与循环语句</h2>
<h3 id="条件与循环语句的表达式">条件与循环语句的表达式</h3>
<p>在选择结构和循环结构中，都要根据条件表达式的值来确定下一步的执行流程，条件表达式的值只要不是False、0、0.0、0j、None、空列表、空元组、空集合、空字典、空字符串、空range对象或其他空迭代对象，Python解释器都认为其与True等价，从这个意义上来讲，所有Python合法表达式都可以作为条件表达式，包括含有函数调用的表达式。</p>
<h2 id="if语句">if语句</h2>
<h3 id="if条件语句的格式">if条件语句的格式</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> condition_1:</div><div class="line">    statement_block_1</div><div class="line"><span class="keyword">elif</span> condition_2:</div><div class="line">    statement_block_2</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    statement_block_3</div></pre></td></tr></table></figure>
<p>参数解释：</p>
<ol style="list-style-type: decimal">
<li>如果 “condition_1” 为 True 将执行 “statement_block_1” 块语句</li>
<li>如果 “condition_1” 为False，将判断 “condition_2”</li>
<li>如果“condition_2” 为 True 将执行 “statement_block_2” 块语句</li>
<li>如果 “condition_2” 为False，将执行“statement_block_3”块语句</li>
<li>每个条件后面要使用冒号 :，表示接下来是满足条件后要执行的语句块。</li>
<li>使用缩进来划分语句块，相同缩进数的语句在一起组成一个语句块。</li>
</ol>
<h3 id="if案例">if案例</h3>
<h4 id="简单的if语句案例">简单的if语句案例：</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ cat <span class="keyword">if</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">var1 =<span class="number">100</span></div><div class="line"><span class="keyword">if</span> var1:</div><div class="line">    print(<span class="string">"1 - if expression condition is true"</span>)</div><div class="line">    print(var1)</div><div class="line"></div><div class="line">var2 = <span class="number">0</span></div><div class="line"><span class="keyword">if</span> var2:</div><div class="line">    print(<span class="string">"2 - if expression condition is true"</span>)</div><div class="line">    print(var2)</div><div class="line">print(<span class="string">"Good bye"</span>)</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ python3 <span class="keyword">if</span>.py </div><div class="line"><span class="number">1</span> - <span class="keyword">if</span> expression condition <span class="keyword">is</span> true</div><div class="line"><span class="number">100</span></div><div class="line">Good bye</div></pre></td></tr></table></figure>
<h4 id="使用整数作为if条件表达式">使用整数作为if条件表达式</h4>
<p>如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> <span class="number">3</span>:</div><div class="line"><span class="meta">... </span>print(<span class="number">4</span>)</div><div class="line">...</div><div class="line"><span class="number">4</span></div></pre></td></tr></table></figure>
<h4 id="if语句中判断相等是用">if语句中判断相等是用“==”</h4>
<p>如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> a == <span class="number">8</span>:</div><div class="line"><span class="meta">... </span>print(a)</div><div class="line">...</div><div class="line"><span class="number">8</span></div></pre></td></tr></table></figure>
<p>代码解释：if a == 8表示：如果条件a==8返回的值是True，就执行下面的语句，此语句后面的冒号是必需的，下面一行语句print(a)前面要有4个空格的缩进。 如果if后面不放语句时，比如空出来用于后续补充，可以用pass语句，就是什么也不做，如下所示：</p>
<h4 id="pass语句">pass语句</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> X &lt; <span class="number">0</span>:</div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p>如果误用了等号作为判断条件，那么就会出错，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> (a = <span class="number">3</span>) <span class="keyword">and</span> (b = <span class="number">4</span>)</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span></div><div class="line">    <span class="keyword">if</span> (a = <span class="number">3</span>) <span class="keyword">and</span> (b = <span class="number">4</span>)</div><div class="line">          ^</div><div class="line">SyntaxError: invalid syntax</div></pre></td></tr></table></figure>
<h4 id="列表作为if条件表达式">列表作为if条件表达式：</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 案例1，非空的列表</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> a:</div><div class="line"><span class="meta">... </span>print(a)</div><div class="line">...</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"></div><div class="line"><span class="comment"># 案例2，空列表</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = []</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> a:</div><div class="line"><span class="meta">... </span>    print(a)</div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>    print(<span class="string">'Empty'</span>)</div><div class="line">...</div><div class="line">Empty</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="三元运算符">三元运算符</h4>
<p>语法为<code>value1 if condition else value2</code>，当条件表达式condition的值与True等价时，表达式的值为value1，否则表达式的值为value2。value1和value2本身可以是复杂的表达式，也可以包括函数调用，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">6</span>) <span class="keyword">if</span> a &gt; <span class="number">3</span> <span class="keyword">else</span> print(<span class="number">5</span>)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">6</span> <span class="keyword">if</span> a &gt; <span class="number">3</span> <span class="keyword">else</span> <span class="number">5</span>)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">6</span> <span class="keyword">if</span> a &gt; <span class="number">13</span> <span class="keyword">else</span> <span class="number">9</span> <span class="comment"># 赋值运算符优先级低</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b</div><div class="line"><span class="number">9</span></div></pre></td></tr></table></figure>
<p>三元运算符案例第二：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">name = <span class="string">"qiwsir"</span> <span class="keyword">if</span> <span class="string">"laoqi"</span> <span class="keyword">else</span> <span class="string">"github"</span></div><div class="line">print(name)</div><div class="line"> </div><div class="line">name = <span class="string">"qiwsir"</span> <span class="keyword">if</span> <span class="string">""</span> <span class="keyword">else</span> <span class="string">"github"</span></div><div class="line">print(name)</div><div class="line"> </div><div class="line">name = <span class="string">"qiwsir"</span> <span class="keyword">if</span> <span class="string">"github"</span> <span class="keyword">else</span> <span class="string">""</span></div><div class="line">print(name)</div></pre></td></tr></table></figure>
<p>这种操作的公式为： A = Y if X else Z 这表示为： 如果X为真，那么就执行Y。 如果X为假，那么就执行Z。 如下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = <span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">"python"</span> <span class="keyword">if</span> x &gt; y <span class="keyword">else</span> <span class="string">"qiwsir"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">qiwsir</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">... </span>x = <span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = <span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">"python"</span> <span class="keyword">if</span> x &lt; y <span class="keyword">else</span> <span class="string">"qiwsir"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">python</div></pre></td></tr></table></figure>
<p>代码解释：在第一步中，因为x&gt;y是假，因此执行Z，即qiwsir，在第二步中，因为x <y 是真，执行y，即python。其实可以这么理解，这一段代码是从左向右执行的，如果中间的判别式是对的，则就此执行结束，如果中间的判别式是错的，继续向右执行。="" ####="" 多分枝条件语句="" <figure="" class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">print(<span class="string">"请输入任意一个数字： "</span>)</div><div class="line">number = int(input())</div><div class="line"> </div><div class="line"><span class="keyword">if</span> number == <span class="number">10</span>:</div><div class="line">    print(<span class="string">"您输入的数字是: %d"</span> % number)</div><div class="line">    print(<span class="string">"Youare smart!"</span>)</div><div class="line"><span class="keyword">elif</span> number &gt; <span class="number">10</span>:</div><div class="line">    print(<span class="string">"您输入的数字是&#123;&#125;"</span>.format(number))</div><div class="line">    print(<span class="string">"This number is more than 10"</span>)</div><div class="line"><span class="keyword">elif</span> number &lt; <span class="number">10</span>:</div><div class="line">    print(<span class="string">"您输入的数字是： %d"</span> % number)</div><div class="line">    print(<span class="string">"This number is less than 10"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">"Are your a human"</span>)</div></pre></td></tr></table></y></p>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">请输入任意一个数字：</div><div class="line"><span class="number">23</span></div><div class="line">您输入的数字是<span class="number">23</span></div><div class="line">This number <span class="keyword">is</span> more than <span class="number">10</span></div></pre></td></tr></table></figure>
<p>代码解释：如果输入的是10，则输出You are smart，如果大于10，则执行下一条语句，如果小于10，执行第三条语句，这第一条到第三条一共有3种选择，称为分支。其中elif是else if的缩写。</p>
<h4 id="if语句的嵌套">if语句的嵌套</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> x &lt; y:</div><div class="line">    print(<span class="string">"x is less than y"</span>)</div><div class="line"><span class="keyword">elif</span> x &gt; y:</div><div class="line">    print(<span class="string">"x is greater than y"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">"x and y are equal"</span>)</div></pre></td></tr></table></figure>
<p>上述语句可以改写为嵌套语句，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> x == y:</div><div class="line">    print(<span class="string">"x and y are equal"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">if</span> x &lt; y:</div><div class="line">         print(<span class="string">"x is less than y"</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        print(<span class="string">"x is greater than y"</span>)</div></pre></td></tr></table></figure></p>
<p>外部的条件判断包含两个分支。第一个分支只有一个简单的语句。第二个分支包含了另外一重条件判断，这个内部条件判断有两个分支。这两个分支都是简单的语句，他们的位置也可以继续放条件判断语句的。 逻辑运算符有时候对简化嵌套条件判断很有用。比如下面这个代码就能改写成更简单的版本:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="number">0</span> &lt; x:</div><div class="line">    <span class="keyword">if</span> x &lt; <span class="number">10</span>:</div><div class="line">        print(<span class="string">"x is a positive single-digit number."</span>)</div></pre></td></tr></table></figure>
<p>上面的例子中，只有两个条件都满足了才会运行print语句，所以就用逻辑运算符来实现同样的效果即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="number">0</span> &lt; x <span class="keyword">and</span> x &lt;<span class="number">10</span>:</div><div class="line">    print(<span class="string">"x is a positive single-digit number."</span>)</div></pre></td></tr></table></figure>
<p>还可以更加简单： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="number">0</span> &lt; x &lt; <span class="number">10</span>:</div><div class="line">    print(<span class="string">"x is a positive single-digit number."</span>)</div></pre></td></tr></table></figure></p>
<h4 id="案例ifelse面试资格确认">案例：if…else:面试资格确认</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">age = <span class="number">24</span></div><div class="line">subject = <span class="string">"计算机 "</span></div><div class="line">college = <span class="string">"非重点"</span></div><div class="line"><span class="keyword">if</span> (age &gt; <span class="number">25</span> <span class="keyword">and</span> subject ==<span class="string">"电子信息工程 "</span>) <span class="keyword">or</span> (college ==<span class="string">"重点"</span> <span class="keyword">and</span> subject ==<span class="string">"电子信息工程"</span>) <span class="keyword">or</span> (age&lt;=<span class="number">28</span> <span class="keyword">and</span> subject==<span class="string">"计算机"</span>):</div><div class="line">    print(<span class="string">"恭喜，您已经获得我公司的面试机会！"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">"抱歉，您未达到面试要求"</span>)</div></pre></td></tr></table></figure>
<h4 id="案例if判断今天是今年的第几天">案例if：判断今天是今年的第几天。</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> time</div><div class="line">date = time.localtime()</div><div class="line"><span class="comment"># 获取当前日期时间</span></div><div class="line"></div><div class="line">year,month,day=date[:<span class="number">3</span>]</div><div class="line">day_month=[<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>]</div><div class="line"></div><div class="line"><span class="keyword">if</span> year%<span class="number">400</span> == <span class="number">0</span> <span class="keyword">or</span> (year%<span class="number">4</span>==<span class="number">0</span> <span class="keyword">and</span> year%<span class="number">100</span>!=<span class="number">0</span>):</div><div class="line"><span class="comment"># 判断是否为闰年</span></div><div class="line">    day_month[<span class="number">1</span>] = <span class="number">29</span></div><div class="line">    </div><div class="line"><span class="keyword">if</span> month ==<span class="number">1</span>:</div><div class="line">    print(day)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(sum(day_month[:month<span class="number">-1</span>])+day)</div></pre></td></tr></table></figure>
<h2 id="while语句">while语句</h2>
<p>while语句的格式如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> 判断条件：</div><div class="line">    语句</div></pre></td></tr></table></figure>
<h3 id="while语句案例">while语句案例</h3>
<h4 id="简单案例">简单案例</h4>
<p>以下实例使用了 while 来计算 1 到 100 的总和：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ cat <span class="keyword">while</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">n = <span class="number">100</span></div><div class="line"></div><div class="line">sum = <span class="number">0</span></div><div class="line">counter = <span class="number">1</span></div><div class="line"><span class="keyword">while</span> counter &lt;= n:</div><div class="line">    sum = sum + counter</div><div class="line">    counter +=<span class="number">1</span></div><div class="line"></div><div class="line">print(<span class="string">"1 to %d sum up is: %d"</span>%(n, sum))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ python3 <span class="keyword">while</span>.py </div><div class="line"><span class="number">1</span> to <span class="number">100</span> sum up <span class="keyword">is</span>: <span class="number">5050</span></div></pre></td></tr></table></figure>
<h4 id="常量作为while的条件表达式">常量作为while的条件表达式</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">i = s = <span class="number">0</span></div><div class="line"><span class="keyword">while</span> i &lt;= <span class="number">10</span>:</div><div class="line"><span class="meta">... </span>s+=i</div><div class="line"><span class="meta">... </span>i+=<span class="number">1</span></div><div class="line">...</div><div class="line">print(s)</div><div class="line"><span class="number">55</span></div></pre></td></tr></table></figure>
<h4 id="break语句">break语句</h4>
<p>在while循环语句，满足一定条件时，用break跳出循环：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>i =s=<span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line"><span class="meta">... </span>    s+=i</div><div class="line"><span class="meta">... </span>    i+=<span class="number">1</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">if</span> i &gt; <span class="number">10</span>:</div><div class="line"><span class="meta">... </span>        <span class="keyword">break</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s)</div><div class="line"><span class="number">55</span></div></pre></td></tr></table></figure>
<h4 id="while案例">while案例</h4>
<p>用户输入若干个成绩，求所有成绩的平均分。每输入一个成绩后询问是否继续输入下一个成绩，回答yes就继续输入下一个成绩，回答no就停止输入成绩。 <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">numbers = []</div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    x = input(<span class="string">'请输入一个整数:'</span>)</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        numbers.append(int(x))</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        print(<span class="string">'不是整数'</span>)</div><div class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">        flag = input(<span class="string">'继续输入吗？（yes/no）'</span>)</div><div class="line">        <span class="keyword">if</span> flag.lower() <span class="keyword">not</span> <span class="keyword">in</span> (<span class="string">'yes'</span>,<span class="string">'no'</span>):</div><div class="line">            print(<span class="string">"只能输入yes或no"</span>)</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">break</span></div><div class="line">    <span class="keyword">if</span> flag.lower()==<span class="string">'no'</span>:</div><div class="line">        <span class="keyword">break</span></div><div class="line"></div><div class="line">print(sum(numbers)/len(numbers))</div></pre></td></tr></table></figure></p>
<h2 id="for语句">for语句</h2>
<p>Python中主要有两种形式的循环结构，for循环和while循环。while循环一般用于循环次数难以提前确定的情况；而for循环一般用于循环次数可以提前确定的情况，尤其适用于枚举或遍历序列或迭代对象中元素的场合。当循环带有else子句时，如果循环因子条件因为条件青工达不成立或序列遍历结束而自然结束时则执行else结构中的语句，如果循环是因为执行了break语句而导致循环提前结束则不执行else中的语句，其完整语法形式为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> 条件表达式：</div><div class="line">       循环体</div><div class="line"><span class="keyword">else</span>：</div><div class="line">    <span class="keyword">else</span> 子句代码块</div></pre></td></tr></table></figure>
<p>或者是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> 取值 <span class="keyword">in</span> 序列或迭代对象：</div><div class="line">    循环语句</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">else</span>子句代码块</div></pre></td></tr></table></figure>
<h3 id="for循环中常用的操作符">for循环中常用的操作符</h3>
<table>
<thead>
<tr class="header">
<th>操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt;</td>
<td>小于</td>
</tr>
<tr class="even">
<td>&lt;=</td>
<td>小于或等于</td>
</tr>
<tr class="odd">
<td>&gt;</td>
<td>大于</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>大于或等于</td>
</tr>
<tr class="odd">
<td>==</td>
<td>等于，比较对象是否相等</td>
</tr>
<tr class="even">
<td>!=</td>
<td>不等于</td>
</tr>
</tbody>
</table>
<h3 id="for循环案例">for循环案例</h3>
<h4 id="简单案例-1">简单案例</h4>
<p>使用for循环遍历：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">11</span>,<span class="number">1</span>):</div><div class="line"><span class="meta">... </span>s +=i</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s)</div><div class="line"><span class="number">110</span></div></pre></td></tr></table></figure>
<h4 id="带有else子句的循环结构">带有else子句的循环结构</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">101</span>):</div><div class="line"><span class="meta">... </span>s +=i</div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(s)</div><div class="line">...</div><div class="line"><span class="number">5050</span></div></pre></td></tr></table></figure>
<h4 id="带有while的循环结构">带有while的循环结构</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> i &lt;= <span class="number">100</span>:</div><div class="line"><span class="meta">... </span>s += i</div><div class="line"><span class="meta">... </span>i += i</div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(s)</div><div class="line">...</div><div class="line"><span class="number">5150</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="显示元组中的每个元素">显示元组中的每个元素</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">5</span>):</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">'The for loop is over'</span>)</div><div class="line">...</div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line">The <span class="keyword">for</span> loop <span class="keyword">is</span> over</div></pre></td></tr></table></figure>
<h4 id="打印字符串中的每个元素">打印字符串中的每个元素</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>hello = <span class="string">"world"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> hello:</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line">...</div><div class="line">w</div><div class="line">o</div><div class="line">r</div><div class="line">l</div><div class="line">d</div></pre></td></tr></table></figure>
<h4 id="根据索引显示每个字符">根据索引显示每个字符</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(len(hello)):</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line">...</div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"根据每个字符的索引显示每个字符"</span>)</div><div class="line">根据每个字符的索引显示每个字符</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(len(hello)):</div><div class="line"><span class="meta">... </span>print(hello[i])</div><div class="line">...</div><div class="line">w</div><div class="line">o</div><div class="line">r</div><div class="line">l</div><div class="line">d</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="range函数的用法">range()函数的用法</h3>
<p>range()函数经常与for循环配合使用，它的用法是<code>range(a,b,c)</code>，其中c为步长，a与b是范围，先看一个简单的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(range(<span class="number">0</span>,<span class="number">9</span>,<span class="number">1</span>)))</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(range(<span class="number">0</span>,<span class="number">9</span>,<span class="number">2</span>)))</div><div class="line">[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(range(<span class="number">0</span>,<span class="number">9</span>,<span class="number">3</span>)))</div><div class="line">[<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>]</div></pre></td></tr></table></figure>
<p>如果你需要遍历数字序列，可以使用内置range()函数。它会生成数列，例如:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</div><div class="line"><span class="meta">... </span>    print(i)</div><div class="line">...</div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div></pre></td></tr></table></figure>
<p>或者指定区间，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>,<span class="number">9</span>) :</div><div class="line">    print(i)</div><div class="line"> </div><div class="line">    </div><div class="line"><span class="number">5</span></div><div class="line"><span class="number">6</span></div><div class="line"><span class="number">7</span></div><div class="line"><span class="number">8</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="range函数控制循环次数">range()函数控制循环次数。</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</div><div class="line">        print((<span class="string">' * '</span>*i).center(n*<span class="number">3</span>))</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n, <span class="number">0</span>, <span class="number">-1</span>):</div><div class="line">        print((<span class="string">' * '</span>*i).center(n*<span class="number">3</span>))</div><div class="line">main(<span class="number">6</span>)</div></pre></td></tr></table></figure>
<h4 id="案例找出100以内能被3整除的正整数">案例：找出100以内能被3整除的正整数</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aliquot = []</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">100</span>):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> n % <span class="number">3</span> == <span class="number">0</span>:</div><div class="line"><span class="meta">... </span>aliquot.append(n)</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aliquot)</div><div class="line">[<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">15</span>, <span class="number">18</span>, <span class="number">21</span>, <span class="number">24</span>, <span class="number">27</span>, <span class="number">30</span>, <span class="number">33</span>, <span class="number">36</span>, <span class="number">39</span>, <span class="number">42</span>, <span class="number">45</span>, <span class="number">48</span>, <span class="number">51</span>, <span class="number">54</span>, <span class="number">57</span>, <span class="number">60</span>, <span class="number">63</span>, <span class="number">66</span>, <span class="number">69</span>, <span class="number">72</span>, <span class="number">75</span>, <span class="number">78</span>, <span class="number">81</span>, <span class="number">84</span>, <span class="number">87</span>, <span class="number">90</span>, <span class="number">93</span>, <span class="number">96</span>, <span class="number">99</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="for循环遍历序列类型对象">for循环遍历序列类型对象</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>name_str = <span class="string">"test"</span> <span class="comment"># 字符串</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(name_str))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">str</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">for</span> <span class="title">i</span> <span class="title">in</span> <span class="title">name_str</span>:</span></div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="comment">##-----------##</span></div><div class="line">...</div><div class="line">t</div><div class="line">e</div><div class="line">s</div><div class="line">t</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>name_list = list(name_str) <span class="comment"># 列表</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(name_str)</div><div class="line">test</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> name_list: <span class="comment"># 列表的循环</span></div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="comment">##-----------##</span></div><div class="line">...</div><div class="line">t</div><div class="line">e</div><div class="line">s</div><div class="line">t</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>name_set = set(name_str) <span class="comment"># 集合</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(name_set)</div><div class="line">&#123;<span class="string">'e'</span>, <span class="string">'s'</span>, <span class="string">'t'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">##-----------##</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>name_tuple = tuple(name_str) <span class="comment"># 元组</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> name_tuple:</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="comment">##-----------##</span></div><div class="line">...</div><div class="line">t</div><div class="line">e</div><div class="line">s</div><div class="line">t</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>name_dict = &#123;<span class="string">"name"</span>: <span class="string">"qiwsir"</span>, <span class="string">"lang"</span>: <span class="string">"python"</span>, <span class="string">"website"</span>: <span class="string">"qiwsir.github.io"</span>&#125; <span class="comment"># 字典</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> name_dict:</div><div class="line"><span class="meta">... </span>print(i, <span class="string">"--&gt;"</span>, name_dict[i])</div><div class="line">...</div><div class="line">name --&gt; qiwsir</div><div class="line">lang --&gt; python</div><div class="line">website --&gt; qiwsir.github.io</div></pre></td></tr></table></figure>
<h4 id="遍历字典元素">遍历字典元素</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a_dict = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>,<span class="string">"lang"</span>:<span class="string">"python"</span>,<span class="string">"email"</span>:<span class="string">"qiwsir@gmail.com"</span>,<span class="string">"website"</span>:<span class="string">"www.itdiffer.com"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a_dict)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>, <span class="string">'email'</span>: <span class="string">'qiwsir@gmail.com'</span>, <span class="string">'website'</span>: <span class="string">'www.itdiffer.com'</span>&#125;</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k,v <span class="keyword">in</span> a_dict.items():</div><div class="line"><span class="meta">... </span>print(k,v)</div><div class="line">...</div><div class="line">name qiwsir</div><div class="line">lang python</div><div class="line">email qiwsir@gmail.com</div><div class="line">website www.itdiffer.com</div></pre></td></tr></table></figure>
<h4 id="案例计算两个列表中对应元素的和">案例：计算两个列表中对应元素的和</h4>
<p>两个列表分别为：a = [1,2,3,4,5]和b = [9,8,7,6,5]，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">71</span>,<span class="number">22</span>,<span class="number">663</span>,<span class="number">64</span>,<span class="number">15</span>] </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">19</span>,<span class="number">48</span>,<span class="number">74</span>,<span class="number">46</span>,<span class="number">54</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = []</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</div><div class="line"><span class="meta">... </span>c.append(a[i] + b[i])</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(c)</div><div class="line">[<span class="number">90</span>, <span class="number">70</span>, <span class="number">737</span>, <span class="number">110</span>, <span class="number">69</span>]</div></pre></td></tr></table></figure></p>
<h4 id="案例将值与键进行转换">案例：将值与键进行转换</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>yinfor = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>,<span class="string">"sit"</span>:<span class="string">"qiwsir.github.io"</span>,<span class="string">"lang"</span>:<span class="string">"python"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(yinfor)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>, <span class="string">'sit'</span>: <span class="string">'qiwsir.github.io'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>infor = &#123;&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k,v <span class="keyword">in</span> yinfor.items():</div><div class="line"><span class="meta">... </span>infor[v] = k</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(infor)</div><div class="line">&#123;<span class="string">'qiwsir'</span>: <span class="string">'name'</span>, <span class="string">'qiwsir.github.io'</span>: <span class="string">'sit'</span>, <span class="string">'python'</span>: <span class="string">'lang'</span>&#125;</div></pre></td></tr></table></figure>
<h4 id="案例字符的切片及循环">案例:字符的切片及循环</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>raw = <span class="string">"Do you love Python? Python is a good script"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>raw_list = raw.split(<span class="string">" "</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(raw_list)</div><div class="line">[<span class="string">'Do'</span>, <span class="string">'you'</span>, <span class="string">'love'</span>, <span class="string">'Python?'</span>, <span class="string">'Python'</span>, <span class="string">'is'</span>, <span class="string">'a'</span>, <span class="string">'good'</span>, <span class="string">'script'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i, string <span class="keyword">in</span> enumerate(raw_list):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> string == <span class="string">"Python"</span>:</div><div class="line"><span class="meta">... </span>raw_list[i] = <span class="string">"Ruby"</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(raw_list)</div><div class="line">[<span class="string">'Do'</span>, <span class="string">'you'</span>, <span class="string">'love'</span>, <span class="string">'Python?'</span>, <span class="string">'Ruby'</span>, <span class="string">'is'</span>, <span class="string">'a'</span>, <span class="string">'good'</span>, <span class="string">'script'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 发现有问题，继续修改：</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i, string <span class="keyword">in</span> enumerate(raw_list):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> <span class="string">"Python"</span> <span class="keyword">in</span> string:</div><div class="line"><span class="meta">... </span>raw_list[i] = <span class="string">"Ruby"</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(raw_list)</div><div class="line">[<span class="string">'Do'</span>, <span class="string">'you'</span>, <span class="string">'love'</span>, <span class="string">'Ruby'</span>, <span class="string">'Ruby'</span>, <span class="string">'is'</span>, <span class="string">'a'</span>, <span class="string">'good'</span>, <span class="string">'script'</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">" "</span>.join(raw_list))</div><div class="line">Do you love Ruby Ruby <span class="keyword">is</span> a good script</div></pre></td></tr></table></figure>
<h4 id="forelse求1到99中的整数根">for…else：求1到99中的整数根</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">99</span>,<span class="number">1</span>,<span class="number">-1</span>): <span class="comment"># n是从99到1的整数</span></div><div class="line"><span class="meta">... </span>root = sqrt(n) <span class="comment"># root是对n开根号</span></div><div class="line"><span class="meta">... </span><span class="keyword">if</span> root == int(root): <span class="comment"># 如果root是整数，就打印n，并中断</span></div><div class="line"><span class="meta">... </span>print(n)</div><div class="line"><span class="meta">... </span><span class="keyword">break</span></div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">"Nothing"</span>)</div><div class="line">...</div><div class="line"><span class="number">81</span></div></pre></td></tr></table></figure>
<h4 id="案例forbreak求200以内能被17整除的最大正整数">案例(for…break)：求200以内能被17整除的最大正整数</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">200</span>,<span class="number">0</span>,<span class="number">-2</span>):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> i%<span class="number">17</span> ==<span class="number">0</span>:</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="keyword">break</span></div><div class="line">...</div><div class="line"><span class="number">170</span></div></pre></td></tr></table></figure>
<h4 id="案例鸡兔同笼的问题">案例：鸡兔同笼的问题</h4>
<p>假设共有鸡、兔30只，脚90只，求鸡、兔各有多少只？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> cock <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">30</span>):</div><div class="line"><span class="meta">... </span>rabbit = <span class="number">30</span>-cock</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> rabbit*<span class="number">4</span> + cock*<span class="number">2</span>== <span class="number">90</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">'鸡的数量为'</span>,cock,<span class="string">'只'</span>)</div><div class="line"><span class="meta">... </span>print(<span class="string">'兔的数量为'</span>,rabbit,<span class="string">'只'</span>)</div><div class="line">...</div><div class="line">鸡的数量为 <span class="number">15</span> 只</div><div class="line">兔的数量为 <span class="number">15</span> 只</div></pre></td></tr></table></figure>
<h4 id="案例4求1100之间能被7整除但不能同时被5整除的所有整数">案例4：求1~100之间能被7整除，但不能同时被5整除的所有整数。</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">101</span>):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> (n%<span class="number">7</span> ==<span class="number">0</span>) <span class="keyword">and</span> n%<span class="number">5</span>!=<span class="number">0</span>:</div><div class="line"><span class="meta">... </span>print(n)</div><div class="line">...</div><div class="line"><span class="number">7</span></div><div class="line"><span class="number">14</span></div><div class="line"><span class="number">21</span></div><div class="line"><span class="number">28</span></div><div class="line"><span class="number">42</span></div><div class="line"><span class="number">49</span></div><div class="line"><span class="number">56</span></div><div class="line"><span class="number">63</span></div><div class="line"><span class="number">77</span></div><div class="line"><span class="number">84</span></div><div class="line"><span class="number">91</span></div><div class="line"><span class="number">98</span></div></pre></td></tr></table></figure>
<h4 id="案例输出水仙花数">案例：输出水仙花数</h4>
<p>所谓水仙花数，是指一个3位的十进制数，其余各位数字的立方和恰好等于该数本身。例如，153是水仙花数，因为<code>153=1^3+5^3+3^3</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>,<span class="number">1000</span>):</div><div class="line"><span class="meta">... </span>ge = i%<span class="number">10</span></div><div class="line"><span class="meta">... </span>shi = i//<span class="number">10</span>%<span class="number">10</span></div><div class="line"><span class="meta">... </span>bai = i//<span class="number">100</span></div><div class="line"><span class="meta">... </span><span class="keyword">if</span> ge**<span class="number">3</span> + shi**<span class="number">3</span> + bai**<span class="number">3</span> ==i:</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line">...</div><div class="line"><span class="number">153</span></div><div class="line"><span class="number">370</span></div><div class="line"><span class="number">371</span></div><div class="line"><span class="number">407</span></div></pre></td></tr></table></figure>
<h4 id="案例求200以内能被17整除的最大正整数">案例：求200以内能被17整除的最大正整数。</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">200</span>,<span class="number">0</span>,<span class="number">-2</span>):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> i%<span class="number">17</span> ==<span class="number">0</span>:</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="keyword">break</span></div><div class="line">...</div><div class="line"><span class="number">170</span></div></pre></td></tr></table></figure>
<h4 id="案例9whilebreak判断一个数字的奇偶数">案例9：while…break判断一个数字的奇偶数</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> a:</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> a % <span class="number">2</span> == <span class="number">0</span>:</div><div class="line"><span class="meta">... </span><span class="keyword">break</span></div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">"%d is olld number"</span>%a)</div><div class="line"><span class="meta">... </span>a = <span class="number">0</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%d is even number"</span>%a)</div><div class="line"><span class="number">8</span> <span class="keyword">is</span> even number</div></pre></td></tr></table></figure>
<p>当a=8的时候，执行循环体中的break跳出循环，执行最后的打印语句，得到结果8 is even number，如果a=9，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">9</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> a:</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> a % <span class="number">2</span> == <span class="number">0</span>:</div><div class="line"><span class="meta">... </span><span class="keyword">break</span></div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">"%d is odd number"</span>%a)</div><div class="line"><span class="meta">... </span>a = <span class="number">0</span></div><div class="line">...</div><div class="line"><span class="number">9</span> <span class="keyword">is</span> odd number</div></pre></td></tr></table></figure>
<p>此时会跳过break，进入else下面的语句。</p>
<h2 id="enumerate函数">enumerate函数</h2>
<p>enumerate()是python的内置函数。</p>
<p>enumerate在字典上是枚举、列举的意思，对于一个可迭代的（iterable）/可遍历的对象（如列表、字符串），enumerate将其组成一个索引序列，利用它可以同时获得索引和值。enumerate多用于在for循环中得到计数。</p>
<h3 id="同时得到一个元素的索引和内容">同时得到一个元素的索引和内容</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>seasons = [<span class="string">'Spring'</span>,<span class="string">'Summer'</span>,<span class="string">'Fall'</span>,<span class="string">'Winter'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(seasons)</div><div class="line">[<span class="string">'Spring'</span>, <span class="string">'Summer'</span>, <span class="string">'Fall'</span>, <span class="string">'Winter'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(enumerate(seasons)))</div><div class="line">[(<span class="number">0</span>, <span class="string">'Spring'</span>), (<span class="number">1</span>, <span class="string">'Summer'</span>), (<span class="number">2</span>, <span class="string">'Fall'</span>), (<span class="number">3</span>, <span class="string">'Winter'</span>)]</div></pre></td></tr></table></figure>
<h3 id="使用案例">使用案例</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>seasons = [<span class="string">'Spring'</span>,<span class="string">'Summer'</span>,<span class="string">'Fall'</span>,<span class="string">'Winter'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(seasons)</div><div class="line">[<span class="string">'Spring'</span>, <span class="string">'Summer'</span>, <span class="string">'Fall'</span>, <span class="string">'Winter'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(enumerate(seasons,start=<span class="number">3</span>)))</div><div class="line">[(<span class="number">3</span>, <span class="string">'Spring'</span>), (<span class="number">4</span>, <span class="string">'Summer'</span>), (<span class="number">5</span>, <span class="string">'Fall'</span>), (<span class="number">6</span>, <span class="string">'Winter'</span>)]</div></pre></td></tr></table></figure>
<h3 id="列表元素的提取">列表元素的提取</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>mylist = [<span class="string">"qiwsir"</span>,<span class="number">703</span>,<span class="string">'python'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(mylist)</div><div class="line">[<span class="string">'qiwsir'</span>, <span class="number">703</span>, <span class="string">'python'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(enumerate(mylist)))</div><div class="line">[(<span class="number">0</span>, <span class="string">'qiwsir'</span>), (<span class="number">1</span>, <span class="number">703</span>), (<span class="number">2</span>, <span class="string">'python'</span>)]</div></pre></td></tr></table></figure>
<h2 id="break语句-1">break语句</h2>
<p>break语句和continue语句在while循环及for循环中都可以使用，并且一般常与选择结构结合使用。break 语句可以跳出 for 和 while 的循环体。如果你从 for 或 while 循环中终止，任何对应的循环 else 块将不执行，如下所示：</p>
<h3 id="简单break案例">简单break案例</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">如果你需要遍历数字序列，可以使用内置range()函数。它会生成数列，例如: </div><div class="line"></div><div class="line">​```python</div><div class="line">&gt;&gt;&gt;<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</div><div class="line"><span class="meta">... </span>    print(i)</div><div class="line">...</div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line">​</div></pre></td></tr></table></figure>
<p>或者指定区间，如下所示：</p>
<p>​<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>,<span class="number">9</span>) :</div><div class="line">    print(i)</div><div class="line"> </div><div class="line">    </div><div class="line"><span class="number">5</span></div><div class="line"><span class="number">6</span></div><div class="line"><span class="number">7</span></div><div class="line"><span class="number">8</span></div><div class="line">&gt;&gt;&gt;</div><div class="line">​</div></pre></td></tr></table></figure></p>
<h4 id="range函数控制循环次数-1">range()函数控制循环次数。</h4>
<p>​<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</div><div class="line">        print((<span class="string">' * '</span>*i).center(n*<span class="number">3</span>))</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n, <span class="number">0</span>, <span class="number">-1</span>):</div><div class="line">        print((<span class="string">' * '</span>*i).center(n*<span class="number">3</span>))</div><div class="line">main(<span class="number">6</span>)</div><div class="line">​</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### break案例2：计算小于100的最大素数</div><div class="line">从下面的这个案例中就可以看出break语句在循环中的作用 。注：素质又叫质数，质数定义为在大于1的自然数中，除了1和它本身以外不再有其他因数。</div><div class="line"></div><div class="line">```python</div><div class="line">&gt;&gt;&gt; for n in range(100,1,-1):</div><div class="line">... for i in range(2,n):</div><div class="line">... if n%i == 0:</div><div class="line">... break</div><div class="line">... else:</div><div class="line">... print(n)</div><div class="line">... break</div><div class="line">...</div><div class="line">97</div></pre></td></tr></table></figure>
<h2 id="continue语句">continue语句</h2>
<p>continue语句被用来告诉Python跳过当前循环块中的剩余语句，然后继续进行下一轮循环，如下所示：</p>
<h3 id="continue案例1">continue案例1:</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ cat continue2.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> letter <span class="keyword">in</span> <span class="string">'Runoob'</span>:</div><div class="line">    <span class="keyword">if</span> letter == <span class="string">'o'</span>:</div><div class="line">        <span class="keyword">continue</span></div><div class="line">    print(<span class="string">'Currnet letter is: '</span>,letter)</div><div class="line"></div><div class="line">var = <span class="number">10</span></div><div class="line"><span class="keyword">while</span> var &gt; <span class="number">0</span>:</div><div class="line">    var = var <span class="number">-1</span></div><div class="line">    <span class="keyword">if</span> var == <span class="number">5</span>:  <span class="comment"># script will jump loop when var=5</span></div><div class="line">        <span class="keyword">continue</span></div><div class="line">    print(<span class="string">'Currnet variable is: '</span>,var)</div><div class="line">print(<span class="string">"Good bye!"</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ python3 continue2.py </div><div class="line">Currnet letter <span class="keyword">is</span>:  R</div><div class="line">Currnet letter <span class="keyword">is</span>:  u</div><div class="line">Currnet letter <span class="keyword">is</span>:  n</div><div class="line">Currnet letter <span class="keyword">is</span>:  b</div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">9</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">8</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">7</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">6</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">4</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">3</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">2</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">1</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">0</span></div><div class="line">Good bye!</div></pre></td></tr></table></figure>
<h3 id="continue案例2">continue案例2:</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">9</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> a:</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> a % <span class="number">2</span> == <span class="number">0</span>:</div><div class="line"><span class="meta">... </span>a = a<span class="number">-1</span></div><div class="line"><span class="meta">... </span><span class="keyword">continue</span> <span class="comment">#如果是偶数，就返回循环的开始</span></div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">"%d is olld number"</span>%a) <span class="comment">#如果是奇数，就打印出来</span></div><div class="line"><span class="meta">... </span>a = a<span class="number">-1</span></div><div class="line">...</div><div class="line"><span class="number">9</span> <span class="keyword">is</span> olld number</div><div class="line"><span class="number">7</span> <span class="keyword">is</span> olld number</div><div class="line"><span class="number">5</span> <span class="keyword">is</span> olld number</div><div class="line"><span class="number">3</span> <span class="keyword">is</span> olld number</div><div class="line"><span class="number">1</span> <span class="keyword">is</span> olld number</div></pre></td></tr></table></figure>
<h2 id="pass语句-1">pass语句</h2>
<p>Python pass是空语句，是为了保持程序结构的完整性。pass不做任何事情，一般用做占位语句，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;<span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line"><span class="meta">... </span>    <span class="keyword">pass</span>  <span class="comment"># 等待键盘中断 (Ctrl+C)</span></div></pre></td></tr></table></figure>
<h3 id="pass语句案例1">pass语句案例1</h3>
<p>在面向对象的程序设计中，pass语句经常这么使用，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEmptyClass</span>:</span></div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p>此时定义了一个类，只是现在没有具体想好怎么写它，先占一个空位。</p>
<h3 id="pass语句案例2">pass语句案例2</h3>
<p>以下代码在字母为<code>o</code>时执行pass语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ cat <span class="keyword">pass</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> letter <span class="keyword">in</span> <span class="string">'Runoob'</span>:</div><div class="line">    <span class="keyword">if</span> letter == <span class="string">'o'</span>:</div><div class="line">        <span class="keyword">pass</span></div><div class="line">        print(<span class="string">"Execute pass block"</span>)</div><div class="line">    print(<span class="string">'Current letter is :'</span>,letter)</div><div class="line"></div><div class="line">print(<span class="string">"Good, bye"</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ python3 <span class="keyword">pass</span>.py </div><div class="line">Current letter <span class="keyword">is</span> : R</div><div class="line">Current letter <span class="keyword">is</span> : u</div><div class="line">Current letter <span class="keyword">is</span> : n</div><div class="line">Execute <span class="keyword">pass</span> block</div><div class="line">Current letter <span class="keyword">is</span> : o</div><div class="line">Execute <span class="keyword">pass</span> block</div><div class="line">Current letter <span class="keyword">is</span> : o</div><div class="line">Current letter <span class="keyword">is</span> : b</div><div class="line">Good, bye</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/06/Python/Python学习笔记（6）-函数构建/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/06/Python/Python学习笔记（6）-函数构建/" itemprop="url">Python学习笔记（6）-函数构建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-06T12:00:00+08:00">
                2018-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5,020
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  22
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="函数的构建格式">函数的构建格式</h2>
<p>在Python中，函数的构建要遵循一定的格式，如下所示：</p>
<ol style="list-style-type: decimal">
<li>函数代码块以 def 关键词开头，后接函数标识符名称和圆括号 ()。</li>
<li>任何传入参数和自变量必须放在圆括号中间，圆括号之间可以用于定义参数。</li>
<li>函数的第一行语句可以选择性地使用文档字符串—用于存放函数说明。</li>
<li>函数内容以冒号起始，并且缩进。</li>
<li><code>return [表达式]</code>结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回 None。</li>
</ol>
<p>Python函数的构建方法示意图如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180519/mJ5cgIJekH.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="一个简单的函数构建">一个简单的函数构建</h2>
<p>在下面的例子中，构建了一个将华氏度转换为摄氏度的函数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fahrenheit_coverter</span><span class="params">(C)</span>:</span></div><div class="line">    fahrenheit = C*<span class="number">9</span>/<span class="number">5</span> +<span class="number">32</span></div><div class="line">    <span class="keyword">return</span> str(fahrenheit) +<span class="string">' F'</span></div><div class="line">C2F = fahrenheit_coverter(<span class="number">35</span>)</div><div class="line">print(C2F)</div></pre></td></tr></table></figure>
<p>将上述文件保存在C盘，命名为test.py，运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python t.py</div><div class="line"><span class="number">95.0</span> F</div></pre></td></tr></table></figure>
<h2 id="在交互模式下定义函数">在交互模式下定义函数</h2>
<p> 如果在交互模式下面定义函数，解释器会显示三个小点来提醒你定义还没有完成，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">test_python</span><span class="params">()</span>:</span></div><div class="line">...</div></pre></td></tr></table></figure>
<p>在函数定义完毕的结尾，必须输入一行空白行。定义函数会创建一个函数类的对象，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">test_python</span><span class="params">()</span>:</span></div><div class="line"><span class="meta">... </span>    print(<span class="string">"I test def function"</span>)</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>test_python()</div><div class="line">I test <span class="function"><span class="keyword">def</span> <span class="title">function</span></span></div><div class="line"><span class="function">&gt;&gt;&gt;</span></div></pre></td></tr></table></figure>
<p>第一行：def test_python(): 定义函数</p>
<p>第二行：print(“I test def function”) 输入函数的内容，前面要空四格</p>
<p>第三行：是一空行，输入几个空格，直接回车就行；</p>
<p>第四行：继续回车，函数创建完毕，输入test_python()，显示结果。</p>
<h2 id="函数的嵌套">函数的嵌套</h2>
<p>在函数中也能创建函数，如下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_lyrics</span><span class="params">()</span>:</span></div><div class="line">    print(<span class="string">"I'm a lumberjack, and I'm okay."</span>)</div><div class="line">    print(<span class="string">"I sleep all night and I work all day."</span>)</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">repeat_lyrics</span><span class="params">()</span>:</span></div><div class="line">    print_lyrics()</div><div class="line">repeat_lyrics()</div></pre></td></tr></table></figure>
<p>运行后如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">I<span class="string">'m a lumberjack, and I'</span>m okay.</div><div class="line">I sleep all night <span class="keyword">and</span> I work all day.</div></pre></td></tr></table></figure>
<h2 id="函数的参数传递">函数的参数传递</h2>
<p>在Python中，类型属于对象，变量是没有类型的，先看下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">a = <span class="string">"Runoob"</span></div></pre></td></tr></table></figure>
<p>在上述代码中，<code>[1, 2, 3]</code>是List类型，<code>&quot;Runoob&quot;</code>是String类型，而变量a是没有类型的，它仅仅是一个对象的引用（一个指针），它可以指向List类型的对象，也哦可以是指向String类型对象。</p>
<h2 id="可更改mutable与不可更改immutable对象">可更改(mutable)与不可更改(immutable)对象</h2>
<p>在python中，strings,tuples,和numbers是不可更改的对象，而list,dict等则是可以修改的对象。</p>
<ol style="list-style-type: decimal">
<li>不可变类型：变量赋值a=5后再赋值a=10，这里实际是新生成一个int值对象10，再让a指向它，而5被丢弃，不是改变a的值，相当于新生成了a。</li>
<li>可变类型：变量赋值la=[1,2,3,4]后再赋值la[2]=5则是将listla的第三个元素值更改，本身la没有动，只是其内部的一部分值被修改了。</li>
</ol>
<h2 id="python函数的参数传递">python函数的参数传递</h2>
<ol style="list-style-type: decimal">
<li>不可变类型：如整数、字符串、元组。如fun（a），传递的只是a的值，没有影响a对象本身。比如在fun（a）内部修改a的值，只是修改另一个复制的对象，不会影响a本身。</li>
<li>可变类型：如列表，字典。如fun（la），则是将la真正的传过去，修改后fun外部的la也会受影响</li>
</ol>
<p>在python中，一切皆对象，严格意义上来讲，我们不能说值传递还是引用传递，我们应该说传不可变对象和传可变对象。</p>
<h2 id="python传不可变对象实例">python传不可变对象实例</h2>
<p>看这个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat para.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">ChangeInt</span><span class="params">(a)</span>:</span></div><div class="line">    a = <span class="number">10</span></div><div class="line"></div><div class="line">b = <span class="number">2</span></div><div class="line">ChangeInt(b)</div><div class="line">print(b)</div><div class="line"><span class="comment"># The result is 2</span></div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 para.py </div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<p>在这个案例中，有int对象2，指向它的变量是b，在传递给ChangeInt函数时，按传值的方式复制了变量b，a和b都指向了同一个Int对象，在a=10时，则新生成一个int值对象10，并让a指向它。</p>
<h2 id="python传可变对象实例">python传可变对象实例</h2>
<p>可变对象在函数里修改了参数，那么在调用这个函数的函数里，原始的参数也被改变了，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat para2.py</div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">changeme</span><span class="params">(mylist)</span>:</span></div><div class="line">    mylist.append([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</div><div class="line">    print(<span class="string">"The value inside function is: "</span>,mylist)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">mylist=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>]</div><div class="line">changeme(mylist)</div><div class="line">print(<span class="string">"The value outside function is: "</span>,mylist)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 para2.py</div><div class="line">The value inside function <span class="keyword">is</span>:  [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</div><div class="line">The value outside function <span class="keyword">is</span>:  [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</div></pre></td></tr></table></figure>
<p>传入函数的和在末尾添加新内容的对象用的是同一个引用，因此输出了相同的结果。</p>
<h2 id="函数的参数">函数的参数</h2>
<p>以下是调用函数时可使用的正式参数类型：</p>
<ol style="list-style-type: decimal">
<li>必需参数</li>
<li>关键字参数</li>
<li>默认参数</li>
<li>不定长参数</li>
</ol>
<h3 id="必需参数">必需参数</h3>
<p>必需参数须以正确的顺序传入函数。调用时的数量必须和声明时的一样。调用printme()函数，你必须传入一个参数，不然会出现语法错误，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function1.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span><span class="params">(str)</span>:</span></div><div class="line">    print(str)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printme()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function1.py </div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"function1.py"</span>, line <span class="number">7</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    printme()</div><div class="line">TypeError: printme() missing <span class="number">1</span> required positional argument: <span class="string">'str'</span></div></pre></td></tr></table></figure>
<h3 id="关键字参数">关键字参数</h3>
<p>关键字参数和函数调用关系紧密，函数调用使用关键字参数来确定传入的参数值。使用关键字参数允许函数调用时参数的顺序与声明时不一致，因为 Python 解释器能够用参数名匹配参数值。以下实例在函数 printme() 调用时使用参数名：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function2.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span><span class="params">(str)</span>:</span></div><div class="line">    print(str)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printme(str=<span class="string">"Runoob tutorial"</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function2.py </div><div class="line">Runoob tutorial</div></pre></td></tr></table></figure>
<p>以下实例中演示了函数参数的使用不需要使用指定顺序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function3.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span><span class="params">(name, age)</span>:</span></div><div class="line">    print(<span class="string">"Name: "</span>,name)</div><div class="line">    print(<span class="string">"Age: "</span>,age)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printinfo(age=<span class="number">50</span>,name=<span class="string">"runoob"</span>)</div><div class="line">printinfo(<span class="string">"Zhang"</span>,<span class="number">20</span>)</div><div class="line">printinfo(<span class="number">20</span>,<span class="string">"Zhang"</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function3.py </div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">50</span></div><div class="line">Name:  Zhang</div><div class="line">Age:  <span class="number">20</span></div><div class="line">Name:  <span class="number">20</span></div><div class="line">Age:  Zhang</div></pre></td></tr></table></figure>
<p>从结果来看，如果不按顺序输入参数，那么可以使用赋值语句将实参直接赋值给相应的形参。</p>
<h3 id="默认参数">默认参数</h3>
<p>调用函数时，如果没有传递参数，则会使用默认参数。以下实例中如果没有传入age参数，则使用默认值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function4.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span><span class="params">(name,age=<span class="number">35</span>)</span>:</span></div><div class="line">    print(<span class="string">"Name: "</span>,name)</div><div class="line">    print(<span class="string">"Age: "</span>,age)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printinfo(age=<span class="number">50</span>, name=<span class="string">"runoob"</span>)</div><div class="line">print(<span class="string">"------------------------"</span>)</div><div class="line">printinfo(name=<span class="string">"runoob"</span>)</div><div class="line">printinfo(<span class="number">20</span>,<span class="string">"runoob"</span>)</div><div class="line">printinfo(<span class="string">"runoob"</span>,<span class="number">20</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function4.py </div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">50</span></div><div class="line">------------------------</div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">35</span></div><div class="line">Name:  <span class="number">20</span></div><div class="line">Age:  runoob</div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">20</span></div></pre></td></tr></table></figure>
<p>含有默认值的参数必须要放到最后，例如在上面的那个案例中，<code>def printinfo(name,age=35)</code>中age是默认参数，其值是35，它要放到name这个参数后面。</p>
<h3 id="多值参数">多值参数</h3>
<p>有的时候，我们向某个函数传递的参数个数是不确定，这个时候就可以使用多值参数。python中有两种多值参数。</p>
<ul>
<li><p>参数前加一个<code>*</code>，就可以接收元组；</p></li>
<li><p>参数前加两个<code>*</code>，即<code>**</code>，就有接收字典。</p></li>
</ul>
<p>通常在给多值参数命名时，习惯使用以下两个名字，例如：</p>
<ul>
<li><code>*args</code>–存放元组参数；</li>
<li><code>**kwargs</code>–存放字典。</li>
</ul>
<p>基本语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">functionname</span><span class="params">([formal_args,] *var_args_tuple )</span>:</span></div><div class="line">   <span class="string">"函数_文档字符串"</span></div><div class="line">   function_suite</div><div class="line">   <span class="keyword">return</span> [expression]</div></pre></td></tr></table></figure>
<p>加了星号（<code>*</code>）的变量名会存放所有未命名的变量参数。如果在函数调用时没有指定参数，它就是一个空元组。我们也可以不向函数传递未命名的变量。如下实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function5.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span><span class="params">(arg1, *vartuple)</span>:</span></div><div class="line">    print(<span class="string">"Output: "</span>)</div><div class="line">    print(arg1)</div><div class="line">    <span class="keyword">for</span> var <span class="keyword">in</span> vartuple:</div><div class="line">        print(var)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printinfo(<span class="number">10</span>)</div><div class="line">printinfo(<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function5.py </div><div class="line">Output: </div><div class="line"><span class="number">10</span></div><div class="line">Output: </div><div class="line"><span class="number">11</span></div><div class="line"><span class="number">12</span></div><div class="line"><span class="number">13</span></div></pre></td></tr></table></figure>
<p>再看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(num, *nums, **person)</span>:</span></div><div class="line"></div><div class="line">    print(num)</div><div class="line">    print(nums)</div><div class="line">    print(person)</div><div class="line"></div><div class="line">demo(<span class="number">1</span>) <span class="comment"># 只传递一个参数</span></div><div class="line"><span class="comment"># demo(1,2,3,4,5) # 传递多个参数</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span></div><div class="line">()</div><div class="line">&#123;&#125;</div></pre></td></tr></table></figure>
<p>当只传递1个参数时，这个参数就传递给了<code>num</code>这个形参，运行结果就是1，<code>*nums</code>与<code>**person</code>两个分别是元组与字典，并没有给它们传递参数。再看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(num, *nums, **person)</span>:</span></div><div class="line"></div><div class="line">    print(num)</div><div class="line">    print(nums)</div><div class="line">    print(person)</div><div class="line"></div><div class="line"><span class="comment"># demo(1) # 只传递一个参数</span></div><div class="line">demo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>) <span class="comment"># 传递多个参数</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span></div><div class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line">&#123;&#125;</div></pre></td></tr></table></figure>
<p>向函数传递了<code>1,2,3,4,5</code>五个参数，其中<code>1</code>给了<code>num</code>，<code>2,3,4,5</code>给了<code>*nums</code>，就是元组，而<code>**person</code>中并没有相应参数。再看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(num, *nums, **person)</span>:</span></div><div class="line"></div><div class="line">    print(num)</div><div class="line">    print(nums)</div><div class="line">    print(person)</div><div class="line"></div><div class="line"><span class="comment"># demo(1) # 只传递一个参数</span></div><div class="line">demo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>, name=<span class="string">"小明"</span>) <span class="comment"># 传递多个参数</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span></div><div class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'小明'</span>&#125;</div></pre></td></tr></table></figure>
<p>只解释第三行，可以发现<code>name=&quot;小明&quot;</code>传递给了<code>**person</code>。再添加一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(num, *nums, **person)</span>:</span></div><div class="line"></div><div class="line">    print(num)</div><div class="line">    print(nums)</div><div class="line">    print(person)</div><div class="line"></div><div class="line"><span class="comment"># demo(1) # 只传递一个参数</span></div><div class="line">demo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>, name=<span class="string">"小明"</span>,age=<span class="number">12</span>) <span class="comment"># 传递多个参数</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span></div><div class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'小明'</span>, <span class="string">'age'</span>: <span class="number">12</span>&#125;</div></pre></td></tr></table></figure>
<p>例如案例：定义一个溇sum_numbers，可以接收任意多个整数，将传递的所有数字累加，并返回累加结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum_numbers</span><span class="params">(*args)</span>:</span></div><div class="line"></div><div class="line">    num = <span class="number">0</span></div><div class="line">    print(args)</div><div class="line"></div><div class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> args:</div><div class="line">        num += n</div><div class="line"></div><div class="line">    <span class="keyword">return</span> num</div><div class="line"></div><div class="line"></div><div class="line">result = sum_numbers(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line">print(result)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line"><span class="number">152</span></div></pre></td></tr></table></figure>
<h3 id="元组和字典的拆包">元组和字典的拆包</h3>
<p>在调用带有多值参数的函数时，如果我们想把一个元组变量直接传递给args，将一个字典变量直接传递给kwargs，那就要使用<strong>拆包</strong>担任，简化参数的传递，拆包的方式就是在元组变量前增加一个<code>*</code>，在字典变量前增加两个<code>*</code>，先看一个简单案例，在这个案例中，函数的实参前面并没有添加<code>*</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(*args, **kwargs)</span>:</span></div><div class="line"></div><div class="line">    print(args)</div><div class="line">    print(kwargs)</div><div class="line"></div><div class="line">gl_nums = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</div><div class="line">gl_xiaoming = &#123;<span class="string">"name"</span>:<span class="string">"Xiaoming"</span>, <span class="string">"age"</span>:<span class="number">18</span>&#125;</div><div class="line"></div><div class="line">demo(gl_nums, gl_xiaoming)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">((<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), &#123;<span class="string">'name'</span>: <span class="string">'Xiaoming'</span>, <span class="string">'age'</span>: <span class="number">18</span>&#125;)</div><div class="line">&#123;&#125;</div></pre></td></tr></table></figure>
<p>从结果中可以发现，<code>gl_nums</code>, <code>gl_xiaoming</code>这两个参数都传递给了形参，都是元组，如果我们想把<code>gl_nums</code>参数传递给元组，即<code>args</code>，把<code>gl_xiaoming</code>传递给字典，即<code>kwargs</code>，那么就需要在gl_nums, gl_xiaoming前面加<code>*</code>号，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo</span><span class="params">(*args, **kwargs)</span>:</span></div><div class="line"></div><div class="line">    print(args)</div><div class="line">    print(kwargs)</div><div class="line"></div><div class="line">gl_nums = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</div><div class="line">gl_xiaoming = &#123;<span class="string">"name"</span>:<span class="string">"Xiaoming"</span>, <span class="string">"age"</span>:<span class="number">18</span>&#125;</div><div class="line"></div><div class="line">demo(*gl_nums, **gl_xiaoming)<span class="comment">#添加了星号</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'Xiaoming'</span>, <span class="string">'age'</span>: <span class="number">18</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="匿名函数lambda">匿名函数lambda</h2>
<p>python使用lambda来创建匿名函数。所谓匿名，意即不再使用def语句这样标准的形式定义一个函数，它的特点如下：</p>
<ol style="list-style-type: decimal">
<li>lambda只是一个表达式，函数体比def简单很多。</li>
<li>lambda的主体是一个表达式，而不是一个代码块。仅仅能在lambda表达式中封装有限的逻辑进去。</li>
<li>lambda函数拥有自己的命名空间，且不能访问自己参数列表之外或全局命名空间里的参数。</li>
<li>虽然lambda函数看起来只能写一行，却不等同于C或C++的内联函数，后者的目的是调用小函数时不占用栈内存从而增加运行效率。</li>
</ol>
<p>语法格式如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">lambda</span> [arg1 [,arg2,.....argn]]:expression</div></pre></td></tr></table></figure></p>
<p>看一个简单的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">lambda</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">sum = <span class="keyword">lambda</span> arg1, arg2: arg1 + arg2</div><div class="line"><span class="comment"># 这里就是定义了一个函数，这个函数实现的功能就是两个数字相加</span></div><div class="line"></div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">10</span>, <span class="number">20</span>))</div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">20</span>,<span class="number">20</span>))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">lambda</span>.py </div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">30</span></div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">40</span></div></pre></td></tr></table></figure>
<p>上面的这个案例如果改成常规的函数写法，则是如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">lambda</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">sum = <span class="keyword">lambda</span> arg1, arg2: arg1 + arg2</div><div class="line"></div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">10</span>, <span class="number">20</span>))</div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">20</span>,<span class="number">20</span>))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">lambda</span>.py </div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">30</span></div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">40</span></div></pre></td></tr></table></figure>
<h3 id="匿名函数与普通函数的区别">匿名函数与普通函数的区别</h3>
<p>看下面的一段代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat <span class="keyword">lambda</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a,b)</span>:</span></div><div class="line">    <span class="keyword">return</span> a+b</div><div class="line">a=<span class="number">2</span></div><div class="line">b=<span class="number">3</span></div><div class="line">print(<span class="string">'a+b='</span>, add(a,b))</div><div class="line"></div><div class="line">a=<span class="number">2</span></div><div class="line">b=<span class="number">3</span></div><div class="line">addl = <span class="keyword">lambda</span> a,b:a+b</div><div class="line">print(<span class="string">'a+b='</span>,addl(a,b))</div><div class="line"></div><div class="line">print(<span class="string">'type(add(a,b)):'</span>,type(add(a,b)))</div><div class="line">print(<span class="string">'type(addl):'</span>,type(addl))</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 <span class="keyword">lambda</span>.py </div><div class="line">a+b= <span class="number">5</span></div><div class="line">a+b= <span class="number">5</span></div><div class="line">type(add(a,b)): &lt;<span class="class"><span class="keyword">class</span> '<span class="title">int</span>'&gt;</span></div><div class="line"><span class="class"><span class="title">type</span><span class="params">(addl)</span>:</span> &lt;<span class="class"><span class="keyword">class</span> '<span class="title">function</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>从上面我们可以看见add(a,b)的类型是int，而addl(a,b)的类型则是函数。从这里也能看出Lambda表达式确实是一种函数的表示方式。lambda的一般形式是关键字lambda后面跟一个或多个参数，紧跟一个冒号，以后是一个表达式。lambda是一个表达式而不是一个语句。它能够出现在python语法不允许def出现的地方。</p>
<h3 id="lambda案例第1快速组建列表">lambda案例第1:快速组建列表</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = <span class="keyword">lambda</span> x:x**<span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>l = [list1(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(l)</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>]</div></pre></td></tr></table></figure>
<h3 id="lambda函数减少函数命名">lambda函数：减少函数命名</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat lambda1.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">many</span><span class="params">(n)</span>:</span></div><div class="line">        <span class="keyword">return</span> n*f</div><div class="line">    <span class="keyword">return</span> many</div><div class="line">food = input(<span class="string">'What kind of fruti do you like?'</span>)</div><div class="line">f = eat(food)</div><div class="line">print(f(<span class="number">5</span>))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 lambda1.py </div><div class="line">What kind of fruti do you like? Yes</div><div class="line"> Yes Yes Yes Yes Yes</div></pre></td></tr></table></figure>
<p>上述代码改写为lambda则是如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> n:f*n</div><div class="line">    </div><div class="line">food = input(<span class="string">'What kind of fruit do you like?'</span>)</div><div class="line">f = eat(food)</div><div class="line">print(f(<span class="number">5</span>))</div></pre></td></tr></table></figure>
<p>再看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat original.py <span class="comment"># 这是原代码</span></div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line">freshfruit = [<span class="string">' banana'</span>,<span class="string">' loganberry '</span>,<span class="string">'passion fruit'</span>] <span class="comment"># 建立一个列表</span></div><div class="line">print(freshfruit) <span class="comment">#显示列表，发现前2个元素有空格</span></div><div class="line">list3 =[w.strip() <span class="keyword">for</span> w <span class="keyword">in</span> freshfruit] <span class="comment"># 去除空格</span></div><div class="line">print(list3) <span class="comment">#空格去掉后的效果</span></div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 original.py </div><div class="line">[<span class="string">' banana'</span>, <span class="string">' loganberry '</span>, <span class="string">'passion fruit'</span>]</div><div class="line">[<span class="string">'banana'</span>, <span class="string">'loganberry'</span>, <span class="string">'passion fruit'</span>]</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat original_trans.py <span class="comment"># 改写为lambda形式</span></div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">freshfruit = [<span class="string">' banana'</span>,<span class="string">' loganberry '</span>,<span class="string">'passion fruit'</span>]</div><div class="line">list3 = list(map(<span class="keyword">lambda</span> x:x.strip(),freshfruit))</div><div class="line"><span class="comment"># lambda x:x.strip()这里就相当于一个函数，map则是将这个函数映射到freshfruit的每个元素上</span></div><div class="line">print(list3)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 original_trans.py </div><div class="line">[<span class="string">'banana'</span>, <span class="string">'loganberry'</span>, <span class="string">'passion fruit'</span>]</div></pre></td></tr></table></figure>
<h3 id="案例使用列表推导式实现嵌套列表的平铺如下所示">案例：使用列表推导式实现嵌套列表的平铺，如下所示：</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>vec = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print([num <span class="keyword">for</span> elem <span class="keyword">in</span> vec <span class="keyword">for</span> num <span class="keyword">in</span> elem])</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div></pre></td></tr></table></figure>
<p>这个列表推导式中有2个循环，第1个循环可以看作是外循环，执行得慢，第2个循环是内循环，执行得快，上面代码等价于下面的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat test1.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">vec = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]]</div><div class="line">result = []</div><div class="line"><span class="keyword">for</span> elem <span class="keyword">in</span> vec:</div><div class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> elem:</div><div class="line">        result.append(num)</div><div class="line">print(result)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 test1.py </div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div></pre></td></tr></table></figure>
<h3 id="案例过滤掉不合条件的元素">案例：过滤掉不合条件的元素</h3>
<p>列表推导式中可以使用if语句来进行筛选，只在结果列表中保留符合条件的元素，下面的代码是过滤当前目录下的所有文件，只保留以<code>.py</code>结尾的文件，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print([filename <span class="keyword">for</span> filename <span class="keyword">in</span> os.listdir(<span class="string">'.'</span>) <span class="keyword">if</span> filename.endswith(<span class="string">'.py'</span>)])</div><div class="line">[<span class="string">'a.py'</span>, <span class="string">'count_line.py'</span>, <span class="string">'practice.py'</span>, <span class="string">'python.py'</span>, <span class="string">'t.py'</span>]</div></pre></td></tr></table></figure></p>
<p>代码解释：</p>
<ol style="list-style-type: decimal">
<li><code>os.listdir()</code>方法用于返回指定的文件夹包含的文件或文件夹的名字的列表。这个列表以字母顺序，括号中的参数可以是路径，例如c:，也可以不加，用’.’来表示。</li>
<li><code>endswith()</code>方法用于判断字符串是否以指定后缀结尾，如果以指定后缀结尾返回True，否则返回False。可选参数“start”与“end”为检索字符串的开始与结束位置。</li>
</ol>
<h3 id="案例过滤满足一定条件的元素">案例：过滤满足一定条件的元素</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list4= [<span class="number">-1</span>, <span class="number">-4</span>, <span class="number">6</span>, <span class="number">7.5</span> ,<span class="number">-2.3</span>, <span class="number">9</span>, <span class="number">-11</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list4)</div><div class="line">[<span class="number">-1</span>, <span class="number">-4</span>, <span class="number">6</span>, <span class="number">7.5</span>, <span class="number">-2.3</span>, <span class="number">9</span>, <span class="number">-11</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = [i <span class="keyword">for</span> i <span class="keyword">in</span> list4 <span class="keyword">if</span> i &lt; <span class="number">0</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</div><div class="line">[<span class="number">-1</span>, <span class="number">-4</span>, <span class="number">-2.3</span>, <span class="number">-11</span>]</div></pre></td></tr></table></figure>
<h2 id="带有返回值的函数">带有返回值的函数</h2>
<p><code>return[表达式]</code>语句用于退出函数，选择性地向调用方返回一个表达式。不带参数值的<code>return</code>语句返回<code>None</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">return</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">(arg1, arg2)</span>:</span></div><div class="line">    total = arg1 + arg2</div><div class="line">    print(<span class="string">"Inside function is :  "</span>,total)</div><div class="line">    <span class="keyword">return</span> total</div><div class="line"></div><div class="line">total = sum(<span class="number">10</span>, <span class="number">20</span>)</div><div class="line">print(<span class="string">"Outside function is : "</span>,total)</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">return</span>.py </div><div class="line">Inside function <span class="keyword">is</span> :   <span class="number">30</span></div><div class="line">Outside function <span class="keyword">is</span> :  <span class="number">30</span></div></pre></td></tr></table></figure>
<h2 id="变量作用域">变量作用域</h2>
<p>Python中，程序的变量并不是在哪个位置都可以访问的，访问权限决定于这个变量是在哪里赋值的。变量的作用域决定了在哪一部分程序可以访问哪个特定的变量名称。Python的作用域一共有4种，分别是： 1. L（Local）局部作用域</p>
<ol start="2" style="list-style-type: decimal">
<li><p>E（Enclosing）闭包函数外的函数中</p></li>
<li><p>G（Global）全局作用域</p></li>
<li><p>B（Built-in）内建作用域</p></li>
</ol>
<p>Pyhton以<code>L–&gt;E–&gt;G–&gt;B</code>的规则查找，即：在局部找不到，便会去局部外的局部找（例如闭包），再找不到就会去全局找，再者去内建中找，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">x = int(<span class="number">2.9</span>)  <span class="comment"># 内建作用域</span></div><div class="line"> </div><div class="line">g_count = <span class="number">0</span>  <span class="comment"># 全局作用域</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></div><div class="line">    o_count = <span class="number">1</span>  <span class="comment"># 闭包函数外的函数中</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></div><div class="line">        i_count = <span class="number">2</span>  <span class="comment"># 局部作用域</span></div></pre></td></tr></table></figure>
<p>Python中只有<code>模块（module）</code>，<code>类（class）</code>以及函数<code>（def、lambda）</code>才会引入新的作用域，其它的代码块（如<code>if/elif/else/</code>、<code>try/except</code>、<code>for/while</code>等）是不会引入新的作用域的，也就是说这些语句内定义的变量，外部也可以访问，如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> <span class="keyword">True</span>:</div><div class="line"><span class="meta">... </span>    msg = <span class="string">"I am a learner"</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>msg</div><div class="line"><span class="string">'I am a learner'</span></div></pre></td></tr></table></figure>
<p>在这个案例中，msg变量定义在if语句块中，但外部还是可以访问的。如果将msg定义在函数中，则它就是局部变量，外部不能访问，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat local_variable.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></div><div class="line">    msg_inner = <span class="string">"I am a learner"</span></div><div class="line"></div><div class="line">print(msg_inner)</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 local_variable.py </div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"local_variable.py"</span>, line <span class="number">6</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    print(msg_inner)</div><div class="line">NameError: name <span class="string">'msg_inner'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</div></pre></td></tr></table></figure>
<p>从错误提示就能看出，msg_inner并示未定义，因为它是局部变量，只能在函数内部使用。</p>
<h2 id="全局变量和局部变量">全局变量和局部变量</h2>
<p>定义在函数内部的变量拥有一个局部作用域（局部变量），定义在函数外的拥有全局作用域（全局变量）。局部变量只能在其被声明的函数内部访问，而全局变量可以在整个程序范围内访问。调用函数时，所有在函数内声明的变量名称都将被加入到作用域中，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat global_local_variable.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">total = <span class="number">0</span> </div><div class="line"><span class="comment"># this is a global variable</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">(arg1, arg2)</span>:</span></div><div class="line">    total = arg1 + arg2</div><div class="line">    <span class="comment"># Here, total is a local variable</span></div><div class="line">    print(<span class="string">"Variable inside function is local variable: "</span>,total)</div><div class="line">    <span class="keyword">return</span> total</div><div class="line"></div><div class="line">sum(<span class="number">10</span>, <span class="number">20</span>)</div><div class="line">print(<span class="string">"Variable outside function is global variable: "</span>,total)</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 global_local_variable.py </div><div class="line">Variable inside function <span class="keyword">is</span> local variable:  <span class="number">30</span></div><div class="line">Variable outside function <span class="keyword">is</span> <span class="keyword">global</span> variable:  <span class="number">0</span></div></pre></td></tr></table></figure>
<h2 id="global和nonlocal关键字">global和nonlocal关键字</h2>
<p>当内部作用域想修改外部作用域的变量时，就要用到global和nonlocal关键字，在下面的案例中，修改了全局变量num：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">nonlocal</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">num = <span class="number">1</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">global</span> num <span class="comment"># need to keyword "global" for statement</span></div><div class="line">    print(num)</div><div class="line">    num = <span class="number">123</span></div><div class="line">    print(num)</div><div class="line"></div><div class="line">fun1()</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">nonlocal</span>.py </div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">123</span></div></pre></td></tr></table></figure>
<p>如果要修改嵌套作用域（enclosing作用域，外层非全局作用域）中的变量则需要nonlocal关键字了，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat nonlocal2.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></div><div class="line">    num = <span class="number">10</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></div><div class="line">        <span class="keyword">nonlocal</span> num </div><div class="line">        num = <span class="number">100</span></div><div class="line">        print(num)</div><div class="line">    inner()</div><div class="line">    print(num)</div><div class="line">outer()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 nonlocal2.py </div><div class="line"><span class="number">100</span></div><div class="line"><span class="number">100</span></div></pre></td></tr></table></figure>
<p>再看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat action_scope_error.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">a = <span class="number">10</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></div><div class="line">    a = a + <span class="number">1</span></div><div class="line">    print(a)</div><div class="line">test()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 action_scope_error.py </div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"action_scope_error.py"</span>, line <span class="number">7</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    test()</div><div class="line">  File <span class="string">"action_scope_error.py"</span>, line <span class="number">5</span>, <span class="keyword">in</span> test</div><div class="line">    a = a + <span class="number">1</span></div><div class="line">UnboundLocalError: local variable <span class="string">'a'</span> referenced before assignment</div></pre></td></tr></table></figure>
<p>错误信息为局部作用域引用错误，因为test函数中的a使用的是局部变量，未定义，无法修改。</p>
<h2 id="递归">递归</h2>
<p>递归意思就是函数自己调用自己，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum_number</span><span class="params">(num)</span>:</span></div><div class="line"></div><div class="line">    print(num)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> num == <span class="number">1</span>:</div><div class="line">        <span class="keyword">return</span> <span class="comment"># 递归的出品，当参数满足某个条件时，不再执行函数</span></div><div class="line"></div><div class="line">    sum_number(num - <span class="number">1</span>) <span class="comment"># 函数自己调用自己</span></div><div class="line"></div><div class="line">sum_number(<span class="number">3</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">3</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">1</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/14/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/16/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">RVDSD</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">226</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">112</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RVDSD</span>

  
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_pv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>


<div class="BbeiAn-info">
	<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41018102000118" style="color:#909090;text-decoration:none;padding-left:0px;no-repeat left center" rel="nofollow">豫公网安备 41018102000118</a>	  <!--这里将图标作为了背景，以使得能和后面的文字在同一行-->
</div>

  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共915.6k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
