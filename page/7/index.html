<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="RVDSD的个人笔记本">
<meta property="og:url" content="http://rvdsd.top/page/7/index.html">
<meta property="og:site_name" content="RVDSD的个人笔记本">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RVDSD的个人笔记本">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://rvdsd.top/page/7/"/>





  <title>RVDSD的个人笔记本</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RVDSD的个人笔记本</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学习过程中的输出</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/06/Python/Python学习笔记（6）-函数构建/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/06/Python/Python学习笔记（6）-函数构建/" itemprop="url">Python学习笔记（6）-函数构建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-06T12:00:00+08:00">
                2018-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,147
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  18
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="函数的构建格式">函数的构建格式</h2>
<p>在Python中，函数的构建要遵循一定的格式，如下所示：</p>
<ol style="list-style-type: decimal">
<li>函数代码块以 def 关键词开头，后接函数标识符名称和圆括号 ()。</li>
<li>任何传入参数和自变量必须放在圆括号中间，圆括号之间可以用于定义参数。</li>
<li>函数的第一行语句可以选择性地使用文档字符串—用于存放函数说明。</li>
<li>函数内容以冒号起始，并且缩进。</li>
<li><code>return [表达式]</code>结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回 None。</li>
</ol>
<p>Python函数的构建方法示意图如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180519/mJ5cgIJekH.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="一个简单的函数构建">一个简单的函数构建</h2>
<p>在下面的例子中，构建了一个将华氏度转换为摄氏度的函数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fahrenheit_coverter</span><span class="params">(C)</span>:</span></div><div class="line">    fahrenheit = C*<span class="number">9</span>/<span class="number">5</span> +<span class="number">32</span></div><div class="line">    <span class="keyword">return</span> str(fahrenheit) +<span class="string">' F'</span></div><div class="line">C2F = fahrenheit_coverter(<span class="number">35</span>)</div><div class="line">print(C2F)</div></pre></td></tr></table></figure>
<p>将上述文件保存在C盘，命名为test.py，运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python t.py</div><div class="line"><span class="number">95.0</span> F</div></pre></td></tr></table></figure>
<h2 id="在交互模式下定义函数">在交互模式下定义函数</h2>
<p> 如果在交互模式下面定义函数，解释器会显示三个小点来提醒你定义还没有完成，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">test_python</span><span class="params">()</span>:</span></div><div class="line">...</div></pre></td></tr></table></figure>
<p>在函数定义完毕的结尾，必须输入一行空白行。定义函数会创建一个函数类的对象，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">test_python</span><span class="params">()</span>:</span></div><div class="line"><span class="meta">... </span>    print(<span class="string">"I test def function"</span>)</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>test_python()</div><div class="line">I test <span class="function"><span class="keyword">def</span> <span class="title">function</span></span></div><div class="line"><span class="function">&gt;&gt;&gt;</span></div></pre></td></tr></table></figure>
<p>第一行：def test_python(): 定义函数</p>
<p>第二行：print(“I test def function”) 输入函数的内容，前面要空四格</p>
<p>第三行：是一空行，输入几个空格，直接回车就行；</p>
<p>第四行：继续回车，函数创建完毕，输入test_python()，显示结果。</p>
<h2 id="函数的嵌套">函数的嵌套</h2>
<p>在函数中也能创建函数，如下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_lyrics</span><span class="params">()</span>:</span></div><div class="line">    print(<span class="string">"I'm a lumberjack, and I'm okay."</span>)</div><div class="line">    print(<span class="string">"I sleep all night and I work all day."</span>)</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">repeat_lyrics</span><span class="params">()</span>:</span></div><div class="line">    print_lyrics()</div><div class="line">repeat_lyrics()</div></pre></td></tr></table></figure>
<p>运行后如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">I<span class="string">'m a lumberjack, and I'</span>m okay.</div><div class="line">I sleep all night <span class="keyword">and</span> I work all day.</div></pre></td></tr></table></figure>
<h2 id="函数的参数传递">函数的参数传递</h2>
<p>在Python中，类型属于对象，变量是没有类型的，先看下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">a = <span class="string">"Runoob"</span></div></pre></td></tr></table></figure>
<p>在上述代码中，<code>[1, 2, 3]</code>是List类型，<code>&quot;Runoob&quot;</code>是String类型，而变量a是没有类型的，它仅仅是一个对象的引用（一个指针），它可以指向List类型的对象，也哦可以是指向String类型对象。</p>
<h2 id="可更改mutable与不可更改immutable对象">可更改(mutable)与不可更改(immutable)对象</h2>
<p>在python中，strings,tuples,和numbers是不可更改的对象，而list,dict等则是可以修改的对象。</p>
<ol style="list-style-type: decimal">
<li>不可变类型：变量赋值a=5后再赋值a=10，这里实际是新生成一个int值对象10，再让a指向它，而5被丢弃，不是改变a的值，相当于新生成了a。</li>
<li>可变类型：变量赋值la=[1,2,3,4]后再赋值la[2]=5则是将listla的第三个元素值更改，本身la没有动，只是其内部的一部分值被修改了。</li>
</ol>
<h2 id="python函数的参数传递">python函数的参数传递：</h2>
<ol style="list-style-type: decimal">
<li>不可变类型：如整数、字符串、元组。如fun（a），传递的只是a的值，没有影响a对象本身。比如在fun（a）内部修改a的值，只是修改另一个复制的对象，不会影响a本身。</li>
<li>可变类型：如列表，字典。如fun（la），则是将la真正的传过去，修改后fun外部的la也会受影响</li>
</ol>
<p>在python中，一切皆对象，严格意义上来讲，我们不能说值传递还是引用传递，我们应该说传不可变对象和传可变对象。</p>
<h2 id="python传不可变对象实例">python传不可变对象实例</h2>
<p>看这个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat para.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">ChangeInt</span><span class="params">(a)</span>:</span></div><div class="line">    a = <span class="number">10</span></div><div class="line"></div><div class="line">b = <span class="number">2</span></div><div class="line">ChangeInt(b)</div><div class="line">print(b)</div><div class="line"><span class="comment"># The result is 2</span></div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 para.py </div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<p>在这个案例中，有int对象2，指向它的变量是b，在传递给ChangeInt函数时，按传值的方式复制了变量b，a和b都指向了同一个Int对象，在a=10时，则新生成一个int值对象10，并让a指向它。</p>
<h2 id="python传可变对象实例">python传可变对象实例</h2>
<p>可变对象在函数里修改了参数，那么在调用这个函数的函数里，原始的参数也被改变了，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat para2.py</div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">changeme</span><span class="params">(mylist)</span>:</span></div><div class="line">    mylist.append([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</div><div class="line">    print(<span class="string">"The value inside function is: "</span>,mylist)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">mylist=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>]</div><div class="line">changeme(mylist)</div><div class="line">print(<span class="string">"The value outside function is: "</span>,mylist)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 para2.py</div><div class="line">The value inside function <span class="keyword">is</span>:  [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</div><div class="line">The value outside function <span class="keyword">is</span>:  [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</div></pre></td></tr></table></figure>
<p>传入函数的和在末尾添加新内容的对象用的是同一个引用，因此输出了相同的结果。</p>
<h2 id="函数的参数">函数的参数</h2>
<p>以下是调用函数时可使用的正式参数类型：</p>
<ol style="list-style-type: decimal">
<li>必需参数</li>
<li>关键字参数</li>
<li>默认参数</li>
<li>不定长参数</li>
</ol>
<h3 id="必需参数">必需参数</h3>
<p>必需参数须以正确的顺序传入函数。调用时的数量必须和声明时的一样。调用printme()函数，你必须传入一个参数，不然会出现语法错误，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function1.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span><span class="params">(str)</span>:</span></div><div class="line">    print(str)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printme()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function1.py </div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"function1.py"</span>, line <span class="number">7</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    printme()</div><div class="line">TypeError: printme() missing <span class="number">1</span> required positional argument: <span class="string">'str'</span></div></pre></td></tr></table></figure>
<h3 id="关键字参数">关键字参数</h3>
<p>关键字参数和函数调用关系紧密，函数调用使用关键字参数来确定传入的参数值。使用关键字参数允许函数调用时参数的顺序与声明时不一致，因为 Python 解释器能够用参数名匹配参数值。以下实例在函数 printme() 调用时使用参数名：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function2.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span><span class="params">(str)</span>:</span></div><div class="line">    print(str)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printme(str=<span class="string">"Runoob tutorial"</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function2.py </div><div class="line">Runoob tutorial</div></pre></td></tr></table></figure>
<p>以下实例中演示了函数参数的使用不需要使用指定顺序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function3.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span><span class="params">(name, age)</span>:</span></div><div class="line">    print(<span class="string">"Name: "</span>,name)</div><div class="line">    print(<span class="string">"Age: "</span>,age)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printinfo(age=<span class="number">50</span>,name=<span class="string">"runoob"</span>)</div><div class="line">printinfo(<span class="string">"Zhang"</span>,<span class="number">20</span>)</div><div class="line">printinfo(<span class="number">20</span>,<span class="string">"Zhang"</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function3.py </div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">50</span></div><div class="line">Name:  Zhang</div><div class="line">Age:  <span class="number">20</span></div><div class="line">Name:  <span class="number">20</span></div><div class="line">Age:  Zhang</div></pre></td></tr></table></figure>
<p>从结果来看，如果不按顺序输入参数，那么可以使用赋值语句将实参直接赋值给相应的形参。</p>
<h3 id="默认参数">默认参数</h3>
<p>调用函数时，如果没有传递参数，则会使用默认参数。以下实例中如果没有传入age参数，则使用默认值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function4.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span><span class="params">(name,age=<span class="number">35</span>)</span>:</span></div><div class="line">    print(<span class="string">"Name: "</span>,name)</div><div class="line">    print(<span class="string">"Age: "</span>,age)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printinfo(age=<span class="number">50</span>, name=<span class="string">"runoob"</span>)</div><div class="line">print(<span class="string">"------------------------"</span>)</div><div class="line">printinfo(name=<span class="string">"runoob"</span>)</div><div class="line">printinfo(<span class="number">20</span>,<span class="string">"runoob"</span>)</div><div class="line">printinfo(<span class="string">"runoob"</span>,<span class="number">20</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function4.py </div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">50</span></div><div class="line">------------------------</div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">35</span></div><div class="line">Name:  <span class="number">20</span></div><div class="line">Age:  runoob</div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">20</span></div></pre></td></tr></table></figure>
<h3 id="不定长参数">不定长参数</h3>
<p>你可能需要一个函数能处理比当初声明时更多的参数。这些参数叫做不定长参数，和上述2种参数不同，声明时不会命名。基本语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">functionname</span><span class="params">([formal_args,] *var_args_tuple )</span>:</span></div><div class="line">   <span class="string">"函数_文档字符串"</span></div><div class="line">   function_suite</div><div class="line">   <span class="keyword">return</span> [expression]</div></pre></td></tr></table></figure>
<p>加了星号（<code>*</code>）的变量名会存放所有未命名的变量参数。如果在函数调用时没有指定参数，它就是一个空元组。我们也可以不向函数传递未命名的变量。如下实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function5.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span><span class="params">(arg1, *vartuple)</span>:</span></div><div class="line">    print(<span class="string">"Output: "</span>)</div><div class="line">    print(arg1)</div><div class="line">    <span class="keyword">for</span> var <span class="keyword">in</span> vartuple:</div><div class="line">        print(var)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printinfo(<span class="number">10</span>)</div><div class="line">printinfo(<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function5.py </div><div class="line">Output: </div><div class="line"><span class="number">10</span></div><div class="line">Output: </div><div class="line"><span class="number">11</span></div><div class="line"><span class="number">12</span></div><div class="line"><span class="number">13</span></div></pre></td></tr></table></figure>
<h2 id="匿名函数lambda">匿名函数lambda</h2>
<p>python使用lambda来创建匿名函数。所谓匿名，意即不再使用def语句这样标准的形式定义一个函数，它的特点如下：</p>
<ol style="list-style-type: decimal">
<li>lambda只是一个表达式，函数体比def简单很多。</li>
<li>lambda的主体是一个表达式，而不是一个代码块。仅仅能在lambda表达式中封装有限的逻辑进去。</li>
<li>lambda函数拥有自己的命名空间，且不能访问自己参数列表之外或全局命名空间里的参数。</li>
<li>虽然lambda函数看起来只能写一行，却不等同于C或C++的内联函数，后者的目的是调用小函数时不占用栈内存从而增加运行效率。</li>
</ol>
<p>语法格式如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">lambda</span> [arg1 [,arg2,.....argn]]:expression</div></pre></td></tr></table></figure></p>
<p>看一个简单的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">lambda</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">sum = <span class="keyword">lambda</span> arg1, arg2: arg1 + arg2</div><div class="line"><span class="comment"># 这里就是定义了一个函数，这个函数实现的功能就是两个数字相加</span></div><div class="line"></div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">10</span>, <span class="number">20</span>))</div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">20</span>,<span class="number">20</span>))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">lambda</span>.py </div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">30</span></div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">40</span></div></pre></td></tr></table></figure>
<p>上面的这个案例如果改成常规的函数写法，则是如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">lambda</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">sum = <span class="keyword">lambda</span> arg1, arg2: arg1 + arg2</div><div class="line"></div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">10</span>, <span class="number">20</span>))</div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">20</span>,<span class="number">20</span>))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">lambda</span>.py </div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">30</span></div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">40</span></div></pre></td></tr></table></figure>
<h3 id="匿名函数与普通函数的区别">匿名函数与普通函数的区别</h3>
<p>看下面的一段代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat <span class="keyword">lambda</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a,b)</span>:</span></div><div class="line">    <span class="keyword">return</span> a+b</div><div class="line">a=<span class="number">2</span></div><div class="line">b=<span class="number">3</span></div><div class="line">print(<span class="string">'a+b='</span>, add(a,b))</div><div class="line"></div><div class="line">a=<span class="number">2</span></div><div class="line">b=<span class="number">3</span></div><div class="line">addl = <span class="keyword">lambda</span> a,b:a+b</div><div class="line">print(<span class="string">'a+b='</span>,addl(a,b))</div><div class="line"></div><div class="line">print(<span class="string">'type(add(a,b)):'</span>,type(add(a,b)))</div><div class="line">print(<span class="string">'type(addl):'</span>,type(addl))</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 <span class="keyword">lambda</span>.py </div><div class="line">a+b= <span class="number">5</span></div><div class="line">a+b= <span class="number">5</span></div><div class="line">type(add(a,b)): &lt;<span class="class"><span class="keyword">class</span> '<span class="title">int</span>'&gt;</span></div><div class="line"><span class="class"><span class="title">type</span><span class="params">(addl)</span>:</span> &lt;<span class="class"><span class="keyword">class</span> '<span class="title">function</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>从上面我们可以看见add(a,b)的类型是int，而addl(a,b)的类型则是函数。从这里也能看出Lambda表达式确实是一种函数的表示方式。lambda的一般形式是关键字lambda后面跟一个或多个参数，紧跟一个冒号，以后是一个表达式。lambda是一个表达式而不是一个语句。它能够出现在python语法不允许def出现的地方。</p>
<h3 id="lambda案例第1快速组建列表">lambda案例第1:快速组建列表</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = <span class="keyword">lambda</span> x:x**<span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>l = [list1(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(l)</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>]</div></pre></td></tr></table></figure>
<h3 id="lambda函数减少函数命名">lambda函数：减少函数命名</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat lambda1.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">many</span><span class="params">(n)</span>:</span></div><div class="line">        <span class="keyword">return</span> n*f</div><div class="line">    <span class="keyword">return</span> many</div><div class="line">food = input(<span class="string">'What kind of fruti do you like?'</span>)</div><div class="line">f = eat(food)</div><div class="line">print(f(<span class="number">5</span>))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 lambda1.py </div><div class="line">What kind of fruti do you like? Yes</div><div class="line"> Yes Yes Yes Yes Yes</div></pre></td></tr></table></figure>
<p>上述代码改写为lambda则是如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> n:f*n</div><div class="line">    </div><div class="line">food = input(<span class="string">'What kind of fruit do you like?'</span>)</div><div class="line">f = eat(food)</div><div class="line">print(f(<span class="number">5</span>))</div></pre></td></tr></table></figure>
<p>再看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat original.py <span class="comment"># 这是原代码</span></div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line">freshfruit = [<span class="string">' banana'</span>,<span class="string">' loganberry '</span>,<span class="string">'passion fruit'</span>] <span class="comment"># 建立一个列表</span></div><div class="line">print(freshfruit) <span class="comment">#显示列表，发现前2个元素有空格</span></div><div class="line">list3 =[w.strip() <span class="keyword">for</span> w <span class="keyword">in</span> freshfruit] <span class="comment"># 去除空格</span></div><div class="line">print(list3) <span class="comment">#空格去掉后的效果</span></div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 original.py </div><div class="line">[<span class="string">' banana'</span>, <span class="string">' loganberry '</span>, <span class="string">'passion fruit'</span>]</div><div class="line">[<span class="string">'banana'</span>, <span class="string">'loganberry'</span>, <span class="string">'passion fruit'</span>]</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat original_trans.py <span class="comment"># 改写为lambda形式</span></div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">freshfruit = [<span class="string">' banana'</span>,<span class="string">' loganberry '</span>,<span class="string">'passion fruit'</span>]</div><div class="line">list3 = list(map(<span class="keyword">lambda</span> x:x.strip(),freshfruit))</div><div class="line"><span class="comment"># lambda x:x.strip()这里就相当于一个函数，map则是将这个函数映射到freshfruit的每个元素上</span></div><div class="line">print(list3)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 original_trans.py </div><div class="line">[<span class="string">'banana'</span>, <span class="string">'loganberry'</span>, <span class="string">'passion fruit'</span>]</div></pre></td></tr></table></figure>
<h3 id="案例使用列表推导式实现嵌套列表的平铺如下所示">案例：使用列表推导式实现嵌套列表的平铺，如下所示：</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>vec = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print([num <span class="keyword">for</span> elem <span class="keyword">in</span> vec <span class="keyword">for</span> num <span class="keyword">in</span> elem])</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div></pre></td></tr></table></figure>
<p>这个列表推导式中有2个循环，第1个循环可以看作是外循环，执行得慢，第2个循环是内循环，执行得快，上面代码等价于下面的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat test1.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">vec = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]]</div><div class="line">result = []</div><div class="line"><span class="keyword">for</span> elem <span class="keyword">in</span> vec:</div><div class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> elem:</div><div class="line">        result.append(num)</div><div class="line">print(result)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 test1.py </div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div></pre></td></tr></table></figure>
<h3 id="案例过滤掉不合条件的元素">案例：过滤掉不合条件的元素</h3>
<p>列表推导式中可以使用if语句来进行筛选，只在结果列表中保留符合条件的元素，下面的代码是过滤当前目录下的所有文件，只保留以<code>.py</code>结尾的文件，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print([filename <span class="keyword">for</span> filename <span class="keyword">in</span> os.listdir(<span class="string">'.'</span>) <span class="keyword">if</span> filename.endswith(<span class="string">'.py'</span>)])</div><div class="line">[<span class="string">'a.py'</span>, <span class="string">'count_line.py'</span>, <span class="string">'practice.py'</span>, <span class="string">'python.py'</span>, <span class="string">'t.py'</span>]</div></pre></td></tr></table></figure></p>
<p>代码解释：</p>
<ol style="list-style-type: decimal">
<li><code>os.listdir()</code>方法用于返回指定的文件夹包含的文件或文件夹的名字的列表。这个列表以字母顺序，括号中的参数可以是路径，例如c:，也可以不加，用’.’来表示。</li>
<li><code>endswith()</code>方法用于判断字符串是否以指定后缀结尾，如果以指定后缀结尾返回True，否则返回False。可选参数“start”与“end”为检索字符串的开始与结束位置。</li>
</ol>
<h3 id="案例过滤满足一定条件的元素">案例：过滤满足一定条件的元素</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list4= [<span class="number">-1</span>, <span class="number">-4</span>, <span class="number">6</span>, <span class="number">7.5</span> ,<span class="number">-2.3</span>, <span class="number">9</span>, <span class="number">-11</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list4)</div><div class="line">[<span class="number">-1</span>, <span class="number">-4</span>, <span class="number">6</span>, <span class="number">7.5</span>, <span class="number">-2.3</span>, <span class="number">9</span>, <span class="number">-11</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = [i <span class="keyword">for</span> i <span class="keyword">in</span> list4 <span class="keyword">if</span> i &lt; <span class="number">0</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</div><div class="line">[<span class="number">-1</span>, <span class="number">-4</span>, <span class="number">-2.3</span>, <span class="number">-11</span>]</div></pre></td></tr></table></figure>
<h2 id="带有返回值的函数">带有返回值的函数</h2>
<p><code>return[表达式]</code>语句用于退出函数，选择性地向调用方返回一个表达式。不带参数值的<code>return</code>语句返回<code>None</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">return</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">(arg1, arg2)</span>:</span></div><div class="line">    total = arg1 + arg2</div><div class="line">    print(<span class="string">"Inside function is :  "</span>,total)</div><div class="line">    <span class="keyword">return</span> total</div><div class="line"></div><div class="line">total = sum(<span class="number">10</span>, <span class="number">20</span>)</div><div class="line">print(<span class="string">"Outside function is : "</span>,total)</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">return</span>.py </div><div class="line">Inside function <span class="keyword">is</span> :   <span class="number">30</span></div><div class="line">Outside function <span class="keyword">is</span> :  <span class="number">30</span></div></pre></td></tr></table></figure>
<h2 id="变量作用域">变量作用域</h2>
<p>Python中，程序的变量并不是在哪个位置都可以访问的，访问权限决定于这个变量是在哪里赋值的。变量的作用域决定了在哪一部分程序可以访问哪个特定的变量名称。Python的作用域一共有4种，分别是： 1. L（Local）局部作用域</p>
<ol start="2" style="list-style-type: decimal">
<li><p>E（Enclosing）闭包函数外的函数中</p></li>
<li><p>G（Global）全局作用域</p></li>
<li><p>B（Built-in）内建作用域</p></li>
</ol>
<p>Pyhton以<code>L–&gt;E–&gt;G–&gt;B</code>的规则查找，即：在局部找不到，便会去局部外的局部找（例如闭包），再找不到就会去全局找，再者去内建中找，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">x = int(<span class="number">2.9</span>)  <span class="comment"># 内建作用域</span></div><div class="line"> </div><div class="line">g_count = <span class="number">0</span>  <span class="comment"># 全局作用域</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></div><div class="line">    o_count = <span class="number">1</span>  <span class="comment"># 闭包函数外的函数中</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></div><div class="line">        i_count = <span class="number">2</span>  <span class="comment"># 局部作用域</span></div></pre></td></tr></table></figure>
<p>Python中只有<code>模块（module）</code>，<code>类（class）</code>以及函数<code>（def、lambda）</code>才会引入新的作用域，其它的代码块（如<code>if/elif/else/</code>、<code>try/except</code>、<code>for/while</code>等）是不会引入新的作用域的，也就是说这些语句内定义的变量，外部也可以访问，如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> <span class="keyword">True</span>:</div><div class="line"><span class="meta">... </span>    msg = <span class="string">"I am a learner"</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>msg</div><div class="line"><span class="string">'I am a learner'</span></div></pre></td></tr></table></figure>
<p>在这个案例中，msg变量定义在if语句块中，但外部还是可以访问的。如果将msg定义在函数中，则它就是局部变量，外部不能访问，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat local_variable.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></div><div class="line">    msg_inner = <span class="string">"I am a learner"</span></div><div class="line"></div><div class="line">print(msg_inner)</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 local_variable.py </div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"local_variable.py"</span>, line <span class="number">6</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    print(msg_inner)</div><div class="line">NameError: name <span class="string">'msg_inner'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</div></pre></td></tr></table></figure>
<p>从错误提示就能看出，msg_inner并示未定义，因为它是局部变量，只能在函数内部使用。</p>
<h2 id="全局变量和局部变量">全局变量和局部变量</h2>
<p>定义在函数内部的变量拥有一个局部作用域，定义在函数外的拥有全局作用域。局部变量只能在其被声明的函数内部访问，而全局变量可以在整个程序范围内访问。调用函数时，所有在函数内声明的变量名称都将被加入到作用域中，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat global_local_variable.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">total = <span class="number">0</span> </div><div class="line"><span class="comment"># this is a global variable</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">(arg1, arg2)</span>:</span></div><div class="line">    total = arg1 + arg2</div><div class="line">    <span class="comment"># Here, total is a local variable</span></div><div class="line">    print(<span class="string">"Variable inside function is local variable: "</span>,total)</div><div class="line">    <span class="keyword">return</span> total</div><div class="line"></div><div class="line">sum(<span class="number">10</span>, <span class="number">20</span>)</div><div class="line">print(<span class="string">"Variable outside function is global variable: "</span>,total)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 global_local_variable.py </div><div class="line">Variable inside function <span class="keyword">is</span> local variable:  <span class="number">30</span></div><div class="line">Variable outside function <span class="keyword">is</span> <span class="keyword">global</span> variable:  <span class="number">0</span></div></pre></td></tr></table></figure>
<h2 id="global和nonlocal关键字">global和nonlocal关键字</h2>
<p>当内部作用域想修改外部作用域的变量时，就要用到global和nonlocal关键字，在下面的案例中，修改了全局变量num：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">nonlocal</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">num = <span class="number">1</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">global</span> num <span class="comment"># need to keyword "global" for statement</span></div><div class="line">    print(num)</div><div class="line">    num = <span class="number">123</span></div><div class="line">    print(num)</div><div class="line"></div><div class="line">fun1()</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">nonlocal</span>.py </div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">123</span></div></pre></td></tr></table></figure>
<p>如果要修改嵌套作用域（enclosing作用域，外层非全局作用域）中的变量则需要nonlocal关键字了，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat nonlocal2.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></div><div class="line">    num = <span class="number">10</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></div><div class="line">        <span class="keyword">nonlocal</span> num </div><div class="line">        num = <span class="number">100</span></div><div class="line">        print(num)</div><div class="line">    inner()</div><div class="line">    print(num)</div><div class="line">outer()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 nonlocal2.py </div><div class="line"><span class="number">100</span></div><div class="line"><span class="number">100</span></div></pre></td></tr></table></figure>
<p>再看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat action_scope_error.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">a = <span class="number">10</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></div><div class="line">    a = a + <span class="number">1</span></div><div class="line">    print(a)</div><div class="line">test()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 action_scope_error.py </div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"action_scope_error.py"</span>, line <span class="number">7</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    test()</div><div class="line">  File <span class="string">"action_scope_error.py"</span>, line <span class="number">5</span>, <span class="keyword">in</span> test</div><div class="line">    a = a + <span class="number">1</span></div><div class="line">UnboundLocalError: local variable <span class="string">'a'</span> referenced before assignment</div></pre></td></tr></table></figure>
<p>错误信息为局部作用域引用错误，因为test函数中的a使用的是局部变量，未定义，无法修改。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/05/Python/Python学习笔记（5）-数据类型之集合/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/05/Python/Python学习笔记（5）-数据类型之集合/" itemprop="url">Python学习笔记（5）-数据类型之集合</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-05T12:00:00+08:00">
                2018-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,004
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  9
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="集合的定义">集合的定义</h2>
<p>集合是无序可变序列，使用一对大括号（这一点和字典比较类似）作为界定符，元素之间使用逗号分隔，同一个集合内的每个元素都是唯一的，元素之间不允许重复。</p>
<p>集合的英文是set，其特点是：</p>
<ol style="list-style-type: decimal">
<li>有的可变，有的不可变；元素无次充，不可重复。</li>
<li>元组(tuple）是列表（list）和字符串（str）的杂合，集合(set）是list和dict的杂合。</li>
<li>集合用<code>{}</code>来定义 ，其中的元素没有序列，并且集合中的元素不可重利，类似于dict的键。</li>
<li>集合可以在原处修改。</li>
</ol>
<h2 id="集合的创建">集合的创建</h2>
<h3 id="使用set进行创建">使用set()进行创建</h3>
<p>可以使用set()直接创建集合，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = set(<span class="string">"qiwsir"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'s'</span>, <span class="string">'i'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(s1))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">set</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>从结果可以看出，qiwsir中有两个i，但在s1中则只有一个i，即集合中的元素不能重复，如果原来的数据中存在重复的元素，则转换为集合时就只保留一个，再看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = set([<span class="number">123</span>,<span class="string">"google"</span>,<span class="string">"face"</span>,<span class="string">"book"</span>,<span class="string">"facebook"</span>,<span class="string">"book"</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s2)</div><div class="line">&#123;<span class="string">'google'</span>, <span class="number">123</span>, <span class="string">'book'</span>, <span class="string">'face'</span>, <span class="string">'facebook'</span>&#125;</div></pre></td></tr></table></figure>
<p>从结果可以看出，创建集合的时候与显示集合的时候，元素的顺序不同，这说明集合中的元素没有顺序。再看一案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = set(<span class="string">"qiwsir"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'s'</span>, <span class="string">'i'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1[<span class="number">1</span>] = [<span class="string">"I"</span>]</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">TypeError: <span class="string">'set'</span> object does <span class="keyword">not</span> support item assignment</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'s'</span>, <span class="string">'i'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>&#125;</div></pre></td></tr></table></figure>
<p>这说明，集合不是序列类型，不能用索引方式对其进行修改。</p>
<p>### 直接使用大括号创建集合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="number">3</span>, <span class="number">5</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">&#123;<span class="number">3</span>, <span class="number">5</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">set</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>集合中只能包含数字、字符串、元组等不可变类型（或者说可哈希）的数据，而不能包括列表、字典、集合等可变类型的数据。python提供了一个内置函数hash()来计算对象的哈希值，凡是无法计算哈希值（调用hash()函数时抛出异常）的对象都不能作为集合的元素，也不能作为字典对象的“键”。</p>
<h2 id="集合的转换">集合的转换</h2>
<p>类型名称函数能够实现类型的转换，例如str()可以将对象转化为字符串，用list()和set()能够将集合和列表进行转换，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = set(<span class="string">"qiwsir"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'s'</span>, <span class="string">'i'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst = list(s1)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(lst)</div><div class="line">[<span class="string">'s'</span>, <span class="string">'i'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">1</span>] = <span class="string">"I"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(lst)</div><div class="line">[<span class="string">'s'</span>, <span class="string">'I'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>]</div></pre></td></tr></table></figure>
<h2 id="集合元素的添加">集合元素的添加</h2>
<p>集合元素的添加使用<code>add()</code>方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a_set = &#123;<span class="string">'a'</span>,<span class="string">"i"</span>,<span class="string">"1"</span>,<span class="number">1</span>&#125; <span class="comment">#创建集合</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a_set)</div><div class="line">&#123;<span class="string">'i'</span>, <span class="string">'1'</span>, <span class="string">'a'</span>, <span class="number">1</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(a_set)) <span class="comment">#查看对象的类型</span></div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">set</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">a_set</span>.<span class="title">add</span><span class="params">(<span class="string">"qiwsir"</span>)</span> # 添加一个元素</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">print</span><span class="params">(a_set)</span></span></div><div class="line">&#123;1, 'a', 'i', '1', 'qiwsir'&#125;</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b_set = set(<span class="string">"python"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(b_set))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">set</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">print</span><span class="params">(b_set)</span></span></div><div class="line">&#123;'h', 'o', 'y', 't', 'n', 'p'&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b_set.add(<span class="string">"test"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(b_set)</div><div class="line">&#123;<span class="string">'h'</span>, <span class="string">'o'</span>, <span class="string">'y'</span>, <span class="string">'test'</span>, <span class="string">'t'</span>, <span class="string">'n'</span>, <span class="string">'p'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="合并集合">合并集合</h2>
<p>update()方法用于合并另外一个集合的元素到当前集合中，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = &#123;<span class="string">'a'</span>,<span class="string">'b'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'a'</span>, <span class="string">'b'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = &#123;<span class="string">'github'</span>,<span class="string">'qiwsir'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s2)</div><div class="line">&#123;<span class="string">'qiwsir'</span>, <span class="string">'github'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1.update(s2)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'github'</span>, <span class="string">'qiwsir'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>&#125;</div></pre></td></tr></table></figure></p>
<h2 id="集合的运行">集合的运行</h2>
<p>字典和集合的in操作比列表快很多。因为python字典和集合使用hash表来存储元素，因此元素查找操作非常快，这就直接决定了关键字in作用于字典和集合时比作用于列表要快得多，看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> random</div><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line">x = list(range(<span class="number">10000</span>))</div><div class="line"><span class="comment"># 生成列表</span></div><div class="line"></div><div class="line">y = set(range(<span class="number">10000</span>))</div><div class="line"><span class="comment"># 生成集合</span></div><div class="line"></div><div class="line">z = dict(zip(range(<span class="number">1000</span>),range(<span class="number">10000</span>)))</div><div class="line"><span class="comment"># 生成字典</span></div><div class="line"></div><div class="line">r = random.randint(<span class="number">0</span>,<span class="number">9999</span>)</div><div class="line"><span class="comment"># 生成随机数</span></div><div class="line"></div><div class="line">start = time.time()</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9999999</span>):</div><div class="line">    r <span class="keyword">in</span> x</div><div class="line">print(<span class="string">'list, time used: '</span>,time.time() - start)</div><div class="line"></div><div class="line">start = time.time()</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9999999</span>):</div><div class="line">    r <span class="keyword">in</span> y </div><div class="line">print(<span class="string">'set, time used: '</span>,time.time() - start)</div><div class="line"></div><div class="line">start = time.time()</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">999999999</span>):</div><div class="line">     r <span class="keyword">in</span> z</div><div class="line">print(<span class="string">'dict, time used: '</span>,time.time() - start)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python a.py</div><div class="line">list, time used:  <span class="number">1369.371190071106</span></div><div class="line">set, time used:  <span class="number">1.289543867111206</span></div><div class="line">dict, time used:  <span class="number">95.13067197799683</span></div></pre></td></tr></table></figure>
<h2 id="删除set中的元素">删除set中的元素</h2>
<h3 id="pop函数">pop()函数</h3>
<p>pop()随机删除并返回集全中的一个元素，如果集合为空，则抛出异常，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.pop()</div><div class="line"><span class="string">'b'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="remove方法">remove()方法</h3>
<p>remove()方法用于删除集合中的元素，如果指定元素不存在，就抛出异常，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.remove(<span class="string">"test"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="discard方法">discard()方法</h3>
<p>discard()方法用于从集合中删除一个特定的元素，如果元素不在集合中，则忽略该操作，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.discard(<span class="string">"test"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="remove与discard的区别">remove()与discard()的区别</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.discard(<span class="string">"test"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.discard(<span class="string">"test"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>&#125;</div></pre></td></tr></table></figure>
<p>所实现的目的与remove一样，区别在于如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.discard(<span class="string">"5"</span>)</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>运行结果：无</p>
<p>而remove()的结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.remove(<span class="string">"5"</span>)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">KeyError: <span class="string">'5'</span>&gt;&gt;&gt; s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.remove(<span class="string">"5"</span>)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">KeyError: <span class="string">'5'</span></div></pre></td></tr></table></figure>
<p>remove与discard的区别在于，remove在删除指定的元素时，如果此元素不在set中，则就会出错，如果是discard删除，不存在此元素时，则不返回任何值。</p>
<h3 id="clear清除所有元素">clear()清除所有元素</h3>
<p>clear()方法清空集合中的所有元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(bool(s3)) <span class="comment">#有元素，则返回True</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.clear()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">set()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(bool(s3)) <span class="comment"># 无元素返回False</span></div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure>
<h2 id="集合冻结">集合冻结</h2>
<p>frozenset() 返回一个冻结的集合，冻结后集合不能再添加或删除任何元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s4 = frozenset(<span class="string">"test000"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s4)</div><div class="line">frozenset(&#123;<span class="string">'0'</span>, <span class="string">'s'</span>, <span class="string">'e'</span>, <span class="string">'t'</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s4.add(<span class="string">"python"</span>)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">AttributeError: <span class="string">'frozenset'</span> object has no attribute <span class="string">'add'</span></div></pre></td></tr></table></figure>
<h2 id="集合的运算">集合的运算</h2>
<h3 id="判断两个集合的从属关系">判断两个集合的从属关系</h3>
<p>in()：元素与集合的关系可以用in来进行判断，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5)</div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"123"</span> <span class="keyword">in</span> s5) <span class="comment"># "123"是否在集合s5中</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"123--"</span> <span class="keyword">in</span> s5) <span class="comment"># "123---"是否在集合s5中</span></div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure></p>
<h3 id="集合与集合的关系">集合与集合的关系</h3>
<p>集合与集合的关系可以用<code>==,!=,&gt;,&lt;,issuperset,issubset</code>来表示，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5)</div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s6 = &#123;<span class="string">"543"</span>,<span class="number">123</span>,<span class="number">993</span>,<span class="string">"test001"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s6)</div><div class="line">&#123;<span class="string">'test001'</span>, <span class="number">993</span>, <span class="number">123</span>, <span class="string">'543'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s7 = &#123;<span class="string">"123"</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7)</div><div class="line">&#123;<span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5 == s6) <span class="comment"># s5是否与s6等同</span></div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5 != s6) <span class="comment"># s5是否与s6等同</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7 &lt; s5) <span class="comment"># s7是否是s5的子集</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7.issubset(s5)) <span class="comment"># s7是否是s5的子集</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5.issuperset(s7)) <span class="comment"># s5是否是s7的超集</span></div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure>
<h3 id="集合求并集">集合求并集(<code>|</code>)</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5)</div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s6 = &#123;<span class="string">"543"</span>,<span class="number">123</span>,<span class="number">993</span>,<span class="string">"test001"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s6)</div><div class="line">&#123;<span class="string">'test001'</span>, <span class="number">993</span>, <span class="number">123</span>, <span class="string">'543'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s7 = &#123;<span class="string">"123"</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7)</div><div class="line">&#123;<span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5|s6) <span class="comment"># 求s5和s6的并集</span></div><div class="line">&#123;<span class="number">993</span>, <span class="string">'test001'</span>, <span class="string">'543'</span>, <span class="string">'123'</span>, <span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'test'</span>, <span class="number">123</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5.union(s7)) <span class="comment"># 求s5和s7的并集</span></div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'test'</span>, <span class="string">'123'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="集合求交集">集合求交集(<code>&amp;</code>)</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5)</div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s6 = &#123;<span class="string">"543"</span>,<span class="number">123</span>,<span class="number">993</span>,<span class="string">"test001"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s6)</div><div class="line">&#123;<span class="string">'test001'</span>, <span class="number">993</span>, <span class="number">123</span>, <span class="string">'543'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s7 = &#123;<span class="string">"123"</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7)</div><div class="line">&#123;<span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5 &amp; s6) <span class="comment"># 求s5和s6的交集</span></div><div class="line">set()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5.intersection(s7)) <span class="comment"># 求s5和s7的交集</span></div><div class="line">&#123;<span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="集合求差集-">集合求差集（<code>-</code>）</h3>
<p>差集如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180519/kD5jhGlLG3.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>代码为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5)</div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'test'</span>, <span class="string">'123'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s6 = &#123;<span class="string">"543"</span>,<span class="number">123</span>,<span class="number">993</span>,<span class="string">"test001"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s6)</div><div class="line">&#123;<span class="number">993</span>, <span class="string">'test001'</span>, <span class="number">123</span>, <span class="string">'543'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s7 = &#123;<span class="string">"123"</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7)</div><div class="line">&#123;<span class="string">'test'</span>, <span class="string">'123'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5 - s6) <span class="comment"># 求s5和s6的差集</span></div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'test'</span>, <span class="string">'123'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5.difference(s7)) <span class="comment"># 求s5和s7的差集</span></div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="集合的对称差集">集合的对称差集（）</h3>
<p>对称差集示意图如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180519/gcjJk5D08H.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>代码为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s8 = &#123;<span class="string">"123"</span>,<span class="string">"test"</span>,<span class="number">9999</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5.symmetric_difference(s8)) <span class="comment"># 求s5和s7的对称差集</span></div><div class="line">&#123;<span class="number">9999</span>, <span class="number">432</span>, <span class="string">'678'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="集合推导式">集合推导式</h2>
<p>Python支持集合推导式，集合推导式使用的是大括号，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>squared = &#123;x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(squared)</div><div class="line">&#123;<span class="number">1</span>, <span class="number">4</span>&#125;</div></pre></td></tr></table></figure>
<p>再看另外一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;x.strip() <span class="keyword">for</span> x <span class="keyword">in</span> (<span class="string">' he '</span>, <span class="string">'she '</span>, <span class="string">' I'</span>)&#125;</div><div class="line">&#123;<span class="string">'I'</span>, <span class="string">'he'</span>, <span class="string">'she'</span>&#125;</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = &#123;random.randint(<span class="number">1</span>,<span class="number">500</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>)&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 生成随机数，自动去除重复元素</span></div><div class="line"><span class="meta">... </span>len(x)</div><div class="line"><span class="number">94</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;str(x) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)&#125;</div><div class="line">&#123;<span class="string">'2'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, <span class="string">'0'</span>, <span class="string">'4'</span>, <span class="string">'7'</span>, <span class="string">'9'</span>, <span class="string">'8'</span>, <span class="string">'3'</span>, <span class="string">'1'</span>&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/04/Python/Python学习笔记（4）-数据类型之字典/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/04/Python/Python学习笔记（4）-数据类型之字典/" itemprop="url">Python学习笔记（4）-数据类型之字典</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-04T12:00:00+08:00">
                2018-04-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,988
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  19
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="字典的定义">字典的定义</h2>
<p>字典包括一系列的索引，不过就已经不叫索引了，而是叫键，然后还对应着一个值，叫键值。每个键对应着各自的一个单独的键值。这种键和键值的对应关系也叫键值对，有时候也叫项。其中，“键：值”元素的无序可变序列，字典中的每个元素包括“键”和“值”两部分，表示一种映射或对应关系，也称为关联数组。定义字典时，每个元素的“键”和“值”用冒号分隔，不同元素之间用逗号分隔，所有的元素放在一对大括号中。字典就像是一个列表一样，但更加泛化了，是列表概念的推广。在列表里面，索引必须是整数；而在字典里面，你可以用几乎任何类型来做索引了。用数学语言来说，一个字典就代表了从键到键值的一种映射关系，所以你也可以说每个键映射到一个键值。举例来说，我们可以建立一个从英语单词映射到西班牙语单词的字典，这样键和简直就都是字符串了。</p>
<h2 id="建立字典">建立字典</h2>
<h3 id="使用dict函数">使用dict()函数</h3>
<p>dict这个函数创建一个没有项目的空字典，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp = dict()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp</div><div class="line">&#123;&#125;</div></pre></td></tr></table></figure>
<p>其中，大括号代表了一个空字典，要在字典里添加项（项是指字典的键与值的对应关系，也叫键值对），可以使用方括号，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp[<span class="string">'one'</span>] = <span class="string">'uno'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp</div><div class="line">&#123;<span class="string">'one'</span>: <span class="string">'uno'</span>&#125;</div></pre></td></tr></table></figure>
<p>也可以采用直接给定的“键：值”来创建字典，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>d = dict(name = <span class="string">'Dong'</span>, age = <span class="number">37</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(d)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'age'</span>: <span class="number">37</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="通过dict转化为字典">通过dict转化为字典</h3>
<p>如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>keys = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>values = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dictionary = dict(zip(keys,values))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(dictionary)</div><div class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'d'</span>: <span class="number">4</span>&#125;</div></pre></td></tr></table></figure>
<p>给定内容为“键”，创建“值”为空的字典：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>adict = dict.fromkeys([<span class="string">'name'</span>,<span class="string">'age'</span>,<span class="string">'sex'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(adict)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="keyword">None</span>, <span class="string">'age'</span>: <span class="keyword">None</span>, <span class="string">'sex'</span>: <span class="keyword">None</span>&#125;</div></pre></td></tr></table></figure>
<p>fromkeys() 方法用于创建一个新的字典，并以可迭代对象中的元素分别作为字典中的键，且所有键对应同一个值，默认为None。</p>
<h2 id="字典的修改">字典的修改</h2>
<p>当以指定“键”为下标，并为字典元素赋值时，有两种含义：①若该“键”存在，则表示修改该“键”对应的值；②若该键不存在，则表示添加一个新的“键：值”，也就是添加一个新元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict =&#123;<span class="string">'age'</span>:<span class="number">35</span>, <span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict)</div><div class="line">&#123;<span class="string">'age'</span>: <span class="number">35</span>, <span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict[<span class="string">'age'</span>] = <span class="number">38</span> <span class="comment">#修改元素值</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict[<span class="string">'address'</span>] = <span class="string">'SDIBT'</span> <span class="comment"># 添加新元素</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict)</div><div class="line">&#123;<span class="string">'age'</span>: <span class="number">38</span>, <span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>, <span class="string">'address'</span>: <span class="string">'SDIBT'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="添加字典更新字典">添加字典——更新字典</h2>
<p>update()方法可以将另一个字典的“键：值”一次性全部添加到当前的字典对象，如果两个字典中存在相同的“键”，则以另外一个字典中的“值”为准对当前字典进行更新，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict.items())</div><div class="line">dict_items([(<span class="string">'age'</span>, <span class="number">37</span>), (<span class="string">'score'</span>, [<span class="number">98</span>, <span class="number">97</span>]), (<span class="string">'name'</span>, <span class="string">'Dong'</span>), (<span class="string">'sex'</span>, <span class="string">'male'</span>)])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.update(&#123;<span class="string">'a'</span>:<span class="number">97</span>, <span class="string">'age'</span>:<span class="number">39</span>&#125;) <span class="comment"># 修改'age'键的值，同时添加新元素'a':97</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict)</div><div class="line">&#123;<span class="string">'age'</span>: <span class="number">39</span>, <span class="string">'score'</span>: [<span class="number">98</span>, <span class="number">97</span>], <span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>, <span class="string">'a'</span>: <span class="number">97</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="删除字典-del函数">删除字典-del函数</h2>
<p>del可以删除整个字典，也可以删除字典中指定的元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict)</div><div class="line">&#123;<span class="string">'age'</span>: <span class="number">37</span>, <span class="string">'score'</span>: [<span class="number">98</span>, <span class="number">97</span>], <span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> aDict</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">NameError: name <span class="string">'aDict'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDIct</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">NameError: name <span class="string">'aDIct'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</div></pre></td></tr></table></figure>
<h2 id="删除字典-pop和popitem方法">删除字典-pop()和popitem()方法</h2>
<p>(1)pop() 方法删除字典给定键 key 所对应的值，返回值为被删除的值。key值必须给出。 否则，返回default值。</p>
<p>(2)popitem() 方法随机返回并删除字典中的一对键和值(一般删除末尾对)。</p>
<p>如果字典已经为空，却调用了此方法，就报出KeyError异常，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.popitem() <span class="comment"># 弹出一个元素，如果是空字典，则会抛出异常</span></div><div class="line">(<span class="string">'sex'</span>, <span class="string">'male'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.pop(<span class="string">'age'</span>)</div><div class="line"><span class="number">37</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict) <span class="comment"># 弹出指定键对应的元素</span></div><div class="line">&#123;<span class="string">'score'</span>: [<span class="number">98</span>, <span class="number">97</span>], <span class="string">'name'</span>: <span class="string">'Dong'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="随机删除字典元素">随机删除字典元素</h2>
<p>dd.popitem()的功能是随机删除字典中的一个元素，并将所删除的值返回，运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dd  = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>,<span class="string">"lang"</span>:<span class="string">"python"</span>,<span class="string">"web"</span>:<span class="string">"www.itdiffer.com"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(dd.popitem())</div><div class="line">(<span class="string">'web'</span>, <span class="string">'www.itdiffer.com'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(dd)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="字典的清除">字典的清除</h2>
<p>字典的清除使用clear()方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.clear()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">&#123;&#125;</div></pre></td></tr></table></figure>
<p>清除与删除是两种不同的操作，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.clear()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">&#123;&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> a</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">NameError: name <span class="string">'a'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</div></pre></td></tr></table></figure>
<h2 id="访问项键值">访问项（键：值）</h2>
<p>字典中的项没有顺序，因此也没有索引，但可以通过键来直接查找键值，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp = &#123;<span class="string">'one'</span>: <span class="string">'uno'</span>, <span class="string">'three'</span>: <span class="string">'tres'</span>, <span class="string">'two'</span>: <span class="string">'dose'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp[<span class="string">'three'</span>] = <span class="string">'tres'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp[<span class="string">'two'</span>] = <span class="string">'dose'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp</div><div class="line">&#123;<span class="string">'one'</span>: <span class="string">'uno'</span>, <span class="string">'three'</span>: <span class="string">'tres'</span>, <span class="string">'two'</span>: <span class="string">'dose'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp</div><div class="line">&#123;<span class="string">'one'</span>: <span class="string">'uno'</span>, <span class="string">'three'</span>: <span class="string">'tres'</span>, <span class="string">'two'</span>: <span class="string">'dose&#125;</span></div><div class="line"><span class="string">&gt;&gt;&gt; eng2sp['</span>one<span class="string">']</span></div><div class="line"><span class="string">'</span>uno<span class="string">'</span></div></pre></td></tr></table></figure>
<h2 id="访问项get函数">访问项——get()函数</h2>
<p>get()函数用法：get() 函数返回指定键的值，如果值不在字典中返回默认值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.get(<span class="string">'age'</span>) <span class="comment"># 如果字典中存在该"键"，则返回对应的值</span></div><div class="line"><span class="number">37</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.get(<span class="string">'address'</span>,<span class="string">'Not Exists'</span>) <span class="comment"># 指定的"键"不存在，返回指定的默认值</span></div><div class="line"><span class="string">'Not Exists'</span></div></pre></td></tr></table></figure>
<h2 id="访问项setdefault-函数">访问项——<strong>setdefault()</strong> 函数</h2>
<p>此方法用于返回指定“键”对应的“值”，如果字典中不存在该“键”，就添加一个新元素，并设置该键对应的值，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.setdefault(<span class="string">'address'</span>,<span class="string">'SDIBT'</span>) <span class="comment"># 添加新元素</span></div><div class="line"><span class="string">'SDIBT'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict</div><div class="line">&#123;<span class="string">'age'</span>: <span class="number">37</span>, <span class="string">'score'</span>: [<span class="number">98</span>, <span class="number">97</span>], <span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>, <span class="string">'address'</span>: <span class="string">'SDIBT'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="访问项遍历字典">访问项——遍历字典</h2>
<p>对字典对象进行迭代时，默认是遍历字典的键，如果使用items()方法返回字典中的元素，即所有的项（项这里是指“键：值”对）。字典对象的keys()方法返回所有的值，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> aDict:</div><div class="line"><span class="meta">... </span>print(item)</div><div class="line">...</div><div class="line">age</div><div class="line">score</div><div class="line">name</div><div class="line">sex</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> aDict.items():</div><div class="line"><span class="meta">... </span>print(item)</div><div class="line">...</div><div class="line">(<span class="string">'age'</span>, <span class="number">37</span>)</div><div class="line">(<span class="string">'score'</span>, [<span class="number">98</span>, <span class="number">97</span>])</div><div class="line">(<span class="string">'name'</span>, <span class="string">'Dong'</span>)</div><div class="line">(<span class="string">'sex'</span>, <span class="string">'male'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.items()</div><div class="line">dict_items([(<span class="string">'age'</span>, <span class="number">37</span>), (<span class="string">'score'</span>, [<span class="number">98</span>, <span class="number">97</span>]), (<span class="string">'name'</span>, <span class="string">'Dong'</span>), (<span class="string">'sex'</span>, <span class="string">'male'</span>)])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.keys()</div><div class="line">dict_keys([<span class="string">'age'</span>, <span class="string">'score'</span>, <span class="string">'name'</span>, <span class="string">'sex'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.values()</div><div class="line">dict_values([<span class="number">37</span>, [<span class="number">98</span>, <span class="number">97</span>], <span class="string">'Dong'</span>, <span class="string">'male'</span>])</div></pre></td></tr></table></figure>
<h2 id="同置函数对字典的处理">同置函数对字典的处理</h2>
<p>内置函数len()，max()，min()，sum()，sorted()以及成员测试运算符in也适用于字典对象，但默认作用于字典的“键”，若想作用于元素，即“键：值”对，则需要使用字典的对象items()方法，若作用于“值”，则需要使用valules()方法。</p>
<h2 id="案例实战字典应用">案例实战：字典应用</h2>
<p>案例实战：字典应用 　　下面的一段代码会生成包括1000个随机字符的字符串，然后统计每具字符的出现次数。</p>
<p>包解释：</p>
<ol style="list-style-type: decimal">
<li><code>string:String</code>模块包含许多有用的常量和类，以及一些不推荐的遗留函数，这些函数也可以作为字符串上的方法使用。此外，Python的内置字符串类支持序列类型(str、Unicode、list、tuple、byteArray、Buffer、xrange)中描述的序列类型方法，以及String方法部分中描述的特定字符串的方法。若要输出格式化字符串，可以使用模板字符串或字符串格式操作部分的%运算符。另外，有关基于正则表达式的字符串函数，请参见re模块。</li>
<li><code>random:</code>这个模块是用于实现各种分页的伪随机数生成器。对于整数来说，它可以从一个范围内进行均匀选择，对于序列来说，此模块中的有可以均匀选择一个元素的函数，以及生成一个随机排列的列表的耿发，以及用于不放回抽样的函数。</li>
</ol>
<p>代码解释：</p>
<ol style="list-style-type: decimal">
<li><code>ascii_letters</code>是生成所有字母，从a-z和A-Z</li>
<li><code>digits</code>是生成所有数字0-9.</li>
<li><code>punctuation</code>生成标点符号</li>
<li><code>random.choice</code>随机选择一个元素</li>
</ol>
<h3 id="第种方案最常规的实现方法">第１种方案：最常规的实现方法</h3>
<p>代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> string</div><div class="line"><span class="keyword">import</span> random</div><div class="line">x = string.ascii_letters + string.digits + string.punctuation</div><div class="line">y = [random.choice(x) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>)]</div><div class="line"><span class="comment"># 生成包含1000个随机字符的列表</span></div><div class="line"></div><div class="line">z = <span class="string">''</span>.join(y)</div><div class="line"><span class="comment"># 把列表中的字符连接成字符串</span></div><div class="line">d = dict()</div><div class="line"><span class="comment"># 空字典</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> ch <span class="keyword">in</span> z:</div><div class="line"> d[ch] = d.get(ch,<span class="number">0</span>) + <span class="number">1</span></div><div class="line"><span class="comment"># 修改每个字符的频次</span></div><div class="line">print(d)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">D:\&gt;python test.py</div><div class="line">&#123;<span class="string">'&#125;'</span>: <span class="number">11</span>, <span class="string">'r'</span>: <span class="number">11</span>, <span class="string">'Z'</span>: <span class="number">15</span>, <span class="string">'I'</span>: <span class="number">5</span>, <span class="string">'a'</span>: <span class="number">19</span>, <span class="string">'T'</span>: <span class="number">13</span>, <span class="string">'#'</span>: <span class="number">15</span>, <span class="string">'U'</span>: <span class="number">8</span>, <span class="string">'\\'</span>: <span class="number">11</span>, <span class="string">'g'</span>: <span class="number">15</span>, <span class="string">'-'</span>: <span class="number">10</span>, <span class="string">'M'</span>: <span class="number">15</span>, <span class="string">'3'</span>: <span class="number">13</span>, <span class="string">'d'</span>: <span class="number">12</span>, <span class="string">'K'</span>: <span class="number">14</span>, <span class="string">'f'</span>: <span class="number">7</span>, <span class="string">'v'</span>: <span class="number">9</span>, <span class="string">'&gt;'</span>: <span class="number">6</span>, <span class="string">'2'</span>: <span class="number">9</span>, <span class="string">'='</span>: <span class="number">12</span>, <span class="string">'&lt;'</span>: <span class="number">10</span>, <span class="string">'6'</span>: <span class="number">15</span>, <span class="string">'m'</span>: <span class="number">16</span>, <span class="string">'V'</span>: <span class="number">15</span>, <span class="string">'?'</span>: <span class="number">8</span>, <span class="string">'F'</span>: <span class="number">13</span>, <span class="string">'c'</span>: <span class="number">15</span>, <span class="string">'5'</span>: <span class="number">17</span>, <span class="string">')'</span>: <span class="number">11</span>, <span class="string">'!'</span>: <span class="number">5</span>, <span class="string">'Y'</span>: <span class="number">8</span>, <span class="string">'l'</span>: <span class="number">15</span>, <span class="string">'e'</span>: <span class="number">13</span>, <span class="string">'P'</span>: <span class="number">6</span>, <span class="string">'&amp;'</span>: <span class="number">9</span>, <span class="string">'['</span>: <span class="number">15</span>, <span class="string">'@'</span>: <span class="number">13</span>, <span class="string">'+'</span>: <span class="number">6</span>, <span class="string">'t'</span>: <span class="number">13</span>, <span class="string">']'</span>: <span class="number">14</span>, <span class="string">'O'</span>: <span class="number">12</span>, <span class="string">'G'</span>: <span class="number">16</span>, <span class="string">'k'</span>: <span class="number">11</span>, <span class="string">'R'</span>: <span class="number">16</span>, <span class="string">'L'</span>: <span class="number">12</span>, <span class="string">'8'</span>: <span class="number">13</span>, <span class="string">'`'</span>: <span class="number">10</span>, <span class="string">'W'</span>: <span class="number">11</span>, <span class="string">'S'</span>: <span class="number">15</span>, <span class="string">'E'</span>: <span class="number">13</span>, <span class="string">'N'</span>: <span class="number">11</span>, <span class="string">'~'</span>: <span class="number">11</span>, <span class="string">'9'</span>: <span class="number">7</span>, <span class="string">'i'</span>: <span class="number">9</span>, <span class="string">','</span>: <span class="number">12</span>, <span class="string">'_'</span>: <span class="number">10</span>, <span class="string">'|'</span>: <span class="number">9</span>, <span class="string">'q'</span>: <span class="number">17</span>, <span class="string">'J'</span>: <span class="number">12</span>, <span class="string">"'"</span>: <span class="number">12</span>, <span class="string">'&#123;'</span>: <span class="number">10</span>, <span class="string">'u'</span>: <span class="number">6</span>, <span class="string">'1'</span>: <span class="number">9</span>, <span class="string">'0'</span>: <span class="number">8</span>, <span class="string">'$'</span>: <span class="number">11</span>, <span class="string">'b'</span>: <span class="number">12</span>, <span class="string">'A'</span>: <span class="number">11</span>, <span class="string">'('</span>: <span class="number">12</span>, <span class="string">'z'</span>: <span class="number">5</span>, <span class="string">'x'</span>: <span class="number">8</span>, <span class="string">'4'</span>: <span class="number">10</span>, <span class="string">'/'</span>: <span class="number">12</span>, <span class="string">'*'</span>: <span class="number">11</span>, <span class="string">'o'</span>: <span class="number">11</span>, <span class="string">'p'</span>: <span class="number">11</span>, <span class="string">'Q'</span>: <span class="number">7</span>, <span class="string">':'</span>: <span class="number">7</span>, <span class="string">'s'</span>: <span class="number">12</span>, <span class="string">'.'</span>: <span class="number">7</span>, <span class="string">'D'</span>: <span class="number">4</span>, <span class="string">'^'</span>: <span class="number">6</span>, <span class="string">'%'</span>: <span class="number">8</span>, <span class="string">'X'</span>: <span class="number">8</span>, <span class="string">'"'</span>: <span class="number">8</span>, <span class="string">'y'</span>: <span class="number">9</span>, <span class="string">'w'</span>: <span class="number">9</span>, <span class="string">'n'</span>: <span class="number">10</span>, <span class="string">'H'</span>: <span class="number">11</span>, <span class="string">'B'</span>: <span class="number">9</span>, <span class="string">';'</span>: <span class="number">10</span>, <span class="string">'h'</span>: <span class="number">8</span>, <span class="string">'j'</span>: <span class="number">8</span>, <span class="string">'C'</span>: <span class="number">3</span>, <span class="string">'7'</span>: <span class="number">3</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="第种方案上述代码可以更改为">第２种方案：上述代码可以更改为：</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> string</div><div class="line"><span class="keyword">import</span> random</div><div class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</div><div class="line"></div><div class="line">x = string.ascii_letters + string.digits + string.punctuation</div><div class="line">y = [random.choice(x) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>)]</div><div class="line"><span class="comment"># 生成包含1000个随机字符的列表</span></div><div class="line"></div><div class="line">z = <span class="string">''</span>.join(y)</div><div class="line"><span class="comment"># 把列表中的字符连接成字符串</span></div><div class="line"></div><div class="line">frequences = defaultdict(int)</div><div class="line"></div><div class="line">print(frequences)</div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> z:</div><div class="line"> frequences[item] += <span class="number">1</span></div><div class="line"></div><div class="line">print(frequences.items())</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> D:\&gt;python test.py</div><div class="line">defaultdict(&lt;class 'int'&gt;, &#123;&#125;)</div><div class="line">dict_items([(<span class="string">'I'</span>, <span class="number">14</span>), (<span class="string">"'"</span>, <span class="number">9</span>), (<span class="string">':'</span>, <span class="number">13</span>), (<span class="string">'|'</span>, <span class="number">9</span>), (<span class="string">'k'</span>, <span class="number">10</span>), (<span class="string">'['</span>, <span class="number">9</span>), (<span class="string">'E'</span>, <span class="number">13</span>), (<span class="string">'T'</span>, <span class="number">11</span>), (<span class="string">'K'</span>, <span class="number">12</span>), (<span class="string">'n'</span>, <span class="number">18</span>), (<span class="string">'a'</span>, <span class="number">8</span>), (<span class="string">'-'</span>, <span class="number">13</span>), (<span class="string">'Y'</span>, <span class="number">12</span>), (<span class="string">'&#123;'</span>, <span class="number">16</span>), (<span class="string">'2'</span>, <span class="number">11</span>), (<span class="string">'.'</span>, <span class="number">10</span>), (<span class="string">'z'</span>, <span class="number">9</span>), (<span class="string">'?'</span>, <span class="number">15</span>), (<span class="string">'_'</span>, <span class="number">8</span>), (<span class="string">'A'</span>, <span class="number">13</span>), (<span class="string">'U'</span>, <span class="number">11</span>), (<span class="string">'C'</span>, <span class="number">14</span>), (<span class="string">'O'</span>, <span class="number">14</span>), (<span class="string">'1'</span>, <span class="number">11</span>), (<span class="string">'p'</span>, <span class="number">12</span>), (<span class="string">'`'</span>, <span class="number">7</span>), (<span class="string">'6'</span>, <span class="number">11</span>), (<span class="string">'j'</span>, <span class="number">11</span>), (<span class="string">'&lt;'</span>, <span class="number">8</span>), (<span class="string">'$'</span>, <span class="number">16</span>), (<span class="string">'\\'</span>, <span class="number">7</span>), (<span class="string">'Z'</span>, <span class="number">11</span>), (<span class="string">'3'</span>, <span class="number">10</span>), (<span class="string">'W'</span>, <span class="number">14</span>), (<span class="string">'i'</span>, <span class="number">10</span>), (<span class="string">'x'</span>, <span class="number">8</span>), (<span class="string">'q'</span>, <span class="number">9</span>), (<span class="string">'%'</span>, <span class="number">10</span>), (<span class="string">'B'</span>, <span class="number">7</span>), (<span class="string">'M'</span>, <span class="number">12</span>), (<span class="string">'&amp;'</span>, <span class="number">16</span>), (<span class="string">'N'</span>, <span class="number">13</span>), (<span class="string">'9'</span>, <span class="number">14</span>), (<span class="string">'&#125;'</span>, <span class="number">7</span>), (<span class="string">'Q'</span>, <span class="number">8</span>), (<span class="string">'!'</span>, <span class="number">10</span>), (<span class="string">'/'</span>, <span class="number">10</span>), (<span class="string">'J'</span>, <span class="number">13</span>), (<span class="string">'s'</span>, <span class="number">13</span>), (<span class="string">'G'</span>, <span class="number">8</span>), (<span class="string">'5'</span>, <span class="number">11</span>), (<span class="string">'e'</span>, <span class="number">19</span>), (<span class="string">'L'</span>, <span class="number">6</span>), (<span class="string">'u'</span>, <span class="number">9</span>), (<span class="string">'g'</span>, <span class="number">10</span>), (<span class="string">'7'</span>, <span class="number">16</span>), (<span class="string">'f'</span>, <span class="number">8</span>), (<span class="string">'+'</span>, <span class="number">14</span>), (<span class="string">'0'</span>, <span class="number">12</span>), (<span class="string">'"'</span>, <span class="number">10</span>), (<span class="string">'('</span>, <span class="number">17</span>), (<span class="string">'b'</span>, <span class="number">6</span>), (<span class="string">'&gt;'</span>, <span class="number">9</span>), (<span class="string">'m'</span>, <span class="number">10</span>), (<span class="string">'v'</span>, <span class="number">11</span>), (<span class="string">'h'</span>, <span class="number">12</span>), (<span class="string">'y'</span>, <span class="number">9</span>), (<span class="string">'l'</span>, <span class="number">10</span>), (<span class="string">'r'</span>, <span class="number">16</span>), (<span class="string">']'</span>, <span class="number">13</span>), (<span class="string">'^'</span>, <span class="number">12</span>), (<span class="string">'~'</span>, <span class="number">8</span>), (<span class="string">'4'</span>, <span class="number">14</span>), (<span class="string">'o'</span>, <span class="number">10</span>), (<span class="string">'w'</span>, <span class="number">10</span>), (<span class="string">'@'</span>, <span class="number">11</span>), (<span class="string">'X'</span>, <span class="number">10</span>), (<span class="string">'S'</span>, <span class="number">6</span>), (<span class="string">'#'</span>, <span class="number">10</span>), (<span class="string">'c'</span>, <span class="number">6</span>), (<span class="string">'R'</span>, <span class="number">14</span>), (<span class="string">'H'</span>, <span class="number">15</span>), (<span class="string">','</span>, <span class="number">8</span>), (<span class="string">'D'</span>, <span class="number">11</span>), (<span class="string">'='</span>, <span class="number">8</span>), (<span class="string">'8'</span>, <span class="number">5</span>), (<span class="string">')'</span>, <span class="number">11</span>), (<span class="string">'*'</span>, <span class="number">2</span>), (<span class="string">'d'</span>, <span class="number">7</span>), (<span class="string">'V'</span>, <span class="number">11</span>), (<span class="string">';'</span>, <span class="number">5</span>), (<span class="string">'t'</span>, <span class="number">8</span>), (<span class="string">'P'</span>, <span class="number">8</span>), (<span class="string">'F'</span>, <span class="number">4</span>)])</div></pre></td></tr></table></figure>
<h3 id="第种方案">第３种方案：</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> string</div><div class="line"><span class="keyword">import</span> random</div><div class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</div><div class="line"></div><div class="line">x = string.ascii_letters + string.digits + string.punctuation</div><div class="line">y = [random.choice(x) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>)]</div><div class="line"><span class="comment"># 生成包含1000个随机字符的列表</span></div><div class="line"></div><div class="line">z = <span class="string">''</span>.join(y)</div><div class="line"><span class="comment"># 把列表中的字符连接成字符串</span></div><div class="line"></div><div class="line">frequences = Counter(z)</div><div class="line">print(frequences.items())</div><div class="line">print(frequences.most_common(<span class="number">1</span>))</div><div class="line">print(frequences.most_common(<span class="number">3</span>))</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">D:\&gt;python test.py</div><div class="line">dict_items([(<span class="string">'!'</span>, <span class="number">4</span>), (<span class="string">':'</span>, <span class="number">6</span>), (<span class="string">'A'</span>, <span class="number">9</span>), (<span class="string">'e'</span>, <span class="number">6</span>), (<span class="string">'R'</span>, <span class="number">5</span>), (<span class="string">'*'</span>, <span class="number">16</span>), (<span class="string">'2'</span>, <span class="number">6</span>), (<span class="string">'m'</span>, <span class="number">17</span>), (<span class="string">'"'</span>, <span class="number">6</span>), (<span class="string">'&#123;'</span>, <span class="number">9</span>), (<span class="string">'i'</span>, <span class="number">13</span>), (<span class="string">'\\'</span>, <span class="number">8</span>), (<span class="string">'r'</span>, <span class="number">8</span>), (<span class="string">'/'</span>, <span class="number">10</span>), (<span class="string">'&gt;'</span>, <span class="number">9</span>), (<span class="string">'f'</span>, <span class="number">14</span>), (<span class="string">'#'</span>, <span class="number">18</span>), (<span class="string">'w'</span>, <span class="number">13</span>), (<span class="string">']'</span>, <span class="number">8</span>), (<span class="string">'J'</span>, <span class="number">9</span>), (<span class="string">'V'</span>, <span class="number">12</span>), (<span class="string">'s'</span>, <span class="number">13</span>), (<span class="string">'&#125;'</span>, <span class="number">11</span>), (<span class="string">'Q'</span>, <span class="number">12</span>), (<span class="string">'5'</span>, <span class="number">13</span>), (<span class="string">'k'</span>, <span class="number">9</span>), (<span class="string">'t'</span>, <span class="number">10</span>), (<span class="string">'S'</span>, <span class="number">9</span>), (<span class="string">'='</span>, <span class="number">7</span>), (<span class="string">'n'</span>, <span class="number">13</span>), (<span class="string">'7'</span>, <span class="number">13</span>), (<span class="string">'p'</span>, <span class="number">7</span>), (<span class="string">'X'</span>, <span class="number">13</span>), (<span class="string">'~'</span>, <span class="number">5</span>), (<span class="string">'.'</span>, <span class="number">15</span>), (<span class="string">'E'</span>, <span class="number">15</span>), (<span class="string">'&amp;'</span>, <span class="number">12</span>), (<span class="string">'B'</span>, <span class="number">9</span>), (<span class="string">'q'</span>, <span class="number">14</span>), (<span class="string">"'"</span>, <span class="number">8</span>), (<span class="string">'U'</span>, <span class="number">13</span>), (<span class="string">'Z'</span>, <span class="number">7</span>), (<span class="string">'F'</span>, <span class="number">9</span>), (<span class="string">','</span>, <span class="number">13</span>), (<span class="string">'v'</span>, <span class="number">15</span>), (<span class="string">'a'</span>, <span class="number">8</span>), (<span class="string">'P'</span>, <span class="number">12</span>), (<span class="string">'+'</span>, <span class="number">13</span>), (<span class="string">'G'</span>, <span class="number">14</span>), (<span class="string">'@'</span>, <span class="number">21</span>), (<span class="string">'y'</span>, <span class="number">10</span>), (<span class="string">'$'</span>, <span class="number">9</span>), (<span class="string">'j'</span>, <span class="number">16</span>), (<span class="string">'D'</span>, <span class="number">13</span>), (<span class="string">'b'</span>, <span class="number">9</span>), (<span class="string">'z'</span>, <span class="number">12</span>), (<span class="string">'c'</span>, <span class="number">12</span>), (<span class="string">'3'</span>, <span class="number">12</span>), (<span class="string">'0'</span>, <span class="number">11</span>), (<span class="string">')'</span>, <span class="number">11</span>), (<span class="string">'Y'</span>, <span class="number">15</span>), (<span class="string">'d'</span>, <span class="number">11</span>), (<span class="string">'?'</span>, <span class="number">11</span>), (<span class="string">'I'</span>, <span class="number">5</span>), (<span class="string">'L'</span>, <span class="number">13</span>), (<span class="string">'_'</span>, <span class="number">9</span>), (<span class="string">'O'</span>, <span class="number">9</span>), (<span class="string">'('</span>, <span class="number">7</span>), (<span class="string">'l'</span>, <span class="number">6</span>), (<span class="string">'^'</span>, <span class="number">8</span>), (<span class="string">'%'</span>, <span class="number">9</span>), (<span class="string">'u'</span>, <span class="number">13</span>), (<span class="string">'&lt;'</span>, <span class="number">13</span>), (<span class="string">'`'</span>, <span class="number">10</span>), (<span class="string">'|'</span>, <span class="number">14</span>), (<span class="string">'C'</span>, <span class="number">16</span>), (<span class="string">'1'</span>, <span class="number">11</span>), (<span class="string">'-'</span>, <span class="number">10</span>), (<span class="string">'o'</span>, <span class="number">8</span>), (<span class="string">'x'</span>, <span class="number">8</span>), (<span class="string">'8'</span>, <span class="number">12</span>), (<span class="string">'M'</span>, <span class="number">12</span>), (<span class="string">'g'</span>, <span class="number">13</span>), (<span class="string">'T'</span>, <span class="number">11</span>), (<span class="string">';'</span>, <span class="number">7</span>), (<span class="string">'H'</span>, <span class="number">12</span>), (<span class="string">'6'</span>, <span class="number">10</span>), (<span class="string">'['</span>, <span class="number">9</span>), (<span class="string">'K'</span>, <span class="number">11</span>), (<span class="string">'9'</span>, <span class="number">10</span>), (<span class="string">'W'</span>, <span class="number">6</span>), (<span class="string">'4'</span>, <span class="number">11</span>), (<span class="string">'h'</span>, <span class="number">12</span>), (<span class="string">'N'</span>, <span class="number">4</span>)])</div><div class="line">[(<span class="string">'@'</span>, <span class="number">21</span>)]</div><div class="line">[(<span class="string">'@'</span>, <span class="number">21</span>), (<span class="string">'#'</span>, <span class="number">18</span>), (<span class="string">'m'</span>, <span class="number">17</span>)]</div></pre></td></tr></table></figure>
<h2 id="字典排序">字典排序</h2>
<p>内置函数sorted()可以对字典元素进行排序并返回新列表，充分利用key参数可以实现丰富的排序功能，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>phonebook = &#123;<span class="string">'Linda'</span>:<span class="string">'7750'</span>,<span class="string">'Bob'</span>:<span class="string">'9345'</span>,<span class="string">'Carol'</span>:<span class="string">'5834'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(phonebook.items(), key=itemgetter(<span class="number">1</span>))</div><div class="line">[(<span class="string">'Carol'</span>, <span class="string">'5834'</span>), (<span class="string">'Linda'</span>, <span class="string">'7750'</span>), (<span class="string">'Bob'</span>, <span class="string">'9345'</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 按字典的"值"进行排序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(phonebook.items(),key=itemgetter(<span class="number">0</span>))</div><div class="line">[(<span class="string">'Bob'</span>, <span class="string">'9345'</span>), (<span class="string">'Carol'</span>, <span class="string">'5834'</span>), (<span class="string">'Linda'</span>, <span class="string">'7750'</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#按字典的"键"进行排序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(phonebook.items(),key=<span class="keyword">lambda</span> item:item[<span class="number">0</span>])</div><div class="line">[(<span class="string">'Bob'</span>, <span class="string">'9345'</span>), (<span class="string">'Carol'</span>, <span class="string">'5834'</span>), (<span class="string">'Linda'</span>, <span class="string">'7750'</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 按字典的"键"进行排序</span></div></pre></td></tr></table></figure>
<h2 id="提取字典的子集">提取字典的子集</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>students_score = &#123;<span class="string">'jack'</span>:<span class="number">80</span>,<span class="string">'james'</span>:<span class="number">91</span>, <span class="string">'leo'</span>:<span class="number">100</span>, <span class="string">'sam'</span>:<span class="number">60</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 提取分数超过90分的学生信息，并变成字典</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(students_score)</div><div class="line">&#123;<span class="string">'jack'</span>: <span class="number">80</span>, <span class="string">'james'</span>: <span class="number">91</span>, <span class="string">'leo'</span>: <span class="number">100</span>, <span class="string">'sam'</span>: <span class="number">60</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>good_score = &#123;name:score <span class="keyword">for</span> name, score <span class="keyword">in</span> students_score.items() <span class="keyword">if</span> score &gt; <span class="number">90</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(good_score)</div><div class="line">&#123;<span class="string">'james'</span>: <span class="number">91</span>, <span class="string">'leo'</span>: <span class="number">100</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="提取字典中的某个键的值">提取字典中的某个键的值</h2>
<p>如果此键不在字典中，就会返回none。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'lang'</span>:<span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(d)</div><div class="line">&#123;<span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(d.get(<span class="string">"lang"</span>))</div><div class="line">python</div></pre></td></tr></table></figure>
<h2 id="计算字典的健值">计算字典的健值</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>stocks = &#123;<span class="string">'wanke'</span>:<span class="number">25.6</span>, <span class="string">'wulingye'</span>:<span class="number">32.4</span>, <span class="string">'maotai'</span>:<span class="number">299.4</span>,<span class="string">'huatai'</span>:<span class="number">18.6</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(stocks)</div><div class="line">&#123;<span class="string">'wanke'</span>: <span class="number">25.6</span>, <span class="string">'wulingye'</span>: <span class="number">32.4</span>, <span class="string">'maotai'</span>: <span class="number">299.4</span>, <span class="string">'huatai'</span>: <span class="number">18.6</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(min(stocks.values()))</div><div class="line"><span class="number">18.6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(max(stocks.values()))</div><div class="line"><span class="number">299.4</span></div></pre></td></tr></table></figure>
<h2 id="字典的翻转">字典的翻转</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>stocks = &#123;<span class="string">'wanke'</span>:<span class="number">25.6</span>, <span class="string">'wulingye'</span>:<span class="number">32.4</span>, <span class="string">'maotai'</span>:<span class="number">299.4</span>,<span class="string">'huatai'</span>:<span class="number">18.6</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(stocks)</div><div class="line">&#123;<span class="string">'wanke'</span>: <span class="number">25.6</span>, <span class="string">'wulingye'</span>: <span class="number">32.4</span>, <span class="string">'maotai'</span>: <span class="number">299.4</span>, <span class="string">'huatai'</span>: <span class="number">18.6</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>invert_stocks = dict([(v,k) <span class="keyword">for</span> k,v <span class="keyword">in</span> stocks.items()])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(invert_stocks)</div><div class="line">&#123;<span class="number">25.6</span>: <span class="string">'wanke'</span>, <span class="number">32.4</span>: <span class="string">'wulingye'</span>, <span class="number">299.4</span>: <span class="string">'maotai'</span>, <span class="number">18.6</span>: <span class="string">'huatai'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="字典推导式">字典推导式</h2>
<p>字典推导和列表推导的使用方法是类似的，只不中括号该改成大括号。直接举例说明：</p>
<p>案例1:大小写key合并</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>mcase = &#123;<span class="string">'a'</span>: <span class="number">10</span>, <span class="string">'b'</span>: <span class="number">34</span>, <span class="string">'A'</span>: <span class="number">7</span>, <span class="string">'Z'</span>: <span class="number">3</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>mcase_frequency = &#123;</div><div class="line"><span class="meta">... </span>    k.lower(): mcase.get(k.lower(), <span class="number">0</span>) + mcase.get(k.upper(), <span class="number">0</span>)</div><div class="line"><span class="meta">... </span>    <span class="keyword">for</span> k <span class="keyword">in</span> mcase.keys()</div><div class="line"><span class="meta">... </span>    <span class="keyword">if</span> k.lower() <span class="keyword">in</span> [<span class="string">'a'</span>,<span class="string">'b'</span>]</div><div class="line"><span class="meta">... </span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(mcase_frequency)</div><div class="line">&#123;<span class="string">'a'</span>: <span class="number">17</span>, <span class="string">'b'</span>: <span class="number">34</span>&#125;</div></pre></td></tr></table></figure>
<p>案例2:快速更换key和value</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>mcase = &#123;<span class="string">'a'</span>: <span class="number">10</span>, <span class="string">'b'</span>: <span class="number">34</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>mcase_frequency = &#123;v: k <span class="keyword">for</span> k, v <span class="keyword">in</span> mcase.items()&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(mcase_frequency)</div><div class="line">&#123;<span class="number">10</span>: <span class="string">'a'</span>, <span class="number">34</span>: <span class="string">'b'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="使用字典推导式生成符合特定条件的字典">使用字典推导式生成符合特定条件的字典</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;i:str(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>)&#125;</div><div class="line">&#123;<span class="number">1</span>: <span class="string">'1'</span>, <span class="number">2</span>: <span class="string">'2'</span>, <span class="number">3</span>: <span class="string">'3'</span>, <span class="number">4</span>: <span class="string">'4'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'b'</span>,<span class="string">'d'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;i:j <span class="keyword">for</span> i,j <span class="keyword">in</span> zip(x,y)&#125;</div><div class="line">&#123;<span class="string">'A'</span>: <span class="string">'a'</span>, <span class="string">'B'</span>: <span class="string">'b'</span>, <span class="string">'C'</span>: <span class="string">'b'</span>, <span class="string">'D'</span>: <span class="string">'d'</span>&#125;</div></pre></td></tr></table></figure>
<p>再看一个案例，在这个案例中，寻找得到分最高的同学：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat dict1.py</div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">scores = &#123;<span class="string">"Zhang San"</span>:<span class="number">45</span>, <span class="string">"Li Si"</span>:<span class="number">78</span>, <span class="string">"Wang Wu"</span>:<span class="number">40</span>, <span class="string">"Zhou Liu"</span>:<span class="number">96</span>, <span class="string">"Zhao Qi"</span>:<span class="number">65</span>, <span class="string">"Sun Ba"</span>:<span class="number">90</span>, <span class="string">"Zheng Jiu"</span>:<span class="number">78</span>, <span class="string">"Wu Shi"</span>:<span class="number">99</span>,<span class="string">"Dong Shiyi"</span>:<span class="number">60</span>&#125;</div><div class="line"></div><div class="line">print(scores)</div><div class="line">higest = max(scores.values())</div><div class="line">lowest = min(scores.values())</div><div class="line">print(higest)</div><div class="line">print(lowest)</div><div class="line">average = sum(scores.values())/len(scores)</div><div class="line">print(average)</div><div class="line">higestPerson = [name <span class="keyword">for</span> name, score <span class="keyword">in</span> scores.items() <span class="keyword">if</span> score == higest]</div><div class="line">print(higestPerson)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 dict1.py </div><div class="line">&#123;<span class="string">'Zhang San'</span>: <span class="number">45</span>, <span class="string">'Li Si'</span>: <span class="number">78</span>, <span class="string">'Wang Wu'</span>: <span class="number">40</span>, <span class="string">'Zhou Liu'</span>: <span class="number">96</span>, <span class="string">'Zhao Qi'</span>: <span class="number">65</span>, <span class="string">'Sun Ba'</span>: <span class="number">90</span>, <span class="string">'Zheng Jiu'</span>: <span class="number">78</span>, <span class="string">'Wu Shi'</span>: <span class="number">99</span>, <span class="string">'Dong Shiyi'</span>: <span class="number">60</span>&#125;</div><div class="line"><span class="number">99</span></div><div class="line"><span class="number">40</span></div><div class="line"><span class="number">72.33333333333333</span></div><div class="line">[<span class="string">'Wu Shi'</span>]</div></pre></td></tr></table></figure>
<h3 id="使用字典推导式提取字典的键与值">使用字典推导式提取字典的键与值</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat test2.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line">x = [randint(<span class="number">1</span>,<span class="number">10</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">20</span>)]</div><div class="line"><span class="comment"># 生成20个范围在1到10之间的随机数</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> enumerate(x):</div><div class="line">    print(i)</div><div class="line">m = max(x)</div><div class="line">print(m)</div><div class="line">print([index <span class="keyword">for</span> index, value <span class="keyword">in</span> enumerate(x) <span class="keyword">if</span> value ==m])</div><div class="line">print(enumerate(x))</div><div class="line">print(x)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 test2.py </div><div class="line">(<span class="number">0</span>, <span class="number">10</span>)</div><div class="line">(<span class="number">1</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">2</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">3</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">4</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">5</span>, <span class="number">8</span>)</div><div class="line">(<span class="number">6</span>, <span class="number">4</span>)</div><div class="line">(<span class="number">7</span>, <span class="number">9</span>)</div><div class="line">(<span class="number">8</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">9</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">10</span>, <span class="number">1</span>)</div><div class="line">(<span class="number">11</span>, <span class="number">3</span>)</div><div class="line">(<span class="number">12</span>, <span class="number">9</span>)</div><div class="line">(<span class="number">13</span>, <span class="number">3</span>)</div><div class="line">(<span class="number">14</span>, <span class="number">7</span>)</div><div class="line">(<span class="number">15</span>, <span class="number">6</span>)</div><div class="line">(<span class="number">16</span>, <span class="number">8</span>)</div><div class="line">(<span class="number">17</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">18</span>, <span class="number">10</span>)</div><div class="line">(<span class="number">19</span>, <span class="number">6</span>)</div><div class="line"><span class="number">10</span></div><div class="line">[<span class="number">0</span>, <span class="number">18</span>]</div><div class="line">&lt;enumerate object at <span class="number">0x7f2c5c02ec60</span>&gt;</div><div class="line">[<span class="number">10</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">10</span>, <span class="number">6</span>]</div></pre></td></tr></table></figure>
<p><strong>注1：</strong>其中用到了enumerate()，这是python的内置函数、在字典上是枚举、列举的意思，它可以遍历/可迭代的对象(如列表、字符串)，enumerate多用于在for循环中得到计数，利用它可以同时获得索引和值，即需要index和value值的时候可以使用enumerate。</p>
<p><strong>注2：</strong>如果不用for循环，enumerate()返回的是一个enumerate对象，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat test3.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line">x = [randint(<span class="number">1</span>,<span class="number">10</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">20</span>)]</div><div class="line"><span class="comment"># 生成20个范围在1到10之间的随机数</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> enumerate(x):</div><div class="line">    print(i)</div><div class="line">print(enumerate(x))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 test3.py </div><div class="line">(<span class="number">0</span>, <span class="number">8</span>)</div><div class="line">(<span class="number">1</span>, <span class="number">7</span>)</div><div class="line">(<span class="number">2</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">3</span>, <span class="number">4</span>)</div><div class="line">(<span class="number">4</span>, <span class="number">10</span>)</div><div class="line">(<span class="number">5</span>, <span class="number">4</span>)</div><div class="line">(<span class="number">6</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">7</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">8</span>, <span class="number">6</span>)</div><div class="line">(<span class="number">9</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">10</span>, <span class="number">6</span>)</div><div class="line">(<span class="number">11</span>, <span class="number">3</span>)</div><div class="line">(<span class="number">12</span>, <span class="number">10</span>)</div><div class="line">(<span class="number">13</span>, <span class="number">10</span>)</div><div class="line">(<span class="number">14</span>, <span class="number">7</span>)</div><div class="line">(<span class="number">15</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">16</span>, <span class="number">1</span>)</div><div class="line">(<span class="number">17</span>, <span class="number">7</span>)</div><div class="line">(<span class="number">18</span>, <span class="number">9</span>)</div><div class="line">(<span class="number">19</span>, <span class="number">8</span>)</div><div class="line">&lt;enumerate object at <span class="number">0x7f8b77ae2c60</span>&gt;</div></pre></td></tr></table></figure>
<h2 id="查看字典元素的多少">查看字典元素的多少</h2>
<p>使用len()函数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;i:str(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>)&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">&#123;<span class="number">1</span>: <span class="string">'1'</span>, <span class="number">2</span>: <span class="string">'2'</span>, <span class="number">3</span>: <span class="string">'3'</span>, <span class="number">4</span>: <span class="string">'4'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(len(a))</div><div class="line"><span class="number">4</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="字典的复制">字典的复制</h2>
<p>如果直接用<code>=</code>复制字典，其实是为同一个对象贴了两个标签，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = a</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a,b)</div><div class="line"><span class="number">5</span> <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(a),id(b))</div><div class="line"><span class="number">1895588128</span> <span class="number">1895588128</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示，可以发现，a与d的id是一样的，它们表示的是同一个对象，如果用copy方法来进行复制，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>ad = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>,<span class="string">"lang"</span>:<span class="string">"python"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>bd = ad</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cd = ad.copy()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(cd)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(cd))</div><div class="line"><span class="number">2434395979280</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(ad))</div><div class="line"><span class="number">2434395576072</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cd[<span class="string">"name"</span>] = <span class="string">"itdiffer.com"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(cd)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'itdiffer.com'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(ad)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div></pre></td></tr></table></figure>
<p>继续修改，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>bd[<span class="string">"name"</span>] = <span class="string">"laoqi"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(bd)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'laoqi'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(ad)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'laoqi'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div></pre></td></tr></table></figure>
<p>修改了bd所对应的对象后，ad的对象也变了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/04/BioInformation/生信-0-GSEA笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/04/BioInformation/生信-0-GSEA笔记/" itemprop="url">GSEA笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-04T12:00:00+08:00">
                2018-04-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物信息学/" itemprop="url" rel="index">
                    <span itemprop="name">生物信息学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,741
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  14
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近数据分析要用到GSEA，以前没有了解过，现在把自己学习的思路写下来，有些是直接复制别人博客的，我参考资料中会注明。</p>
<h2 id="什么是gsea">什么是GSEA？</h2>
<p>GSEA的全称是Gene Set Enrichment Analysis，中文翻译就是基因集富集分析。</p>
<p>基因集富集分析是分析基因表达信息的一种方法，富集是指将基因按照先验知识，也就是基因组注释信息进行分类（注：我个人理解先验知识就是先于经验的知识，例如我们从书本上知道地球是圆的，这就是先验知识，我自己没有亲自去测量，也无法观察到，就知道地球是圆的。基因组注释就是对碱基序列的注释，给出一段碱基序列，根据前人研究的结果，我知识它是什么基因，发挥了什么功能，以上就是对先验知识的理解）。最早提出GSEA的文章是下面的这篇文献：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Subramanian, A., et al. (2005). &quot;Gene set enrichment analysis: A knowledge-based approach for interpreting genome-wide expression profiles.&quot; Proceedings of the National Academy of Sciences 102(43): 15545-15550.</div></pre></td></tr></table></figure>
<h2 id="gsea与gokegg有什么不一样">GSEA与GO、KEGG有什么不一样？</h2>
<p>基因集合富集分析检测基因集合而不是单个基因的表达变化，因此可以包含这些细微的表达变化，预期得到更为理想的结果。GSEA分析有三个特点：①分析的基因集合而不是单个基因；②将基因与预定义的基因集进行比较；③富集分析。与GO（Gene Ontology）和KEGG pathway分析相比，GSEA分析的主要优势在于：</p>
<p>一般的差异分析（GO和Pathway）往往侧重于比较两组间的基因表达差异，集中关注少数几个显著上调或下调的基因，这容易遗漏部分差异表达不显著却有重要生物学意义的基因，忽略一些基因的生物特性、基因调控网络之间的关系及基因功能和意义等有价值的信息。而GSEA不需要指定明确的差异基因阈值，算法会根据实际数据的整体趋势， 为研究者们提供了一种合理地解决目前芯片分析瓶颈问题的方法,即使在没有先验经验存在的情况下也能在表达谱整体层次上对数条基因进行分析,从而从数理统计上把表达谱芯片数据与生物学意义很好地衔接起来,使得研究者们能够更轻松、更合理地解读芯片结果。</p>
<p>目前，市面上绝大多数公司在求得差异基因列表后，都会在此之上提供给客户Pathway 以及GO 富集分析，毕竟给予成百上千的差异表达基因以简洁、明晰的生物学功能的概括，才是进行高通量生物学表达谱实验的主要目的。然而，在实际应用于生物学高通量数据时，它们都有一个重大的缺陷：对于差异基因检出的阈值，异常的敏感，客户需要给出差异基因的一个明确的定义(阈值)，例如abs(FC) ≧2.0 &amp; p ≦ 0.05。这种一刀切的阈值，对于发现真正的生物学效应，许多时候是一种障碍，因为实际通过芯片观测到的RNA 表达变化，往往是层层的负反馈调控后的结果，并且不同组织对于表达差异的敏感度是不同的：在神经递质系统内，一个1.2 倍的表达差异即可能产生及其显著的效应。</p>
<h2 id="gsea的原理">GSEA的原理</h2>
<p>首先是对每个样本里面的基因表达值在样本内部进行排序，这里可以理解为，实验组与对照组的差异基因进行排序。但是，这个差异如何量化，有多种方法，可以是Signal2noise，或者是T检验的值，或者是fold change的值，或者是logFC等。而GSEA默认的就是signal-to-noise metric来对基因进行排序。如果要想计算Signal2Noise ，每个group必须要有3个及以上的samples。</p>
<p>现在我们定义一下各种参数。</p>
<p>其中我们把自己测出来的差异基因的排序列表称为<code>L</code>，把根据先验知识预先定义的基因集称为<code>S</code>（这个基因集可以是与免疫有关的，可以是与某个代谢通路有关的，也可以是与miRNA有关的，具体的看GSEA官网），把这个基因集中的成员称为<code>s</code>（前者是大写，后者是小写）。GSEA的运行原理就是判断预告定义的基因集<code>S</code>里面的成员<code>s</code>在<code>L</code>里面是随机分布的，还是主要聚集在<code>L</code>的顶部或底部。如果我们研究的基因集<code>S</code>的成员显著聚集在<code>L</code>的顶部或底部，那么就说明此基因集成员对实验干预造成的结果有作用，就是我们要关注的基因集。</p>
<p>以下是GSEA计算中的几个概念。</p>
<ol style="list-style-type: decimal">
<li>Enrichment Score，即ES，中文翻译为富集得分。它反应的是基因集成员<code>s</code>在排序列表<code>L</code>两端富集的程度，计算方法是，从基因集<code>L</code>的第一个基因开始，计算一个累计统计值。当遇到一个落在<code>S</code>里面的基因，则增加统计值。遇到一个不在<code>S</code>里面的基因，则降低统计值。每一步统计值增加或减少的幅度与基因的表达变化程度是相关的。富集得分ES是从没有遇到时候开始计算，直到最大值。正值ES表示基因集在列表的顶部富集，负值ES表示基因集在列表的底部富集。</li>
<li>评估富集得分(ES)的显著性。显著性是通过一种称为转换检验 (permutation test)的方法来进行检验的。具体过程是，我们转换不同分数下的数据，并且再一次计算ES值，使之形成一个新的ES分布（假分布），从经验上来讲，交换之后，ES的p值相对于新的ES值（统计分布）来说若是显著的变化，则有理由说明此基因集是有一定的生物学意义的。若样品量少，也可基于基因集做排列检验 (permutation test)，计算p-value（这段话不理解）。</li>
<li>多重假设检验校正。当评估了所有基因的数据之后，我们要使用多重假设检验来评估它们的显著性。首先把每一个基因的ES值根据基因集的大小进行标准化，得到Normalized Enrichment Score (NES)，之后针对NES计算假阳性发现率（FDR），并以此划出假阳性部分对应每一个NES值。FDR是评估一个NES表达值中所发现的假阳性可能性大小；它是由NES的观测值和零分布时比较得出的。</li>
<li>Leading-edge subset，对富集得分贡献最大的基因成员。</li>
</ol>
<h2 id="es-score算法">ES score算法</h2>
<p>ES score的算法如下图所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/07k6cigf11.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>其中<code>L</code>表示的就是差异基因已经排序后的序列，<code>S</code>指的是基因集，我们看左边的<code>Ranked List</code>这个部分，它右边是<code>FC</code>，即表达倍数（明显能看出来是从大小到排列的），红色表示的是Hit，也就是说这个基因在基因集<code>S</code>里面，如果在，就加分，也就是说在右边的表格里的<code>Contribution to running sum for ES</code>加上相应的分数。如果是蓝色，表示这个基因不在，就减去相应的分数。</p>
<h2 id="gsea的结果如何查看">GSEA的结果如何查看</h2>
<p>现在我们看一个案例，假设芯片或者其它测量方法（例如qPCR）测到N个基因，那么这N个基因在实验组与对照组之间的差异肯定不一样（这种差异有6种差异计算方法，GSEA官网中提到有这些：），那么根据它们的差异程度，就可以对它们进行排序，并且进行z-score标准化，下图显示的就是GSEA计算的结果：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/m1KCmI2aBI.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在解释一下这个图：</p>
<ol style="list-style-type: decimal">
<li>图片中长得像条形码的东西就是背景基因（也就是N个基因）所在的位置；</li>
<li>所有的富集分数（Enrichment Score）一开始都是0，就是绿色长蛇状的粗线，这个绿色的曲线就是ES的值计算过程，从左到右每遇到一个基因，就计算出一个ES值，连成线，最高峰为富集得分（ES），在最左侧或最右侧有一个特别明显的峰的基因集通常是感兴趣的基因集。</li>
<li>红色虚线是绿色曲线的顶点，它左侧的数据是Leading edge subset，也就是对富集得分贡献最大的基因成员，若富集得分为正值，则是峰左侧的基因，如果富集得分为负值，则是峰右侧的基因。</li>
<li>一旦gene set里面的基因集中在2万个基因的前面部分，那就是说，它们在实验组中富集，如果集中在后面的闪哪，那就是说在对照组里面的富集。</li>
<li>下面的灰色图形是所有基因在处理前后的变化量的z-score值。</li>
</ol>
<h2 id="gsea相关的文件格式">GSEA相关的文件格式</h2>
<h3 id="gct文件">GCT文件</h3>
<p>GCT格式是由分割符分开的一个数据文件，它记录的是基因表达的数据集，也就是我们要进行GSEA计算的原始数据，它的格式如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/097ii2H0j1.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>从左到右，顺时针看到下，GCT文件包含以下这些信息：</p>
<ol style="list-style-type: decimal">
<li><code>Always &quot;#1.2&quot;</code>：这个单元格里一直标注的是<code>#1.2</code>，不用管它。</li>
<li><code># of samples</code>：这个是样本的数目，在上面的表格中，这个数目是130。</li>
<li><code>Third column onwards are sample names. These must be UNIQUE</code>，它是样本的名称，样本的名称必须保证是唯一的，不能出现重复。</li>
<li><code>Data stars on line</code>：第4行，这是每个基因具体的数值。</li>
<li><code>Each column contains expression values from 1 sample. Missing values are allowed(leave empty)</code>：基因表达的数值可以是空。</li>
<li><code>Column 2:Row descriptions.</code>：第2列，对基因的描述，可以为空（填上na）。</li>
<li><code>Column 1:Rowidentifiers</code>：这一列是基因的标识，通常是探针集的id（probe set ids）或克隆号，此列数据必须唯一，不能出现重复。</li>
<li><code>A2单元格：The # of rows</code>：探针的数目。</li>
</ol>
<h3 id="cls文件">CLS文件</h3>
<p>CLS的全称是Categorical (e.g tumor vs normal) class file format，它表示的是分组的信息，下面是一个CLS文件的内容：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/87HLjaCEGJ.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>以上面的图片为例说明，第1行有3个数字，分别为38， 2， 1。其中38是样本的数目，2是分组的数目，1不用管。第2行，分别是ALL和AML，这表示的是分组的信息，即有2个组，分别为ALL和AML。第4行，分别是0和1，0表示ALL，1表示AML，它们的数目表示各自的样本有多少个。再看一个案例：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/H1JhhC5giK.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在这个案例中，我们可以看到一共有9个样本，分了3组；这3组分别为KRAS_MUT，WT，MYC_MUT，第3行是具体的分组数目。</p>
<p>常用的定义基因集的文件主要有GMT与GMX。</p>
<h3 id="gmt文件">GMT文件</h3>
<p>GMT文件的全称是Gene Matrix Transposed file format，中文是“基因矩阵转换文件格式”，缩写为GMT。GMT文件是由制表符分割的文件，它用于描述基因集，可以理解为高通量测序的注释文件。下图是GMT文件的一个案例，每行代表一个基因集：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/2CELehIc0L.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在上面的图片中，我们可以看到，第1行表示的一个是基因集，第1列表示的是是基因集的名称，这一列不能出现重复的基因集。第2列是对基因集的一个简单描述，可以选择不填（写上na），第1列的长度可以不等，如果要在Excel表格中编辑GMT文件，一定要注意Excel的自动纠正功能（例如，Excel有可能把SEP8基因自动纠正为8-Sep）。</p>
<h3 id="gmx文件">GMX文件</h3>
<p>GMX文件是另外一种描述基因集的文件格式，下图是GMX的一个案例，它与GMT格式正好相反，它的每列代表一个基因，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/ecJHKmbd8a.png?imsageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h3 id="rnk文件">RNK文件</h3>
<p>RNK文件的全称是Ranked list file format，这个文件是一个有序的基因列表，第1列是基因名称（A1单元格忽略），第2列是数值（可以是表达倍数差异，也可以使用类似于t检验进行的排序），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/1c24eDgdiG.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="gsea使用案例">GSEA使用案例</h2>
<h3 id="官网的gsea工具进行分析">官网的GSEA工具进行分析</h3>
<p>第一步，去<a href="http://software.broadinstitute.org/gsea/downloads.jsp" target="_blank" rel="external">官网地址</a>下载GSEA软件，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/EKhiLF46Li.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>下载后，打开，界面如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/IcIIDIHHi6.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>GSEA的官网提供了一些数据的案例，我们可以拿来练习一下，地址<a href="http://software.broadinstitute.org/gsea/datasets.jsp" target="_blank" rel="external">点击这里</a>，这些数据如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/ah0dgeD2Bd.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这里以第2行的<code>p53</code>为例说明一下，这一行中有三个数据文件，分别为<code>P53-hug95av2.gct</code>，<code>P53_collapsed.gct</code>和<code>P53.cls</code>，都把它们下载下来，使用Excel打开<code>P53-hug95av2.gct</code>这个数据文件（其实也可以使用Notepad++或PilotEdit Lite这类文本编辑器来打开gct文件），这个文件是分级以及表达量的数据，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/62H63F9cGg.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在用Excel打开P53.cls这个文件，这个文件是注释信息，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/c6BgK0Cl5d.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>从注释信息中我们可以得知，有50个样本，分为两组，分别为2和1表示这两组，2表示MUT组，1表示WT组。将上述的数据导入到GSEA中，如下所示：</p>
<h3 id="使用r包进行gsea">使用R包进行GSEA</h3>
<p>目前R包中有关GSEA分析的包有：PGSEA，</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/HmHf9IaH04.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/aGBchj73c5.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/BEFaelJEhE.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/g76763dGaF.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/jkF4E50JmI.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/48kflEdlaD.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/fCDE8DE9CJ.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/K0C5F8hkKK.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>GSEA的生成的结果非常多，需要看的就是index.html这个文件，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/eEg8idCfCk.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>结果如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/FFdG9KfJJA.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/7EHlieAEmF.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/5EH72dkDEI.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/4hLcgad7kB.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/j82F5314k1.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/DB5edihe18.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/hIK573jhF7.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="mirna与gsea">miRNA与GSEA</h2>
<h2 id="自定义gene-set文件">自定义Gene set文件</h2>
<p>进行GSEA分析的时候，需要GCT，CLS和GMT文件，其中GMT文件就是Broad官网上的<a href="http://software.broadinstitute.org/gsea/msigdb/collections.jsp" target="_blank" rel="external">Molecular Signatures Database (MSigDB)</a> ，里面有大量的Gene Set，但有的时候，里面并没有我们需要的GMT，因此需要自己制作Gene Set，也就是自己制作GMT格式的文件。</p>
<h2 id="参考资料">参考资料</h2>
<p><a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1528721179&amp;ver=932&amp;signature=BDn09HfM3akefGbPg09cA1FY6KvL8dKh8H9wdC8KpEIHyAcAxiFEfCy0JcYxY8WgCFRymGXCDJTL*jE5eh7-nAd3fnHOJnpOHxDda8JFNOPrkZYcSp1q2JCeDJ6amwdY&amp;new=1" target="_blank" rel="external">1. GSEA分析一文就够.Jimmy.生信技能树</a></p>
<p><a href="http://blog.genesino.com/2017/10/gsea/" target="_blank" rel="external">2.GSEA富集分析 - 界面操作</a></p>
<p><a href="https://www.jianshu.com/p/d4171f3eefb5" target="_blank" rel="external">3.基因集富集分析</a></p>
<p><a href="http://www.360doc.com/content/16/1026/18/19913717_601568937.shtml" target="_blank" rel="external">4.GSEA分析是个什么鬼（上）</a></p>
<p><a href="http://software.broadinstitute.org/gsea/doc/GSEAUserGuideFrame.html" target="_blank" rel="external">5.GSEA User Guide</a></p>
<p><a href="http://software.broadinstitute.org/gsea/doc/desktop_tutorial.jsp" target="_blank" rel="external">6.Quick Tour of the GSEA Java Desktop Application</a></p>
<p><a href="http://www.bio-info-trainee.com/1282.html" target="_blank" rel="external">7.用GSEA来做基因集富集分析</a></p>
<p><a href="http://www.bio-info-trainee.com/3330.html" target="_blank" rel="external">8.使用PGSEA包进行基因集分析</a></p>
<p><a href="http://www.bio-info-trainee.com/2144.html" target="_blank" rel="external">9.制作自己的gene set文件给gsea软件</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/03/Python/Python学习笔记（3）-数据类型之列表与元组/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/Python/Python学习笔记（3）-数据类型之列表与元组/" itemprop="url">Python学习笔记（3）-数据类型之列表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T12:00:00+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5,435
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  23
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一列表的概念">（一）列表的概念</h2>
<p>序列是Python中最基本的数据结构，和字符串差不多，列表是一系列的数值的序列，序列中的每个元素都分配一个数字，这个数字代表了它的位置，这个数字也叫索引，第一个索引是0，第二个索引是1，依此类推。序列都可以进行的操作包括索引，切片，加，乘，检查成员。</p>
<p>列表是包含若干元素的有序连接内存空间，其形式是中括号。当列表增加或删除元素时，列表对象自动进行内存的扩展或收缩，从而保证元素之间没有缝隙。但是当插入和删除非尾部元素时会涉及列表中大量元素的移动，效率较低，因此除非确实有必要，否则应尽量从列表尾部进行元素的增加与删除。</p>
<p>列表中的元素类型可以不同，可以同时分别为整数、实数、字符串等基本类型，也可以是列表、元组、字典、集合以及其他自定义类型的对象。序列都可以进行的操作包括索引，切片，加，乘，检查成员。</p>
<h2 id="列表的创建">列表的创建</h2>
<h3 id="常规创建列表">常规创建列表</h3>
<p>创建一个列表，只要把逗号分隔的不同的数据项使用方括号括起来即可。如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = [<span class="string">'physics'</span>, <span class="string">'chemistry'</span>, <span class="number">1997</span>, <span class="number">2000</span>];</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ];</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list3 = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>];</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list1)</div><div class="line">[<span class="string">'physics'</span>, <span class="string">'chemistry'</span>, <span class="number">1997</span>, <span class="number">2000</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list2)</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list3)</div><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</div></pre></td></tr></table></figure>
<h3 id="使用list函数创建列表">使用list函数创建列表</h3>
<p><code>list()</code>函数可以将元组，字符串，字典，集合或其它类型的可迭代对象转换为列表。在将字典转换为列表时，默认是将字典的“键”转换为列表，而不是把字符的元素转换为列表，如果要把字典的元素转换为列表，需要使用字典对象的<code>items()</code>方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a_list = list((<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将元组转换为列表</span></div><div class="line"><span class="meta">... </span>print(a_list)</div><div class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b_list = list(range(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(b_list)</div><div class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将range对象转换为列表</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(<span class="string">'hello world'</span>))</div><div class="line">[<span class="string">'h'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>, <span class="string">' '</span>, <span class="string">'w'</span>, <span class="string">'o'</span>, <span class="string">'r'</span>, <span class="string">'l'</span>, <span class="string">'d'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将字符串转换为列表</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(&#123;<span class="number">3</span>, <span class="number">7</span>, <span class="number">4</span>&#125;))</div><div class="line">[<span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将集合转换为列表</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c_list = list(&#123;<span class="string">'a'</span>:<span class="number">3</span>, <span class="string">'b'</span>:<span class="number">9</span>,  <span class="string">'c'</span>:<span class="number">78</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(c_list)</div><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将字典的键转换为列表</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d_list = list(&#123;<span class="string">'a'</span>:<span class="number">3</span>,<span class="string">'b'</span>:<span class="number">9</span>, <span class="string">'c'</span>:<span class="number">78</span>&#125;.items())</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(d_list)</div><div class="line">[(<span class="string">'a'</span>, <span class="number">3</span>), (<span class="string">'b'</span>, <span class="number">9</span>), (<span class="string">'c'</span>, <span class="number">78</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将字典的键值转换为列表</span></div></pre></td></tr></table></figure>
<h2 id="列表和字符串">列表和字符串</h2>
<p>字符串是一系列字符的序列，而列表是一系列值的序列，但一个由字符组成的列表是不同于字符串的。要把一个字符串转换成字符列表，可以用 list这个函数，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>t = list(s)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t</div><div class="line">[<span class="string">'s'</span>, <span class="string">'p'</span>, <span class="string">'a'</span>, <span class="string">'m'</span>]</div></pre></td></tr></table></figure></p>
<h2 id="判断两个列表是否是同一个对象">判断两个列表是否是同一个对象</h2>
<p>使用的函数是<code>is()</code>，先看一个案例： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">'banana'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">'banana'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b <span class="keyword">is</span> a</div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure></p>
<p>在这个例子中，Python 只建立了一个字符串对象，然后a和b 都指向它。但当你建立两个列表的时候，你得到的就是两个对象了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure>
<p>在这个情况下，我们可以说两个列表是相等的，因为它们有相同的元素，但它们不是同一个列表，因为他们并不是同一个对象。如果两个对象是同一个对象，那它们必然是相等的，但如果它们相等，却未必是同一个对象。如果a是一个对象了，然后你赋值c=a，那么这两个变量都指向同一个对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = a</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c <span class="keyword">is</span> a</div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure>
<p>一个变量和一个对象的关系叫做引用。在上面这个例子中a和c是对同一对象的两个引用。这样一个对象有不止一个引用，就也有了不止一个名字，所以就说这个对象有别名了。如果一个别名对象是可修改的，那么对一个别名做出的修改就会影响到其他引用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>c[<span class="number">0</span>] = <span class="number">100</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">100</span>, <span class="number">2</span>, <span class="number">3</span>]</div></pre></td></tr></table></figure>
<p>这一性质是很有用处的，但很容易让初学者犯错。所以一般来说，处理可变对象的时候，还是尽量避免别名使用，这样更安全些。</p>
<h2 id="删除列表">删除列表</h2>
<p>当一个列表不再使用时，可以使用del将其删除，del也可以删除列表，字典等可变序列中的部分元素，而不能删除元组、字符串等不可变序列中的部分元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> x[<span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">1</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> x</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">NameError: name <span class="string">'x'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</div></pre></td></tr></table></figure>
<p>列表可以删除其中的元素，元组不行。使用<code>del</code>删除对象后，Python会在恰当的时机调用垃圾回收机制来释放内存，在必要的时候也可以导入Python的标准库gc，使用其中的<code>gc.collect()</code>函数立刻启动垃圾回收机制来释放内存。</p>
<h2 id="列表元素的添加">列表元素的添加</h2>
<p>append()，insert()，extend()功能：向列表对象中添加元素，其中append()向列表尾部追加一个元素，insert()在列表任意指定位置插入一个元素，extend()用于将另一个列表中的所有元素追加到当前列表中的尾部。这3个方法都属于原地操作，不影响列表对象在内存中的起始地址，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">3</span>,  <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(x))</div><div class="line"><span class="number">2434396012360</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 查看内存地址</span></div><div class="line"><span class="meta">... </span>x.append(<span class="number">55</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 在尾部追加元素</span></div><div class="line"><span class="meta">... </span>print(x)</div><div class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">55</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.insert(<span class="number">0</span>,<span class="number">99</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 在指定位置插入元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.extend([<span class="number">5</span>, <span class="number">6</span>, <span class="number">8</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 在尾部追加多个元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">99</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">55</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">8</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(x))</div><div class="line"><span class="number">2434396012360</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 列表在内存中的地址不变</span></div></pre></td></tr></table></figure>
<p>运算符<code>+</code>和<code>*</code>也能实现列表增加元素的目的，但这两个运算符不属于原地操作，而是返回新列表，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(x))</div><div class="line"><span class="number">2434396012296</span></div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = x + [<span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(x))</div><div class="line"><span class="number">2434395797512</span></div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = x*<span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(x))</div><div class="line"><span class="number">2434396012296</span></div></pre></td></tr></table></figure>
<h2 id="列表的删除popremoveclear">列表的删除——pop()、remove()、clear()</h2>
<p>这3个方法用于删除列表中的元素，其中pop()用于删除并返回指定位置（默认是最后一个）上的元素，remove()用于删除列表中第一个值与指定值相等的元素（当不知道某个值在哪个位置时用比较合适），clear()用于清空列表。这3个方法属于原地操作，不影响列表对象的内存地址。另外，也可以使用del命令删除列表中指定位置的元素，也属于原地操作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x.pop())</div><div class="line"><span class="number">7</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 弹出并返回尾部元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x.pop(<span class="number">0</span>))</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 弹出并返回指定位置的元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x.clear())</div><div class="line"><span class="keyword">None</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 删除所有元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x2)</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x2.remove(<span class="number">2</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x2)</div><div class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 删除首个值为2的元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> x2[<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x2)</div><div class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 删除指定位置上的元素</span></div><div class="line">...</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>注：在列表中间位置插入或删除元素时，会影响该位置后面所有元素后的下标，要尽量避免在列表中间位置进行元素的插入和删除操作。</p>
<h2 id="列表元素统计countindex">列表元素统计count()、index()</h2>
<p>count()用于返回列表中指定元素中出现的次数，index()用于返回指定元素在列表中首次出现的位置，如果该元素不在列表中则抛出异常。除此之外，成员测试运算符in也可以测试列表中是否存在某个元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.count(<span class="number">3</span>) <span class="comment">#元素3在列表x中出现的次数</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.count(<span class="number">5</span>) <span class="comment">#元素5在列表x中出现的次数</span></div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.index(<span class="number">2</span>) <span class="comment">#元素2在列表x中首次出现的索引</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.index(<span class="number">4</span>)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> <span class="keyword">in</span> x <span class="comment"># 5不是列表x的元素</span></div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span> <span class="keyword">in</span> x</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.index(<span class="number">5</span>) <span class="comment"># 列表中没有5，抛出异常</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">ValueError: <span class="number">5</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">in</span> list</div></pre></td></tr></table></figure>
<h2 id="列表的排序sort">列表的排序——sort()</h2>
<p>列表对象的sort()和reverse()是对列表进行原地排序和逆序，意思是用处理后的数据替换原来的数据，列表中元素原来的顺序丢失。如果原来的顺序不想丢失，可以使用sorted()和reversed()来实现，其中sorted()返回新列表，reversed()返回一个逆序排列后的迭代对象，这两个函数都不对原列表做任何修改。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = list(range(<span class="number">11</span>)) <span class="comment"># 生成包含11个整数的列表</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>random.shuffle(x)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># shuffle() 方法将序列的所有元素随机排序</span></div><div class="line"><span class="meta">... </span>print(x)</div><div class="line">[<span class="number">8</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">6</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.sort(key=<span class="keyword">lambda</span> item:len(str(item)),reverse = <span class="keyword">True</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">10</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">6</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.sort(key = str)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.sort()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div></pre></td></tr></table></figure>
<h2 id="列表的排序sorted">列表的排序——sorted()</h2>
<p>sorted()返回新列表，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h3 id="排序的key参数">排序的key参数</h3>
<p>关于排序方法的key参数，充分利用列表对象的sort()方法和内置函数sorted()的key参数，可以实现更加复杂的排序，以内置函数sroted()为例说明一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>gameresult = [[<span class="string">'Bob'</span>, <span class="number">95.0</span>, <span class="string">'A'</span>],[<span class="string">'Alan'</span>, <span class="number">86.0</span>, <span class="string">'C'</span>],[<span class="string">'Mandy'</span>, <span class="number">83.5</span>, <span class="string">'A'</span>],[<span class="string">'Rob'</span>, <span class="number">89.3</span>, <span class="string">'E'</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(gameresult, key=itemgetter(<span class="number">2</span>))</div><div class="line">[[<span class="string">'Bob'</span>, <span class="number">95.0</span>, <span class="string">'A'</span>], [<span class="string">'Mandy'</span>, <span class="number">83.5</span>, <span class="string">'A'</span>], [<span class="string">'Alan'</span>, <span class="number">86.0</span>, <span class="string">'C'</span>], [<span class="string">'Rob'</span>, <span class="number">89.3</span>, <span class="string">'E'</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 按子列表第3个元素进行升序排序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(gameresult, key = itemgetter(<span class="number">2</span>, <span class="number">0</span>))</div><div class="line">[[<span class="string">'Bob'</span>, <span class="number">95.0</span>, <span class="string">'A'</span>], [<span class="string">'Mandy'</span>, <span class="number">83.5</span>, <span class="string">'A'</span>], [<span class="string">'Alan'</span>, <span class="number">86.0</span>, <span class="string">'C'</span>], [<span class="string">'Rob'</span>, <span class="number">89.3</span>, <span class="string">'E'</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 按第3个元素升序，然后按第1个升序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(gameresult, key = itemgetter(<span class="number">2</span>, <span class="number">0</span>), reverse = <span class="keyword">True</span>)</div><div class="line">[[<span class="string">'Rob'</span>, <span class="number">89.3</span>, <span class="string">'E'</span>], [<span class="string">'Alan'</span>, <span class="number">86.0</span>, <span class="string">'C'</span>], [<span class="string">'Mandy'</span>, <span class="number">83.5</span>, <span class="string">'A'</span>], [<span class="string">'Bob'</span>, <span class="number">95.0</span>, <span class="string">'A'</span>]]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = [<span class="string">"what"</span>, <span class="string">"I'm"</span>, <span class="string">"sorting"</span>, <span class="string">"by"</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 以一个列表为内容进行排序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list2 = [<span class="string">"something"</span>, <span class="string">"else"</span>, <span class="string">"to"</span>, <span class="string">"sort"</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 对另一个列表的内容进行排序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>pairs = zip(list1, list2)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 把两个列表中的对应位置元素配对</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>[item[<span class="number">1</span>] <span class="keyword">for</span> item <span class="keyword">in</span> sorted(pairs, key = <span class="keyword">lambda</span> x:x[<span class="number">0</span>], reverse = <span class="keyword">True</span>)]</div><div class="line">[<span class="string">'something'</span>, <span class="string">'to'</span>, <span class="string">'sort'</span>, <span class="string">'else'</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>], [<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 以第2个元素升序、第3个元素降序排序</span></div><div class="line"><span class="meta">... </span>sorted(x, key = <span class="keyword">lambda</span> item:(item[<span class="number">1</span>], -item[<span class="number">2</span>]))</div><div class="line">[[<span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>]]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="string">'aaaa'</span>, <span class="string">'bc'</span>, <span class="string">'d'</span>, <span class="string">'b'</span>, <span class="string">'ba'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(x, key = <span class="keyword">lambda</span> item:(len(item), item))</div><div class="line">[<span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'ba'</span>, <span class="string">'bc'</span>, <span class="string">'aaaa'</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="列表常用方法的汇总">列表常用方法的汇总</h2>
<table>
<colgroup>
<col width="35%">
<col width="64%">
</colgroup>
<thead>
<tr class="header">
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>lst.append(x)</td>
<td>将元素x添加到列表lst的尾部</td>
</tr>
<tr class="even">
<td>lst.extend(L)</td>
<td>将列表L中所有元素添加至列表lst的尾部</td>
</tr>
<tr class="odd">
<td>lst.insert(index,x)</td>
<td>在列表lst指定位置index处添加元素x，该位置后面的所有元素后移一个位置</td>
</tr>
<tr class="even">
<td>lst.remove(x)</td>
<td>在列表lst中删除首次出现的指定元素，该元素之后的所有元素向前移一个位置</td>
</tr>
<tr class="odd">
<td>lst.pop([index])</td>
<td>删除并返回列表lst中下标为Index（默认为-1）的元素</td>
</tr>
<tr class="even">
<td>lst.clear()</td>
<td>删除不用列lst中的所有元素，但保留列表对象</td>
</tr>
<tr class="odd">
<td>lst.index(x)</td>
<td>返回列表lst中第一个值为x元素的下标，若不存在值为x的元素则抛出异常</td>
</tr>
<tr class="even">
<td>lst.count(x)</td>
<td>返回指定元素x在列表lst中的出现位置</td>
</tr>
<tr class="odd">
<td>lst.reverse()</td>
<td>对列lst所有元素进行逆序</td>
</tr>
<tr class="even">
<td>lst.sort(key=None,reverse=False)</td>
<td>对列表lst中的元素进行排序，key用来指定排序依据，reverse决定升序（False）还是降序（True）</td>
</tr>
<tr class="odd">
<td>lst.copy()</td>
<td>返回列表lst的浅复制</td>
</tr>
</tbody>
</table>
<h2 id="内置函数对列表的操作">内置函数对列表的操作</h2>
<p>max()，min()返回列表中所有元素的最大值和最小值；sum()函数用于返回数值型列表中所有元素之和，len()函数用于返回列表中元素的个数，zip()函数用于将多个列表中元素重新组合为元组并返回包含这些元组的zip对象，enumerate()函数返回包含若干下标和值的迭代对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = list(range(<span class="number">11</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>random.shuffle(x)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">8</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>max(x)</div><div class="line"><span class="number">10</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>min(x)</div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sum(x)</div><div class="line"><span class="number">55</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(x)</div><div class="line"><span class="number">11</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(zip(x, [<span class="number">1</span>]*<span class="number">11</span>))</div><div class="line">[(<span class="number">3</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">5</span>, <span class="number">1</span>), (<span class="number">10</span>, <span class="number">1</span>), (<span class="number">6</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">7</span>, <span class="number">1</span>), (<span class="number">4</span>, <span class="number">1</span>), (<span class="number">9</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">8</span>, <span class="number">1</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 多列表重新组合</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(zip(range(<span class="number">1</span>,<span class="number">4</span>)))</div><div class="line">[(<span class="number">1</span>,), (<span class="number">2</span>,), (<span class="number">3</span>,)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># zip()函数也可以用于一个序列或迭代对象</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(zip([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>],[<span class="number">1</span>,<span class="number">2</span>]))</div><div class="line">[(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 如果两个列表不等长，以短的为准</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>enumerate(x)</div><div class="line">&lt;enumerate object at <span class="number">0x00000236CD4EBF78</span>&gt;</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(enumerate(x))</div><div class="line">[(<span class="number">0</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">5</span>), (<span class="number">3</span>, <span class="number">10</span>), (<span class="number">4</span>, <span class="number">6</span>), (<span class="number">5</span>, <span class="number">1</span>), (<span class="number">6</span>, <span class="number">7</span>), (<span class="number">7</span>, <span class="number">4</span>), (<span class="number">8</span>, <span class="number">9</span>), (<span class="number">9</span>, <span class="number">0</span>), (<span class="number">10</span>, <span class="number">8</span>)]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="map函数">map()函数</h2>
<p>map()函数的用法：</p>
<p><code>map(func, seq1[, seq2,…])</code></p>
<p>第一个参数接受一个函数名，后面的参数接受一个或多个可迭代的序列，返回的是一个集合。</p>
<p>Python函数编程中的map()函数是将func作用于seq中的每一个元素，并将所有的调用的结果作为一个list返回。如果func为None，作用同zip()。当seq只有一个时，将函数func作用于这个seq的每个元素上，并得到一个新的seq。</p>
<p>让我们来看一下只有一个seq的时候，map()函数是如何工作的。 一个最简单的例子,如基于<code>f(x) = x^2</code>,map()作用于list [1, 2, 3, 4, 5, 6, 7, 8, 9]后的结果如下:返回结果仍为list。</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180519/C09gA5BLC5.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">power2</span><span class="params">(x)</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">return</span> x**<span class="number">2</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(map(power2,a))</div><div class="line">&lt;map object at <span class="number">0x00000236CD4E66A0</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(map(power2,a)))</div><div class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>]</div></pre></td></tr></table></figure>
<p>map不能直接返回结果，必须要有list作用于结果之上，才能显示为列表。</p>
<p>再看一个map()函数的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(str, range(<span class="number">5</span>)))</div><div class="line">[<span class="string">'0'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将一个函数依次作用到序列对象的每个元素上，这里就是将str这个函数作用于range(5)的每个元素上；</span></div><div class="line"><span class="meta">... </span><span class="comment"># 转换为字符串</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add5</span><span class="params">(v)</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">return</span> v + <span class="number">5</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(add5, range(<span class="number">10</span>)))</div><div class="line">[<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x, y)</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">return</span> x + y</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(add, range(<span class="number">5</span>), range(<span class="number">5</span>, <span class="number">10</span>)))</div><div class="line">[<span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 把双参数函数映射到两个序列上</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(<span class="keyword">lambda</span> x, y:x+y, range(<span class="number">5</span>), range(<span class="number">5</span>, <span class="number">10</span>)))</div><div class="line">[<span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>[add(x,y) <span class="keyword">for</span> x, y <span class="keyword">in</span> zip(range(<span class="number">5</span>), range(<span class="number">5</span>, <span class="number">10</span>))]</div><div class="line">[<span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>]</div></pre></td></tr></table></figure>
<h2 id="zip函数合并列表">zip()函数合并列表</h2>
<p>使用zip()函数来可以把列表合并，并创建一个元组对的列表，在python 3.0中zip()是可迭代对象，使用时必须将其包含在一个list中，方便一次性显示出所有结果，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>z = [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>xyz = zip(x, y, z)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(xyz)</div><div class="line">[(<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>), (<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>), (<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>)]</div></pre></td></tr></table></figure>
<h2 id="reduce函数">reduce()函数</h2>
<p>标准库中functools中的函数reduce()可以将一个接收2个参数的函数以累积的方式从左到右依次作用到一个序列或迭代器对象的所有元素上，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x, y)</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">return</span> x + y</div><div class="line">...</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>seq = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(add, range(<span class="number">10</span>))</div><div class="line"><span class="number">45</span></div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(<span class="keyword">lambda</span> x, y:x+y, seq)</div><div class="line"><span class="number">45</span></div></pre></td></tr></table></figure>
<h2 id="列表推导式">列表推导式</h2>
<p>推导式comprehensions（又称解析式），是Python的一种独有特性。推导式是可以从一个数据序列构建另一个新的数据序列的结构体。 共有三种推导，分别为：①列表(list)推导式；②字典(dict)推导式 ；③集合(set)推导式。列表推导式的英文为List Comprehensions，它提供了一种简便的方式创建list，它的语法形式为<code>[表达式  for 变量  in序列或迭代对象]</code>。列表推导式由这些成分构成：①中括号（里面含有表达式）；②for（后面跟着其他的for或if语句）。下面是一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>multiples = [i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">30</span>) <span class="keyword">if</span> i % <span class="number">3</span> <span class="keyword">is</span> <span class="number">0</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(multiples)</div><div class="line">[<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">15</span>, <span class="number">18</span>, <span class="number">21</span>, <span class="number">24</span>, <span class="number">27</span>]</div></pre></td></tr></table></figure>
<h3 id="列表推导式案例2">列表推导式案例2:</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">squared</span><span class="params">(x)</span>:</span></div><div class="line">    <span class="keyword">return</span> x*x</div><div class="line"></div><div class="line">multiples = [squared(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">30</span>) <span class="keyword">if</span> i % <span class="number">3</span> <span class="keyword">is</span> <span class="number">0</span>]</div><div class="line">print(multiples)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">squared</span><span class="params">(x)</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">return</span> x*x</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>multiples = [squared(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">30</span>) <span class="keyword">if</span> i % <span class="number">3</span> <span class="keyword">is</span> <span class="number">0</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(multiples)</div><div class="line">[<span class="number">0</span>, <span class="number">9</span>, <span class="number">36</span>, <span class="number">81</span>, <span class="number">144</span>, <span class="number">225</span>, <span class="number">324</span>, <span class="number">441</span>, <span class="number">576</span>, <span class="number">729</span>]</div></pre></td></tr></table></figure>
<h3 id="列表推导式的应用">列表推导式的应用</h3>
<p>列表推导式中使用多个循环，实现多序列元素的任意组合，并且可以结合条件语句过滤特定元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<p>上面的代码与下面的相同，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat test4.py</div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">result = []</div><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]:</div><div class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> [<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>]:</div><div class="line">        <span class="keyword">if</span> x != y:</div><div class="line">         result.append((x,y))</div><div class="line">print(result)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 test4.py</div><div class="line">[(<span class="number">1</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">4</span>), (<span class="number">3</span>, <span class="number">1</span>), (<span class="number">3</span>, <span class="number">4</span>)]</div></pre></td></tr></table></figure>
<h3 id="使用列表推导式实现矩阵转置">使用列表推导式实现矩阵转置</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>matrix = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>], [<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[row[i] <span class="keyword">for</span> row <span class="keyword">in</span> matrix ] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">[[<span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>], [<span class="number">2</span>, <span class="number">6</span>, <span class="number">10</span>], [<span class="number">3</span>, <span class="number">7</span>, <span class="number">11</span>], [<span class="number">4</span>, <span class="number">8</span>, <span class="number">12</span>]]</div></pre></td></tr></table></figure>
<p>使用内置函数zip()和list()也能实现矩阵转置：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>matrix = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>], [<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(map(list,zip(*matrix))))</div><div class="line">[[<span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>], [<span class="number">2</span>, <span class="number">6</span>, <span class="number">10</span>], [<span class="number">3</span>, <span class="number">7</span>, <span class="number">11</span>], [<span class="number">4</span>, <span class="number">8</span>, <span class="number">12</span>]]</div></pre></td></tr></table></figure>
<h3 id="列表推导式的复杂案例">列表推导式的复杂案例</h3>
<p>列表推导式中可以使用函数或复杂表达式，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat test5.py</div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(v)</span>:</span></div><div class="line">    <span class="keyword">if</span> v%<span class="number">2</span> ==<span class="number">0</span>:</div><div class="line">     v=v**<span class="number">2</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">     v=v+<span class="number">1</span></div><div class="line">    <span class="keyword">return</span> v</div><div class="line">print([f(v) <span class="keyword">for</span> v <span class="keyword">in</span> [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">-1</span>] <span class="keyword">if</span> v &gt; <span class="number">0</span>])</div><div class="line">print([v**<span class="number">2</span> <span class="keyword">if</span> v%<span class="number">2</span> ==<span class="number">0</span> <span class="keyword">else</span> v+<span class="number">1</span> <span class="keyword">for</span> v <span class="keyword">in</span> [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>,<span class="number">-1</span>] <span class="keyword">if</span> v &gt; <span class="number">0</span>])</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 test5.py</div><div class="line">[<span class="number">4</span>, <span class="number">4</span>, <span class="number">16</span>]</div><div class="line">[<span class="number">4</span>, <span class="number">4</span>, <span class="number">16</span>]</div></pre></td></tr></table></figure>
<h2 id="二元组的概念">（二）元组的概念</h2>
<p>元组是Python的一个重要序列结构，从形式上来看，元组的所有元素放在一对圆括号中，元素之间使用逗号分隔，下面来说一下如何创建元组。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>) <span class="comment"># 直接把元组赋值给一个变量</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(x) <span class="comment"># 查看变量的类型</span></div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">tuple</span>'&gt;</span></div><div class="line">&gt;&gt;&gt; x=(3,) # 如果元组中只有一个元素，则需要在后面加上逗号</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line">(<span class="number">3</span>,)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(x)</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">tuple</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">tuple</span><span class="params">(range<span class="params">(<span class="number">1</span>,<span class="number">5</span>)</span>)</span></span></div><div class="line"><span class="class"><span class="params">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span></span></div><div class="line"><span class="class">&gt;&gt;&gt;</span></div></pre></td></tr></table></figure>
<p>元组中的元素无法改变，虽然元组支持切片操作，但是只能通过切片来访问元组中的元素，而不支持使用切片来修改元组中元素的值。</p>
<p><strong>但为什么还要使用元组呢？</strong></p>
<p>答：因为Python内部对元组做了大量的优化，访问和处理速度比列表更快。如果定义了一系列常量，主要用途仅是对它们进行遍历或其他类似用途，而不需要对其元素进行任何修改，那么一般建立使用元组而不使用列表。</p>
<h2 id="元组的特殊情况">元组的特殊情况</h2>
<p>虽然元组属于不可变序列，其元素值是不可改变的，但是如果元组中包括可变序列，情况又变得复杂一些，例如下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = ([<span class="number">1</span>,<span class="number">2</span>],<span class="number">3</span>) <span class="comment"># 元组中包含列表</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line">([<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">5</span> <span class="comment"># 修改元组中列表的元素</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line">([<span class="number">5</span>, <span class="number">2</span>], <span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[<span class="number">0</span>].append(<span class="number">8</span>) <span class="comment">#为元组中的列表增加元素</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line">([<span class="number">5</span>, <span class="number">2</span>, <span class="number">8</span>], <span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[<span class="number">0</span>]=x[<span class="number">0</span>]+<span class="number">10</span> <span class="comment"># 修改列元组中的值，出错</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">TypeError: can only concatenate list (<span class="keyword">not</span> <span class="string">"int"</span>) to list</div></pre></td></tr></table></figure>
<h2 id="元组的成器推导式">元组的成器推导式</h2>
<p>生成器推导式与列表推导式非常类似，只是生成器推导式使用圆括号而不是列表推导式所用的方括号。与列表推导式不同的是，生成器推导式的结果是一个生成器对象，而不是列表，也不是元组。使用生成器对象的元素时，可以根据需要将其转化为列表或元组，也可以使用生成器对象的__next__()方法或内置函数next()进行遍历，或者直接将其作用迭代器对象来使用。但不管哪种方法访问其元素，当所有元素访问结束后，如果需要重新访问其中的元素，则必须重新创建该生成器对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>g = ((i +<span class="number">2</span> )**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)) <span class="comment"># 创建生成器对象</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g</div><div class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x000001898CE64678</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tuple(g) <span class="comment"># 将生成器对象转换为元组</span></div><div class="line">(<span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>, <span class="number">100</span>, <span class="number">121</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(g) <span class="comment"># 生成器对象已经遍历结束，没有元素了</span></div><div class="line">[]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g = ((i +<span class="number">2</span> )**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g.__next__() <span class="comment"># 使用生成器对象的__next__()方法获取元素</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g.__next__() <span class="comment"># 获取下一个元素</span></div><div class="line"><span class="number">9</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(g) <span class="comment"># 使用内置函数next()获取生成器对象中的元素</span></div><div class="line"><span class="number">16</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(g) <span class="comment"># 获取下一个元素</span></div><div class="line"><span class="number">25</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g = ((i +<span class="number">2</span> )**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> g:</div><div class="line"><span class="meta">... </span>    print(item, end= <span class="string">' '</span>) <span class="comment"># 使用循环直接遍历生成器对象中的元素</span></div><div class="line">...</div><div class="line"><span class="number">4</span> <span class="number">9</span> <span class="number">16</span> <span class="number">25</span> <span class="number">36</span> <span class="number">49</span> <span class="number">64</span> <span class="number">81</span> <span class="number">100</span> <span class="number">121</span> &gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="生成器对象">生成器对象</h2>
<p>将列表推导式的[]改成()即可得到生成器，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>multiples = (i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">30</span>) <span class="keyword">if</span> i % <span class="number">3</span> <span class="keyword">is</span> <span class="number">0</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(multiples))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">generator</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>包含yield语句的函数可以用来创建可迭代的生成器对象。下面的代码演示了如何使用生成器来生成斐波那契数列的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></div><div class="line"> a, b = <span class="number">1</span>, <span class="number">1</span>                    <span class="comment"># 序列解包，同时为多个元素赋值</span></div><div class="line"> <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">     <span class="keyword">yield</span> a                    <span class="comment"># 暂停执行，需要时再产生一个新元素</span></div><div class="line">     a, b = b, a+b              <span class="comment"># 序列解包，继续生成新元素</span></div><div class="line">a = f()                         <span class="comment"># 创建生成器对象</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):             <span class="comment"># 斐波那契数列中前10个元素</span></div><div class="line"> print(a.__next__(),end = <span class="string">' '</span>)</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> f():</div><div class="line"> <span class="keyword">if</span> i &gt; <span class="number">100</span>:                    <span class="comment"># 斐波那契数列中第一个大于100的元素</span></div><div class="line">  print(i, end = <span class="string">' '</span>)</div><div class="line">  <span class="keyword">break</span></div><div class="line">a = f()</div><div class="line">print(next(a))</div><div class="line">print(next(a))</div><div class="line">print(next(a))</div></pre></td></tr></table></figure>
<p>运行后，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">D:\&gt;python test.py</div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">8</span> <span class="number">13</span> <span class="number">21</span> <span class="number">34</span> <span class="number">55</span> <span class="number">144</span> <span class="number">1</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/03/BioInformation/生信-0-KEGG笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/BioInformation/生信-0-KEGG笔记/" itemprop="url">KEGG学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T12:00:00+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物信息学/" itemprop="url" rel="index">
                    <span itemprop="name">生物信息学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,612
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  14
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="通路分析">通路分析</h2>
<p>一个生物学过程的实现会涉及到许多蛋白质，这些蛋白质合在一起就是一个通路。通路分析能够帮助我们更好地了解某个或某一些蛋白质在一个生物学过程中所扮演的角色。</p>
<p>最常用的通路分析数据库是京都基因与基因组百科全书 (Kyoto Encyclopedia of Genes and Genomes, KEGG)。1995年，KEGG数据库项目由京都大学化学研究所教授Minoru Kanehisa领头启动。KEGG数据库是手工绘制的KEGG途径图的集合，每个途径图包含分子相互作用和反应的网络，将基因组中的基因与通路中的基因产物（主要是蛋白质）连接。KEGG pathway analysis即为将目的基因定位到KEGG途径图中的过程。</p>
<p>KEGG和GO的作用是类似的，只是KEGG里面最知名的是代谢通路(pathway)的注释，它是查询差异基因参与的信号通路比较权威的数据库，KEGG Pathway对差异基因进行通路分析，可以了解实验条件下显著改变的代谢通路，在机制研究中非常重要。GO分析好比是将基因分门别类放入一个个功能类群的篮子，而pathway则是将基因一个个具体放到代谢网络中的指定位置。</p>
<p>下图为small cell lung cancer的KEGG途径图。</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180409/5e1AC87cD0.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="kegg通路的查看">KEGG通路的查看</h2>
<p>输入www.kegg.jp进入KEGG的官网，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/EAH7bAggAi.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>单击中间的<code>KEGG PATHWAY</code>就可以进入到pathway界面，里面有7个KEGG PATHWAY，分别为：新陈代谢（Metabolism）、遗传信息处理（Genetic Information Processing）、环境信息处理（Environmental Information Processing）、细胞过程（Cellular Processes）、生物系统（Organismal Systems）、人类疾病（Human Diseases）、药物开发（Drug Development），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/h6GF942d5m.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>再看一下KEGG的其它的信息，看一下有多少个通路，单击<code>Current Stastics</code>，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/BAaF4eKg8d.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>可以看到，现在貌似有528个通路。现在回到首页，看一下KEGG通路的几个大类。先看第一个大类，<code>1.Metabolism</code>（这是一级分类），它的下面还有几个小类（如<code>1.1 Carbohydrate</code>，这是二级分类），如上图的红色方框所示，在每个小类下面，例如<code>1.1 Carbohydrate</code>下面，还有很多小类（例如<code>00010 Glycolysis/Gluconeogenesis</code>，这是三级分类），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/eclFJB8AK6.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在单击一下<code>00010</code>这个小类，也就是KEGG的三级分类，再在代谢通路上单击某个成分（例如酶，化合物）就能看到它们的详细信息，这就是第四层，我们就可以看到这个页面，从这个页面中我们可以知道，这个是糖酵解/糖异生参考通路（<code>Glycolysis / Gluconeogenesis - Reference pathway</code>），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/lcmIAja4mA.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在文字的介绍下面，是这个通路的参考示意图（Reference map），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/Bdae6F7Bfl.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在这张通路图中，每个方框都可以单击，查看每个节点的详细信息。</p>
<p>上面的这个通路只是其中一种，它的名称是<code>map00010</code>，通路名称的命名是由2部分构成的，第1部分是2-4个字母，第2部分是5个数字，第1部分的字母前缀表示不同类型的pathway，它们的含义如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">map-参考pathway</div><div class="line">ko-参考pathway（KO）</div><div class="line">ec-参考pathway（EC）</div><div class="line">rn-参考pathway（Reaction）</div><div class="line">org-物种特异pathway map</div></pre></td></tr></table></figure>
<p>我们上面呈现这个参考通路（reference pathway）的编号就是<code>map00010</code>，参考通路是用人工绘制而成的，参考通路是没有颜色的，都是黑色的方框，白色的底。我们可以看到，在上图的左下角上面写的有<code>00010</code>这5个字母，前面没有<code>map</code>这3个字母，不过看网址，里面确实有，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/LGJ10EelA4.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>前面说到参考通路是没有颜色的，都是黑色的方框，白色的底，如果是<code>ko00010</code>，那么它的图形就是下面的这个样子：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/bI5EddjCl2.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>可以看到，这个KO通路是有颜色的，它是在参考通路的基础上，利用计算机生成的，这个紫色的通路表示的是一种不区分物种的，所有通路，它除了颜色与参考通路有所不同外，其余的都相同。</p>
<p>我们再看一张通路图，看一张人类的，这张图命名为<code>has00010</code>，其中，<code>has</code>表示人类，它也是在参考通路的基础上，利用计算机生成的，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/ci0i4ALA4K.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/kADiIGIB1c.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在这张图中，我们可以发现这张通路与前面的<code>ko00010</code>通路不一样，紫色的通路中所有的矩形都涂成了紫色，而<code>has00010</code>通路则是有一部分涂了绿色，有一部分没有涂绿色，其中涂了绿色的方框表示是人类这个物种特有的，现在单击一下<code>3.1.9.1</code>这个方框，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/m3Lbhc1ll5.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>就能看到这个节点的详细信息，我们可以发现<code>3.1.3.9</code>是全称是<code>EC:3.1.3.9</code>，它表示一种酶，所含信息如下所示（这就是代谢通路图的第四层内容）：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/L6IfIIf8jC.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在这张表格中，第一行的<code>Entry</code>中，有一个数字，即<code>2538</code>，这个是此酶的EntrezID编号，还有一个数字<code>T01001</code>，它是T number表示，KEGG数据库使用这个编码来表示基因组中的这个基因。</p>
<p>现在单击一个圆点，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/AjFBfGfglL.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>然后就会显示出另外一个网页，这表明，这个圆点是一个化合物，编号为<code>C05345</code>，其中前面的<code>C</code>表示化合物，即Compound，它的信息如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/eBlb12ldAK.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>再单击一个某个圆角矩形，例如就单击<code>Propanoate metabolism</code>，也就是丙酯代谢，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/BmdIcgAbKC.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>单击后，就发现我们切换一到了另外的一条通路上去，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/C5BhID9kjg.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这个通路的名称是<code>map00640</code>，因此，我们就知道了，KEGG通路中，圆角矩阵表示是的其它通路，圆点表示的是化合物，常规矩形表示的是酶（也就是某个基因）。</p>
<p><code>map00010</code>这个通路上有些符号没有，现在换一个通路，看一下<code>map04115</code>这个通路，它是p53信号通路，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/fcej5bjK2l.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这个信号通路中有一些前面没有的符号，现在介绍一下：</p>
<ul>
<li>黑色箭头表示激活，如下所示：</li>
</ul>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/lAffLEjDbg.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<ul>
<li>T型头表示抑制，如下所示：</li>
</ul>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/eaC42eE5c2.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<ul>
<li><code>+p</code>表示磷酸化，如下所示：</li>
</ul>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/akHcBBI0cm.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p><code>-p</code>表示去磷酸化（截图来源于WNT信号通路，编号map04310），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/6glBIedm4l.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p><code>+u</code>表示泛素化，（截图来源于WNT信号通路，编号map04310），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/h51ad0h9hD.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p><code>+g</code>表示糖基化；</p>
<p><code>+m</code>表示甲基化；</p>
<p>虚线箭头表示间接作用，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/fgjEGfgkIh.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>两个矩阵在一块儿表示复合体，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/15lGA3mea2.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>箭头加圆点，加箭头表示转录激活（截图来源于WNT信号通路，编号map04310），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/145lkAFGhf.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="kegg中代码">KEGG中代码</h2>
<ol style="list-style-type: decimal">
<li><code>K+num</code>，基因ID号，表示在所有同源物种中具有相似结构或功能的一类同源蛋白，如K04456=&gt;丝氨酸/苏氨酸蛋白激酶（备注：K建议大写）。</li>
<li><code>ko + num</code>，代谢通路名称，表示一个特定的生物路径，如：k04151=&gt;PIK-Akt信号通路，备注：ko小写。</li>
<li><code>M+num</code>，模块名称，M00676=&gt;PI3K-Akt信号模块。</li>
<li><code>C+num</code>，代合物名，如C00533表示NO。</li>
<li><code>E-.-.-.-</code>，酶名，例如EC2.7.1.11.1=&gt;丝氨酶/苏氨酸激酶，即K04456，AKT。</li>
<li><code>R+num</code>，反应名。</li>
<li><code>RC+num</code>，反应类型，RP + RP+num，反应物质对。</li>
</ol>
<h2 id="kegg的用途">KEGG的用途</h2>
<p>人类的七千多个基因组都是有已知功能的，KEGG把这七千多个基因分成了300个类，就是我们通常说的kegg通路；比如，我现在做了个实验，发现某细胞系里面的两万个基因里面有300个基因变化了，那这300个基因会涉及到KEGG数据库的哪几个通路？这时候就需要用到我的工具啦~将这300个基因加入工具里面，得出结果：有30个Cell cycle通路。</p>
<h2 id="kegg分析的原理">KEGG分析的原理</h2>
<p>例如，Cell Cycle KEGG 通路 hsa04110只有124个基因；而加了实验刺激后，细胞有300个基因发生统计学显著变化的情况下，如果有30个基因属于Cell Cycle通路，有高达10%的概率，那到底这个Cell Cycle通路是不是被显著改变了呢？ 首先，把这300个基因都用KEGG数据库的500多个通路注释，然后一个个通路循环做超几何分布检验，给出p值；例如细胞在正常的情况下，只有124个基因属于Cell Cycle 通路，那么细胞在常规情况下与所有基因的比值就是124/7000，也就是2%，而我的实验结果显示，在300个有显著性差异的基因中，有30个属于Cell Cycle，比例是30/300，也就是10%，通过超几何分布计算，发现，p值远远小于0.001（大概计算了一下，p值为<span class="math inline">\(4.949\times 10^{-13}\)</span>），也就是差异有显著性，因此我可以下结论，所以我的这个处理显著的改变了细胞系的Cell Cycle 通路。</p>
<h2 id="kegg实战">KEGG实战</h2>
<p>这里使用KEGG分析的数据，还是与GO分析中的数据一样，具体的参照<a href="http://rvdsd.top/2018/04/02/BioInformation/%E7%94%9F%E4%BF%A1-0-GO%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/">《GO分析笔记》</a>这篇笔记，都是使用DOSE这个包中的基因名称。</p>
<h3 id="第一步安装clusterprofiler包">第一步，安装clusterProfiler包</h3>
<p>通常来说，GO分析与KEGG是放在一块儿做的，并且clusterProfiler包同时能做GO分析与KEGG分析，如果前面安装过了clusterProfiler包，那么此时就可以直接分析了，下面是安装clusterProfiler包的过程：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</div><div class="line">biocLite(<span class="string">'clusterProfiler'</span>)</div><div class="line"><span class="keyword">library</span>(clusterProfiler)</div></pre></td></tr></table></figure>
<h3 id="第二步准备原始数据">第二步，准备原始数据</h3>
<p>使用DOSE包中的数据，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">data(geneList, package=<span class="string">"DOSE"</span>)</div><div class="line">gene &lt;- names(geneList)[abs(geneList) &gt; <span class="number">2</span>]</div><div class="line">gene.df &lt;- bitr(gene, fromType = <span class="string">"ENTREZID"</span>,</div><div class="line">                toType = c(<span class="string">"ENSEMBL"</span>, <span class="string">"SYMBOL"</span>),</div><div class="line">                OrgDb = org.Hs.eg.db)</div><div class="line">head(gene.df)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; head(gene.df)</div><div class="line">  ENTREZID         ENSEMBL SYMBOL</div><div class="line">1     4312 ENSG00000196611   MMP1</div><div class="line">2     8318 ENSG00000093009  CDC45</div><div class="line">3    10874 ENSG00000109255    NMU</div><div class="line">4    55143 ENSG00000134690  CDCA8</div><div class="line">5    55388 ENSG00000065328  MCM10</div><div class="line">6      991 ENSG00000117399  CDC20</div></pre></td></tr></table></figure>
<h3 id="第三步enrichkegg函数">第三步，enrichKEGG函数</h3>
<p>使用<code>enrichKEGG</code>函数，此函数的用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">enrichKEGG(gene, organism = <span class="string">"hsa"</span>, keyType = <span class="string">"kegg"</span>, pvalueCutoff = <span class="number">0.05</span>,</div><div class="line">  pAdjustMethod = <span class="string">"BH"</span>, universe, minGSSize = <span class="number">10</span>, maxGSSize = <span class="number">500</span>,</div><div class="line">  qvalueCutoff = <span class="number">0.2</span>, use_internal_data = <span class="literal">FALSE</span>)</div></pre></td></tr></table></figure>
<p>现在解释一下这几个参数：</p>
<ol style="list-style-type: decimal">
<li>gene:基因集，一组向量，也就是差异基因的列表，使用的是entrezID；</li>
<li>organism = “hsa”，物种，hsa表示人类，mmu表示小鼠，clusterProfiler包支持约20个物种，具体的可以参考<a href="https://www.genome.jp/kegg/catalog/org_list.html" target="_blank" rel="external">KEGG数据库支持的物种列表</a>；</li>
<li>keyType = “kegg”，参数为<code>kegg</code>，<code>ncbi-geneid</code>，<code>ncib-proteinid</code>或<code>uniprot</code>；</li>
<li>pvalueCutoff = 0.05，设定的p值阈值；</li>
<li>pAdjustMethod = “BH”，p值的校正方法，分别有“holm”, “hochberg”, “hommel”, “bonferroni”, “BH”, “BY”, “fdr”, “none”；</li>
<li>universe，背景基因；</li>
<li>minGSSize = 10，被Ontology term注释的 ，用于检验的最小基因数目；</li>
<li>maxGSSize = 50，被Ontology term注释的 ，用于检验的最大基因数目；</li>
<li>qvalueCutoff = 0.2，q值的阈值；</li>
<li>use_internal_data = FALSE，逻辑值，是使用KEGG.db还是最新的在线KEGG数据，由于KEGG.db数据库自2012年起就不再更新了，因此这个数据库比较老，不过还有很多Bioconductor包还在使用这个数据库，enrichKEGG这个函数使用了一个参数，也就是<code>__internal__data</code>，这个参考默认情况下是<code>FALSE</code>，此时它会下载最新的KEGG数据，如果这个参数设为<code>TRUE</code>，那么enrichKEGG这个就会使用KEGG.db这个数据文件。</li>
</ol>
<p>现在对差异基因进行KEGG富集分析，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">kegg.result &lt;- enrichKEGG(gene=gene.df[,<span class="number">1</span>],</div><div class="line">                          organism=<span class="string">"hsa"</span>,</div><div class="line">                          pvalueCutoff=<span class="number">0.05</span>,</div><div class="line">                          pAdjustMethod=<span class="string">"BH"</span>, </div><div class="line">                          qvalueCutoff=<span class="number">0.1</span>,</div><div class="line">                          keyType = <span class="string">"kegg"</span>)</div><div class="line">write.csv(kegg.result,<span class="string">"D:\\kegg.csv"</span>)</div></pre></td></tr></table></figure>
<p>现在查看一下结果，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/I7I4lC4iFL.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>结果解读：</p>
<ol style="list-style-type: decimal">
<li>ID： KEGG 数据库中通路唯一的编号信息。</li>
<li>Description ：Gene Ontology功能的描述信息</li>
<li>GeneRatio：差异基因中与该ID相关的基因数与整个该Term的总基因数的比值</li>
<li>BgRation：所有（ bg）基因中与该ID相关的基因数与所有（ bg）基因的比值</li>
<li>pvalue: 富集分析统计学显著水平，一般情况下， P-value &lt; 0.05 该功能为富集项</li>
<li>p.adjust 矫正后的P-Value</li>
<li>qvalue：对p值进行统计学检验的q值</li>
<li>Count：差异基因中与该Term相关的基因数</li>
</ol>
<h3 id="第四处绘图">第四处，绘图</h3>
<h4 id="条形图">条形图</h4>
<p>使用<code>barplot</code>函数，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">barplot(kegg.result)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/Ed9CgAGEL6.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h4 id="点状图">点状图</h4>
<p>如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dotplot(kegg.result)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/43LbhKmcCC.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>图示解析：RNA-seq中，对差异表达基因进行KEGG富集分析，可以通过散点图展示。此图中，KEGG富集程度通过Rich factor、qvalue和富集到此通路上的基因个数来衡量。</p>
<ol style="list-style-type: decimal">
<li>横坐标是Rich factor，数值越大表示富集程度越大。Rich factor=位于该pathway term下的差异表达基因数/位于该pathway term下的所有有注释基因数。</li>
<li>纵坐标是富集程度较高的pathway term（一般选取富集最显著的20条进行展示，不足20条则全部列出）。</li>
<li>q value是经过多重校验的p value，取值范围[0，1]，以颜色表示，越红表示q value越小，说明富集越明显。</li>
<li>点的大小表示该term下差异基因的个数，点越大表示基因数越多。</li>
</ol>
<h4 id="信号通路图">信号通路图</h4>
<p>使用<code>browseKEGG</code>函数，此函数的用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">browseKEGG(x, pathID)</div></pre></td></tr></table></figure>
<p>参数x是KEGG富集的结果，pathID是通路编号，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">browseKEGG(kegg.result,<span class="string">"hsa04110"</span>)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/HLbeDL1J1E.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>也可以使用<code>pathview</code>包的<code>pathview</code>函数来查看基因表达的情况，它的用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(<span class="string">"pathview"</span>)</div><div class="line">hsa04110 &lt;- pathview(gene.data  = geneList,</div><div class="line">                     pathway.id = <span class="string">"hsa04110"</span>,</div><div class="line">                     species    = <span class="string">"hsa"</span>,</div><div class="line">                     limit      = list(gene=max(abs(geneList)), cpd=<span class="number">1</span>))</div></pre></td></tr></table></figure>
<p>其中<code>pathview</code>中使用的数据与前面的KEGG分析的数据不一样，它除了含有geneID外，还有基因表达的数据，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; head(geneList)</div><div class="line">    <span class="number">4312</span>     <span class="number">8318</span>    <span class="number">10874</span>    <span class="number">55143</span>    <span class="number">55388</span>      <span class="number">991</span> </div><div class="line"><span class="number">4.572613</span> <span class="number">4.514594</span> <span class="number">4.418218</span> <span class="number">4.144075</span> <span class="number">3.876258</span> <span class="number">3.677857</span></div></pre></td></tr></table></figure>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/706IfHfA2g.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><p><a href="https://mp.weixin.qq.com/s?src=3&amp;timestamp=1523265048&amp;ver=1&amp;signature=SlU3Ctn3S1ucuf07HpdA5BO7jftw2xUN1IpV84vyrd2zq-RdrZhJihCJ1WKkxk0DkrPc--l-Gz-rqX4274h94eqWPiZ2Zsx6*tz0buy1Zxg54pZ-6D6smfhmLAUtCAbBE52Q8qgh5SrjjuJcVBZH91psMGXAb8oqFWTmlxB-EIg=" target="_blank" rel="external">手把手教你看KEGG通路图！</a></p></li>
<li><p><a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1523265396&amp;ver=806&amp;signature=5oh1CmbL0GLyXQ62PnvxR7ZafrvmFU-09TV0vuGJ4TNVw7vVVaEw**EjPiKXQBiYJG6LmwtjT2YRNiBOBYu3matCTy3cvVG9SICTWYkPAln7ivUte0n*KsIXY*yVauf-&amp;new=1" target="_blank" rel="external">KEGG富集分析从未如此简单</a></p></li>
<li><p><a href="https://mp.weixin.qq.com/s/s2_yv7U65FlxE1nLqhxcDw" target="_blank" rel="external">GO、KEGG功能注释是一个相亲的过程</a></p></li>
<li><p><a href="http://www.bio-info-trainee.com/370.html" target="_blank" rel="external">转录组-GO和KEGG富集的R包clusterProfiler</a>s</p></li>
<li><p><a href="https://mp.weixin.qq.com/s/UowQnL4bD7QUFHIXQ_JQKQ" target="_blank" rel="external">RNA-seq中GO、KEGG结果图如何解读</a></p></li>
<li><p><a href="https://mp.weixin.qq.com/s/ikeEUimxdaZyiYWNSEdJoQ" target="_blank" rel="external">KEGG上的信号通路图怎么看？</a></p></li>
<li><p><a href="http://guangchuangyu.github.io/2015/02/kegg-enrichment-analysis-with-latest-online-data-using-clusterprofiler/" target="_blank" rel="external">KEGG enrichment analysis with latest online data using clusterProfiler</a></p></li>
<li></li>
</ol>
<p>​</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/02/BioInformation/生信-0-GO分析笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/02/BioInformation/生信-0-GO分析笔记/" itemprop="url">GO分析学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-02T12:00:00+08:00">
                2018-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物信息学/" itemprop="url" rel="index">
                    <span itemprop="name">生物信息学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  10,623
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  41
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="什么是富集分析">什么是富集分析？</h2>
<p>当我们获得了一批生物数据时，例如转录组的数据，蛋白质组的数据，其中必然要做不同样本之间的差异基因分析这一步，例如空白对照组与实验组的差异基因或蛋白分析。在得到差异的基因或蛋白列表后，这个时候可能还会遇到一个问题，差异基因可能有很多，有几十个到上百个不等，如何对它们进行比较呢？这几十甚至上百差异基因或蛋白如何去呈现，这是一个问题，如果直接列张表，把所有的差异基因都放进去这样不合适，因为不直观，不方便分析。</p>
<p>此时我们就需要把这些差异基因进行注释，把这些基因或蛋白分成几大类（一个类别就相当于一个GO term），此时看这几大类的区别，肯定比看几十甚至上百个基因或蛋白的差异要更加直观，分析的难度也会降低，这个过程就是富集分析，富集分析属于差异基因的下游分析，常用的富集分析方法有GO分析，KEGG分析，GSEA分析等。</p>
<p>富集分析涉及到两个概念，前景基因和背景基因（不同的教程使用的术语不一样，总之看具体的含义）。前景基因就是你关注的要重点研究的基因集，背景基因就是所有的基因集。比如做两个样本对照组和处理组的转录组测序，前景基因就是对照组vs处理组的差异基因，背景基因就是这两组样本的所有表达基因。</p>
<h3 id="富集分析的例子">富集分析的例子</h3>
<p>再打个比方，我想知道与整个广东省相比，深圳市的大学生是不是显著更多（“大学生”就相当于深圳市民的其中一个GO term）。那么前景就是深圳市的人口，背景就是广东省的人口，每个个体都会有一个标签（如大学生、中学生、小学生等）。 富集的意思就是，某个GO term在所关注的前景基因集中占的比例要显著高于在所有背景基因集中所占的比例。比如上面的例子，深圳市大学生显著富集，意思就是深圳市本科毕业的人口所占深圳市总人口的比例显著高于广东省本科毕业人口在广东省总人口中所占的比例，例如我们要计算的就是10%与2%相比是否有显著性，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/m3BL96D59j.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这个显著性是如何计算的呢，就是利用<a href="http://rvdsd.top/2018/07/23/BioStatistics/%E7%94%9F%E7%89%A9%E7%BB%9F%E8%AE%A1-02-%E8%B6%85%E5%87%A0%E4%BD%95%E5%88%86%E5%B8%83/">超几何分布</a>来计算出来的。</p>
<h2 id="什么是go什么又是go分析">什么是GO，什么又是GO分析</h2>
<p>GO的全称是Gene Ontology，中文意思是<code>基因本体论</code> 。GO的出现主要是源于生物研究的复杂性以及生物研究规模的日益扩大，为了对基因的产物进行统一的描述，就需要使用当前储备的知识，以计算机为工具对这些生物研究进行描述，这就是GO项同出现的背景，GO提供了对基因功能与基因产物最为全面的描述。GO知识库主要由两个内容构成：</p>
<ol style="list-style-type: decimal">
<li>GO terms，它提供生物过程的逻辑结构与相关关系，不同GO terms之间的关系可以通过一个有向无环图来表示。这是由基因本体联合会(Gene Ontology Consortium，GOC) 负责的，GO是一个国际标准化的基因功能分类体系，提供了一套动态并可控的词汇表（controlled vocabulary）来全面描述生物体中基因和基因产物的属性，它由一组预先定义好的GO术语（GO term）组成，这组术语对基因产物的功能进行限定和描述。此处需要注意的是，GO terms是对基因的产物，而不是基因本身进行描述，因为基因本身的产物有时候不止一种。GO数据库中的GO分类相关信息会得到不断地更新与增加，这个特点要记住，因为不同的GO分析工具使用的数据库版本有可能不一样，造成GO分析结果出现不同，例如以前Y叔就写过这样的文章<a href="https://mp.weixin.qq.com/s/ITyD4fyAQeUzg-yCbIJnpg" target="_blank" rel="external">《SCIENCE文章用了DAVID被吐槽》</a>。</li>
<li>GO注释（GO annotations）库，它主要是为GO terms提供注释，也就是描述这个GO terms有什么功能（例如某些基因的产物是什么，是蛋白质，还是非编码RNA，还是大分子等）。</li>
</ol>
<p>总之，通过ontology和注释能够对生物系统提供一个广泛的描述。目前，GO知识库（GO knowledgebase）包含源于14万篇论文中的实验验证，它代表了60万个有实验支持的GO注释。这些核心知识库中还含有另外600万个推断而来的GO注释。除了核心知识库外，GOC还提供了能够编辑并推断ontology之间逻辑关系的软件，分析工具等，GO中的注释来源，通用不同的代码进行了区分，如下所示。</p>
<h2 id="go中的基因注释证据代码">GO中的基因注释证据代码</h2>
<p>一个GO注释由一个与GO term相关的特定参考和基因产物构成，GO注释的来源各异，下表就说明了GO注释的各种来源代码，其中<code>*</code>部分表示证据来源可靠性比较高</p>
<table>
<colgroup>
<col width="37%">
<col width="20%">
<col width="42%">
</colgroup>
<thead>
<tr class="header">
<th>缩写</th>
<th>证据代码</th>
<th>例子</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>IC,Inferred by curator</td>
<td>由专家推测得到</td>
<td>推测它定位在细胞核中一个蛋白质如果有“转录因子”的功能注释，专家就可以</td>
</tr>
<tr class="even">
<td>*IDA,Inferred from direct assay</td>
<td>有直接实验证据</td>
<td>如酶活化实验（针对“分子功能”），免疫荧光显微镜（针对“细胞组分”）</td>
</tr>
<tr class="odd">
<td>IEA,Inferred from electronic annotation</td>
<td>有电子注释</td>
<td>基于像BLAST这些搜索软件搜索结果的电子注释（与ISS比较，IEA没有被专家证实）</td>
</tr>
<tr class="even">
<td>*IEP,Inferred from expression pattern</td>
<td>有表达模式方面的证据</td>
<td>转录水平（如Nothern Bloting或微阵列实验结果）或蛋白质表达水平（Western blots实验结果）</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>*IGI,Inferred from genetic interaction</td>
<td>有遗传相互作用方面的证据</td>
<td>抑制基因；遗传致死基因；互补试验；还有其他一些可以提供某一基因功能信息的实验</td>
</tr>
<tr class="odd">
<td>*IMP,Inferred from mutant phenotype</td>
<td>由突变表型推测得到</td>
<td>基因突变；基因敲出；过量表达；反义RNA实验</td>
</tr>
<tr class="even">
<td>*IPI,Inferred from physical interaction</td>
<td>由物理相互作用推测得到</td>
<td>酵母双杂交实验；共纯化实验；免疫共沉淀实验；结合实验</td>
</tr>
<tr class="odd">
<td>ISS,Inferred from sequence or structural similarity</td>
<td>由序列或结构的相似性得到</td>
<td>序列的相似性；结构域；被专家确认的BLAST软件的搜索结果</td>
</tr>
<tr class="even">
<td>NAS,Non-traceable author statement</td>
<td>有报道，但报道信息来源不可知</td>
<td>数据库（如SwissPort数据库）登录条目的记录中没有引用已发表的文献</td>
</tr>
<tr class="odd">
<td>ND,No biological data</td>
<td>没有相关的生物数据</td>
<td>对应于“unknown”的分子功能、细胞过程或细胞组分</td>
</tr>
<tr class="even">
<td>TAS,Traceable author statement</td>
<td>有报道，且可知报道信息来源</td>
<td>有一些综述文章或字典中可以找到相关信息</td>
</tr>
</tbody>
</table>
<h3 id="为什么要做go分析">为什么要做GO分析</h3>
<p>GO主要用于解决一些组学实验（omics）中大量分子变化的研究问题。一个典型的组学实验会检测数以千计的分子，因此对于这些变化的分子进行解释非常困难（例如一个肿瘤细胞与一个正常细胞之间的差异）。而GO富集分析（GO Enrichment Analysis）就能把这些数以千计的分子（例如蛋白质或一些非编码RNA）根据其功能的相似性放到不同的类别中，然后对它们进行分析，这样就在很大的程度上降低了分析的难度。GO分析比较的就是两组差异基因，例如实验组与对照组的差异基因，存在在某个通路中的比例是否有差异，其统计学基因就是超几何分布。</p>
<h3 id="go分析的统计学基础">GO分析的统计学基础</h3>
<p>GO分析的统计学基础就是<a href="http://rvdsd.top/2018/07/23/BioStatistics/%E7%94%9F%E7%89%A9%E7%BB%9F%E8%AE%A1-02-%E8%B6%85%E5%87%A0%E4%BD%95%E5%88%86%E5%B8%83/">超几何分布</a>，超几何的相关知识在笔记的最后，就是对每个GO term计算一个P值，公式如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/AI391eeChk.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>N表示总基因数；</p>
<p>n表示N中差异表达基因的总数；</p>
<p>M表示N中属于某个GO term的基因个数；</p>
<p>k表示n中属于某个GO term的基因个数。</p>
<p>这个公式表示的意思是，从总的N个基因中挑出n个基因，作为分母（这是背景基因），分子则是M个基因（我们的差异基因，这是前景基因），有k个落在了某通路里，有n-k个不落在了某通路里，然后使用超几何分布来对它们进行计算，即前景基因落在某通路的比例是否高于背景基因在这一通路的比例，实际计算时，是算的odds ratio的差异。</p>
<p>现在举个例子，在GO分析的结果表格中，会出现以下信息：</p>
<p>Background Frequency，背景基因频数，指的是在整个背景基因集中，注释到一个GO term中的基因数目。 Sample Frequency，样本基因频数（有的也叫前景基因频数，总之，就是你要研究的一批基因）指的是，在你研究的基因列表中，注释到这个GO term（与Background Frequency的GO term相同的这个GO term）的基因数目。例如，我们在研究酿酒酵母（S. cerevisiae）的生物过程（biological process）时，这个物种的背景基因是6442个基因，例如我们要研究的目的基因有10个，其中有5个基因被注释到了一个这样的GO term上，这个GO term是：DNA修复（DNA repair），然后样本中的DNA修复的基因频率就是5/10，如果在酿酒酵母（S. cerevisiae）的整个基因组中，只有100个基因注释到了DNA修复的这个GO term上，那么背景基因的频率就是100/6442。GO分析就是利用超几何分布（或Fisher精确检验）来比较一下5/10和100/6442有没有统计学差异，GO分析结果的表格中会列出这个计算结果的P值。 P-value，</p>
<h2 id="go-term的查询">GO term的查询</h2>
<p>浏览GO term经常有使用到两个工具，分别是AmiGO（GO Central ）和QuickGO（EBI-GOA ）。</p>
<p>AmiGO的GO注释文件（GAF，GO Annotation File）与基因是1对1的关系。QuickGO中的GO注释文件是GOA（Gene Ontology Annotation），它主要用于注释蛋白质，而一个基因有时候会产生有几个蛋白质（因为有异构体的情况，isoform）。</p>
<h2 id="go对基因的描述">GO对基因的描述</h2>
<p>一个GO term的编号是由两部分构成，第一个部分相同，都是<code>GO</code>，第二部分是一个唯一的数字标记，它是以0开头的7位数字，例如<code>GO:0005125</code>，其中数字部分并没有任何任何生物学方面的意义，它仅起到一个标记的作用。除了这个名称外，GO term还有一些文本，来作用GO term的名称，比如 <code>&quot;cell&quot;</code>, <code>&quot;fibroblast growth factor receptor binding&quot;</code>，或者<code>&quot;signal transduction&quot;</code>，如下所示（由AmiGO 2查询而来）：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/G2kkliF27b.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>GO term按照分类，一共三个ontology（本体），分别描述基因的分子功能（molecular function，MF）、细胞组分（cellular component，CC）、参与的生物过程（biological process，BP）。G这三个本体的含义如下所示：</p>
<ol style="list-style-type: decimal">
<li>细胞组成（cellular component，CC）：一般用来描述基因产物的发挥作用的位置，比如一个蛋白可能定位在细胞核中，也可能定位在核糖体中；</li>
<li>生物过程（biological process，BP）：描述的是指基因产物所联系的一个大的生物功能，或者说是它们要完成的一个大的生物目标，例如有丝分裂或嘌呤代谢；</li>
<li>分子功能（Molecular Function，MF）：主要是指基因产物分子所执行的任务，例如一个蛋白质可能一个转录因子或是一个载体蛋白。</li>
</ol>
<p>蛋白质或者基因可以通过<code>ID对应</code>或者<code>序列注释</code>的方法找到与之对应的GO号，而GO号可应用到到相应的GO Term，即功能类别或者细胞定位，<code>ID对应</code>我的理解就是根据基因的EntrezID或SYMBOL等，将这个基因与相应的GO term对应起来，<code>序列注释</code>则是通过将某段序列与数据库中的序列进行比对，然后将这段序列与GO term对应起来，这个过程也就是将基因的产物与相应的GO term对应起来，也就是注释过程。</p>
<p>在一个GO注释中，例如，一个基因的产物是细胞色素c（cytochrome c），那么这个基因的产物就会被一个分子功能术语（Molecular Function）描述为氧化还原酶活性（oxidoreductase activity ），被生物过程（Biological Process）描述为氧化磷酸化（oxidative phosphorylation ），被细胞成分（Cellular Component ）描述为线性体基质（mitochondrial matrix ）和线粒体内膜（mitochondrial inner membrane ）。</p>
<p>再举个例子，对于一个基因或蛋白来说，最终一个基因的产物会被多个GO术语进行注释（反之亦然，一个GO术语中也可以注释多个基因的产物），形成的GO分析描述就是这个样子的：HOTAIR出没于胞核（CC），参与了组蛋白甲基化调控引发癌基因沉默（BP），具体是结合PRC2复合物以及LSD1（MF）。这样GO分析就从某个基因或蛋白在细胞中的定位，功能，参与的生物途径等方面对这个基因或蛋白进行了标准化的描述，即对基因产物进行了简单的注释，通过GO富集分析可以了解差异基因富集在哪些生物学功能、途径或细胞定位。</p>
<h2 id="go-term的结构">GO term的结构</h2>
<p>所有的GO terms之间都存在着相互关系，它们的关系可以用有向无环图（DAG，Directed Acyclic Graph）来说明，DAG图就能够明确地表示出不同GO term之间的关系，它们之间的关系有很多种，例如<code>is_a</code>，<code>part_of</code>,<code>regulates</code>,<code>has part</code>, <code>negatively regulates</code>和<code>positively regulates</code>。除了根节点（例如CC，BP，MF这些节点）外，其余的GO terms都与其它的GO terms都有一定的亚类关系，例如<code>GO:0015758</code> （葡萄糖运输，glucose transport）is a <code>GO:0015749</code>单糖转运（monosaccharide transport）的一个亚类。其他的关系还有<code>GO:0031966</code>: mitochondrial membrane <code>part of</code> <code>GO:0005740</code> : mitochondrial envelope， <code>GO:0006916</code> : anti-apoptosis <code>regulates</code> <code>GO:0012501</code> : programmed cell death。</p>
<p>一个典型的GO term内容如下所示（通过QuickGO查询）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">Accession</div><div class="line">GO:0005515</div><div class="line">Name</div><div class="line">protein binding</div><div class="line">Ontology</div><div class="line">molecular_function</div><div class="line">Synonyms</div><div class="line">protein amino acid binding, glycoprotein binding</div><div class="line">Alternate IDs</div><div class="line">GO:0045308, GO:0001948</div><div class="line">Definition</div><div class="line">Interacting selectively and non-covalently with any protein or protein complex (a complex of two or more proteins that may include other nonprotein molecules). Source: GOC:go_curators</div><div class="line">Comment</div><div class="line">None</div><div class="line">History</div><div class="line">See term history for GO:0005515 at QuickGO</div><div class="line">Subset</div><div class="line">goslim_metagenomics</div><div class="line">goslim_aspergillus</div><div class="line">goslim_chembl</div><div class="line">goslim_plant</div><div class="line">gosubset_prok</div><div class="line">goslim_candida</div><div class="line">goslim_pir</div></pre></td></tr></table></figure>
<p>这些就是一个GO term的内容，GO就是为了对基因以及基因的产物进行统一注释说明而形成的一套标准，这些注释说明来自称为ontology的一套词汇。此外，GO terms中还存在着一些次要IDs（secondary IDs），这些次要IDs也叫替代ID，即Alternate ID，它指的是一个GO term，当有两个或更多的GO terms是同样的含义时，就需要使用到二级IDs，此时可以把它们合并为一个GO term。</p>
<h3 id="有向无环图说明">有向无环图说明</h3>
<p>GO terms的结构是一个有向无环图，每个GO term是一个节点，它们之间的关系用这些节点之间的箭头来表示。GO分析是一个松散的层次结构，其子GO term比父GO term更具体，不过与严格的层次结构不同，一个GO term也许有不止一个父GO term，比如biological process term “hexose biosynthesis” 有两个parents，它们分别是 “hexose metabolism”和“monosaccharide biosynthesis”，这是因为生物合成是代谢的一种，而己糖又是单糖的一种。</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180720/H3l3illBH0.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>上图是色素沉着的一系列GO term，在这张图形里，不同GO terms之间的关系用标了颜色的箭头来表示，每个箭头中间的字母就是关系类型。箭头指向的方向，是分类更加精细的方向，图表项部的节点就是细胞成分（CC），生物学过程（BP）与分子功能（MF），这三个节点没有共同的父节点，每个都是一个根节点，因此GO是三本原系统，不过在一些GO分析工具中会做出一个虚拟的根节点，把这三个节点都指向这个虚拟根节点。这三个节点之间不存在<code>is_a</code>关系，但是，这三个本体之间可能存在着其它的关系，例如<code>part_of</code>和<code>regulates</code>，例如，分子功能（MF）的GO term“细胞周期蛋白依赖性蛋白激酶活性”（cyclin-dependent protein kinase activity）与生物学过程（BP）term的“细胞周期（cell cycle）”之间的关系是<code>part_of</code>。</p>
<h2 id="不同的term之间的关系">不同的term之间的关系</h2>
<p>不同的GO term之间的关系有很多种，例如<code>is</code>，<code>part of</code>等，并且不同的关系还能组合，衍生出不同GO terms之间的关系，这里只列举几个说明一下。</p>
<h3 id="is关系">is关系</h3>
<p>不同GO terms之间的关系使用箭头来表示，实心箭头表示了它们的直接关系，虚线表示了对于它们的关系的推测，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/FKaIiHBCdI.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>A，B，C是上述关系，那么我们就能推测出A是C的一部分。</p>
<p>在GO的关系图中，一个节点有可能有不止一个子节点（child node），也有可能不止有一个父节点（parent node），例如一个节点A与节点B的关系是<code>a part of</code>的关系，它与节点C的关系就有可能是<code>is a</code>的关系，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/F2EmA41iLe.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在上面的这张图中我们可以发现，线粒体（mitochondrion）有两个父节点，分别为细胞质（cytoplasm）和细胞器（organelle），它是细胞质的一部分（关系为<code>part of</code>），它是一个细胞器（关系为<code>is</code>）。而细胞器（organelle）这个节点有2个子节点（children nodes），分别为线粒体（mitochondrion）和细胞器膜（organelle membrane），与它们的关系分别为<code>is</code>和<code>part of</code>。</p>
<p>GO关系的基础是<code>is</code>关系，如果我们说A<code>is</code>a B，那么我们所表示的含义就是A节点是B节点的一个亚类（subtype）。例如，有丝细胞分裂周期（mitotic cell cycle）<code>is</code>a 细胞周期（cell cycle）或者裂解酶活性（lyase activity）<code>is</code>a 催化活性（catalytic activity），它所表示的意思是就是<code>有丝分裂周期</code>是<code>细胞周期</code>的一个亚类，<code>裂解酶活性</code>是<code>催化活性</code>的一个亚类。</p>
<p>这里的<code>is</code>不是指一个“实例（instance）”，从本体论的角度来看，一个“实例”专门指的是某个抽象分类的一个具体事物，例如，猫是一种动物，这里猫与动物的关系，就是GO中的<code>is</code>关系，而加菲猫（这里专门指的动画片中的那只猫）是猫的一个具体事物，不是猫的一个亚类，这里加菲猫与猫的关系就不等于GO中的<code>is</code>这个关系。GO中并不使用具体的实例，GO terms指的是一类现象或一类事物，是一种抽象的概念，例如我们知道了猫是（<code>is</code>）一类动物，那么我们就可以说猫的每个实例都是动物。</p>
<p>is关系的推理</p>
<p>is这种关系是可以传递（transitive），如果我们说A<code>is</code>a B，B<code>is</code>a C，那么我们就能推断出A<code>is</code>a C，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/l54e4DE9Ig.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>举个例子，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/HAia8E4ik5.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在这张图中，线粒体（mitochondrion）<code>is</code>a 细胞内细胞器（ intracellular organelle ），细胞内细胞器（ intracellular organelle ）<code>is</code>a细胞器（organelle  0，因此我们可以推断出，线粒体是一个细胞器，用逻辑符号表示就是<em>is a∘ </em>is a* → is a `。</p>
<p>用<code>is</code>可以对注释进行分组，例如。如果一个基因的产物是X，那它被注释为有酪氨酸激酶活性，这个GO就可以记录它为酪氨酸激酶活性<code>is</code>a（type of）激酶活性，然后我们就可以下结论，认为基因产物X有激酶活性。</p>
<h3 id="part-of关系">part of关系</h3>
<p><code>part of</code>在GO中用于表示整体与部分的关系，如果B是A的必要组成部分，那么B存在的地方，A必定存在。但是，如果A存在，我们不能说B也存在。它们的关系如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/7j7AlbA2CH.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>上图：整个B是A的组成部分，而A的一部分则含有B。</p>
<p>下图：复制叉（Replication fork）是染色体的必要组成（necessarily part of），所有（all）的复制叉是一些染色体的部分（part of），但是（some）染色体只有一有部分（have part）含有复制叉。</p>
<p><code>part of</code>的推断：<code>part of∘ part of → part of</code></p>
<p>与<code>is</code>这种关系一样，<code>part of</code>这种关系也能传递，如果A<code>part of</code>B<code>part C</code>，那么<code>A part C</code>，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/8aI0C0m72A.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>举个例子，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/49kAlkI6BG.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>线粒体（mitochondrion）是细胞质（cytoplasm  ）的<code>part of</code>，而细胞质（cytoplasm  ）是细胞（cell）的<code>part of</code>，那么我们就可以说，线粒体是细胞的<code>part of</code>。GO中还有很多关系，由于篇幅问题，就略去了，具体的可以查看官网（http://geneontology.org/page/ontology-relations）。</p>
<h2 id="go分析流程">GO分析流程</h2>
<h3 id="go分析的思路">GO分析的思路</h3>
<p>现在了解了GO分析的一些原理之后，我们自己就大概就明白了需要做哪些事情。</p>
<p>第一件事情就是我们要把差异基因与相应的GO terms对应起来；</p>
<p>第二件事情就是需要找到前景基因（也就是差异基因）与背景基因；</p>
<p>第三件事情就是，将对应起来的GO terms进行比较，也就是利用超几何检验，这些差异基因在某个通路中的比例是否要高于背景基因；</p>
<p>第四件事情就是绘图，也就是文献中经常出现的GO条形图。</p>
<h3 id="go分析所需的文件">GO分析所需的文件</h3>
<p>进行GO分析需要下载以下数据文件。</p>
<p>第一个文件就是注释文件，这个文件的主要用于将不同的基因与其相应的GO terms对应起来。GO中的术语如何和相对应的基因产物相联系的呢？</p>
<p>这是由参与合作的数据库来完成的，它们使用GO的定义方法，对它们所包含的基因产物进行注解，并且提供支持这种注解的参考和证据。每个基因或基因产物都会有一个列表，列出与之相关的GO术语。每个数据库都会给出这些基因产物和GO术语的联系数据库，并且也可以在GO的ftp站点上和WEB方式查询到。而且，GO联合会提供了简化的本体论术语（GO slim），这样，可以在更高级的层面上研究基因组的功能。比如，粗略地估计哪一部分的基因组与信号传导、代谢合成或复制有关。GO对基因和蛋白的注释阐明了基因产物和用于定义他们的GO术语之间的关系。</p>
<p>基因产物指一个基因编码的RNA或蛋白产物。因为一个基因可能编码多个具有很不相同性质的产物，所以GO推荐的注释是针对基因产物的而不是基因的。一个基因是和所有适用于它的术语联系在一起的。一个基因产物可以被一种本体论定义的多种分支或多种水平注释。注释需要反映在正常情况下此基因产物的功能，生物途径，定位等，而并不包括其在突变或病理状态下的情况。GO联合会的各个数据库成员采用手动或自动的方式生成注释，这两种方式共有的原理是：一.所有的注释都需要有来源,可以是文字、另一个数据库 或是计算机分析结果；二.注释必须提供支持这种基因产物和GO术语之间联系的证据，</p>
<p>注释文件通常是以后缀<code>db</code>结尾的文件，例如<code>org.Hs.eg.db</code>文件，<code>org.Hs.eg.db</code>文件里面含有很多主流数据库的数据，例如entrez ID和Ensembl数据库的ID，在R中，可以使用一些命令提取这个文件中相应的信息，这个文件是一个AnnotationDb-objects对象，使用方法如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">columns(x)</div><div class="line">keytypes(x)</div><div class="line">keys(x, keytype, ...)</div><div class="line">select(x, keys, columns, keytype, ...)</div><div class="line">mapIds(x, keys, column, keytype, ..., multiVals)</div><div class="line">saveDb(x, file)</div><div class="line">loadDb(file, packageName=NA)</div></pre></td></tr></table></figure>
<p>命令解释如下所示：</p>
<p><code>columns</code>：从数据库中检索的列或种类，例如基因名（GENENAME）或者是基因标记（SYMBOL），如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; columns(org.Hs.eg.db)</div><div class="line"> [1] &quot;ACCNUM&quot;       &quot;ALIAS&quot;        &quot;ENSEMBL&quot;      &quot;ENSEMBLPROT&quot;  &quot;ENSEMBLTRANS&quot; &quot;ENTREZID&quot;     &quot;ENZYME&quot;      </div><div class="line"> [8] &quot;EVIDENCE&quot;     &quot;EVIDENCEALL&quot;  &quot;GENENAME&quot;     &quot;GO&quot;           &quot;GOALL&quot;        &quot;IPI&quot;          &quot;MAP&quot;         </div><div class="line">[15] &quot;OMIM&quot;         &quot;ONTOLOGY&quot;     &quot;ONTOLOGYALL&quot;  &quot;PATH&quot;         &quot;PFAM&quot;         &quot;PMID&quot;         &quot;PROSITE&quot;     </div><div class="line">[22] &quot;REFSEQ&quot;       &quot;SYMBOL&quot;       &quot;UCSCKG&quot;       &quot;UNIGENE&quot;      &quot;UNIPROT&quot;</div></pre></td></tr></table></figure>
<p><code>keytypes</code> ：哪些类型可以使用函数<code>select</code>或<code>keys</code>以及<code>keytype</code>参数，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">keytypes(org.Hs.eg.db)</div><div class="line"> [1] &quot;ACCNUM&quot;       &quot;ALIAS&quot;        &quot;ENSEMBL&quot;      &quot;ENSEMBLPROT&quot;  &quot;ENSEMBLTRANS&quot; &quot;ENTREZID&quot;     &quot;ENZYME&quot;      </div><div class="line"> [8] &quot;EVIDENCE&quot;     &quot;EVIDENCEALL&quot;  &quot;GENENAME&quot;     &quot;GO&quot;           &quot;GOALL&quot;        &quot;IPI&quot;          &quot;MAP&quot;         </div><div class="line">[15] &quot;OMIM&quot;         &quot;ONTOLOGY&quot;     &quot;ONTOLOGYALL&quot;  &quot;PATH&quot;         &quot;PFAM&quot;         &quot;PMID&quot;         &quot;PROSITE&quot;     </div><div class="line">[22] &quot;REFSEQ&quot;       &quot;SYMBOL&quot;       &quot;UCSCKG&quot;       &quot;UNIGENE&quot;      &quot;UNIPROT&quot;</div></pre></td></tr></table></figure>
<p><code>keys</code>：返回AnnotationDb 中数据库的keys，通常是某个基因的ENSEMBL的编号，ENTREZID 的编号等，经常与select配合使用，通常情况下会返回数据库的关键词，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; head(keys(org.Hs.eg.db))</div><div class="line">[1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;9&quot;  &quot;10&quot; &quot;11&quot;</div></pre></td></tr></table></figure>
<p><code>select</code>：(x, keys, columns, keytype, …)，基于keys, columns和keytypes以data.frame数据类型返回数据，可以是一对多的关系，使用select函数可以把任意公共数据库的数据进行一一对应，例如我们有几个ENSEMBL的基因ID号，然后我想找到它们所对应的gene名和缩略词简称，就可以按以下进行的操作：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ensids &lt;-c(<span class="string">"ENSG00000130720"</span>,<span class="string">"ENSG00000103257"</span>,<span class="string">"ENSG00000156414"</span>,<span class="string">"ENSG00000144644"</span>,<span class="string">"ENSG00000159307"</span>, <span class="string">"ENSG00000144485"</span>)</div><div class="line"><span class="comment"># 基因的ENSEMBL编号</span></div><div class="line"></div><div class="line">cols &lt;- c(<span class="string">"SYMBOL"</span>, <span class="string">"GENENAME"</span>)</div><div class="line"><span class="comment"># 基因的SYMBOL和GENENAME</span></div><div class="line"></div><div class="line">select(org.Hs.eg.db, keys=ensids, columns=cols, keytype=<span class="string">"ENSEMBL"</span>)</div><div class="line"><span class="comment"># 使用select函数从org.Hs.eg.db数据库中提取这些基因的信息</span></div><div class="line"></div><div class="line">select(org.Hs.eg.db, keys=ensids, columns=cols, keytype=<span class="string">"ENTREZID"</span>)</div><div class="line"><span class="comment"># 使用select函数从org.Hs.eg.db数据库中提取这些基因的信息</span></div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">          ENSEMBL SYMBOL                                                    GENENAME</div><div class="line">1 ENSG00000130720 FIBCD1                            fibrinogen C domain containing 1</div><div class="line">2 ENSG00000103257 SLC7A5                            solute carrier family 7 member 5</div><div class="line">3 ENSG00000156414  TDRD9                                   tudor domain containing 9</div><div class="line">4 ENSG00000144644  GADL1                              glutamate decarboxylase like 1</div><div class="line">5 ENSG00000159307 SCUBE1 signal peptide, CUB domain and EGF like domain containing 1</div><div class="line">6 ENSG00000144485   HES6                      hes family bHLH transcription factor 6</div></pre></td></tr></table></figure>
<p>再举个例子，现在我从<code>org.Hs.eg.db</code>数据库中提取<code>BRCA1</code>基因，提取它的ENSEMBL编号，UNIGENE，ENTREZID，CHR，GO和GENENAME等，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">select(org.Hs.eg.db, keys=<span class="string">"BRCA1"</span>, columns=c(<span class="string">"ENSEMBL"</span>,<span class="string">"UNIGENE"</span>,<span class="string">"ENTREZID"</span>,<span class="string">"CHR"</span>,<span class="string">"GO"</span>,<span class="string">"GENENAME"</span>), keytype=<span class="string">"SYMBOL"</span>)</div></pre></td></tr></table></figure>
<p>信息很多，只显示前几行，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">  SYMBOL         ENSEMBL   UNIGENE ENTREZID CHR         GO EVIDENCE ONTOLOGY                     GENENAME</div><div class="line"><span class="number">1</span>   BRCA1 ENSG00000012048 Hs.194143      <span class="number">672</span>  <span class="number">17</span> GO:<span class="number">0000151</span>      NAS       CC BRCA1, DNA repair associated</div><div class="line"><span class="number">2</span>   BRCA1 ENSG00000012048 Hs.194143      <span class="number">672</span>  <span class="number">17</span> GO:<span class="number">0000724</span>      IDA       BP BRCA1, DNA repair associated</div><div class="line"><span class="number">3</span>   BRCA1 ENSG00000012048 Hs.194143      <span class="number">672</span>  <span class="number">17</span> GO:<span class="number">0000729</span>      TAS       BP BRCA1, DNA repair associated</div><div class="line"><span class="number">4</span>   BRCA1 ENSG00000012048 Hs.194143      <span class="number">672</span>  <span class="number">17</span> GO:<span class="number">0000731</span>      TAS       BP BRCA1, DNA repair associated</div><div class="line"><span class="number">5</span>   BRCA1 ENSG00000012048 Hs.194143      <span class="number">672</span>  <span class="number">17</span> GO:<span class="number">0000732</span>      TAS       BP BRCA1, DNA repair associated</div><div class="line"><span class="number">6</span>   BRCA1 ENSG00000012048 Hs.194143      <span class="number">672</span>  <span class="number">17</span> GO:<span class="number">0000800</span>      IDA       CC BRCA1, DNA repair associated</div><div class="line"><span class="number">7</span>   BRCA1 ENSG00000012048 Hs.194143      <span class="number">672</span>  <span class="number">17</span> GO:<span class="number">0003677</span>      TAS       MF BRCA1, DNA repair associated</div><div class="line"><span class="number">8</span>   BRCA1 ENSG00000012048 Hs.194143      <span class="number">672</span>  <span class="number">17</span> GO:<span class="number">0003684</span>      IEA       MF BRCA1, DNA repair associated</div></pre></td></tr></table></figure>
<p>从上面案例就可以发现，一个BRCA1基因可以对应好几个GO terms，再举个例子，根据EntrezID来查询基因名，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt; en &lt;-c(<span class="string">"23032"</span>,<span class="string">"11215"</span>)</div><div class="line">&gt; coils&lt;-c(<span class="string">"SYMBOL"</span>,<span class="string">"GENENAME"</span>)</div><div class="line">&gt; select(org.Hs.eg.db,keys=en,columns=cols,keytype=<span class="string">"ENTREZID"</span>)</div><div class="line"><span class="string">'select()'</span> returned <span class="number">1</span>:<span class="number">1</span> mapping between keys and columns</div><div class="line">  ENTREZID SYMBOL                        GENENAME</div><div class="line"><span class="number">1</span>    <span class="number">23032</span>  USP33 ubiquitin specific peptidase <span class="number">33</span></div><div class="line"><span class="number">2</span>    <span class="number">11215</span> AKAP11   A-kinase anchoring protein <span class="number">11</span></div></pre></td></tr></table></figure>
<p>同时，一个GO term也能对应好几个基因，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt; select(org.Hs.eg.db,keys=&quot;GO:0000122&quot;,columns=c(&quot;ENSEMBL&quot;),keytype=&quot;GO&quot;)</div><div class="line">&apos;select()&apos; returned 1:many mapping between keys and columns</div><div class="line">          GO EVIDENCE ONTOLOGY SYMBOL</div><div class="line">1 GO:0000122      IGI       BP ACVR2B</div><div class="line">2 GO:0000122      TAS       BP  PARP1</div><div class="line">3 GO:0000122      IMP       BP  AEBP1</div><div class="line">4 GO:0000122      IMP       BP    AES</div><div class="line">5 GO:0000122      IEA       BP  NR0B1</div><div class="line">6 GO:0000122      IGI       BP  APBB1</div><div class="line">.....</div><div class="line">.....</div><div class="line">776 GO:0000122      TAS       BP ZNF559-ZNF177</div></pre></td></tr></table></figure>
<p>可以看到，<code>GO:0000122</code>这一个GO terms对应了776个基因。</p>
<p><code>mapIds</code>功能和<code>select</code>类似，只不过他返回的是一组向量，而不是数据库，用法为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mapIds(x, keys, column, keytype, ..., multiVals)</div></pre></td></tr></table></figure>
<p>如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; mapIds(org.Hs.eg.db,keys=c(&quot;1&quot;,&quot;2&quot;,&quot;672&quot;),column=c(&quot;ALIAS&quot;),keytype=&quot;ENTREZID&quot;)</div><div class="line">&apos;select()&apos; returned 1:many mapping between keys and columns</div><div class="line">      1       2     672 </div><div class="line">  &quot;A1B&quot;  &quot;A2MD&quot; &quot;BRCAI&quot;</div></pre></td></tr></table></figure>
<p>现在就清楚了，ogDB这个数据库的用处在于将不同的基因与各自相应的GO terms给对应起来。</p>
<p>第二个文件就是不同GO terms之间的关系文件，这个文件主要记录的是不同GO terms之间的关系，名字为<code>go-basic</code>，下载地址为：http://snapshot.geneontology.org/ontology/go-basic.obo，在进行GO分析时，就利用这个文件来将GO terms绘制成网络图的形式，现在以<code>go-basic.obo</code>为例，这些信息如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[Term]</div><div class="line">id: GO:0000001</div><div class="line">name: mitochondrion inheritance</div><div class="line">namespace: biological_process</div><div class="line">def: &quot;The distribution of mitochondria, including the mitochondrial genome, into daughter cells after mitosis or meiosis, mediated by interactions between mitochondria and the cytoskeleton.&quot; [GOC:mcc, PMID:10873824, PMID:11389764]</div><div class="line">synonym: &quot;mitochondrial inheritance&quot; EXACT []</div><div class="line">is_a: GO:0048308 ! organelle inheritance</div><div class="line">is_a: GO:0048311 ! mitochondrion distribution</div><div class="line"></div><div class="line">[Term]</div><div class="line">id: GO:0000002</div><div class="line">name: mitochondrial genome maintenance</div><div class="line">namespace: biological_process</div><div class="line">def: &quot;The maintenance of the structure and integrity of the mitochondrial genome; includes replication and segregation of the mitochondrial chromosome.&quot; [GOC:ai, GOC:vw]</div><div class="line">is_a: GO:0007005 ! mitochondrion organization</div></pre></td></tr></table></figure>
<p>第三个文件就是自己要研究的背景基因与背景基因文件。背景基因其实就是你自己所要研究物种的全部基因，前景基因就是你要研究的目的基因有哪些（例如对照组与实验组的差异基因）。</p>
<h4 id="前景基因文件">前景基因文件</h4>
<p>前景基因文件就是你要富集分析的基因集，例如对照组vs处理组的差异表达基因。格式为每行一个基因ID，可以是文本文件，也可以是表格，总之，就是含有一系列基因ID的文件，这个基因ID可以是EntrezID，也可以是SYMBOL等，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">NNMT</div><div class="line">MAL</div><div class="line">EEF1A2</div><div class="line">HGD</div><div class="line">TCN2</div><div class="line">CDA</div><div class="line">PCCA</div><div class="line">CRYM</div><div class="line">PDXK</div><div class="line">STC1</div><div class="line">WARS</div><div class="line">HMOX1</div><div class="line">FXYD2</div><div class="line">...</div></pre></td></tr></table></figure>
<h4 id="背景基因文件">背景基因文件</h4>
<p>GO背景基因文件：就是所有的基因集，例如如果对照组和处理组所有的表达基因。如果你研究的物种是有参考基因组的模式物种，那么可以直接使用数据库上已有的参考基因作为背景基因文件，背景基因文件就是这个特种所有的基因对应的GO terms，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180722/BId7Dmijkb.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>第一列是基因名（这个基因名可以是基因的SYMBOL，也可以是GENENAME，也可以是ENTREZID，第2列为对应的GO term，一个基因可以对应多个GO terms。</p>
<p>还可以是这样的形式：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/aHicjF8a2A.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>第1列是基因ID，第2列以及第2列之后是这一个基因对应的所有GO号。</p>
<p>前景基因文件与背景基因文件的关系就是，前景基因文件是背景基因文件的子集。</p>
<h3 id="go分析实战">GO分析实战</h3>
<p>前面讲了GO分析的一个大概思路，现在看一个具体的案例。</p>
<p>此处使用Y叔的基因富集工具<code>clusterProfiler</code>，这个包操作容易，更新很快，引用率高，非常受欢迎。此外，<code>clusterProfiler</code>这个包功能很强大，除了能够做GO分析外，还能做GSEA分析，不过这里只介绍GO分析。</p>
<p>以下是利用<code>clusterProfiler</code>包进行GO分析的流程。</p>
<h4 id="第一步安装clusterprofiler">第一步：安装clusterProfiler</h4>
<p>这个包是在bioLite上的，需要这个工具，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 1. Install clusterProfile</span></div><div class="line"><span class="keyword">source</span>(<span class="string">"https://bioconductor.org/biocLite.R"</span>)</div><div class="line">biocLite(<span class="string">'clusterProfiler'</span>)</div><div class="line">biocLite(<span class="string">'org.Hs.eg.db'</span>)</div><div class="line">biocLite(<span class="string">'DOSE'</span>)</div><div class="line">install.packages(<span class="string">"glue"</span>) </div><div class="line"><span class="comment"># 安装这个包的过程中，它还会依赖其它的包</span></div><div class="line"><span class="comment"># 可以根据R语言的提示进行安装其他包</span></div></pre></td></tr></table></figure>
<p>注：这里提一下clusterProfiler包的gene ID转换功能，clusterProfiler包中提供了两个函数，分别为<code>bitr</code>和<code>bitr_kegg</code>，这两个函数用于转换基因ID，这里介绍一下<code>bitr</code>，bitr的参数为<code>bitr(geneID, fromType, toType, OrgDb, drop = TRUE)</code>，其中geneID是基因名，fromType表示的是基因名的类型，在下面的转换中，这个基因名的类型为<code>SYMBOL</code>，toType就是要转换为什么ID，在下面的案例中，我们将<code>SYMBOL</code>转换为<code>ENTREZID</code>，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">x &lt;- c(<span class="string">"GPX3"</span>,  <span class="string">"GLRX"</span>,   <span class="string">"LBP"</span>,   <span class="string">"CRYAB"</span>, <span class="string">"DEFB1"</span>, <span class="string">"HCLS1"</span>,   <span class="string">"SOD2"</span>,   <span class="string">"HSPA2"</span>,</div><div class="line">       <span class="string">"ORM1"</span>,  <span class="string">"IGFBP1"</span>, <span class="string">"PTHLH"</span>, <span class="string">"GPC3"</span>,  <span class="string">"IGFBP3"</span>,<span class="string">"TOB1"</span>,    <span class="string">"MITF"</span>,   <span class="string">"NDRG1"</span>,</div><div class="line">       <span class="string">"NR1H4"</span>, <span class="string">"FGFR3"</span>,  <span class="string">"PVR"</span>,   <span class="string">"IL6"</span>,   <span class="string">"PTPRM"</span>, <span class="string">"ERBB2"</span>,   <span class="string">"NID2"</span>,   <span class="string">"LAMB1"</span>,</div><div class="line">       <span class="string">"COMP"</span>,  <span class="string">"PLS3"</span>,   <span class="string">"MCAM"</span>,  <span class="string">"SPP1"</span>,  <span class="string">"LAMC1"</span>, <span class="string">"COL4A2"</span>,  <span class="string">"COL4A1"</span>, <span class="string">"MYOC"</span>,</div><div class="line">       <span class="string">"ANXA4"</span>, <span class="string">"TFPI2"</span>,  <span class="string">"CST6"</span>,  <span class="string">"SLPI"</span>,  <span class="string">"TIMP2"</span>, <span class="string">"CPM"</span>,     <span class="string">"GGT1"</span>,   <span class="string">"NNMT"</span>,</div><div class="line">       <span class="string">"MAL"</span>,   <span class="string">"EEF1A2"</span>, <span class="string">"HGD"</span>,   <span class="string">"TCN2"</span>,  <span class="string">"CDA"</span>,   <span class="string">"PCCA"</span>,    <span class="string">"CRYM"</span>,   <span class="string">"PDXK"</span>,</div><div class="line">       <span class="string">"STC1"</span>,  <span class="string">"WARS"</span>,  <span class="string">"HMOX1"</span>, <span class="string">"FXYD2"</span>, <span class="string">"RBP4"</span>,   <span class="string">"SLC6A12"</span>, <span class="string">"KDELR3"</span>, <span class="string">"ITM2B"</span>)</div><div class="line">eg = bitr(x, fromType=<span class="string">"SYMBOL"</span>, toType=<span class="string">"ENTREZID"</span>, OrgDb=<span class="string">"org.Hs.eg.db"</span>)</div><div class="line">head(eg)</div></pre></td></tr></table></figure>
<p>转换结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; head(eg)</div><div class="line">  SYMBOL ENTREZID</div><div class="line"><span class="number">1</span>   GPX3     <span class="number">2878</span></div><div class="line"><span class="number">2</span>   GLRX     <span class="number">2745</span></div><div class="line"><span class="number">3</span>    LBP     <span class="number">3929</span></div><div class="line"><span class="number">4</span>  CRYAB     <span class="number">1410</span></div><div class="line"><span class="number">5</span>  DEFB1     <span class="number">1672</span></div><div class="line"><span class="number">6</span>  HCLS1     <span class="number">3059</span></div></pre></td></tr></table></figure>
<p><code>bitr</code>可以转换的基因ID有很多种，可以使用<code>keytypes</code>来查看，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="keyword">library</span>(org.Hs.eg.db)</div><div class="line">&gt; keytypes(org.Hs.eg.db)</div><div class="line"> [<span class="number">1</span>] <span class="string">"ACCNUM"</span>       <span class="string">"ALIAS"</span>        <span class="string">"ENSEMBL"</span>      <span class="string">"ENSEMBLPROT"</span>  <span class="string">"ENSEMBLTRANS"</span></div><div class="line"> [<span class="number">6</span>] <span class="string">"ENTREZID"</span>     <span class="string">"ENZYME"</span>       <span class="string">"EVIDENCE"</span>     <span class="string">"EVIDENCEALL"</span>  <span class="string">"GENENAME"</span>    </div><div class="line">[<span class="number">11</span>] <span class="string">"GO"</span>           <span class="string">"GOALL"</span>        <span class="string">"IPI"</span>          <span class="string">"MAP"</span>          <span class="string">"OMIM"</span>        </div><div class="line">[<span class="number">16</span>] <span class="string">"ONTOLOGY"</span>     <span class="string">"ONTOLOGYALL"</span>  <span class="string">"PATH"</span>         <span class="string">"PFAM"</span>         <span class="string">"PMID"</span>        </div><div class="line">[<span class="number">21</span>] <span class="string">"PROSITE"</span>      <span class="string">"REFSEQ"</span>       <span class="string">"SYMBOL"</span>       <span class="string">"UCSCKG"</span>       <span class="string">"UNIGENE"</span>     </div><div class="line">[<span class="number">26</span>] <span class="string">"UNIPROT"</span></div></pre></td></tr></table></figure>
<p>再举个例子，现在我们将<code>SYMBOL</code>转换为<code>UNIPROT</code>与<code>ENSEMBL</code>的基因名，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ids &lt;- bitr(x, fromType=<span class="string">"SYMBOL"</span>, toType=c(<span class="string">"UNIPROT"</span>, <span class="string">"ENSEMBL"</span>), OrgDb=<span class="string">"org.Hs.eg.db"</span>)</div><div class="line">head(ids)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; head(ids)</div><div class="line">  SYMBOL    UNIPROT         ENSEMBL</div><div class="line"><span class="number">1</span>   GPX3     P22352 ENSG00000211445</div><div class="line"><span class="number">2</span>   GLRX A0A024RAM2 ENSG00000173221</div><div class="line"><span class="number">3</span>   GLRX     P35754 ENSG00000173221</div><div class="line"><span class="number">4</span>    LBP     P18428 ENSG00000129988</div><div class="line"><span class="number">5</span>    LBP     Q8TCF0 ENSG00000129988</div><div class="line"><span class="number">6</span>  CRYAB     P02511 ENSG00000109846</div></pre></td></tr></table></figure>
<p>使用clusterProfiler这个包进行GO分析时，通常并不需要转换ID，所有的ID类型都可以由<code>OrgDb</code>文件提供，并且通过<code>keyType</code>参数在<code>groupGO</code>，<code>enrichGO</code>和<code>gseGO</code>中进行指定。</p>
<h4 id="第二步原始数据">第二步：原始数据</h4>
<p><code>groupGO</code>，<code>enrichGO</code>和<code>gseGO</code>这三个函数都支持拥有<code>OrgDb</code>对象的物种进行GO分析。Bioconductor提供了有20个物种的<code>OrgDb</code>文件。如果用户自身有GO注释数据（数据框形式，第1列是基因ID，第2列是GO ID），此时就可以使用<code>enricher()</code>和<code>gseGO()</code>函数进行表达分析（over-representation）和GSEA分析（gene set enrichment analysis）。</p>
<p>如果基因是被直接注释的，那么这些基因也可以被祖GO节点（ancestor GO nodes）注释（间接注释）。如果用户只使用直接注释，那么这些基因可以使用<code>buildGOmap</code>函数来推测出来基因的间接注释，生成了一个数据框格式的文件，用于<code>enricher()</code>和<code>gesGO</code>分析。</p>
<p>clusterProfiler包中的<code>groupGO</code>包用于基因的分类，此时举个例子，我们使用<code>DOSE</code>这个包里的<code>geneList</code>数据集。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">data(geneList, package=<span class="string">"DOSE"</span>)</div><div class="line">gene &lt;- names(geneList)[abs(geneList) &gt; <span class="number">2</span>]</div><div class="line">gene.df &lt;- bitr(gene, fromType = <span class="string">"ENTREZID"</span>,</div><div class="line">                toType = c(<span class="string">"ENSEMBL"</span>, <span class="string">"SYMBOL"</span>),</div><div class="line">                OrgDb = org.Hs.eg.db)</div><div class="line">head(gene.df)</div></pre></td></tr></table></figure>
<p>这里使用到了DOSE这包，这个包的全称是Disease Ontology Semantic and Enrichment analysis，具体的内容不用管，这里我们只使用它里面的一些基因名称，把基因的名称赋给<code>gene</code>这个变量，此时<code>gene</code>这个变量里面是EntrezID，然后使用<code>bitr</code>把Entrezid转换为ENSEMBL和SYMBOL，结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; head(gene.df)</div><div class="line">  ENTREZID         ENSEMBL SYMBOL</div><div class="line"><span class="number">1</span>     <span class="number">4312</span> ENSG00000196611   MMP1</div><div class="line"><span class="number">2</span>     <span class="number">8318</span> ENSG00000093009  CDC45</div><div class="line"><span class="number">3</span>    <span class="number">10874</span> ENSG00000109255    NMU</div><div class="line"><span class="number">4</span>    <span class="number">55143</span> ENSG00000134690  CDCA8</div><div class="line"><span class="number">5</span>    <span class="number">55388</span> ENSG00000065328  MCM10</div><div class="line"><span class="number">6</span>      <span class="number">991</span> ENSG00000117399  CDC20</div></pre></td></tr></table></figure>
<h4 id="第三步go分析函数">第三步：GO分析函数</h4>
<p>在clusterProfiler包中有两个做GO分析的函数，一个是groupGO，一个是enrichGO，groupGO它能够指定具体要分析的GO terms的层级，而enrichGO则就是普通的GO分析，分析到哪一层就是哪一层，通常情况下，使用<code>enrichGO</code>就行。</p>
<h5 id="groupgo">groupGO</h5>
<p>这个函数的功能是：</p>
<p>现在使用<code>groupGO</code>函数，对<code>gene</code>这里面的基因进行功能分析，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Step4. GO analysis</span></div><div class="line"><span class="comment"># groupGO</span></div><div class="line">ggo &lt;- groupGO(gene     = gene.df$ENTREZID,</div><div class="line">               OrgDb    = org.Hs.eg.db,</div><div class="line">               ont      = <span class="string">"CC"</span>,</div><div class="line">               level    = <span class="number">3</span>,</div><div class="line">               readable = <span class="literal">TRUE</span>)</div><div class="line">write.csv(ggo,<span class="string">"D:\\ggo.csv"</span>)</div></pre></td></tr></table></figure>
<p>现在解释一下上述代码，其中gene是一个向量，它含有要分析的基因ID，OrgDb是数据库，ont的参数为<code>CC</code>，<code>BP</code>和<code>MF</code>。level用于指定分析的GO水平，readable：逻辑值，如果为TRUE，则geneID会比对到gene symbol上，现在查看一下使用<code>groupGO</code>分析的结果，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180725/bcCgelD75f.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h5 id="enrichgo">enrichGO</h5>
<p>功能：过表达（over-representation）分析：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">ego &lt;- enrichGO(gene          = gene,</div><div class="line">                universe      = names(geneList),</div><div class="line">                OrgDb         = org.Hs.eg.db,</div><div class="line">                ont           = <span class="string">"CC"</span>,</div><div class="line">                pAdjustMethod = <span class="string">"BH"</span>,</div><div class="line">                pvalueCutoff  = <span class="number">0.01</span>,</div><div class="line">                qvalueCutoff  = <span class="number">0.05</span>,</div><div class="line">        readable      = <span class="literal">TRUE</span>)</div><div class="line">head(ego)</div></pre></td></tr></table></figure>
<p>分析结果如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180725/5EEal4bGij.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>由于<code>OrgDb</code>支持任何形式的gene ID，因此可以在GO分析中直接使用任何gene ID，用户只需要指定<code>keyType</code>标明输入的数据即可，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ego2 &lt;- enrichGO(gene =gene.df$ENSEMBL,</div><div class="line">                 OrgDb         = org.Hs.eg.db,</div><div class="line">                 keytype       = <span class="string">"ENSEMBL"</span>,</div><div class="line">                 ont           = <span class="string">"CC"</span>,</div><div class="line">                 pAdjustMethod = <span class="string">"BH"</span>,</div><div class="line">                 pvalueCutoff  = <span class="number">0.01</span>,</div><div class="line">                 qvalueCutoff  = <span class="number">0.05</span>)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180725/ae514mcL52.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在解释一下这个结果，</p>
<ol style="list-style-type: decimal">
<li>GO ID: Gene Ontology数据库中唯一的标号信息；</li>
<li>Description ：Gene Ontology功能的描述信息；</li>
<li>GeneRatio：差异基因中与该Term相关的基因数与整个差异基因总数的比值；</li>
<li>BgRation：所有（ bg）基因中与该Term相关的基因数与所有（ bg）基因的比值；</li>
<li>pvalue: 富集分析统计学显著水平，一般情况下， P-value &lt; 0.05 该功能为富集项；</li>
<li>p.adjust 矫正后的P-Value；</li>
<li>qvalue：对p值进行统计学检验的q值；</li>
<li>Count：差异基因中与该Term相关的基因数</li>
</ol>
<h4 id="第四步绘制go图">第四步：绘制GO图</h4>
<h5 id="go条形图">GO条形图</h5>
<p>接下来是GO的层次聚类图，一般是二级GO条目条形图，也就是把得到的GO注释结果再归于二级分类中，绘制出二级GO条目图，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">barplot(ego_cc, showCategory=<span class="number">20</span>,title=<span class="string">"EnrichmentGO CC"</span>)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180725/H03B9H5H95.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这里只是绘制了CC这一类的条形图，BP，MF的条形图可以都可以根据这个来绘制，看一下网上其他人绘制的二级图，如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180720/3b6gFee6ll.png?imageslim" alt="mark"></p>
<p>这张图就是GO分析的二级分类图，它显示了差异基因在各个GO term的数目和富集情况。横坐标代表GO三个 ontology的更细一级分类，即二级分类；纵坐标代表每个分类条目所包含的基因数目。由于一个基因常常对应多个GO term，因此同一个基因会在不同分类条目下出现，即被多次统计，因此如果你把这里所有柱子的基因数目加起来，肯定是多于差异基因的总数目。</p>
<h5 id="go点状图">GO点状图</h5>
<p>如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dotplot(ego_cc,title=<span class="string">"Enrichment GO CCdot"</span>)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180725/BbfaajFHke.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h5 id="go的有向无环图">GO的有向无环图</h5>
<p>如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plotGOgraph(ego_cc)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180725/ALkHFkgmA2.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>进行局部放大，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180725/CALiilKbI1.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>解释一下这个图形：从整体上来看，GO的注释系统是一个有向无环图（DAG，Directed Acyclic Graphs ），GO term之间的联系是单向，前面提到，GO term之间的关系主要有3种，分别为<code>is_a</code>，<code>part_of</code>和<code>regulates</code>，富集分析的结果会分别给出GO三个本体（CC，BP，MF）的有向无环图，这里我们只绘制了CC本体，在这张图中，超接近根结点的GO term的概括性越强，越往下，分支的GO term表示的结果更细，现在查看一个GO term里面的含义，如下所示，其中就是我们前面GO分析表格中的这一条，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180725/Gb2Dhb29Kg.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在我们在GO分析的有向无环图中把这个结果放大，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180725/g9e1Dl7Hhl.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>其中第一行是GO术语的编号，第二行是对GO term的描述，第三行是P值，如果大于0.05，就会显示NA，显白色，上图中的P值小于0.05，因此显黄色。每个节点都有一定的形状，系统默认会把显著性最高的前10个GO term设置为方形，其余的GO term为圆形，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180725/kEE2GfEFhJ.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>颜色的含义：颜色越深，代表该GO term越显著。颜色由浅到深分别为：无色——浅黄——深黄——红色。 那么，从颜色上来看，在molecular function这个ontology上，最显著的GO term是GO:0005819。因此后续可以从这个GO term入手，这个GO term所在的分支上的其他GO term也值得研究。，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180725/E11klgaD3L.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>GO的有向无环图展示了GO term之间的分类关系。</p>
<h2 id="clusterprofiler包的go-basic.ogo文件">ClusterProfiler包的go-basic.ogo文件</h2>
<p>前面说过，在进行GO分析时，需要使用到这几个文件，分别如下所示：</p>
<ol style="list-style-type: decimal">
<li>前景基因与背景基因文件，前景基因是你要研究的目的基因，背景基因其实就是你要研究的某个物种的全部基因文件；</li>
<li>GO注释文件，GO注释文件的作用在于，将GO terms与你的前景基因与背景基因的Gene ID对应起来；</li>
<li>go-basic.ogo文件，这个文件记录的主要是不同GO terms之间的联系，用于绘制DAG图，不过在使用clusterProfiler中，并没有发现这个文件，后来在群里问了一下其他同学，有人说，这个包里面含有GO.db包，这个包里面含的内容就是GO terms的层级信息，如下所示：</li>
</ol>
<p>现在看一下某个GO terms在<code>go-basic.ogo</code>中的信息，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[Term]</div><div class="line">id: GO:0000015</div><div class="line">name: phosphopyruvate hydratase complex</div><div class="line">namespace: cellular_component</div><div class="line">def: &quot;A multimeric enzyme complex, usually a dimer or an octamer, that catalyzes the conversion of 2-phospho-D-glycerate to phosphoenolpyruvate and water.&quot; [GOC:jl, ISBN:0198506732]</div><div class="line">subset: goslim_metagenomics</div><div class="line">subset: gosubset_prok</div><div class="line">synonym: &quot;enolase complex&quot; EXACT []</div><div class="line">is_a: GO:0044445 ! cytosolic part</div><div class="line">is_a: GO:1902494 ! catalytic complex</div></pre></td></tr></table></figure>
<p>可以发现，<code>GO:0000015</code>与其他GO terms的关系有2个，分别为<code>GO:0044445</code>和<code>GO:1902494</code>。</p>
<p>现在看一下<code>GO.db</code>文件，如下所示：s</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; xx &lt;- GOCCPARENTS</div><div class="line">&gt; xx$`GO:0000015`</div><div class="line">        is_a         is_a </div><div class="line"><span class="string">"GO:0044445"</span> <span class="string">"GO:1902494"</span></div></pre></td></tr></table></figure>
<p>可以发现，GOCCPARENTS（这个是GO.db包中的某个数据集）中含有<code>GO:0000015</code>与其他GO terms的关系。</p>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><a href="https://mp.weixin.qq.com/s/FKlF3zkwnkOrXHvVzKYukw" target="_blank" rel="external">一文掌握GO和pathway分析（公众号：GCBI知识库）</a></li>
<li><a href="https://mp.weixin.qq.com/s/s2_yv7U65FlxE1nLqhxcDw" target="_blank" rel="external">GO、KEGG功能注释是一个相亲的过程（公众号：小张聊科研）</a></li>
<li><a href="https://mp.weixin.qq.com/s/d1KCETQZ88yaOLGwAtpWYg" target="_blank" rel="external">GO、GSEA富集分析一网打进（公众号：生信宝典）</a></li>
<li><a href="https://mp.weixin.qq.com/s/i7GOr5UMRp6OYTO40lgR8g" target="_blank" rel="external">R语言学习 - 富集分析泡泡图 （文末有彩蛋）</a></li>
<li><a href="https://mp.weixin.qq.com/s/AWWLIhxZrHnZkhYtoYx7gA" target="_blank" rel="external">手把手教你看富集分析结果之GO富集</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_670445240101m4z3.html" target="_blank" rel="external">每日一生信–富集分析（超几何分布）（Fisher’s Exact Test）</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_5d1edf6a0100ujcv.html" target="_blank" rel="external">R 超几何分布</a></li>
<li><a href="https://en.wikipedia.org/wiki/Hypergeometric_distribution" target="_blank" rel="external">Wikipedia:Hypergeometric distribution</a></li>
<li><a href="https://mp.weixin.qq.com/s/TiX41zf4Vc5xizTYGj5HnQ" target="_blank" rel="external">基于R语言理解随机变量分布——离散型随机变量</a></li>
<li><a href="https://www.jianshu.com/p/5d4dd7a75362" target="_blank" rel="external">理解差异表达与GO分析</a></li>
<li><a href="http://www.biotrainee.com/thread-242-1-1.html" target="_blank" rel="external">GO层次聚类图-二级GO条目条形图</a></li>
<li><a href="https://www.jianshu.com/p/5a4bda169247" target="_blank" rel="external">功能富集分析概述</a></li>
<li><a href="https://www.jianshu.com/p/3765b1ac02b5" target="_blank" rel="external">基因表达分析</a></li>
<li><a href="http://www.bio-info-trainee.com/370.html" target="_blank" rel="external">转录组-GO和KEGG富集的R包clusterProfiler</a></li>
<li><a href="http://www.omicshare.com/forum/thread-826-1-1.html" target="_blank" rel="external">OS Tools-GO富集分析工具的使用与解读详细教程</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_6a6c136d0100waak.html" target="_blank" rel="external">《生物信息与功能基因组学》</a></li>
<li><a href="http://geneontology.org/page/ontology-documentation" target="_blank" rel="external">Ontology Documentation</a></li>
<li><a href="http://geneontology.org/page/ontology-structure" target="_blank" rel="external">Ontology Structure</a></li>
<li><a href="http://www.bio-info-trainee.com/710.html" target="_blank" rel="external">Bioconductor的数据包library(org.Hs.eg.db)简介</a></li>
<li><a href="https://www.jianshu.com/p/4910d7cec5c8?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation" target="_blank" rel="external">转录组入门（8）：差异基因结果注释</a></li>
<li><a href="https://www.bioconductor.org/packages/devel/bioc/vignettes/clusterProfiler/inst/doc/clusterProfiler.html#kegg-analysis" target="_blank" rel="external">Statistical analysis and visualization of functional profiles for genes and gene clusters</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/02/Python/Python学习笔记（2）-数据类型之字符串及格式输出/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/02/Python/Python学习笔记（2）-数据类型之字符串及格式输出/" itemprop="url">Python学习笔记（2）——数据类型之数字与字符串</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-02T12:00:00+08:00">
                2018-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,974
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  21
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="python数据类型概览">Python数据类型概览</h2>
<p>python3中有六个标准的数据类型，分别为：①Number（数字）；②String（字符串）；③List（列表）；④Tuple（元组）；⑤Sets（集合）；⑥Dictionary（字典）。</p>
<p>根据能否更改这些类型变量的值，可以把这六个标准类型划分为两类：</p>
<p>第一类：不可变数据（四个）：Number（数字）、String（字符串）、Tuple（元组）、Sets（集合）；</p>
<p>第二类：可变数据（两个）：List（列表）、Dictionary（字典）。</p>
<p>根据不同类型的数据内的元素是否有顺序，还可以划分两类：</p>
<p>第一类：有序序列：列表，元组，字符串；</p>
<p>第二类：无序序列：字典，集合。</p>
<h2 id="变量的赋值">变量的赋值</h2>
<p>Python中变量要遵循一定的规则，例如不得以数字开头，不得以Python关键字作为变量。此外，Python还提供了一个函数用于判断一个字符串能否作为变量的名称，即<code>isidentifier()</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'abc'</span>.isidentifier()</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'3abc'</span>.isidentifier()</div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure>
<h3 id="常规赋值操作">常规赋值操作</h3>
<p>Python使用等号（=）给变量赋值，等号（=）运算符左边是一个变量名,等号（=）运算符右边是存储在变量中的值，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat variable.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">counter = <span class="number">100</span></div><div class="line">miles = <span class="number">1000.00</span></div><div class="line">name = <span class="string">"runoob"</span></div><div class="line"></div><div class="line">print(counter)</div><div class="line">print(miles)</div><div class="line">print(name)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 variable.py </div><div class="line"><span class="number">100</span></div><div class="line"><span class="number">1000.0</span></div><div class="line">runoob</div></pre></td></tr></table></figure>
<h3 id="多变量赋值">多变量赋值</h3>
<p>Python可以同时对多个变量进行赋值，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">a = b = c =<span class="number">1</span></div></pre></td></tr></table></figure>
<p>或者像这样：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">a, b, c = <span class="number">1</span>, <span class="number">2</span>, <span class="string">"runoob"</span></div></pre></td></tr></table></figure>
<p>这种赋值试方式，就是相当于<code>a = 1, b = 2, c = &quot;runoob&quot;</code>。</p>
<h3 id="判断是否是同一个对象is">判断是否是同一个对象——is</h3>
<p>两个变量是否指向的是同一个对象，可以用is 运算符，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">'banana'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">'banana'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b <span class="keyword">is</span> a</div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure>
<h2 id="number数字">Number（数字）</h2>
<h3 id="类型判断函数type">类型判断函数type()</h3>
<p>Python3中的数字类型具体包括<code>int（整型）</code>，<code>float（浮点型）</code>，<code>bool（布尔型）</code>和<code>complex（复数型）</code>这四种。使用内置的<code>type()</code>函数可以查看对象的类型，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a, b, c, d = <span class="number">20</span>, <span class="number">5.5</span>, <span class="keyword">True</span>, <span class="number">4</span>+<span class="number">4j</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(a), type(b), type(c), type(d))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">int</span>'&gt; &lt;<span class="title">class</span> '<span class="title">float</span>'&gt; &lt;<span class="title">class</span> '<span class="title">bool</span>'&gt; &lt;<span class="title">class</span> '<span class="title">complex</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt;</span></div></pre></td></tr></table></figure>
<h3 id="类型判断函数instance">类型判断函数instance()</h3>
<p>还可以通过<code>instance</code>函数来判断，这个函数的使用格式为<code>instance(a,b)</code>，即判断a是否是b的一个实例，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">111</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(a, int)</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(a, float)</div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure>
<p><code>isinstance</code>和<code>type()</code>的区别可以通过一些代码来看：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat type_instance_diff.py </div><div class="line"><span class="comment">#!usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line">print(isinstance(A(),A))</div><div class="line">print(type(A()) == A)</div><div class="line">print(isinstance(B(),A))</div><div class="line">print(type(B()) == A)</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 type_instance_diff.py </div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure>
<p>区别就是，<code>type()</code>认为子类与父类不是一个类型，<code>isinstance()</code>认为子类与父类是一个类型。</p>
<h3 id="字符串转换为整型">字符串转换为整型</h3>
<p>不同类型的变量有时候会出现错误，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>num = <span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>string = <span class="string">'1'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(num + string)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">TypeError: unsupported operand type(s) <span class="keyword">for</span> +: <span class="string">'int'</span> <span class="keyword">and</span> <span class="string">'str'</span></div></pre></td></tr></table></figure>
<p>因此，只要在一段代码中要涉及不同类型的变量，最好使用<code>type()</code>函数来查看一下数据类型。如果不同，有时候需要进行类型转换，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>num = <span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>string = <span class="string">'1'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>num2 = int(string)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(num +num2)</div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<h2 id="变量的删除">变量的删除</h2>
<p>变量的删除使用<code>del</code>函数。</p>
<h2 id="字符串">字符串</h2>
<h3 id="字符串的访问">字符串的访问</h3>
<p>字符串就是一串有序的字符。你可以通过方括号操作符，每次去访问字符串中的一个字符，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>fruit = <span class="string">'banana'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>letter = fruit[<span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>letter</div><div class="line"><span class="string">'a'</span></div></pre></td></tr></table></figure>
<p>其中[1]是索引，用于指示字符串中字符的位置，python中第1个位置是[0]，而非[1]。</p>
<h3 id="字符串的长度">字符串的长度</h3>
<p><code>len</code>是一个内置函数，会返回一个字符串中字符的长度：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(fruit)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(letter)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>fruit[len(fruit)<span class="number">-1</span>] <span class="comment">#返回fruit的最后一个字母</span></div><div class="line"><span class="string">'a'</span></div></pre></td></tr></table></figure>
<h3 id="字符串的加法">字符串的加法</h3>
<p>字符串的加法就是将字符串连接起来，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>what_he_does = <span class="string">' plays '</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>his_instrument = <span class="string">'guitar'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>his_name = <span class="string">'Robert Johnson'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>artist_intro = his_name + what_he_does + his_instrument</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(artist_intro)</div><div class="line">Robert Johnson plays guitar</div></pre></td></tr></table></figure>
<h3 id="字符串无法修改">字符串无法修改</h3>
<p>字符串属于不可变序列，无法进行修改，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>greeting = <span class="string">'Hello, world!'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>greeting[<span class="number">0</span>] = <span class="string">'J'</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">TypeError: <span class="string">'str'</span> object does <span class="keyword">not</span> support item assignment</div></pre></td></tr></table></figure>
<p>但是可以新建一个字符串，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>greeting = <span class="string">'Hello, world!'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>new_greeting = <span class="string">'J'</span> + greeting[<span class="number">1</span>:]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(new_greeting)</div><div class="line">Jello, world!</div></pre></td></tr></table></figure>
<p>在Python中处理这类无法修改的数据类型时，通常的做法就是提取相应的字符串，然后再新建一个。</p>
<h3 id="字符串的切片与索引">字符串的切片与索引</h3>
<p>先看一个案例，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>name = <span class="string">'My name is Mike'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(name[<span class="number">0</span>]) <span class="comment"># 切下第0个元素</span></div><div class="line">M</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(name[<span class="number">-4</span>]) <span class="comment"># 切下倒数第4个元素</span></div><div class="line">M</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(name[<span class="number">11</span>:<span class="number">14</span>]) <span class="comment"># 切下第11到第14个元素，左闭右开区间</span></div><div class="line">Mik</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(name[<span class="number">11</span>:<span class="number">15</span>]) <span class="comment"># 切下第11到第15个元素，左闭右开区间</span></div><div class="line">Mike</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(name[<span class="number">5</span>:]) <span class="comment"># 从第5个元素开始切，一直到结尾</span></div><div class="line">me <span class="keyword">is</span> Mike</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(name[:<span class="number">5</span>]) <span class="comment"># 从第0个元素开始切，不包括第5个元素，左闭右开区间</span></div><div class="line">My na</div></pre></td></tr></table></figure>
<p>字符串每个字符对应的索引:</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180519/IaGl5BBC7k.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>再看另外一个案例，下面的这个案例中使用了几个参数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">'ACTGCATCATC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">0</span>:<span class="number">3</span>] <span class="comment"># 截取0到3元素</span></div><div class="line"><span class="string">'ACT'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">2</span>:<span class="number">4</span>] <span class="comment"># 截取2到4元素</span></div><div class="line"><span class="string">'TG'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">2</span>:<span class="number">-1</span>] <span class="comment"># 截取第2到最后一个元素</span></div><div class="line"><span class="string">'TGCATCAT'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">2</span>:] <span class="comment"># 截取第2到最后一个元素</span></div><div class="line"><span class="string">'TGCATCATC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[::<span class="number">-1</span>] <span class="comment"># #创造一个与原字符串顺序相反的字符串</span></div><div class="line"><span class="string">'CTACTACGTCA'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">-3</span>:<span class="number">-1</span>] <span class="comment">#截取倒数第三位与倒数第一位之前的字符</span></div><div class="line"><span class="string">'AT'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">-3</span>:] <span class="comment">#截取倒数第三位到结尾</span></div><div class="line"><span class="string">'ATC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[:<span class="number">-5</span>:<span class="number">-3</span>] <span class="comment">#逆序截取</span></div><div class="line"><span class="string">'CC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[::<span class="number">2</span>]   <span class="comment"># 隔一个取一个元素的操作</span></div><div class="line"><span class="string">'ATCTAC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">0</span>:<span class="number">6</span>:<span class="number">2</span>] <span class="comment"># 截取第0到第6个元素，然后再间隔1个取元素</span></div><div class="line"><span class="string">'ATC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">9</span>:<span class="number">0</span>:<span class="number">-3</span>] <span class="comment"># 截取第0到第9个元素，然后倒序间隔取3个元素</span></div><div class="line"><span class="string">'TTG'</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="字符串的分割">字符串的分割</h3>
<p>这里要与字符串的切片区分，字符串的分割使用的是<code>split()</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">'pining for the fjords'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t = s.split()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t</div><div class="line">[<span class="string">'pining'</span>, <span class="string">'for'</span>, <span class="string">'the'</span>, <span class="string">'fjords'</span>]</div></pre></td></tr></table></figure>
<p>可选的参数是定界符，是用来确定单词边界的。下面这个例子中就是把连接号<code>-</code>作为定界符：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">'spam-spam-spam'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>delimiter = <span class="string">'-'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t = s.split(delimiter)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t</div><div class="line">[<span class="string">'spam'</span>, <span class="string">'spam'</span>, <span class="string">'spam'</span>]</div></pre></td></tr></table></figure>
<h3 id="字符串的拼接">字符串的拼接</h3>
<p>join是与split功能相反的一个方法。它接收一个字符串列表，然后把所有元素拼接到一起。join是一个字符串方法，所以必须把 join放到定界符后面来调用，并且传递一个列表作为参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>t = [<span class="string">'pining'</span>,<span class="string">'for'</span>,<span class="string">'the'</span>,<span class="string">'fjords'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>delimiter = <span class="string">' '</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = delimiter.join(t)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s</div><div class="line"><span class="string">'pining for the fjords'</span></div></pre></td></tr></table></figure>
<h3 id="替换某字符串">替换某字符串</h3>
<p>这里用到了字符串的replace()方法，这个方法是用某个字符替换某个字符，虽然是替换，但是原字符是不变的，只是将替换后的字符赋值给了一个新的变量，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>phone_number = <span class="string">'1386-666-0006'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>hiding_number = phone_number.replace(phone_number[:<span class="number">9</span>],<span class="string">'*'</span>*<span class="number">9</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(hiding_number)</div><div class="line">*********<span class="number">0006</span></div></pre></td></tr></table></figure>
<h3 id="字符串计数">字符串计数</h3>
<p>下面的这段代码是统计在<code>banana</code>这个单词有多少个a，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>word = <span class="string">"banana"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>count = <span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> letter <span class="keyword">in</span> word:</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> letter == <span class="string">'a'</span>:</div><div class="line"><span class="meta">... </span>count = count + <span class="number">1</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(count)</div><div class="line"><span class="number">3</span></div></pre></td></tr></table></figure>
<p>除了函数形式外，还可以使用<code>count()</code>方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>word = <span class="string">"banana"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>word.count(<span class="string">'a'</span>)</div><div class="line"><span class="number">3</span></div></pre></td></tr></table></figure>
<h3 id="查询字符串">查询字符串</h3>
<p>查询字符常用的方法是<code>find()</code>，<code>rfind()</code>，<code>index()</code>。其中，<code>find()</code>与<code>rfind(</code>)的区别在于，一个是在左边开始查找，一个在右边开始查找（r就是right的意思），<code>index()</code>法检测字符串中是否包含子字符串<code>str</code>，如果指定<code>beg</code>（开始） 和<code>end</code>（结束） 范围，则检查是否包含在指定范围内，该方法与 python find()方法一样，只不过如果str不在 string中会报一个异常。<code>find()</code>与<code>rfind()</code>查找一个字符串在另一个字符串指定范围（默认是整个字符串）中首次出现的位置，如果不存在，返回-1，存在返回1，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">'apple, peach, banana, peach, pear'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.find(<span class="string">"peach"</span>)</div><div class="line"><span class="number">7</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">'apple, peach, banana, peach, pear'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.find(<span class="string">"peach"</span>) <span class="comment"># 返回第一次出现的位置</span></div><div class="line"><span class="number">7</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.find(<span class="string">"peach"</span>,<span class="number">7</span>) <span class="comment"># 在指定位置开始查找</span></div><div class="line"><span class="number">7</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.find(<span class="string">"peach"</span>,<span class="number">7</span>,<span class="number">20</span>) <span class="comment"># 在指定范围内进行查找</span></div><div class="line"><span class="number">7</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.rfind(<span class="string">'p'</span>) <span class="comment"># 从字符串尾部向前查找</span></div><div class="line"><span class="number">29</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.index(<span class="string">'p'</span>) <span class="comment"># 返回首次出现的位置</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.index(<span class="string">'pe'</span>)</div><div class="line"><span class="number">7</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.index(<span class="string">'pear'</span>)</div><div class="line"><span class="number">29</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.index(<span class="string">'ppp'</span>) <span class="comment"># 指定子字符串不存在时抛出异常</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">ValueError: substring <span class="keyword">not</span> found</div></pre></td></tr></table></figure>
<p>再看一个查询电话号码的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>search = <span class="string">'168'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>num_a = <span class="string">'1386-168-0006'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>num_b = <span class="string">'1681-222-0006'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(search + <span class="string">' is at '</span> + str(num_a.find(search)) + <span class="string">' to '</span>+str(num_a.find(search) + len(search)) + <span class="string">' of num_a'</span>)</div><div class="line"><span class="number">168</span> <span class="keyword">is</span> at <span class="number">5</span> to <span class="number">8</span> of num_a</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(search + <span class="string">' is at '</span> + str(num_b.find(search)) + <span class="string">' to '</span>+str(num_b.find(search) + len(search)) + <span class="string">' of num_b'</span>)</div><div class="line"><span class="number">168</span> <span class="keyword">is</span> at <span class="number">0</span> to <span class="number">3</span> of num_b</div></pre></td></tr></table></figure>
<h3 id="查询某字母">查询某字母</h3>
<p>方法与前面的类似，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>word = <span class="string">'banana'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>index = word.find(<span class="string">'a'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(index)</div><div class="line"><span class="number">1</span></div></pre></td></tr></table></figure>
<h3 id="in运算">in运算</h3>
<p>in 这个词在字符串操作中是一个布尔操作符，它读取两个字符串，如果前者的字符串为后者所包含，就返回真，否则为假：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'a'</span> <span class="keyword">in</span> <span class="string">'banana'</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'seed'</span> <span class="keyword">in</span> <span class="string">'banana'</span></div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure>
<h3 id="删除字符串中的空格">删除字符串中的空格</h3>
<p>使用的<code>strip()</code>方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>mybag = [<span class="string">' glass'</span>,<span class="string">' apple'</span>,<span class="string">'green leaf '</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#有的前面有空格，有的后面有空格</span></div><div class="line"><span class="meta">... </span>print([one.strip() <span class="keyword">for</span> one <span class="keyword">in</span> mybag])</div><div class="line">[<span class="string">'glass'</span>, <span class="string">'apple'</span>, <span class="string">'green leaf'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#去掉元素前后的空格</span></div><div class="line"><span class="meta">... </span>[<span class="string">'glass'</span>, <span class="string">'apple'</span>, <span class="string">'green leaf'</span>]</div><div class="line">[<span class="string">'glass'</span>, <span class="string">'apple'</span>, <span class="string">'green leaf'</span>]</div></pre></td></tr></table></figure>
<h3 id="遍历所有字符串">遍历所有字符串</h3>
<p>使用的是for循环，第一种方法，使用索引，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>index = <span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>fruit = <span class="string">"banana"</span></div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> index &lt; len(fruit):</div><div class="line"><span class="meta">... </span>letter = fruit[index]</div><div class="line"><span class="meta">... </span>print(letter)</div><div class="line"><span class="meta">... </span>index = index +<span class="number">1</span></div><div class="line">...</div><div class="line">b</div><div class="line">a</div><div class="line">n</div><div class="line">a</div><div class="line">n</div><div class="line">a</div></pre></td></tr></table></figure>
<p>第二种方法，直接使用字符串，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>fruit = <span class="string">"banana"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> letter <span class="keyword">in</span> fruit:</div><div class="line"><span class="meta">... </span>print(letter)</div><div class="line">...</div><div class="line">b</div><div class="line">a</div><div class="line">n</div><div class="line">a</div><div class="line">n</div><div class="line">a</div></pre></td></tr></table></figure>
<h3 id="字符串的复制">字符串的复制</h3>
<p>直接使用乘法就行，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>words = <span class="string">'word'</span>*<span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(words)</div><div class="line">wordwordwordword</div><div class="line">wordwordwordword</div></pre></td></tr></table></figure>
<h3 id="字符串的-大小转换首字母大写">字符串的 大小转换，首字母大写</h3>
<p>符串提供了一些方法，这些方法能够进行很多有用的操作。方法和函数有些类似，也接收参数然后返回一个值，但语法稍微不同。比如，<code>upper</code>这个方法就读取一个字符串，返回一个全部为大写字母的新字符串。与函数的<code>upper(word)</code>语法不同，方法的语法是<code>word.upper()</code>。后面括号里面是空白的，表示这个方法不接收参数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>word = <span class="string">'banana'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>new_word = word.upper()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(new_word)</div><div class="line">BANANA</div></pre></td></tr></table></figure>
<p>upper()方法是大写，lower()是小写，capitalize()首字母大写、title()将每个字母变为大写，swapcase()大小写互换，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">"What is Your Name?"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.lower()</div><div class="line"><span class="string">'what is your name?'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.upper()</div><div class="line"><span class="string">'WHAT IS YOUR NAME?'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.capitalize()</div><div class="line"><span class="string">'What is your name?'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.swapcase()</div><div class="line"><span class="string">'wHAT IS yOUR nAME?'</span></div></pre></td></tr></table></figure>
<h3 id="ascii值的转换">ASCII值的转换</h3>
<p>ord()是一个内建函数，能够返回某个字符（注意，是一个字符，而不是多个字符组成的串），所对应的ASCII值（是十进制的），字符ａ在ASCII中的值是97，空格在ASCII中也有值，是32，反过来，根据整数值得到的相应字符，可以使用chr()，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(ord(<span class="string">'a'</span>))</div><div class="line"><span class="number">97</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(chr(<span class="number">97</span>))</div><div class="line">a</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(chr(<span class="number">98</span>))</div><div class="line">b</div></pre></td></tr></table></figure>
<h3 id="转义字符"><strong>转义字符</strong></h3>
<p>转义字符是指，在字符串中某些特定的符号前加一个斜线之后该字符将被解释为另外一种含义，不再表示本来的字符，常见的转义字符如下所示：</p>
<table>
<thead>
<tr class="header">
<th>转义字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>\b</code></td>
<td>退格，把光标移动到前一列位置</td>
</tr>
<tr class="even">
<td><code>\f</code></td>
<td>换页符</td>
</tr>
<tr class="odd">
<td><code>\n</code></td>
<td>换行符</td>
</tr>
<tr class="even">
<td><code>\r</code></td>
<td>回车</td>
</tr>
<tr class="odd">
<td><code>\t</code></td>
<td>水平制表符</td>
</tr>
<tr class="even">
<td><code>\v</code></td>
<td>垂直制表符</td>
</tr>
<tr class="odd">
<td><code>\\</code></td>
<td>一个</td>
</tr>
<tr class="even">
<td><code>\'</code></td>
<td>单引号</td>
</tr>
<tr class="odd">
<td><code>\&quot;</code></td>
<td>双引号</td>
</tr>
<tr class="even">
<td><code>\ooo</code></td>
<td>3位八制对应的字符</td>
</tr>
<tr class="odd">
<td><code>\xhh</code></td>
<td>2位十六进制对应的字符</td>
</tr>
<tr class="even">
<td><code>\uhhhh</code></td>
<td>4位十六进制数表示的Unicode字符</td>
</tr>
</tbody>
</table>
<p>使用案例如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"> &gt;&gt;&gt; print(<span class="string">'Hello\nWorld'</span>)</div><div class="line">Hello</div><div class="line">World</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>oct(<span class="number">65</span>)</div><div class="line"><span class="string">'0o101'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'\101'</span>) <span class="comment"># 3位八进制数对应的字符</span></div><div class="line">A</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>hex(<span class="number">65</span>)</div><div class="line"><span class="string">'0x41'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'\x41'</span>) <span class="comment"># 2位十六进制数对应的字符</span></div><div class="line">A</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>ord(<span class="string">'张'</span>)</div><div class="line"><span class="number">24352</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>hex(_)</div><div class="line"><span class="string">'0x5f20'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'\u8463'</span>) <span class="comment"># 4位十六进制数表示的Unicode字符</span></div><div class="line">董</div></pre></td></tr></table></figure>
<h3 id="eval函数"><strong>eval函数</strong></h3>
<p>eval()是一具内置变数，它可以将任意字符串转化为Python表达式，并进行求值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>eval(<span class="string">"3+4"</span>) <span class="comment"># 计算表达式的值 </span></div><div class="line"><span class="number">7</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eval(<span class="string">'a+b'</span>) <span class="comment"># 这时候要求变量a和b都已经存在</span></div><div class="line"><span class="number">8</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="判断某字符串的开头或结尾">判断某字符串的开头或结尾</h3>
<p>startswith()，endswith()用于判断字符串是否以指定字符串开始或结束，可以接收两个整数参数来限定字符串的检测范围，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">'Beautiful is better than ugly'</span> </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.startswith(<span class="string">'Be'</span>) <span class="comment"># 检测整个字符串</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.startswith(<span class="string">'Be'</span>,<span class="number">5</span>) <span class="comment"># 指定检测范围的起始位置</span></div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.startswith(<span class="string">'Be'</span>,<span class="number">0</span>,<span class="number">5</span>) <span class="comment"># 指定检测范围的起始和结束位置</span></div><div class="line"><span class="keyword">True</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="判断字符串的首个字符内容">判断字符串的首个字符内容</h3>
<p>isalnum()，isalpha()，isdigit()，isdecimal()，isnumeric()，isspace()，isupper()，islower()用于检测字符串是否为数字或字母，是否为字母，是否为数字字符，是否为空白字符，是否为大写字母以及是否为小写字母，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'1234abcd'</span>.isalnum()</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'1234abcd'</span>.isalpha() <span class="comment"># 全部为英文字母时返回True</span></div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'1234abcd'</span>.isdigit() <span class="comment"># 全部为数字时返回True</span></div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'abcd'</span>.isalpha()</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'1234.0'</span>.isdigit()</div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'1234'</span>.isdigit()</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'九'</span>.isnumeric() <span class="comment"># isnumeric()方法支持汉字数字</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'99'</span>.isnumeric()</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'九'</span>.isdigit()</div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'九'</span>.isdecimal()</div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure>
<h2 id="输出格式美化">输出格式美化</h2>
<p>Python两种输出值的方式:表达式语句和<code>print()</code>函数。 第三种方式是使用文件对象的<code>write()</code>方法，标准输出文件可以用<code>sys.stdout</code>引用，<code>write()</code>方法在处理文本文件的时候经常使用，如果你希望输出的形式更加多样，可以使用<code>str.format()</code>函数来格式化输出值，如果希望将输出的值转成字符串，可以使用<code>repr()</code>或<code>str()</code>函数来实现。 这两个函数区别如下所示：</p>
<ol style="list-style-type: decimal">
<li><code>str()</code>：函数返回一个用户易读的表达形式。</li>
<li><code>repr()</code>：产生一个解释器易读的表达形式。</li>
</ol>
<h3 id="输出格式案例1">输出格式案例1:</h3>
<p>如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>str(s)</div><div class="line"><span class="string">'Hello Runoob'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(str(s)))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">str</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">print</span><span class="params">(type<span class="params">(s)</span>)</span></span></div><div class="line"><span class="class">&lt;<span class="title">class</span> '<span class="title">str</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">repr</span><span class="params">(s)</span></span></div><div class="line"><span class="class">"'<span class="title">Hello</span> <span class="title">Runoob</span>'"</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">print</span><span class="params">(type<span class="params">(repr<span class="params">(s)</span>)</span>)</span></span></div><div class="line"><span class="class">&lt;<span class="title">class</span> '<span class="title">str</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">str</span><span class="params">(<span class="number">1</span>/<span class="number">7</span>)</span></span></div><div class="line"><span class="class">'0.14285714285714285'</span></div><div class="line">&gt;&gt;&gt; x = 10*3.25</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y=<span class="number">200</span>*<span class="number">200</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">'The value of x is:  '</span> + repr(x) + <span class="string">',the value of y is: '</span> + repr(y) + <span class="string">'...'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s)</div><div class="line">The value of x <span class="keyword">is</span>:  <span class="number">32.5</span>,the value of y <span class="keyword">is</span>: <span class="number">40000.</span>..</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>hello = <span class="string">'hello, runoob\n'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>hellos = repr(hello)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(hellos)</div><div class="line"><span class="string">'hello, runoob\n'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>repr((x,y,(<span class="string">'Google'</span>, <span class="string">'Runoob'</span>)))</div><div class="line"><span class="string">"(32.5, 40000, ('Google', 'Runoob'))"</span></div></pre></td></tr></table></figure>
<h3 id="输出格式案例2">输出格式案例2</h3>
<p>下面的代码输出一个平方与立方根，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>):</div><div class="line"><span class="meta">... </span>    print(repr(x).rjust(<span class="number">2</span>),repr(x*x).rjust(<span class="number">3</span>),end=<span class="string">' '</span>) </div><div class="line"><span class="comment"># 使用print添加空格，即end=' '</span></div><div class="line"><span class="comment"># rjust()表示字符串靠右，并在左边填充空格</span></div><div class="line"></div><div class="line"><span class="meta">... </span>    print(repr(x*x*x).rjust(<span class="number">4</span>))</div><div class="line">...</div><div class="line"> <span class="number">1</span>   <span class="number">1</span>    <span class="number">1</span></div><div class="line"> <span class="number">2</span>   <span class="number">4</span>    <span class="number">8</span></div><div class="line"> <span class="number">3</span>   <span class="number">9</span>   <span class="number">27</span></div><div class="line"> <span class="number">4</span>  <span class="number">16</span>   <span class="number">64</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>):</div><div class="line"><span class="meta">... </span>    print(<span class="string">'&#123;0:2d&#125; &#123;1:3d&#125;&#123;2:4d&#125;'</span>.format(x,x*x,x*x*x))</div><div class="line">...</div><div class="line"> <span class="number">1</span>   <span class="number">1</span>   <span class="number">1</span></div><div class="line"> <span class="number">2</span>   <span class="number">4</span>   <span class="number">8</span></div><div class="line"> <span class="number">3</span>   <span class="number">9</span>  <span class="number">27</span></div><div class="line"> <span class="number">4</span>  <span class="number">16</span>  <span class="number">64</span></div></pre></td></tr></table></figure>
<h3 id="输出格式案例第3">输出格式案例第3:</h3>
<p>zfill方法表示在数字的左边填充0，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'12'</span>.zfill(<span class="number">5</span>)</div><div class="line"><span class="string">'00012'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'-3.14'</span>.zfill(<span class="number">7</span>)</div><div class="line"><span class="string">'-003.14'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'3.14159265359'</span>.zfill(<span class="number">5</span>)</div><div class="line"><span class="string">'3.14159265359'</span></div></pre></td></tr></table></figure>
<h2 id="字符串输出的格式化">字符串输出的格式化</h2>
<p>字符串的格式化输出有两种方式，一种是使用<code>%</code>符号，另外一种是使用<code>str.format()</code>，下面是使用的一些案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"&#123;:,&#125;"</span>.format(<span class="number">123456</span>))</div><div class="line"><span class="comment">#输出1234,56</span></div><div class="line"><span class="number">123</span>,<span class="number">456</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"&#123;a:w^8&#125;"</span>.format(a=<span class="string">"8"</span>))</div><div class="line"><span class="comment">#输出www8wwww</span></div><div class="line">www8wwww</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%.5f"</span> %<span class="number">5</span>)</div><div class="line"><span class="comment">#输出5.000000</span></div><div class="line"><span class="number">5.00000</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%-7s3"</span> %(<span class="string">"python"</span>))</div><div class="line"><span class="comment">#输出python 3</span></div><div class="line">python <span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%.3e"</span> %<span class="number">2016</span>)</div><div class="line"><span class="comment">#输出2.016e+03,也可以写大E</span></div><div class="line"><span class="number">2.016e+03</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%d %s"</span> %(<span class="number">123456</span>,<span class="string">"myblog"</span>))</div><div class="line"><span class="comment">#输出123456 myblog</span></div><div class="line"><span class="number">123456</span> myblog</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%(what)s is %(year)d"</span> % &#123;<span class="string">"what"</span>:<span class="string">"this year"</span>,<span class="string">"year"</span>:<span class="number">2016</span>&#125;)</div><div class="line"><span class="comment">#输出this year is 2016</span></div><div class="line">this year <span class="keyword">is</span> <span class="number">2016</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"&#123;0&#125;&#123;1&#125;"</span>.format(<span class="string">"hello"</span>,<span class="string">"fun"</span>))</div><div class="line"><span class="comment">#输出hellofun,这与CSharp的格式化字符(占位符)相似</span></div><div class="line">hellofun</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"&#123;&#125;&#123;&#125;&#123;&#125;"</span>.format(<span class="string">"spkk"</span>,<span class="string">"."</span>,<span class="string">"cn"</span>))</div><div class="line"><span class="comment">#输出spkk.cn</span></div><div class="line">spkk.cn</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"&#123;a[0]&#125;&#123;a[1]&#125;&#123;a[2]&#125;"</span>.format(a=[<span class="string">"spkk"</span>,<span class="string">"."</span>,<span class="string">"cn"</span>]))</div><div class="line"><span class="comment">#输出spkk.cn</span></div><div class="line">spkk.cn</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"&#123;dict[host]&#125;&#123;dict[dot]&#125;&#123;dict[domain]&#125;"</span>.format(dict=&#123;<span class="string">"host"</span>:<span class="string">"www"</span>,<span class="string">"domain"</span>:<span class="string">"spkk.cn"</span>,<span class="string">"dot"</span>:<span class="string">"."</span>&#125;))</div><div class="line"><span class="comment">#输出www.spkk.cn</span></div><div class="line">www.spkk.cn</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"&#123;a&#125;&#123;b&#125;"</span>.format(a=<span class="string">"python"</span>,b=<span class="string">"3"</span>))</div><div class="line"><span class="comment">#输出python3</span></div><div class="line">python3</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"&#123;who&#125; &#123;doing&#125; &#123;0&#125;"</span>.format(<span class="string">"python"</span>,doing=<span class="string">"like"</span>,who=<span class="string">"I"</span>))</div><div class="line"><span class="comment">#输出I like python</span></div><div class="line">I like python</div></pre></td></tr></table></figure>
<h3 id="str.format"><code>str.format</code></h3>
<p><code>str.format</code>的基本使用如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;&#125; website: "&#123;&#125;!"'</span>.format(<span class="string">'Runobb tuorial'</span>,<span class="string">'www.runoob.com'</span>))</div><div class="line">Runobb tuorial website: <span class="string">"www.runoob.com!"</span></div></pre></td></tr></table></figure>
<p>括号及其里面的字符（称作格式化字段）将会被<code>format()</code>中的参数替换。在括号中的数字用于指向传入对象在<code>format()</code>中的位置，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;0&#125; and &#123;1&#125;'</span>.format(<span class="string">'Google'</span>,<span class="string">'Runoob'</span>))</div><div class="line">Google <span class="keyword">and</span> Runoob</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;1&#125; and &#123;0&#125;'</span>.format(<span class="string">'Google'</span>,<span class="string">'Runoob'</span>))</div><div class="line">Runoob <span class="keyword">and</span> Google</div></pre></td></tr></table></figure>
<p>如果在 format() 中使用了关键字参数, 那么它们的值会指向使用该名字的参数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;name&#125;website:&#123;site&#125;'</span>.format(name=<span class="string">'Runoob tutorial '</span>,site=<span class="string">'www.runoob.com'</span>))</div><div class="line">Runoob tutorial website:www.runoob.com</div></pre></td></tr></table></figure>
<p>位置及关键字参数可以任意的结合:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'Website list &#123;0&#125;,&#123;1&#125;, and &#123;other&#125;. '</span>.format(<span class="string">'Google'</span>,<span class="string">'Runoob'</span>,other=<span class="string">'Taobao'</span>))</div><div class="line">Website list Google,Runoob, <span class="keyword">and</span> Taobao.</div></pre></td></tr></table></figure>
<p><code>'!a'</code>(使用<code>ascii()</code>),<code>'!s'</code>(使用<code>str()</code>)和<code>'!r'</code>(使用<code>repr()</code>)可以用于在格式化某个值之前对其进行转化，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'Constant of PI is around:&#123;&#125;.'</span>.format(math.pi))</div><div class="line">Constant of PI <span class="keyword">is</span> around:<span class="number">3.141592653589793</span>.</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'Constant of PI is around:&#123;!r&#125;.'</span>.format(math.pi))</div><div class="line">Constant of PI <span class="keyword">is</span> around:<span class="number">3.141592653589793</span>.</div></pre></td></tr></table></figure>
<p>可选项<code>':'</code>和格式标识符可以跟着字段名。这就允许对值进行更好的格式化。下面的例子将Pi保留到小数点后三位，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'Constant PI is about: &#123;0:.3f&#125;.'</span>.format(math.pi))</div><div class="line">Constant PI <span class="keyword">is</span> about: <span class="number">3.142</span>.</div></pre></td></tr></table></figure>
<p>在<code>':'</code>后传入一个整数,可以保证该域至少有这么多的宽度。用于美化表格时很有用，如下所示：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>table = &#123;<span class="string">'Google'</span>:<span class="number">1</span>,<span class="string">'Runoob'</span>:<span class="number">2</span>,<span class="string">'Taobao'</span>:<span class="number">3</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> name, number <span class="keyword">in</span> table.items():</div><div class="line"><span class="meta">... </span>    print(<span class="string">'&#123;0:10&#125; ==&gt; &#123;1:10d&#125;'</span>.format(name,number))</div><div class="line">...</div><div class="line">Google     ==&gt;          1</div><div class="line">Runoob     ==&gt;          2</div><div class="line">Taobao     ==&gt;          3</div></pre></td></tr></table></figure>
<p>如果你有一个很长的格式化字符串, 而你不想将它们分开, 那么在格式化时通过变量名而非位置会是很好的事情。 最简单的就是传入一个字典, 然后使用方括号<code>[]</code>来访问键值 :</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>table = &#123;<span class="string">'Google'</span>:<span class="number">1</span>,<span class="string">'Runoob'</span>:<span class="number">2</span>,<span class="string">'Taobao'</span>:<span class="number">3</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'Runoob:&#123;0[Runoob]:d&#125;; Google:&#123;0[Google]:d&#125;; Taobao:&#123;0[Taobao]:d&#125;'</span>.format(table))</div><div class="line">Runoob:<span class="number">2</span>; Google:<span class="number">1</span>; Taobao:<span class="number">3</span></div></pre></td></tr></table></figure>
<p>也可以通过在 table 变量前使用<code>**</code>来实现相同的功能：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>table = &#123;<span class="string">'Google'</span>:<span class="number">1</span>,<span class="string">'Runoob'</span>:<span class="number">2</span>,<span class="string">'Taobao'</span>:<span class="number">3</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'Runoob:&#123;Runoob:d&#125;;Google:&#123;Google:d&#125;;Taobao:&#123;Taobao:d&#125;'</span>.format(**table))</div><div class="line">Runoob:<span class="number">2</span>;Google:<span class="number">1</span>;Taobao:<span class="number">3</span></div></pre></td></tr></table></figure>
<h3 id="用于格式化输出"><code>%</code>用于格式化输出</h3>
<p>格式化字符串时，Python使用一个字符串作为模板。模板中有格式符，这些格式符为真实值预留位置，并说明真实数值应该呈现的格式。Python用一个tuple将多个值传递给模板，每个值对应一个格式符。<code>%</code>的格式化输出如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"I'm %s. I'm %d year old"</span> % (<span class="string">'Vamei'</span>, <span class="number">99</span>)) </div><div class="line">I<span class="string">'m Vamei. I'</span>m <span class="number">99</span> year old</div></pre></td></tr></table></figure>
<p> 它的用法如下图所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180519/kjgEF4kmH8.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h3 id="格式符汇总">格式符汇总</h3>
<p>格式符为真实值预留位置，并控制显示的格式。格式符可以包含有一个类型码，用以控制显示的类型，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">%s 字符串 (采用str()的显示)</div><div class="line">%r 字符串 (采用repr()的显示) </div><div class="line">%c 单个字符 </div><div class="line">%b 二进制整数 </div><div class="line">%d 十进制整数 </div><div class="line">%i 十进制整数 </div><div class="line">%o 八进制整数 </div><div class="line">%x 十六进制整数 </div><div class="line">%e 指数 (基底写为e) </div><div class="line">%E 指数 (基底写为E) </div><div class="line">%f 浮点数 </div><div class="line">%F 浮点数，与上相同 </div><div class="line">%g 指数(e)或浮点数 (根据显示长度) </div><div class="line">%G 指数(E)或浮点数 (根据显示长度)</div></pre></td></tr></table></figure>
<h3 id="格式符号进阶">格式符号进阶</h3>
<p>格式符号还可以按如下方式进行使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> %[(name)][flags][width].[precision]typecode </div><div class="line"><span class="number">2.</span> (name)为命名 </div><div class="line"><span class="number">3.</span> flags可以有+,-,<span class="string">' '</span>或<span class="number">0</span>。+表示右对齐。-表示左对齐。<span class="string">' '</span>为一个空格，表示在正数的左侧填充一个空格，从而与负数对齐。<span class="number">0</span>表示使用<span class="number">0</span>填充。 </div><div class="line"><span class="number">4.</span> width表示显示宽度 </div><div class="line"><span class="number">5.</span> precision表示小数点后精度</div></pre></td></tr></table></figure>
<p>使用案例如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%+10x"</span> % <span class="number">10</span>)</div><div class="line">        +a</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%04d"</span> % <span class="number">5</span>)</div><div class="line"><span class="number">0005</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%6.3f"</span> % <span class="number">2.3</span>)</div><div class="line"> <span class="number">2.300</span></div></pre></td></tr></table></figure>
<p>上面的width, precision为两个整数。我们可以利用<code>*</code>，来动态代入这两个量。比如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%.*f"</span> % (<span class="number">4</span>, <span class="number">1.2</span>))</div><div class="line"><span class="number">1.2000</span></div></pre></td></tr></table></figure>
<p>Python实际上用4来替换<code>*</code>。所以实际的模板为<code>%.4f</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%.4f"</span> % (<span class="number">1.2</span>))</div><div class="line"><span class="number">1.2000</span></div></pre></td></tr></table></figure>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li>编程小白的第一本Python入门书</li>
<li><a href="https://item.jd.com/12040511.html" target="_blank" rel="external">Python可以这样学.董付国</a></li>
<li><a href="http://www.runoob.com/python3/python3-tutorial.html" target="_blank" rel="external">Python教程|菜鸟教程</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/01/BioInformation/生信-拟南芥转录组项目的实战/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/01/BioInformation/生信-拟南芥转录组项目的实战/" itemprop="url">拟南芥转录组项目的实战</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-01T12:00:00+08:00">
                2018-04-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生信实战项目/" itemprop="url" rel="index">
                    <span itemprop="name">生信实战项目</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,004
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  13
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言">前言</h2>
<p>这是曾健明生物信息教程的第二部分，原始数据位于<code>/public/study/mRNAseq/tair/</code>中，为方便起见，可以添加到系统变量，`alias rnaseq=“cd /public/study/mRNAseq/tair/”``这是一个拟南芥转录组数据，整个流程的操作可看博客：<a href="http://www.bio-info-trainee.com/2809.html" class="uri" target="_blank" rel="external">http://www.bio-info-trainee.com/2809.html</a>。</p>
<h2 id="练习所用数据介绍">练习所用数据介绍</h2>
<p>数据来自于发表在Nature commmunication 上的一篇文章 “<a href="https://www.nature.com/articles/ncomms15120" target="_blank" rel="external">Temporal dynamics of gene expression and histone marks at the Arabidopsis shoot meristem during flowerin</a>”。原文用RNA-Seq的方式研究在开花阶段,芽分生组织在不同时期的基因表达变化。</p>
<p>原文的流程是： TopHat -&gt; SummarizeOverlaps -&gt; Deseq2 -&gt; AmiGO 其中比对的参考基因组为TAIR10 ver.24 ，并且屏蔽了ribosomal RNA regions。 Deseq2只计算至少在一个时间段的FPKM的count &gt; 1 的基因。 数据存放在<a href="http://www.ebi.ac.uk/arrayexpress" class="uri" target="_blank" rel="external">http://www.ebi.ac.uk/arrayexpress</a>/, ID为E-MTAB-5130。</p>
<p>实验设计： 4个时间段（0,1,2,3），分别有4个生物学重复，一共有16个样品。</p>
<h2 id="相关概念">相关概念</h2>
<blockquote>
<p>转录组测序的研究对象为特定细胞在某一功能状态下所能转录出来的所有 RNA 的总和，包括 mRNA 和非编码 RNA 。通过转录组测序，能够全面获得物种特定组织或器官的转录本信息，从而进行转录本结构研究、变异研究、基因表达水平研究以及全新转录本发现等研究。</p>
</blockquote>
<blockquote>
<p>其中，基因表达水平的探究是转录组领域最热门的方向，利用转录组数据来识别转录本和表达定量，是转录组数据的核心作用。由于这个作用，他可以不依赖其他组学信息，单独成为一个产品项目RNA-seq测序。所以很多时候转录组测序会与RNA-seq混为一谈。</p>
</blockquote>
<blockquote>
<p>现在RNA-seq数据使用广泛，但是没有一套流程可以解决所有的问题。比较值得关注的RNA-seq分析中的重要的步骤包括：实验设计，质控，read比对，表达定量，可视化，差异表达，识别可变剪切，功能注释，融合基因检测，eQTL定位等。</p>
</blockquote>
<h3 id="流程如下图所示">流程如下图所示：</h3>
<div class="figure">
<img src="http://www.bio-info-trainee.com/wp-content/uploads/2017/10/overview-of-RNA-seq-technology.png">

</div>
<h2 id="分析流程">分析流程</h2>
<h3 id="第1步下载数据">第1步：下载数据</h3>
<p>由于数据已经放在了服务器，如下所示，不用下载，直接在服务器里面分析，这一步略过。 <img src="http://ortxpw68f.bkt.clouddn.com/01.png"> 这几个数据是： 1. 转录本：Arabidopsis_thaliana.TAIR10.28.cdna.all.fa.gz 2. 基因组：Arabidopsis_thaliana.TAIR10.28.dna.genome.fa.gz 3. 注释文件：Arabidopsis_thaliana.TAIR10.28.dna.genome.fa.gz 4. 注释文件：Arabidopsis_thaliana.TAIR10.28.gtf.gz 5. sample_fastq：测序的原始数据 6. sample_sra：呈交给SRA数据库的数据（解压后就是sample_fastq）</p>
<h3 id="第2步基因定量">第2步：基因定量</h3>
<h4 id="第1种方法salmon方法">第1种方法：salmon方法</h4>
<p><a href="https://combine-lab.github.io/salmon/" target="_blank" rel="external">Salmon软件</a>：对RNA-seq数据进行转录本定量的工具，Salmon使用了一种新的算法（主要是specifically, coupling the concept of quasi-mapping with a two-phase inference procedure），该工具能够快速地进行转录本的定量，并且所耗内存极小。此工具进行运算的过程使用了一种可靠的模型，此模式考虑了实验特性以及RNA-seq中常见的偏倚。</p>
<h5 id="安装并添加环境变量">安装并添加环境变量</h5>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">wget https://github.com/COMBINE-lab/salmon/releases/download/v0.9.1/Salmon-0.9.1_linux_x86_64.tar.gz</div><div class="line"></div><div class="line">export PATH=$PATH:/trainee/home/jlzhang/download/Salmon-latest_linux_x86_64/bin</div></pre></td></tr></table></figure>
<h5 id="第1步建立索引如下所示">第1步：建立索引，如下所示：</h5>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">salmon index -t Arabidopsis_thaliana.TAIR10.28.cdna.all.fa.gz -i /trainee/home/jlzhang/arab/</div></pre></td></tr></table></figure>
<p>建立索引的过程如下所示： <img src="http://ortxpw68f.bkt.clouddn.com/professional/180401/0F6d3ae0Ab.png?imageslim" alt="mark"></p>
<p>切换到生成索引的目录<code>/trainee/home/jlzhang/arab/</code>，如下所示： <img src="http://ortxpw68f.bkt.clouddn.com/professional/180401/4i9FDihi44.png?imageslim" alt="mark"></p>
<p>注：输出目录要写要自己名下，如果是公共目录，则无权限写入，会出错</p>
<h5 id="第2步数据定量">第2步：数据定量</h5>
<p>salmon不进行比对，直接进行定量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">index = /trainee/home/jlzhang/arab</div><div class="line"># 索引文件夹</div><div class="line">for fn in ERR1698&#123;194..209&#125;;</div><div class="line">do</div><div class="line">    sample=`basename $&#123;fn&#125;`</div><div class="line">    echo &quot;Proicessin sample $&#123;sample&#125;&quot;</div><div class="line">salmon quant -i $index -l A -1 /public/study/mRNAseq/tair/sample_fastq/$&#123;sample&#125;_1.fastq.gz -2 /public/study/mRNAseq/tair/sample_fastq/$&#123;sample&#125;_2.fastq.gz  -p 5 -o quants/$&#123;sample&#125;_quant</div><div class="line">done</div></pre></td></tr></table></figure>
<p>注：上述命名-l A 后面没有“”符号。</p>
<p>运行上述命令，如下所示： <img src="http://ortxpw68f.bkt.clouddn.com/professional/180401/4AaHhB7D73.png?imageslim" alt="mark"> 整个过程大概有7分钟，计算结束后，会在quants目录（<code>/trainee/home/jlzhang/quants/ERR1698194_quant</code>）下生成各个样本的目录，以及相应的数据，如下所示： <img src="http://ortxpw68f.bkt.clouddn.com/professional/180401/j215KeB9bD.png?imageslim" alt="mark"> 其中<code>quant.sf</code>文件是基因的定量数据，打开，如下所示： <img src="http://ortxpw68f.bkt.clouddn.com/professional/180401/7gb25H9cfe.png?imageslim" alt="mark"></p>
<p>为方便查看，用表格表示，如下所示：</p>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Length</th>
<th>EffectiveLength</th>
<th>TPM</th>
<th>NumReads</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ATMG00010.1</td>
<td>462</td>
<td>299.317</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>ATMG00030.1</td>
<td>324</td>
<td>165.898</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>ATMG00040.1</td>
<td>948</td>
<td>784.352</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>ATMG00050.1</td>
<td>396</td>
<td>234.567</td>
<td>10.33454</td>
<td>13</td>
</tr>
<tr class="odd">
<td>ATMG00060.1</td>
<td>542</td>
<td>378.761</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>ATMG00070.1</td>
<td>573</td>
<td>409.668</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>ATMG00080.1</td>
<td>540</td>
<td>376.77</td>
<td>68.35285</td>
<td>138.1076</td>
</tr>
<tr class="even">
<td>ATMG00090.1</td>
<td>1671</td>
<td>1507.288</td>
<td>0.785473</td>
<td>6.349101</td>
</tr>
<tr class="odd">
<td>ATMG00100.1</td>
<td>73</td>
<td>15.492</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>这于<code>quant.sf</code>文件的说明，在salmon的官网上已经有详细介绍，如下所示：</p>
<ul>
<li>Name — This is the name of the target transcript provided in the input transcript database (FASTA file).</li>
<li>Length — This is the length of the target transcript in nucleotides.</li>
<li>EffectiveLength — This is the computed effective length of the target transcript. It takes into account all factors being modeled that will effect the probability of sampling fragments from this transcript, including the fragment length distribution and sequence-specific and gc-fragment bias (if they are being modeled).</li>
<li>TPM — This is salmon’s estimate of the relative abundance of this transcript in units of Transcripts Per Million (TPM). TPM is the recommended relative abundance measure to use for downstream analysis.</li>
<li>NumReads — This is salmon’s estimate of the number of reads mapping to each transcript that was quantified. It is an “estimate” insofar as it is the expected number of reads that have originated from each transcript given the structure of the uniquely mapping and multi-mapping reads and the relative abundance estimates for each transcript.S</li>
</ul>
<p>翻译成中文就是：</p>
<ul>
<li>Name：这个目标转录组的名称（源于转录组数据库的fasta文件）；</li>
<li>Length：目标转录组的碱基长度；</li>
<li>EffectiveLenght：这是目标转录组的有效长度。它考虑了所有会影响该转录本采样片段概率的因素，其中包括长度分页，序列特异性和GC片段偏好。</li>
<li>TPM：这是salmon对转录本相对丰度的估计，其单位是百分率（TPM，Transcripts Per Million）。TPM可以用于下游的定量分析。</li>
<li>NumReads：salmon对回贴（mapping）到每个转录本的reads数的估计。</li>
</ul>
<p>到这里，用salmon进行定量的过程已经结束，此处并没有进行不同的样本间的差异基因分析。接着看第2种方法进行定量，即用subread进行定量。</p>
<h4 id="第2种方法subread方法">第2种方法：subread方法</h4>
<p>subread是一个reads比对工具。官网是：<a href="http://subread.sourceforge.net/" class="uri" target="_blank" rel="external">http://subread.sourceforge.net/</a></p>
<h5 id="第1步建立索引">第1步：建立索引</h5>
<p>subread构建索引时需要解压fa文件，因此先将服务器中的参考基因组复制到自己的目录下，然后建立索引，如下所示： <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mkdir index_file</div><div class="line">cp /public/study/mRNAseq/tair/Arabidopsis_thaliana.TAIR10.28.dna.genome.fa.gz  ~/index_file/</div><div class="line">cd index_file</div><div class="line">gunzip Arabidopsis_thaliana.TAIR10.28.dna.genome.fa.gz</div><div class="line">/public/biosoft/subread/subread-1.5.3-Linux-x86_64/bin/subread-buildindex  -o athal_index Arabidopsis_thaliana.TAIR10.28.dna.genome.fa</div></pre></td></tr></table></figure></p>
<p>建立后的文件如下所示： <img src="http://ortxpw68f.bkt.clouddn.com/professional/180401/DC3BJcA0II.png?imageslim" alt="mark"></p>
<h5 id="第2步比对">第2步：比对</h5>
<p>建立一个脚本<code>subjunc.sh</code>，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">#! /bin/bash</div><div class="line">subjunc=&quot;/public/biosoft/subread/subread-1.5.3-Linux-x86_64/bin/subjunc&quot;; </div><div class="line">index=&apos;/trainee/home/jlzhang/index_file&apos;;</div><div class="line">for fn in ERR1698&#123;194..209&#125;;</div><div class="line">do</div><div class="line">    sample=`basename $&#123;fn&#125;`</div><div class="line">    echo &quot;Processin sample $&#123;sampe&#125;&quot; </div><div class="line">    $subjunc -i $index -r  /public/study/mRNAseq/tair/sample_fastq/$&#123;sample&#125;_1.fastq.gz -R /public/study/mRNAseq/tair/sample_fastq/$&#123;sample&#125;_2.fastq.gz -T 5 -o /trainee/home/jlzhang/quant2/$&#123;sample&#125;_subjunc.bam</div><div class="line">done</div></pre></td></tr></table></figure>
<p>运行，即<code>bash subjunc.sh</code>，这个过程大概需要一段时间，运行结果如下所示：</p>
<h5 id="第3步定量与表达矩阵">第3步：定量与表达矩阵</h5>
<p>用featureCount进行定量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/public/biosoft/subread/subread-1.5.3-Linux-x86_64/bin/featureCounts -T 5 -p -t exon -g gene_name -a /trainee/home/jlzhang/download/Arabidopsis_thaliana.TAIR10.28.gtf -o  counts.txt   *.bam</div></pre></td></tr></table></figure>
<p>注：服务器中的Arabidopsis_thaliana.TAIR10.28.gtf.gz是压缩文件，需要解压后才能使用。</p>
<p>featureCounts的参数：</p>
<ul>
<li>T 多线程，5表示5个线程</li>
<li>p 双端测序</li>
<li>t 默认将Exon作为一个feature</li>
<li>g 从注释文件中提取Meta-features信息用于read coutn，默认是gene_id</li>
<li>a 输入GTF/GFF基因组注释文件</li>
<li>o 输出文件</li>
</ul>
<p>比对后的结果如下所示： <img src="http://ortxpw68f.bkt.clouddn.com/professional/180402/I8cg2DHA9c.png?imageslim" alt="mark"></p>
<h5 id="第4步分组矩阵">第4步：分组矩阵</h5>
<p>构建分组矩阵：</p>
<p><code>/trainee/home/huanggy/RNAseq/data/fastq/E-MTAB-5130.sdrf.txt</code>这个文件如下所示： <img src="http://ortxpw68f.bkt.clouddn.com/professional/180403/3Ab775ecI6.png?imageslim" alt="mark"> 其中第1列和第32列都是样本名称，第32列是测序的样本名称，这个有用，第36列则是分组的信息，因此提取分组信息，代码如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tail -n +2 /trainee/home/huanggy/RNAseq/data/fastq/E-MTAB-5130.sdrf.txt | cut -f 32,36 |sort -u</div></pre></td></tr></table></figure>
<p><code>sort -u</code>则是表示排序，并去重（这个是双端测序，因此在提取分组信息方面，需要去重），运行完上述代码后，如下所示： <img src="http://ortxpw68f.bkt.clouddn.com/professional/180403/gI545KkDa7.png?imageslim" alt="mark"></p>
<p>tail -n +2表示是从文件的第2行开始显示文件的内容</p>
<h3 id="第4步其他比对方法">第4步：其他比对方法</h3>
<h1 id="第5步表达矩阵的normalization方法">第5步：表达矩阵的normalization方法</h1>
<blockquote>
<p>总reads数矫正(TC)：基因计数除以与其land相关的回贴的reads数（mapped reads或文库大小），再乘以数据集所有样本的平均总计数。</p>
</blockquote>
<blockquote>
<p>上四分位数(UQ)：与TC在原理上非常相似，在计算归一化因子时，总reads数被不同于0的计数的上四分位数所取代。</p>
</blockquote>
<blockquote>
<p>中位数(MED)：类似于TC，在计算标准化因子时，总reads数由与0不同的中位数计数代替。也就是说，中位数被计算为所有运行的基因计数的中值。</p>
</blockquote>
<blockquote>
<p>DESeq：这种标准化方法包含在DESeq Bioconducter包中，并基于大多数基因不是DE的假设。该方法基于一个负二项分布模型，通过局部回归将方差和均值联系起来，并给出了一个给出标度因子的实现方法。在DESeq包中，使用EstimatateSizeFactorsForMatrixfunction，可以为每次运行计算标度因子。将基因计数除以每个比例因子后，计算DESeq值作为所有运行的重标度基因计数的总和。</p>
</blockquote>
<blockquote>
<p>加权截断均值：TMM（edgeR）：与Deseq类似，在去除高表达基因和差异最大的基因后，TMM也是要找到一个加权系数，使剩余的基因在被矫正后差异倍数可能小。TMM的加权系数是基于两两样本比较后推算获得的（也就是两组样本的比较，将产生与这次比较相关的加权系数）。然后将所有基因除以这个加权系数，从而保证大部分表达量居中的基因表达量最相似。</p>
</blockquote>
<blockquote>
<p>分位数（Q）：首先在微阵列数据的背景下提出，这种标准化方法包括匹配泳道间基因计数的分布。</p>
</blockquote>
<blockquote>
<p>每千碱基每百万映射读取(RPKM)：这种方法最初是为了促进样本中基因之间的比较，并结合样本之间和样本内的标准化。该方法通过归一化总转录物长度和测序读数的数量来量化来自RNA-Seq数据的基因表达。</p>
</blockquote>
<h3 id="第6步差异分析">第6步：差异分析</h3>
<p>在这一步中，作者原博客中直接给出了差异分析的脚本，直接下载即可，脚本文件一共有3个，分别为<code>run_DEG.R</code>,<code>exprSet.txt</code>,<code>group_info.txt</code>，其中<code>run_DEG.R</code>是最主要的脚本文件，它是用R语言写成的,<code>exprSet.txt</code>是所有样本的表达矩阵，这是原始的数据，并没有经过Normalization，<code>group_info.txt</code>是分组信息，直接输入下面的命令即可：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Rscript ../run_DEG.R -e exprSet.txt -g group_info.txt -c <span class="string">'Day1-Day0'</span> -s counts  -m DESeq2</div></pre></td></tr></table></figure>
<p>如果是转录组的raw counts数据，就选择 -s counts（这个案例中就是这个选项），如果是芯片等normalization好的表达矩阵数据，用默认参数即可，对于转录组的raw counts数据，有DEseq2包和edgeR包可供选择。对于芯片等normalization好的表达矩阵数据，有limma和t.test供选择，下面是举例说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Rscript run_DEG.R -e airway.expression.txt -g airway.group.txt -c &apos;trt-untrt&apos; -s counts -m DESeq2</div><div class="line"># Rscript run_DEG.R -e airway.expression.txt -g airway.group.txt -c &apos;trt-untrt&apos; -s counts -m edgeR</div><div class="line"># Rscript run_DEG.R -e sCLLex.expression.txt -g sCLLex.group.txt -c &apos;progres.-stable&apos;</div><div class="line"># Rscript run_DEG.R -e sCLLex.expression.txt -g sCLLex.group.txt -c &apos;progres.-stable&apos; -m t.test</div></pre></td></tr></table></figure>
<h3 id="第7步富集分析">第7步：富集分析</h3>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><a href="https://github.com/twbattaglia/RNAseq-workflow" target="_blank" rel="external">Differential Gene Expression using RNA-Seq (Workflow)</a></li>
<li><a href="http://www.bio-info-trainee.com/2809.html" target="_blank" rel="external">一个植物转录组项目的实战</a></li>
<li><a href="http://biocluster.ucr.edu/~rkaundal/workshops/R_mar2016/RNAseq.html" target="_blank" rel="external">NGS sequence analysis with R / Bioconductor: RNA-Seq workflow</a></li>
<li><a href="https://www.jianshu.com/p/7564eca62354" target="_blank" rel="external">基因表达分析（前传）-准备count矩阵</a></li>
<li>http://www.360doc.com/content/17/0921/09/2856980_688849117.shtml</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/01/Python/Python学习笔记（1）-基础笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/01/Python/Python学习笔记（1）-基础笔记/" itemprop="url">Python学习笔记（1）——基础笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-01T12:00:00+08:00">
                2018-04-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,336
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  6
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一前言">（一）前言</h2>
<p>很早以前就学过Python，当时是在为知笔记里做的笔记，不过当时笔记记得是七零八落，很多参考资料当也没有记全。为了形成学习Python的系统思维，也为了方便自己检索，现在把以前学习的Python笔记汇总一下。汇总的过程以<a href="http://www.runoob.com/python3/python3-basic-syntax.html" target="_blank" rel="external">菜鸟教程</a>的思路为标准，把自己以前的笔记按照菜鸟教程的顺序给理一下，并在虚拟机（ubuntu系统）或Windows下的Python交互模式里把代码跑一遍，列出代码与结果。</p>
<h2 id="二基本语法">（二）基本语法</h2>
<p>先看一段代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat hello.py</div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="comment"># This is a comment</span></div><div class="line">print(<span class="string">"Hello, python3!"</span>)</div><div class="line"></div><div class="line"><span class="comment"># This is another comment</span></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 hello.py </div><div class="line">Hello, python3!</div></pre></td></tr></table></figure>
<p>从上面的这段代码可以知道这些信息：</p>
<ol style="list-style-type: decimal">
<li>在Python中，注释是以<code>#</code>进行标识的；</li>
<li>Python程序文件以<code>.py</code>为后缀。</li>
<li>开头的代码指明了Python3解释的位置，即<code>#!/usr/bin/pyhton3</code>（其实我发现，不加这一行也能运行）。</li>
</ol>
<p>除了<code>#</code>可以作为注释外，还可以使用多个<code>#</code>和<code>'''</code>和<code>&quot;&quot;&quot;</code>作为注释，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h2 id="三行与缩进">（三）行与缩进</h2>
<p>Python语法的一大特点应时使用缩进来表示代码块，不需要使用大括号，在下面的例子中，第二行与第四行，必须要缩进4个字符，才能正常运行，否则就会出错，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">True</span>:</div><div class="line">    <span class="keyword">print</span> (<span class="string">"True"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> (<span class="string">"False"</span>)</div></pre></td></tr></table></figure>
<h2 id="四多行语句与引号">（四）多行语句与引号</h2>
<p>如果语句比较长，可以使用反斜杠（<code>\</code>）来实现多行语句，格式如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">total = item_one + \</div><div class="line">        item_two + \</div><div class="line">        item_three</div></pre></td></tr></table></figure>
<p>但是在<code>[]</code>，<code>{}</code>或<code>()</code>中，不需要使用反斜杠，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">total = [<span class="string">'item_one'</span>, <span class="string">'item_two'</span>,<span class="string">'item_three'</span>,</div><div class="line">        <span class="string">'item_four'</span>,<span class="string">'item_five'</span>]</div></pre></td></tr></table></figure>
<p>使用3个双引号，可以直接换行，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3 = <span class="string">"""hello,</span></div><div class="line"><span class="string"><span class="meta">... </span>world,</span></div><div class="line"><span class="string"><span class="meta">... </span>this is a multiline statements"""</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">hello,</div><div class="line">world,</div><div class="line">this <span class="keyword">is</span> a multiline statements</div></pre></td></tr></table></figure>
<p>其实这段代码就相当下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3 = <span class="string">"hello,\nworld,\nthis is a multiline statements."</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">hello,</div><div class="line">world,</div><div class="line">this <span class="keyword">is</span> a multiline statements</div></pre></td></tr></table></figure>
<p>三引号，双引号和单引号的区别</p>
<p>看下面的案例就明白了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s4 = <span class="string">'Let\'s go'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s4)</div><div class="line">Let<span class="string">'s go</span></div><div class="line"><span class="string">&gt;&gt;&gt; s5 = "Let'</span>s go<span class="string">"</span></div><div class="line"><span class="string">&gt;&gt;&gt; print(s5)</span></div><div class="line"><span class="string">Let's go</span></div></pre></td></tr></table></figure>
<p>只使用单引号的话，如果字符串里还有单引号，那么需要进行转义，或者说是如果双引号里面还有双引号，也需要转义。</p>
<h3 id="转义字符">转义字符</h3>
<p>先看一个案例，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(str1)</div><div class="line">C:</div><div class="line">ow</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = <span class="string">'c:\\now'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(str2)</div><div class="line">c:\now</div></pre></td></tr></table></figure>
<p>从这个案例中可以知道，在用Python处理目录时，需要对斜杠进行转义，如果目录的字符串比较长，例如<code>C:\Program Files\Intel\WiFi\Help</code>，那就可以在这个字符串前面加上一个<code>r</code>，如果最后要以斜杠结尾，那么只需要在最后使用转义符号即可，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>str3 =<span class="string">r'C:\Program Files\Intel\WiFi\Help'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(str3)</div><div class="line">C:\Program Files\Intel\WiFi\Help</div><div class="line">    &gt;&gt;&gt; str4 =<span class="string">r'C:\Program Files\Intel\WiFi\Help'</span><span class="string">'\\'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(str4)</div><div class="line">C:\Program Files\Intel\WiFi\Help\</div></pre></td></tr></table></figure>
<h2 id="五关键字">（五）关键字</h2>
<p>Python的关键字指的Python编译器自己使用的，用户不可以使用，可以通过下面的代码进行查看，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> keyword</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>keyword.kwlist</div><div class="line">[<span class="string">'False'</span>, <span class="string">'None'</span>, <span class="string">'True'</span>, <span class="string">'and'</span>, <span class="string">'as'</span>, <span class="string">'assert'</span>, <span class="string">'break'</span>, <span class="string">'class'</span>, <span class="string">'continue'</span>, <span class="string">'def'</span>, <span class="string">'del'</span>, <span class="string">'elif'</span>, <span class="string">'else'</span>, <span class="string">'except'</span>, <span class="string">'finally'</span>, <span class="string">'for'</span>, <span class="string">'from'</span>, <span class="string">'global'</span>, <span class="string">'if'</span>, <span class="string">'import'</span>, <span class="string">'in'</span>, <span class="string">'is'</span>, <span class="string">'lambda'</span>, <span class="string">'nonlocal'</span>, <span class="string">'not'</span>, <span class="string">'or'</span>, <span class="string">'pass'</span>, <span class="string">'raise'</span>, <span class="string">'return'</span>, <span class="string">'try'</span>, <span class="string">'while'</span>, <span class="string">'with'</span>, <span class="string">'yield'</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="六帮助文档查阅">（六）帮助文档查阅</h2>
<h3 id="help函数">（6.1）help函数</h3>
<p>使用help函数可以查看某个函数的帮助，也可以查看所用模块的名称，如下所示：</p>
<p>查看<code>print</code>这个函数的帮助：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>help(<span class="keyword">print</span>)</div><div class="line">Help on built-<span class="keyword">in</span> function <span class="keyword">print</span> <span class="keyword">in</span> module builtins:</div><div class="line"></div><div class="line">print(...)</div><div class="line">    print(value, ..., sep=<span class="string">' '</span>, end=<span class="string">'\n'</span>, file=sys.stdout, flush=<span class="keyword">False</span>)</div><div class="line"></div><div class="line">    Prints the values to a stream, <span class="keyword">or</span> to sys.stdout by default.</div><div class="line">    Optional keyword arguments:</div><div class="line">    file:  a file-like object (stream); defaults to the current sys.stdout.</div><div class="line">    sep:   string inserted between values, default a space.</div><div class="line">    end:   string appended after the last value, default a newline.</div><div class="line">    flush: whether to forcibly flush the stream.</div></pre></td></tr></table></figure>
<p>查看<code>math</code>这个包以及这个包中<code>ssqrt</code>这个函数的帮助，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>help(math)</div><div class="line">Help on built-<span class="keyword">in</span> module math:</div><div class="line"></div><div class="line">NAME</div><div class="line">    math</div><div class="line"></div><div class="line">DESCRIPTION</div><div class="line">    This module <span class="keyword">is</span> always available.  It provides access to the</div><div class="line">    mathematical functions defined by the C standard.</div><div class="line"></div><div class="line">FUNCTIONS</div><div class="line">    acos(...)</div><div class="line">        acos(x)</div><div class="line"></div><div class="line">        Return the arc cosine (measured <span class="keyword">in</span> radians) of x.</div><div class="line"></div><div class="line">-- More  --</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>help(math.sqrt)</div><div class="line">Help on built-<span class="keyword">in</span> function sqrt <span class="keyword">in</span> module math:</div><div class="line"></div><div class="line">sqrt(...)</div><div class="line">    sqrt(x)</div><div class="line"></div><div class="line">    Return the square root of x.</div></pre></td></tr></table></figure>
<h2 id="七包的操作">（七）包的操作</h2>
<p>使用<code>import</code>可以加载某个包，例如<code>import math</code>就加载了<code>math</code>这个包，使用<code>dir()</code>这个函数可以查看这个包的成员，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dir(math)</div><div class="line">[<span class="string">'__doc__'</span>, <span class="string">'__loader__'</span>, <span class="string">'__name__'</span>, <span class="string">'__package__'</span>, <span class="string">'__spec__'</span>, <span class="string">'acos'</span>, <span class="string">'acosh'</span>, <span class="string">'asin'</span>, <span class="string">'asinh'</span>, <span class="string">'atan'</span>, <span class="string">'atan2'</span>, <span class="string">'atanh'</span>, <span class="string">'ceil'</span>, <span class="string">'copysign'</span>, <span class="string">'cos'</span>, <span class="string">'cosh'</span>, <span class="string">'degrees'</span>, <span class="string">'e'</span>, <span class="string">'erf'</span>, <span class="string">'erfc'</span>, <span class="string">'exp'</span>, <span class="string">'expm1'</span>, <span class="string">'fabs'</span>, <span class="string">'factorial'</span>, <span class="string">'floor'</span>, <span class="string">'fmod'</span>, <span class="string">'frexp'</span>, <span class="string">'fsum'</span>, <span class="string">'gamma'</span>, <span class="string">'gcd'</span>, <span class="string">'hypot'</span>, <span class="string">'inf'</span>, <span class="string">'isclose'</span>, <span class="string">'isfinite'</span>, <span class="string">'isinf'</span>, <span class="string">'isnan'</span>, <span class="string">'ldexp'</span>, <span class="string">'lgamma'</span>, <span class="string">'log'</span>, <span class="string">'log10'</span>, <span class="string">'log1p'</span>, <span class="string">'log2'</span>, <span class="string">'modf'</span>, <span class="string">'nan'</span>, <span class="string">'pi'</span>, <span class="string">'pow'</span>, <span class="string">'radians'</span>, <span class="string">'sin'</span>, <span class="string">'sinh'</span>, <span class="string">'sqrt'</span>, <span class="string">'tan'</span>, <span class="string">'tanh'</span>, <span class="string">'tau'</span>, <span class="string">'trunc'</span>]</div></pre></td></tr></table></figure>
<h2 id="八内置函数与模块">（八）内置函数与模块</h2>
<h3 id="内置函数">内置函数</h3>
<p>内置函数不需要导入任何模块即可直接使用，执行下面的命令可以列出所有内置函数和内置对象，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dir(__builtins__)</div><div class="line">[<span class="string">'ArithmeticError'</span>, <span class="string">'AssertionError'</span>, <span class="string">'AttributeError'</span>, <span class="string">'BaseException'</span>, <span class="string">'BlockingIOError'</span>, <span class="string">'BrokenPipeError'</span>, <span class="string">'BufferError'</span>, <span class="string">'BytesWarning'</span>, <span class="string">'ChildProcessError'</span>, <span class="string">'ConnectionAbortedError'</span>, <span class="string">'ConnectionError'</span>, <span class="string">'ConnectionRefusedError'</span>, <span class="string">'ConnectionResetError'</span>, <span class="string">'DeprecationWarning'</span>, <span class="string">'EOFError'</span>, <span class="string">'Ellipsis'</span>, <span class="string">'EnvironmentError'</span>, <span class="string">'Exception'</span>, <span class="string">'False'</span>, <span class="string">'FileExistsError'</span>, <span class="string">'FileNotFoundError'</span>, <span class="string">'FloatingPointError'</span>,</div><div class="line"> ... ...</div></pre></td></tr></table></figure>
<h3 id="内置模块">内置模块</h3>
<p>内置模块的查看方法如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(sys.builtin_module_names)</div><div class="line">(<span class="string">'_ast'</span>, <span class="string">'_bisect'</span>, <span class="string">'_blake2'</span>, <span class="string">'_codecs'</span>, <span class="string">'_codecs_cn'</span>, <span class="string">'_codecs_hk'</span>, <span class="string">'_codecs_iso2022'</span>, <span class="string">'_codecs_jp'</span>, <span class="string">'_codecs_kr'</span>, <span class="string">'_codecs_tw'</span>, <span class="string">'_collections'</span>, <span class="string">'_csv'</span>, <span class="string">'_datetime'</span>, <span class="string">'_findvs'</span>, <span class="string">'_functools'</span>, <span class="string">'_heapq'</span>, <span class="string">'_imp'</span>, <span class="string">'_io'</span>, <span class="string">'_json'</span>, <span class="string">'_locale'</span>, <span class="string">'_lsprof'</span>, <span class="string">'_md5'</span>, <span class="string">'_multibytecodec'</span>, <span class="string">'_opcode'</span>, <span class="string">'_operator'</span>, <span class="string">'_pickle'</span>, <span class="string">'_random'</span>, <span class="string">'_sha1'</span>, <span class="string">'_sha256'</span>, <span class="string">'_sha3'</span>, <span class="string">'_sha512'</span>, <span class="string">'_signal'</span>, <span class="string">'_sre'</span>, <span class="string">'_stat'</span>, <span class="string">'_string'</span>, <span class="string">'_struct'</span>, <span class="string">'_symtable'</span>, <span class="string">'_thread'</span>, <span class="string">'_tracemalloc'</span>, <span class="string">'_warnings'</span>, <span class="string">'_weakref'</span>, <span class="string">'_winapi'</span>, <span class="string">'array'</span>, <span class="string">'atexit'</span>, <span class="string">'audioop'</span>, <span class="string">'binascii'</span>, <span class="string">'builtins'</span>, <span class="string">'cmath'</span>, <span class="string">'errno'</span>, <span class="string">'faulthandler'</span>, <span class="string">'gc'</span>, <span class="string">'itertools'</span>, <span class="string">'marshal'</span>, <span class="string">'math'</span>, <span class="string">'mmap'</span>, <span class="string">'msvcrt'</span>, <span class="string">'nt'</span>, <span class="string">'parser'</span>, <span class="string">'sys'</span>, <span class="string">'time'</span>, <span class="string">'winreg'</span>, <span class="string">'xxsubtype'</span>, <span class="string">'zipimport'</span>, <span class="string">'zlib'</span>)</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="参考资料">参考资料</h2>
<p><a href="http://www.runoob.com/python3/python3-basic-syntax.html" target="_blank" rel="external">1. Python3教程|菜鸟教程</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">RVDSD</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">112</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">91</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RVDSD</span>

  
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共415.1k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  










  
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine@1.1.4/dist/Valine.min.js"></script>
  <script type="text/javascript">
    new Valine({
        av: AV,
        el: '#vcomments' ,
        verify: true,
        notify: true,
        app_id: '4ORLDMxXCFDLSHPJ4wSSDkkw-gzGzoHsz',
        app_key: 'HSWpCY7XlN0pGV5DCrKoC0ic',
        placeholder: 'Comment input placeholder'
    });
  </script>



  





  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
