<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="RVDSD的个人笔记本">
<meta property="og:url" content="http://rvdsd.top/page/7/index.html">
<meta property="og:site_name" content="RVDSD的个人笔记本">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RVDSD的个人笔记本">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://rvdsd.top/page/7/"/>





  <title>RVDSD的个人笔记本</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RVDSD的个人笔记本</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学习过程中的输出</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/11/Python/Python学习笔记（9）-迭代器与生成器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/11/Python/Python学习笔记（9）-迭代器与生成器/" itemprop="url">Python学习笔记（9）-迭代器与生成器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-11T12:00:00+08:00">
                2018-04-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,411
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  17
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言">前言</h2>
<p>在学Python时，我对于生成器和迭代器理解得不清楚，检索到了一篇文章，把这两个东西讲得很透，应该是我能找到的最好的理解迭代器与生成器的文章，原文是《<a href="https://foofish.net/iterators-vs-generators.html" target="_blank" rel="external">完全理解Python迭代对象、迭代器、生成器》</a>，原文章作者提到，他是参考了别人的另外一篇文章写的，另外的文章题目是<a href="http://nvie.com/posts/iterators-vs-generators/" target="_blank" rel="external">《Iterables vs. Iterators vs. Generators》</a>。</p>
<h2 id="数据结构背景">数据结构背景</h2>
<p>在了解迭代器与生成器之前，需要了解一下Python的一些数据结构方面的知识，下图说明了容器(container)、可迭代对象(iterable)、迭代器(iterator)、生成器(generator)、列表/集合/字典推导式(list,set,dict comprehension)这些概念的关系图：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180522/1DjIAj9aGG.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>为方便理解，简单地译成中文如下：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180522/Cbb7H0Ggf2.png?imageslim" alt="mark"></p>
<h3 id="容器container">容器(container)</h3>
<p>容器是一种把多个元素组织在一起的数据结构，容器中的元素可以逐个地迭代获取，可以用in, not in关键字判断元素是否包含在容器中。通常这类数据结构把所有的元素存储在内存中（也有一些特例，并不是所有的元素都放在内存，比如迭代器和生成器对象）在Python中，常见的容器对象有：</p>
<ol style="list-style-type: decimal">
<li>list, deque（双端队列）, ….</li>
<li>set, frozensets, ….</li>
<li>dict, defaultdict, OrderedDict, Counter, ….</li>
<li>tuple, namedtuple, …</li>
<li>str</li>
</ol>
<p>容器比较容易理解，因为你就可以把它看作是一个盒子、一栋房子、一个柜子，里面可以塞任何东西。从技术角度来说，当它可以用来询问某个元素是否包含在其中时，那么这个对象就可以认为是一个容器，比如 list，set，tuples都是容器对象，看下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h4 id="assert函数">assert()函数</h4>
<p>关于<code>assert</code>这个函数，这个函数是Python断言句，它的功能就是判断某个表达式是否为真，运行后，如果什么都不返回，它就是True，如果语句是假，就返回异常，看一个案例，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="number">1</span> <span class="keyword">in</span> [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>] <span class="comment"># 1不在[11,22,33]里面，这个表达式就是False，返回异常</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">AssertionError</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="number">2</span> &lt; <span class="number">1</span> <span class="comment"># 2小于1，是False，返回异常</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">AssertionError</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="number">1</span> <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment"># 1在[1,2,3]里，是True，不返回任何信息</span></div></pre></td></tr></table></figure>
<p>再继续看容器的相关知识。可以寻问某元素是否在dict中用dict中的key：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="number">1</span>:<span class="string">'foo'</span>,<span class="number">2</span>:<span class="string">'bar'</span>,<span class="number">3</span>:<span class="string">'qux'</span>&#125; <span class="comment"># dict</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(d)</div><div class="line">&#123;<span class="number">1</span>: <span class="string">'foo'</span>, <span class="number">2</span>: <span class="string">'bar'</span>, <span class="number">3</span>: <span class="string">'qux'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="number">1</span> <span class="keyword">in</span> d</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> <span class="keyword">in</span> d</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="string">'foo'</span> <span class="keyword">not</span> <span class="keyword">in</span> d <span class="comment"># 'foo'不是d的元素，它只是一个值，不是key</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>询问某substring是否在string中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">'test'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="string">'a'</span> <span class="keyword">in</span> s</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">AssertionError</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="string">'a'</span> <span class="keyword">not</span> <span class="keyword">in</span> s</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> <span class="string">'te'</span> <span class="keyword">in</span> s</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>尽管绝大多数容器都提供了某种方式来获取其中的每一个元素，但这并不是容器本身提供的能力，而是<strong>可迭代对象</strong>赋予了容器这种能力，当然并不是所有的容器都是可迭代的，比如：Bloom filter（布隆过滤器），虽然Bloom filter可以用来检测某个元素是否包含在容器中，但是并不能从容器中获取其中的每一个值，因为Bloom filter压根就没把元素存储在容器中，而是通过一个散列函数映射成一个值保存在数组中。</p>
<blockquote>
<p>Bloom Filter是一种空间效率很高的随机数据结构，它利用位数组很简洁地表示一个集合，并能判断一个元素是否属于这个集合。Bloom Filter的这种高效是有一定代价的：在判断一个元素是否属于某个集合时，有可能会把不属于这个集合的元素误认为属于这个集合（false positive）。因此，Bloom Filter不适合那些“零错误”的应用场合。而在能容忍低错误率的应用场合下，Bloom Filter通过极少的错误换取了存储空间的极大节省。</p>
</blockquote>
<h3 id="可迭代对象iterable">可迭代对象（iterable）</h3>
<p>很多容器都是可迭代对象，此外还有更多的对象同样也是可迭代对象，比如处于打开状态的files，sockets等等。但凡是可以返回一个迭代器的对象都可称之为可迭代对象，看下面的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = iter(x) <span class="comment">#创建迭代对象</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(y)</div><div class="line">&lt;list_iterator object at <span class="number">0x000001F8308B7470</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>z = iter(x)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(y)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(y)</div><div class="line"><span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(z)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(x)</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">list</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">type</span><span class="params">(y)</span></span></div><div class="line"><span class="class">&lt;<span class="title">class</span> '<span class="title">list_iterator</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>代码解释：在这段代码中，<code>x</code>是一个可迭代对象，可迭代对象和容器一样是一种总称，范围很大，在Python中，它并不是指某种具体的数据类型，例如list是可迭代对象，dict是可迭代对象，set也是可迭代对象。在这段代码中，<code>y</code>和<code>z</code>是两个独立的迭代器，迭代器内部持有一个状态，该状态用于记录当前迭代所在的位置，以方便下次迭代的时候获取正确的元素。迭代器有一种具体的迭代器类型，比如<code>list_iterator</code>，<code>set_iterator</code>，可迭代对象实现了<code>__iter__</code>方法，这种方法会返回一个迭代对象，现在运行以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="keyword">for</span> elem <span class="keyword">in</span> x:</div><div class="line">    ...</div></pre></td></tr></table></figure>
<p>这段代码的执行过程如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180522/9Fa14chiLj.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>反编译该段代码，你可以看到解释器显示地调用<code>GET_ITER</code>指令，相当于调用<code>iter(x)</code>，<code>FOR_ITER</code>指令就是调用<code>next()</code>方法，不断地获取迭代器中的下一个元素，但是你没法直接从指令中看出来，因为他被解释器优化过了，下面是反编译的过程：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> dis</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dis.dis(<span class="string">'for _ in x: pass'</span>)</div><div class="line">  <span class="number">1</span>           <span class="number">0</span> SETUP_LOOP              <span class="number">14</span> (to <span class="number">17</span>)</div><div class="line">              <span class="number">3</span> LOAD_NAME                <span class="number">0</span> (x)</div><div class="line">              <span class="number">6</span> GET_ITER</div><div class="line">        &gt;&gt;    <span class="number">7</span> FOR_ITER                 <span class="number">6</span> (to <span class="number">16</span>)</div><div class="line">             <span class="number">10</span> STORE_NAME               <span class="number">1</span> (_)</div><div class="line">             <span class="number">13</span> JUMP_ABSOLUTE            <span class="number">7</span></div><div class="line">        &gt;&gt;   <span class="number">16</span> POP_BLOCK</div><div class="line">        &gt;&gt;   <span class="number">17</span> LOAD_CONST               <span class="number">0</span> (<span class="keyword">None</span>)</div><div class="line">             <span class="number">20</span> RETURN_VALUE</div></pre></td></tr></table></figure>
<p>注：dis模块主要是用来分析字节码的一个内置模块，经常会用到的方法是dis.dis，它支持对Python代码进行反汇编，生成字节码指令。</p>
<h3 id="判断可迭代对象">判断可迭代对象</h3>
<p>判断一个对象是否是迭代器，可以使用<code>isinstance</code>函数来判断，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">34</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(a,Iterable)</div><div class="line"><span class="keyword">True</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="迭代器iterator">迭代器(iterator)</h2>
<h3 id="迭代器协议">迭代器协议</h3>
<p>迭代器协议是指：对象需要提供<code>next</code>方法，它要么回返迭代中的下一项，要么引起一个StopIteration异常，以终止迭代。协议是一种约定，可迭代对象实现迭代器协议，Python的内置工具，例如for循环，sum，min，max等函数都可以使用迭代器协议访问对象。</p>
<p>在Python中可以使用for循环来遍历数组，PYhton的list底层就是一个数组，因此也可以使用for循环来遍历list，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> [<span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>]:</div><div class="line"><span class="meta">... </span>    print(n)</div><div class="line">...</div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">3</span></div></pre></td></tr></table></figure>
<p>Python的for循环也可以用于遍历文件（文件位于<code>C:\Users\20161111</code>目录下，内容是1到4这四个数字）如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>os.getcwd()</div><div class="line"><span class="string">'C:\\Users\\20161111'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> open(<span class="string">'practice.py'</span>) <span class="keyword">as</span> text:</div><div class="line"><span class="meta">... </span>    <span class="keyword">for</span> line <span class="keyword">in</span> text:</div><div class="line"><span class="meta">... </span>        print(line)</div><div class="line">...</div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div></pre></td></tr></table></figure>
<p>在Python中，文件也能使用for循环，这是因为在Python中，文件对象实现了迭代器协议，for循环使用迭代器协议访问即对象时，并不需要对象是否是一个文件。</p>
<h3 id="迭代器定义">迭代器定义</h3>
<p>那么什么迭代器呢？它是一个带状态的对象，他能在你调用next()方法的时候返回容器中的下一个值，任何实现了<code>__iter__</code>和<code>__next__()</code>方法的对象都是迭代器，<code>__iter__</code>返回迭代器自身，<code>__next__</code>返回容器中的下一个值，如果容器中没有更多元素了，则抛出Stop Iteration异常。</p>
<p>所以，迭代器就是实现了工厂模式（什么是工厂模式？有空了补充笔记）的对象，它在你每次你询问要下一个值的时候给你返回。有很多关于迭代器的例子，比如itertools函数返回的都是迭代器对象。</p>
<h3 id="生成无限序列">生成无限序列</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> itertools <span class="keyword">import</span> count</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>counter = count(start=<span class="number">13</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(counter)</div><div class="line"><span class="number">13</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(counter)</div><div class="line"><span class="number">14</span></div></pre></td></tr></table></figure>
<p>代码解释：<code>itertools</code>这个模块用于构建迭代器，<code>count</code>这个函数用于生成连续的整数，<code>count(start=13)</code>表示生成从13开始的整数无限序列，即13,14,15….。</p>
<h3 id="从一个有限序列中生成无限序列">从一个有限序列中生成无限序列</h3>
<p>代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> itertools <span class="keyword">import</span> cycle</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>colors = cycle([<span class="string">'red'</span>,<span class="string">'white'</span>,<span class="string">'blue'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(colors)</div><div class="line"><span class="string">'red'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(colors)</div><div class="line"><span class="string">'white'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(colors)</div><div class="line"><span class="string">'blue'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(colors)</div><div class="line"><span class="string">'red'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(colors)</div><div class="line"><span class="string">'white'</span></div></pre></td></tr></table></figure>
<p>这段代码使用了<code>cycle</code>函数，它的功能在于生成一个循环的无限序列。</p>
<h3 id="从无限的序列中生成有限序列">从无限的序列中生成有限序列</h3>
<p>代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> itertools <span class="keyword">import</span> islice</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>counter = count(start=<span class="number">13</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>limited = islice(counter,<span class="number">2</span>,<span class="number">5</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x <span class="keyword">in</span> limited:</div><div class="line"><span class="meta">... </span>    print(x)</div><div class="line">...</div><div class="line"><span class="number">15</span></div><div class="line"><span class="number">16</span></div><div class="line"><span class="number">17</span></div></pre></td></tr></table></figure>
<p>代码解释，先用<code>count</code>生成了一个无限的整数序列，即13，14，15，16，17，18…..，接着使用<code>islice</code>从这个无限序列中提取第2到第4个元素（第2个元素是15，因为Python计数时，是从0开始的），15,16,17。</p>
<h3 id="自定义迭代器">自定义迭代器</h3>
<p>为了更直观地感受迭代器内部的执行过程，我们自定义一个迭代器，以斐波那契数列为例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> islice</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fib</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.prev = <span class="number">0</span></div><div class="line">        self.curr = <span class="number">1</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></div><div class="line">        value = self.curr</div><div class="line">        self.curr += self.prev</div><div class="line">        self.prev = value</div><div class="line">        <span class="keyword">return</span> value</div><div class="line"></div><div class="line">f = Fib()</div><div class="line">print(list(islice(f,<span class="number">0</span>,<span class="number">10</span>)))</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python practice.py</div><div class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>, <span class="number">34</span>, <span class="number">55</span>]</div></pre></td></tr></table></figure>
<p>Fib是一个可迭代对象，因为它有<code>__iter__</code>方法，又是一个迭代器，因为它实现了<code>__next__</code>方法，实例变量<code>prev</code>和<code>curr</code>用于维持迭代器的内部状态，每次调用<code>next()</code>方法时，做两件事情，第一：为下一次调用<code>next()</code>方法修改状态；第二：为当前这次调用生成返回结果。</p>
<p>迭代器就像一个懒加载的工厂，等到有人需要的时候才给它生成值返回，没调用的时候就处于休眠状态等待下一次调用。</p>
<h3 id="为什么要使用迭代器">为什么要使用迭代器？</h3>
<p>先看一段代码，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">list = [<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line">it = iter(list)</div><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> it:</div><div class="line">    print(x,end=<span class="string">" "</span>)</div><div class="line"></div><div class="line">print(<span class="string">"\n---------"</span>)</div><div class="line"><span class="keyword">for</span> y <span class="keyword">in</span> list:</div><div class="line">    print(y,end=<span class="string">" "</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python practice.py</div><div class="line"><span class="number">3</span> <span class="number">5</span> <span class="number">1</span> <span class="number">4</span> <span class="number">5</span></div><div class="line">---------</div><div class="line"><span class="number">3</span> <span class="number">5</span> <span class="number">1</span> <span class="number">4</span> <span class="number">5</span></div></pre></td></tr></table></figure>
<p>从运行结果来看，貌似迭代器与普通的for循环没什么区别。但Python中为什么设计出迭代器种对象？下面列出了一些迭代器的使用场景：</p>
<h4 id="场景1访问集合中的一个元素">场景1：访问集合中的一个元素。</h4>
<p>例如我要访问集合中的一个元素，怎么处理？</p>
<p>思路：集合是没有顺序的，因此也没有索引，要访问元素，有两种方法：第一，将集合转换为列表；第二，使用迭代器，先看第一种方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>set1 = &#123;<span class="number">5</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">11</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(set1)</div><div class="line">&#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">11</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = list(set1)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list1)</div><div class="line">[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">11</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1[<span class="number">2</span>]</div><div class="line"><span class="number">5</span></div></pre></td></tr></table></figure>
<p>再看第2种方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>set1=iter(set1)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(set1)</div><div class="line"><span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(set1)</div><div class="line"><span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(set1)</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(set1)</div><div class="line"><span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(set1)</div><div class="line"><span class="number">11</span></div></pre></td></tr></table></figure>
<h4 id="场景2">场景2:</h4>
<p>如果我有一个文件，例如6G的测序文件，要遍历里面的所有元素，此时如果使用列表，元组等序列明显不现实。此时就需要使用迭代器子，它的一大优点就是不需要事先准备好整个迭代过程中所有的元素 ，迭代器仅仅在迭代到某个元素时才计算该元素，而在这之前或之后，元素可以不存在或者被销毁。 这个特点使得它特别适合用于遍历一些巨大的或是无限的集合。因此，它的使用过程有点像内存，我们把正在运行的程序放进内存，运行完就退出内存，每次只放正在运行的程序进入，而不是一次把全部内容都扔进去。</p>
<h2 id="生成器generator">生成器（generator）</h2>
<p>在Python中，使用了<code>yield</code>的函数被称为生成器（generator），跟普通函数不同的是，生成器是一个返回迭代器的函数，只能用于迭代操作，更简单点理解生成器就是一个特殊的迭代器，调用一个生成器函数，返回的是一个迭代器对象。它不需要再像上面的类一样写<code>__iter__()</code>和<code>__next__()</code>方法了，只需要一个<code>yiled</code>关键字，每次遇到<code>yield</code>时函数会暂停并保存当前所有的运行信息，返回<code>yield</code>的值,并在下一次执行<code>next()</code>方法时从当前位置继续运行（这也是生成器的主要使用场景）。</p>
<p>从上述描述中可以知道，生成器可以支持延迟操作，延迟操作是指，只在需要的时候产生结果，而不是立即产生结果，这是生成器的主要好处。Python有两种不同的方式提供生成器：第一，生成器函数：常规函数定义，但是，使用yield语句而不是return语句返回结果。yield语句一次返回一个结果，在每个结果中间，挂起函数的状态，以便下次重它离开的地方继续执行。第二，生成器表达式：类似于列表推导，但是，生成器返回按需产生结果的一个对象，而不是一次构建一个结果列表</p>
<p>用生成器来实现斐波那契数列的例子是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> islice</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">()</span>:</span></div><div class="line">    prev, curr = <span class="number">0</span>, <span class="number">1</span></div><div class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">        <span class="keyword">yield</span> curr</div><div class="line">        prev, curr = curr, curr + prev</div><div class="line"></div><div class="line">f = fib()</div><div class="line">print(list(islice(f, <span class="number">0</span>, <span class="number">10</span>)))</div></pre></td></tr></table></figure>
<p>代码运行如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python practice.py</div><div class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>, <span class="number">34</span>, <span class="number">55</span>]</div></pre></td></tr></table></figure>
<p>fib就是一个普通的python函数，它特殊的地方在于函数体中没有<code>return</code>关键字，函数的返回值是一个生成器对象。当执行<code>f=fib()</code>返回的是一个生成器对象，此时函数体中的代码并不会执行，只有显示或隐示地调用<code>next</code>的时候才会真正执行里面的代码。</p>
<h3 id="生成器表达式">生成器表达式</h3>
<p>生成器表达式是列表推倒式的生成器版本，看起来像列表推导式，但是它返回的是一个生成器对象而不是列表对象。，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">something</span><span class="params">()</span>:</span></div><div class="line">    result = []</div><div class="line">    <span class="keyword">for</span> ... <span class="keyword">in</span> ...:</div><div class="line">        result.append(x)</div><div class="line">    <span class="keyword">return</span> result</div></pre></td></tr></table></figure>
<h3 id="生成器的优点">生成器的优点</h3>
<p>第一，代码量更少。</p>
<p>生成器在Python中是一个非常强大的编程结构，可以用更少地中间变量写流式代码，此外，相比其它容器对象它更能节省内存和CPU，当然它可以用更少的代码来实现相似的功能。但凡看到类似以下的代码，就能够用生成器替代：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">something</span><span class="params">()</span>:</span></div><div class="line">    result = []</div><div class="line">    <span class="keyword">for</span> ... <span class="keyword">in</span> ...:</div><div class="line">        result.append(x)</div><div class="line">    <span class="keyword">return</span> result</div></pre></td></tr></table></figure>
<p>将上述代码用生成器函数来替换：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">iter_something</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">for</span> ... <span class="keyword">in</span> ...:</div><div class="line">        <span class="keyword">yield</span> x</div></pre></td></tr></table></figure>
<p>再看一个案例：</p>
<p>使用生成器返回自然数的平方</p>
<p>常规写法如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;type practice.py</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_square</span><span class="params">(n)</span>:</span></div><div class="line">    res = []</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</div><div class="line">        res.append(i*i)</div><div class="line">    <span class="keyword">return</span> res</div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> get_square(<span class="number">5</span>):</div><div class="line">    print(item)</div><div class="line">    </div><div class="line">    </div><div class="line">C:\Users\<span class="number">20161111</span>&gt;python practice.py</div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">9</span></div><div class="line"><span class="number">16</span></div></pre></td></tr></table></figure>
<p>生成器函数写法如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;type practice.py</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_square</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</div><div class="line">        <span class="keyword">yield</span> i*i</div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> get_square(<span class="number">5</span>):</div><div class="line">    print(item)</div><div class="line">    </div><div class="line">C:\Users\<span class="number">20161111</span>&gt;python practice.py</div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">9</span></div><div class="line"><span class="number">16</span></div></pre></td></tr></table></figure>
<p>生成器表达式的写法如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>squares = (x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">5</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>squares</div><div class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x000001F167983DB0</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line"><span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line"><span class="number">9</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line"><span class="number">16</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(squares)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">StopIteration</div></pre></td></tr></table></figure>
<h3 id="生成器总结">生成器总结</h3>
<p>现在总结一下生成器函数的格式，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> 函数名:</span></div><div class="line">    statements</div><div class="line">        <span class="keyword">yield</span></div></pre></td></tr></table></figure>
<ol style="list-style-type: decimal">
<li>生成器函数和常规函数几乎是一样的。它们都是使用def语句进行定义，差别在于，生成器使用yield语句返回一个值，而常规函数使用return语句返回一个值。</li>
<li>自动实现迭代器协议：对于生成器，Python会自动实现迭代器协议，以便应用到迭代背景中（如for循环，sum函数）。由于生成器自动实现了迭代器协议，所以，我们可以调用它的next方法，并且，在没有值可以返回的时候，生成器自动产生StopIteration异常。</li>
<li>状态挂起：生成器使用yield语句返回一个值。yield语句挂起该生成器函数的状态，保留足够的信息，以便之后从它离开的地方继续执行。</li>
</ol>
<h2 id="结论">结论</h2>
<ol style="list-style-type: decimal">
<li>容器是一系列元素的集合，str、list、set、dict、file、sockets对象都可以看作是容器，容器都可以被迭代（用在for，while等语句中），因此他们被称为可迭代对象。</li>
<li>可迭代对象实现了<code>__iter__</code>方法，该方法返回一个迭代器对象。</li>
<li>迭代器持有一个内部状态的字段，用于记录下次迭代返回值，它实现了<code>__next__</code>和<code>__iter__</code>方法，迭代器不会一次性把所有元素加载到内存，而是需要的时候才生成返回结果。</li>
<li>生成器是一种特殊的迭代器，它的返回值不是通过return而是用yield。</li>
</ol>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><a href="https://zhuanlan.zhihu.com/p/24499698" target="_blank" rel="external">Python 迭代器和生成器</a></li>
<li><a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1526953288&amp;ver=890&amp;signature=o-XNyigidmZsfz1Gnqygf99H1c1gAYf1ZkBTEMtwoNrkkRfLGM4HPAjbxudh2SPkNqwb6GtXTh8QbcZS4x9Uovz8hcAIEng1iFbJfgSllVIm5mMzpuYLgWnGs2Rwquxe&amp;new=1" target="_blank" rel="external">完全理解Python迭代器对象、迭代器、生成器</a></li>
<li><a href="http://nvie.com/posts/iterators-vs-generators/" target="_blank" rel="external">Iterables vs. Iterators vs. Generators</a></li>
<li><a href="https://blog.csdn.net/jiaomeng/article/details/1495500" target="_blank" rel="external">Bloom Filter概念和原理</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/33662628" target="_blank" rel="external">Python进阶系列连载（4）——迭代器</a></li>
<li><a href="https://www.zhihu.com/question/20829330" target="_blank" rel="external">如何更好地理解Python迭代器与生成器.知乎.赖明星的回答</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/10/Python/Python学习笔记（8）-正则表达式学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/10/Python/Python学习笔记（8）-正则表达式学习笔记/" itemprop="url">Python学习笔记（8）-正则表达式学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-10T12:00:00+08:00">
                2018-04-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  7,034
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  29
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="什是正则表达式">1. 什是正则表达式？</h2>
<p>答：正则表达式又称规则表达式，英语是Regular Expression，在代码中常简写为regex、regexp或RE，这计算机科学的一个概念。正则表达式通常被用来检索、替换那些符合某个模式(规则)的文本。 许多程序设计语言都支持利用正则表达式进行字符串操作。正则表达式包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为“元字符”）。正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。它的使用类似于通配符（wildchars），例如在Linux的命令行中输入<code>ls *.py</code>就会列出所有以“.py”结尾的文件。</p>
<p>有时候我们要处理一些字符串，例如，我要提取一些位于<code>&lt;pre&gt;</code>和<code>&lt;/pre&gt;</code>之间的广西，或者是从一个文件中清除一些非ATCG的字符，都要用到正则表达式。</p>
<h2 id="正则表达式在生物学方面有什么用处">2. 正则表达式在生物学方面有什么用处?</h2>
<p>答:正则表达式的这种特征在生物学方面使用极为,广泛，利用正则表达式，可以很好地定位蛋白质的结构域，DNA的一些序列模式，例如CpG岛，重复序列，限制性内切酶位点，核酸识别位点。</p>
<h2 id="不同编程语言之间的正则表达式相同不">3. 不同编程语言之间的正则表达式相同不？</h2>
<p>答：许多编程语言都支持正则表达式，每种编程语言都有自己的正则表达式语法，不过大体上是相同的。Python的正则表达式与Perl接近，如果会使用Perl，那么Python的正则表达式学起来也非常容易。</p>
<h2 id="正则表达式是按照哪些规则来匹配文本的">4. 正则表达式是按照哪些规则来匹配文本的？</h2>
<p>答：在Python中，通常情况下，字母与单词匹配他们本身，例如“Python”就匹配“Python”，而不是“python”，还有一些特殊的字符用于特殊的匹配，以<code>. ^ $ *  + ? { [ ] \ | ( )</code>为例说明一下，如下表所示：</p>
<ol style="list-style-type: decimal">
<li><p><code>.</code>号：匹配除除换行符 之外的任何字符，例如“ATT.T”会匹配“ATTCT”，“ATTFT”，但不会匹配“ATTTCT”。</p></li>
<li><p><code>^</code>（克拉符号）：匹配输入字符串的开始位置，例如“AUG”会匹配“AUGAGC”，但不匹配“AAUGC”。如果是在方括号里使用，例如[^AUG]表示相反的意思，即不匹配以AUG开头的字符串。</p></li>
<li><p><code>$</code>(美元符号)：在一行字符串中，匹配输入字符串的结尾位置，例如“UAA$”匹配“AGCUAA”，但不匹配“ACUAAG”。</p></li>
<li><p><code>*</code>（星号）：匹配前面的子表达式零次或多次重复。例如“AT*”会匹配“AAT”，“A”，但不匹配“TT”。</p></li>
<li><p><code>+</code>（加号）：匹配前面的子表达式一次或多次重复。“AT+”会匹配“ATT”，但不匹配“A”。</p></li>
<li><p><code>?</code>匹配前面的子表达式零次或一次重复，“AT?”会匹配“A”或“AT”。</p></li>
<li><p><code>(...)</code>（括号）：匹配圆括号中的表达式，用于表明匹配的开始与结构，如果只匹配括号，例如匹配“（”或“）”时，可以使用(或)，或者是将它们放到中括号里[(][)]。</p></li>
<li><p><code>(?:...)</code>：匹配但不捕获该匹配的子表达式。</p></li>
<li><p><code>{n}</code>：n是一个非负整数，匹配重复的某字符串的n次。例如，“(ATTG){3}”匹配ATTGATTGATTG，但是不匹配“ATTGATTG”。（第1个是重复了3次，第2个是重复了2次）。</p></li>
<li><p><code>{m,n}</code>：m和n均为非负整数，其中m&lt;=n，它表示最少匹配n次且最多匹配m次。例如“(AT){3,5}”会匹配“ATATTATATAT”，但是不匹配“ATATTATAT”，如果不加m，则是从匹配0次的开始，如果没有n，则匹配任意重复的某字符串。</p></li>
<li><p><code>[]</code>：表示一组字符串。“[A-Z]”会匹配任何大写的字母，而“[a-z0-9]”则会匹配任何小写的字母以及数字。“[AT*]”匹配“A”，“T”，或“*（星号）”。在中括号里，<code>^</code>表示相反的含义，例如“[^R]”会匹配任何除了“R”之外的字母。</p></li>
<li><p><code>\</code>：将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， ‘n’ 匹配字符 ‘n’。‘’ 匹配换行符。序列 ‘\’ 匹配 “&quot;，而 ‘(’ 则匹配”(“。</p></li>
<li><p><code>|</code>：表达“或”的意思，指明两项之间的一个选择，例如“A|T”会匹配“A”，“T”或“AT”</p>
<p>。</p>
<p>Python中的一些特殊字符总结如下所示：</p>
<table style="width:99%;">
<colgroup>
<col width="41%">
<col width="56%">
</colgroup>
<thead>
<tr class="header">
<th>元字符</th>
<th>功能说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>()</td>
<td>将位于()中的内容作为一个整体来对待</td>
</tr>
<tr class="even">
<td>{}</td>
<td>按{}中的次数进行匹配</td>
</tr>
<tr class="odd">
<td>[]</td>
<td>匹配位于[]中的任意一个字符</td>
</tr>
<tr class="even">
<td>[^xyz]</td>
<td>^放在[]内表示反向字符集，匹配除x、y、z之外的任何字符</td>
</tr>
<tr class="odd">
<td>[a-z]</td>
<td>字符范围，匹配指定范围内的任何字符</td>
</tr>
<tr class="even">
<td>[^a-z]</td>
<td>反向范围字符，匹配除小写英文字母之外的任何字符</td>
</tr>
<tr class="odd">
<td>.</td>
<td>匹配除换行符以外的任意单个字符</td>
</tr>
<tr class="even">
<td>*</td>
<td>匹配位于“*”之前的字符或子模式的0次或多次出现</td>
</tr>
<tr class="odd">
<td>+</td>
<td>匹配位于“+”之前的字符或子模式的1次或多次出现</td>
</tr>
<tr class="even">
<td>-</td>
<td>用在[]之内用来表示范围</td>
</tr>
<tr class="odd">
<td>|</td>
<td>匹配位于“|”之前或之后的字符</td>
</tr>
<tr class="even">
<td>^</td>
<td>匹配行首，匹配以^后面的字符开头的字符串</td>
</tr>
<tr class="odd">
<td>$</td>
<td>匹配行尾，匹配以$之前的字符结束的字符串</td>
</tr>
<tr class="even">
<td>?</td>
<td>匹配位于“？”之前的0个或1个字符，当此字符紧随任何其他限定符（*，+，?，{n}，{n,}，{n,m}之后时，匹配模式是“非贪心的“。“非贪心的“模式匹配搜索到的、尽可能短的字符串，而默认的”贪心的“模式匹配搜索一的，尽可能长的字符串。例如在字符串“oooo”中，“o+?”只匹配单个o，而“o+”匹配所有o</td>
</tr>
<tr class="odd">
<td></td>
<td>表示位于</td>
</tr>
<tr class="even">
<td></td>
<td>此处的num是一个正整数，例如，“(.)”匹配两个连续的相同字符</td>
</tr>
<tr class="odd">
<td></td>
<td>换页符匹配</td>
</tr>
<tr class="even">
<td></td>
<td>换行符匹配</td>
</tr>
<tr class="odd">
<td></td>
<td>匹配一个回车符</td>
</tr>
<tr class="even">
<td></td>
<td>匹配单词头或单词尾</td>
</tr>
<tr class="odd">
<td></td>
<td>与</td>
</tr>
<tr class="even">
<td></td>
<td>匹配任何数字，相当于[0-9]</td>
</tr>
<tr class="odd">
<td></td>
<td>代表非数字，等效于[^0-9</td>
</tr>
<tr class="even">
<td></td>
<td>匹配任何空白字符，包括空格、制表符、换页符，与[]等效</td>
</tr>
<tr class="odd">
<td></td>
<td>与，代表非空白字符</td>
</tr>
<tr class="even">
<td></td>
<td>匹配要任何字母、数字以及下画线，相当于[a-zA-Z0-9]</td>
</tr>
<tr class="odd">
<td></td>
<td>与，与<code>[^A-Za-z0-9]</code>等效</td>
</tr>
</tbody>
</table>
<p>​</p></li>
</ol>
<h2 id="python中有没有正则表达式专门用的模块">5. Python中有没有正则表达式专门用的模块？</h2>
<p>答：在Python中，它的标准库<code>re</code>提供了正则表达式操作所需要的功能。它的基础用法如下所示，用search来说明一下，re.search()方法的功能：在给定字符串中寻找第一个匹配给定正则表达式的子字符串。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re <span class="comment"># 导入python的标准re库</span></div><div class="line">mo = re.search(<span class="string">"hello"</span>,<span class="string">"hello world, hello Python!"</span>)</div></pre></td></tr></table></figure>
<p>其中<code>search</code>方法的具体用法：使用公式为<code>re.search(pattern,string,flags=0)</code>，其中flags的值可以是re.I（大写的字母I，不是1），大写表示忽略查找时的大小写，re.L（支持本地字符集的字符），re.M（多行匹配区栖），re.S（使用元字符“.”，匹配单字）。它可以在字符串内查找模式匹配，只要找到第一个匹配，然后就返回一个match object对象，如果字符串没有匹配，就返回None。mathch object对象有以下的方法：</p>
<p>group() 返回被 RE 匹配的字符串</p>
<p>start() 返回匹配开始的位置</p>
<p>end() 返回匹配结束的位置</p>
<p>span() 返回一个元组包含匹配 (开始,结束) 的位置</p>
<p>group() 返回re整体匹配的字符串，可以一次输入多个组号，对应组号匹配的字符串。</p>
<p>上述的代码运行如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180424/7bFhFjJDfG.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>个结果非常类似于index()方法，如下所示：</p>
<blockquote>
<p>“hello”,“hello world, hello Python!”.index(“hello”)</p>
<p>(‘hello’, 0)</p>
</blockquote>
<p>不过index()与re.search()方法的不同之处在于所选用的是正则表达式，还是普通的字符串，再看一下例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">mo = re.search(<span class="string">"[Hh]ello"</span>,<span class="string">"Hello world, hello Python!"</span>)</div><div class="line">mo.group()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<blockquote>
<p>mo.group() ‘Hello’</p>
</blockquote>
<p>其中以大写H开头的字符串是第一个被匹配的模式，返回。</p>
<h2 id="python中的re库还有哪些常用的方法">6. Python中的re库还有哪些常用的方法？</h2>
<p>答：可以查看地一下re库中的方法，用命令``即可，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">impor re <span class="comment"># 导入re标准库</span></div><div class="line">dir(re) <span class="comment"># 查看re库中所有的方法</span></div></pre></td></tr></table></figure>
<p>可以看到有这些方法：</p>
<blockquote>
<p>dir(re) [‘A’, ‘ASCII’, ‘DEBUG’, ‘DOTALL’, ‘I’, ‘IGNORECASE’, ‘L’, ‘LOCALE’, ‘M’, ‘MULTILINE’, ‘RegexFlag’, ‘S’, ‘Scanner’, ‘T’, ‘TEMPLATE’, ‘U’, ‘UNICODE’, ‘VERBOSE’, ‘X’, ’_MAXCACHE’, ‘<strong>all</strong>’, ‘<strong>builtins</strong>’, ‘<strong>cached</strong>’, ‘<strong>doc</strong>’, ‘<strong>file</strong>’, ‘<strong>loader</strong>’, ‘<strong>name</strong>’, ‘<strong>package</strong>’, ‘<strong>spec</strong>’, ‘<strong>version</strong>’, ’_alphanum_bytes’, ’_alphanum_str’, ’_cache’, ’_compile’, ’_compile_repl’, ’_expand’, ’_locale’, ’_pattern_type’, ’_pickle’, ’_subx’, ‘compile’, ‘copyreg’, ‘enum’, ‘error’, ‘escape’, ‘findall’, ‘finditer’, ‘fullmatch’, ‘functools’, ‘match’, ‘purge’, ‘search’, ‘split’, ‘sre_compile’, ‘sre_parse’, ‘sub’, ‘subn’, ‘template’]</p>
</blockquote>
<p>常用的方法还有re.findall()，re.finditer()，re.match()，</p>
<p>re.findall()：列出字符串中模式的所有匹配项，与re.search()不同的是，re.findall()是查找所有的匹配结果，而后者只是找到第1个匹配结果，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = re.findall(<span class="string">"[Hh]ello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</div><div class="line">[<span class="string">'Hello'</span>, <span class="string">'hello'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(result))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">list</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>从上述结果可以看出，re.findall()返回的结果是一个list，而不是一个match object。</p>
<p>re.finditer()：列出字符串中模式的所有匹配项，返回一个match object，这是re.finditer()与re.findall()的区别，re.finditer()返回来的是一个迭代器，后者返回来的是一个list，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = re.finditer(<span class="string">"[Hh]ello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</div><div class="line">&lt;callable_iterator object at <span class="number">0x00000276F7ABEC18</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(result))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">callable_iterator</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>如果要查看结果，可以按下操作，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = re.finditer(<span class="string">"[Hh]ello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x <span class="keyword">in</span> result:</div><div class="line"><span class="meta">... </span>    print(x.group())</div><div class="line"><span class="meta">... </span>    print(x.span())</div><div class="line">...</div><div class="line">Hello</div><div class="line">(<span class="number">0</span>, <span class="number">5</span>)</div><div class="line">hello</div><div class="line">(<span class="number">13</span>, <span class="number">18</span>)</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>re.match()：从字符串的开始处匹配，返回match对象或None，它与re.search()类似，不同之处在于，re.match()只在字符串的开头进行匹配，而re.search()会在整个字符串中进行匹配，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; result = re.match(&quot;hello&quot;,&quot;Hello world, hello Python,!&quot;)</div><div class="line">&gt;&gt;&gt; print(result)</div><div class="line">None</div></pre></td></tr></table></figure>
<p>如果找到了匹配结果，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = re.match(<span class="string">"Hello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</div><div class="line">&lt;_sre.SRE_Match object; span=(<span class="number">0</span>, <span class="number">5</span>), match=<span class="string">'Hello'</span>&gt;</div></pre></td></tr></table></figure>
<p>可以通过group()和span()来查看匹配的结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = re.match(<span class="string">"Hello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</div><div class="line">&lt;_sre.SRE_Match object; span=(<span class="number">0</span>, <span class="number">5</span>), match=<span class="string">'Hello'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group()</div><div class="line"><span class="string">'Hello'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.span()</div><div class="line">(<span class="number">0</span>, <span class="number">5</span>)</div></pre></td></tr></table></figure>
<h2 id="在python中如何构建一个模式对象">7. 在Python中，如何构建一个模式对象？</h2>
<p>答：在Python的re模块中，可以使用compile()方法将正则表达式编译生成正则表达式对象，然后再使用正则表达式对象提供的方法进行字符串处理，使用编译后的正则表达式对象不仅可以提高字符串处理速度，还提供了更加强大的字符串处理功能，尤其是对于大文本文件来说，这一步不是强制的，但推荐这么做。先来看一下findall的匹配，然后再来看一下“创建”的模式匹配。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>re.findall(<span class="string">"[Hh]ello"</span>,<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line">[<span class="string">'Hello'</span>, <span class="string">'hello'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reg  = re.compile(<span class="string">"[Hh]ello"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reg.findall(<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line">[<span class="string">'Hello'</span>, <span class="string">'hello'</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>编译好的模式可以使用re库中所有的方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"[Hh]ello"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx.search(<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line">&lt;_sre.SRE_Match object; span=(<span class="number">0</span>, <span class="number">5</span>), match=<span class="string">'Hello'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx.match(<span class="string">"Hello world, hello Python,!"</span>)</div><div class="line">&lt;_sre.SRE_Match object; span=(<span class="number">0</span>, <span class="number">5</span>), match=<span class="string">'Hello'</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx.findall(<span class="string">"Hello world, hello Python, !"</span>)</div><div class="line">[<span class="string">'Hello'</span>, <span class="string">'hello'</span>]</div></pre></td></tr></table></figure>
<h2 id="example1搜索第一个tat重复序列">Example1:搜索第一个”TAT“重复序列</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">rgx = re.compile(<span class="string">"TAT"</span>)     <span class="comment"># 编译了模式（TAT），编译好的模式就可以使用re中的方法，例如finditer</span></div><div class="line">i = <span class="number">1</span> </div><div class="line"></div><div class="line"><span class="keyword">for</span> mo <span class="keyword">in</span> rgx.finditer(seq): <span class="comment"># finditer()方法返回了一个“匹配”类型的对象，就是mo</span></div><div class="line">    print(<span class="string">'Ocurrence&#123;&#125;:&#123;&#125;'</span>.format(i, mo.group()))  <span class="comment"># 用group()方法操作了mo对象</span></div><div class="line">    print(<span class="string">'Position: From &#123;&#125; to &#123;&#125;'</span>.format(mo.start(),mo.end())) <span class="comment"># 用span()方法操作了mo对象，</span></div><div class="line">    <span class="comment"># 这里使用的是mo.start()与mo.end()，它们等价于mo.span[0]和mo.span()[1]</span></div><div class="line">    <span class="comment"># 即价于  print('Position: From &#123;&#125; to &#123;&#125;'.format(mo.span()[0],mo.span()[1]))</span></div><div class="line">    i += <span class="number">1</span></div></pre></td></tr></table></figure>
<p>运行后，结果如下所示（具体代码的解释看注释）：</p>
<blockquote>
<p>Ocurrence1:TAT</p>
<p>Position: From 1 to 4</p>
<p>Ocurrence2:TAT</p>
<p>Position: From 18 to 21</p>
</blockquote>
<h2 id="如果我要匹配超过一种模式如何操作">8. 如果我要匹配超过一种模式，如何操作？</h2>
<p>答：如果要匹配超过一种模式，则需要用到组操作（grouping）。用括号()来将标一个组，。组可以被“捕获（capturing）或非捕获（non-capturing），按照这种分类方法，组合就有捕获组和非捕获组。捕获组就是把正则表达式中子表达式匹配的内容，保存到内存中以数字编号或显式命名的组里，方便检索。<code>groups()</code>方法可以用于捕获组，需要注意的是<code>groups()</code>和<code>group()</code>是两种不同的方法。<code>group()</code>返回匹配的字符串，groups()返回的是元组，它们的用法可以用几个案例来说明，如下所示：</p>
<h2 id="example2-常规匹配">Example2: 常规匹配</h2>
<p>下面的代码匹配的是“单词，逗号，单词”这个模式，里面有2个括号，group()默认会返回整个匹配结果，它等同于group(0)，而group(1)会返回第1个亚组，group(2)会返回第2个亚组，关于亚组的划分，如下图所示： <img src="http://ortxpw68f.bkt.clouddn.com/professional/180424/eF5bmKCjDB.png?imageslim" alt="mark"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">m = re.search(<span class="string">r"(\w+)\,(\w+)"</span>, <span class="string">"Isaac Newton,physicist"</span>)</div><div class="line"><span class="comment"># 匹配一个“单词，逗号，一个单词”</span></div><div class="line">m.group()</div><div class="line">m.group(<span class="number">0</span>)</div><div class="line">print(type(m.group(<span class="number">0</span>)))</div><div class="line"><span class="comment"># m.group(0)和group()都是返回整个匹配结果，就是group(0)的内容</span></div><div class="line"><span class="comment"># m.group(0)的结果是一个字符串</span></div><div class="line">m.group(<span class="number">1</span>)</div><div class="line"><span class="comment"># 返回第1个亚组（就是group(1)的内容</span></div><div class="line">m.group(<span class="number">2</span>)</div><div class="line"><span class="comment"># 返回第2个亚组（就是group(2)的内容</span></div><div class="line">m.group(<span class="number">10</span>) </div><div class="line"><span class="comment"># group一共就0,1,2三个，如果是gruop(10)则会出错</span></div><div class="line">m.group(<span class="number">1</span>,<span class="number">2</span>) </div><div class="line"><span class="comment"># 输出多个匹配结果，m.gorup(1,2)表示输出</span></div><div class="line">m.groups()</div><div class="line"><span class="comment"># 返回一个包含所有亚组字符串的元组，从1 到所含的小组号,具体的案例可以往后看</span></div></pre></td></tr></table></figure>
<p>结果如下所示： <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; import re</div><div class="line">&gt;&gt;&gt; m = re.search(r&quot;(\w+)\,(\w+)&quot;, &quot;Isaac Newton,physicist&quot;)</div><div class="line">&gt;&gt;&gt; # 匹配一个&quot;单词，逗号，一个单词&quot;</div><div class="line">... m.group()</div><div class="line">&apos;Newton,physicist&apos;</div><div class="line">&gt;&gt;&gt; m.group(0)</div><div class="line">&apos;Newton,physicist&apos;</div><div class="line">&gt;&gt;&gt; print(type(m.group(0)))</div><div class="line">&lt;class &apos;str&apos;&gt;</div><div class="line">&gt;&gt;&gt; # m.group(0)和group()都是返回整个匹配结果，就是group(0)的内容</div><div class="line">... # m.group(0)的结果是一个字符串</div><div class="line">...</div><div class="line">&gt;&gt;&gt; m.group(1)</div><div class="line">&apos;Newton&apos;</div><div class="line">&gt;&gt;&gt; # 返回第1个亚组（就是group(1)的内容</div><div class="line">...</div><div class="line">&gt;&gt;&gt; m.group(2)</div><div class="line">&apos;physicist&apos;</div><div class="line">&gt;&gt;&gt; # 返回第2个亚组（就是group(2)的内容</div><div class="line">&gt;&gt;&gt; </div><div class="line">&gt;&gt;&gt; m.groups()</div><div class="line">(&apos;Newton&apos;, &apos;physicist&apos;)</div></pre></td></tr></table></figure></p>
<h3 id="example-3-gruop1的返回值">Example 3: gruop(1)的返回值</h3>
<p>如果有多个匹配结果,gruop(1)则返回最后1个匹配结果,如下所示:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">m0 = re.match(<span class="string">r"(..)+"</span>, <span class="string">"a1b2c3"</span>)</div><div class="line">m0.group(<span class="number">0</span>) </div><div class="line">m0.group(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>结果如下所示:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; m0 = re.match(r&quot;(..)+&quot;, &quot;a1b2c3&quot;)</div><div class="line">&gt;&gt;&gt; m0.group(0)</div><div class="line">&apos;a1b2c3&apos;</div><div class="line">&gt;&gt;&gt; m0.group(1)</div><div class="line">&apos;c3&apos;</div></pre></td></tr></table></figure>
<p>需要注意的是,m0.group(0)返回的是整个匹配结果,而group(1)返回的是则是最后1个匹配结果,因为m0 = re.match(r“(..)+”, “a1b2c3”)中只有1个括号,它会逐步地进行匹配,第1次匹配的是a1,第2次匹配的是b2，此时匹配的结果是b2，覆盖掉a1，接着再匹配，是c3，然后c3覆盖b2，这是最后的匹配结果，因此m0.group(1)返回的是就是c3，如果有3个括号，就会连续匹配a1b2c3，有3个亚组，即如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">m01 = re.match(<span class="string">r"(..)(..)(..)+"</span>, <span class="string">"a1b2c3"</span>)</div><div class="line">m01.group()</div><div class="line">m01.group(<span class="number">1</span>)</div><div class="line">m01.group(<span class="number">2</span>)</div><div class="line">m01.group(<span class="number">3</span>)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>m01 = re.match(<span class="string">r"(..)(..)(..)+"</span>, <span class="string">"a1b2c3"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m01.group()</div><div class="line"><span class="string">'a1b2c3'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m01.group(<span class="number">1</span>)</div><div class="line"><span class="string">'a1'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m01.group(<span class="number">2</span>)</div><div class="line"><span class="string">'b2'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m01.group(<span class="number">3</span>)</div><div class="line"><span class="string">'c3'</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="example4-group与groups返回的数值类型">Example4: group()与groups()返回的数值类型</h3>
<p>group()返回的结果是一个字符串，groups()返回的结果是一个元组，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">m = re.search(<span class="string">r"(\w+)\,(\w+)"</span>, <span class="string">"Isaac Newton,physicist"</span>)</div><div class="line">print(type(m.group()))</div><div class="line">print(type(m.groups()))</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>m02.group(<span class="number">2</span>)</div><div class="line"><span class="string">'2c'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.search(<span class="string">r"(\w+)\,(\w+)"</span>, <span class="string">"Isaac Newton,physicist"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(m.group()))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">str</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">print</span><span class="params">(type<span class="params">(m.groups<span class="params">()</span>)</span>)</span></span></div><div class="line"><span class="class">&lt;<span class="title">class</span> '<span class="title">tuple</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt;</span></div></pre></td></tr></table></figure>
<h3 id="example5-group与groups的区别">Example5: group()与groups()的区别</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">m2 = re.match(<span class="string">r"(\d)(\d)(\d)(\d)"</span>,<span class="string">"1234"</span>)</div><div class="line">m2.group()</div><div class="line">m2.group(<span class="number">1</span>)</div><div class="line">m2.group(<span class="number">2</span>)</div><div class="line">m2.group(<span class="number">3</span>)</div><div class="line">m2.group(<span class="number">4</span>)</div><div class="line">m2.groups()</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2 = re.match(<span class="string">r"(\d)(\d)(\d)(\d)"</span>,<span class="string">"1234"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.group()</div><div class="line"><span class="string">'1234'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.group(<span class="number">1</span>)</div><div class="line"><span class="string">'1'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.group(<span class="number">2</span>)</div><div class="line"><span class="string">'2'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.group(<span class="number">3</span>)</div><div class="line"><span class="string">'3'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.group(<span class="number">4</span>)</div><div class="line"><span class="string">'4'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>m2.groups()</div><div class="line">(<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>)</div></pre></td></tr></table></figure>
<h2 id="example6-group和groups的应用">Example6: group()和groups()的应用。</h2>
<p>现在一条碱基，它的序列是ATATAAGATGCGCGCGCTTATGCGCGCA，现在找到它的GC序列，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">rgx = re.compile(<span class="string">"(GC)&#123;3,&#125;"</span>)   </div><div class="line"><span class="comment"># (GC)&#123;3,&#125;表示至少匹配3次，如果有4个连续的GC也匹配，5个也是如此</span></div><div class="line"></div><div class="line">result = rgx.search(seq)</div><div class="line">result.group()</div><div class="line">result.groups()</div><div class="line">result.group(<span class="number">0</span>)</div><div class="line">result.group(<span class="number">1</span>)</div><div class="line">result.group(<span class="number">0</span>,<span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"(GC)&#123;3,&#125;"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># (GC)&#123;3,&#125;表示至少匹配3次，如果有4个连续的GC也匹配，5个也是如此</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = rgx.search(seq)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group()</div><div class="line"><span class="string">'GCGCGCGC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.groups()</div><div class="line">(<span class="string">'GC'</span>,)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group(<span class="number">0</span>)</div><div class="line"><span class="string">'GCGCGCGC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group(<span class="number">1</span>)</div><div class="line"><span class="string">'GC'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group(<span class="number">0</span>,<span class="number">1</span>)</div><div class="line">(<span class="string">'GCGCGCGC'</span>, <span class="string">'GC'</span>)</div></pre></td></tr></table></figure>
<p>从结果中可以看出，group()如果不填写参数，或者是填写了参数0，就会返回完全匹配的子字符串，如果写了参数1，会返回第2个匹配结果，如果填写了0,1，则返回所有的匹配结果。它的原理如下所示：</p>
<p><code>(GC){3,}</code>表示表示至少匹配3次，ATATAAGATGCGCGCGCTTATGCGCGCA序列中有GCGCGCGC，就匹配上了,groups()返回的是一个包含唯一或者全部子组的元组。</p>
<table>
<thead>
<tr class="header">
<th align="center">捕获组</th>
<th align="center">正则表达式</th>
<th align="center">结果</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">group(0)</td>
<td align="center">(GC){3,}</td>
<td align="center">GCGCGCGC</td>
</tr>
<tr class="even">
<td align="center">group(1)</td>
<td align="center">(GC)</td>
<td align="center">GC</td>
</tr>
</tbody>
</table>
<p>接着再来看一下groups()的使用方法，groups()方法返回的是匹配的所有亚组的结果，在这种情况下，由于search返回的是一个匹配对象（match object），在模式中有一个组（即GC），返回的匹配结果是一个元组（tuple），如下所示：</p>
<p>这种情况，就是常规的使用方法，跟前面第5个问题中描述的情况一样。如果是<code>groups()</code>方法，它返回的是匹配的所有亚组的结果，在这种情况下，由于search返回的是一个匹配对象（match object），在模式中只有一个组（即GC），返回的匹配结果是一个元组（tuple），即(“GC”,)，如果想让groups返回整个模式，需要在编译模式中添加上括号，像下面这个案例一样操作：如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">rgx = re.compile(<span class="string">"((GC)&#123;3,&#125;)"</span>)</div><div class="line">result = rgx.search(seq)</div><div class="line">result.groups()</div><div class="line">result.group()</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"((GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = rgx.search(seq)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.groups()</div><div class="line">(<span class="string">'GCGCGCGC'</span>, <span class="string">'GC'</span>)</div></pre></td></tr></table></figure>
<p>在这种模式下，group()与groups()都能被检索（从左向右），因为这两种组都是默认能“捕获”的。如果不需要内部的这个子组（“CG”组），可以将其标为非捕获组（non-capturing），方法就是在组的开始添加上<code>?:</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">rgx = re.compile(<span class="string">"((?:GC)&#123;3,&#125;)"</span>)</div><div class="line">result = rgx.search(seq)</div><div class="line">result.groups()</div><div class="line">result.group()</div></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"((?:GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = rgx.search(seq)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.groups()</div><div class="line">(<span class="string">'GCGCGCGC'</span>,)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result.group()</div><div class="line"><span class="string">'GCGCGCGC'</span></div></pre></td></tr></table></figure>
<h2 id="re.search方法匹配的是都是第一个结果如何匹配多个结果">9. re.search()方法匹配的是都是第一个结果，如何匹配多个结果？</h2>
<p>答：如果要进行所有的匹配，需要用到re.findall()方法，它的用法如下：</p>
<blockquote>
<p>findall(pattern, string, flags=0)</p>
</blockquote>
<p>re.findall()方法能够以列表的形式返回能匹配的子字符串。如果模式中存在一个组，那么findall也有不同的作用。如果没有组，那么findall返回的是匹配字符串的列表。如果模式中存在组，它会返回含有组的列表，如果有超过1组，返回一个元组列表，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">rgx = re.compile(<span class="string">"TAT"</span>)</div><div class="line"><span class="comment"># 没有组</span></div><div class="line">rgx.findall(seq)</div><div class="line"><span class="comment"># 返回匹配的字符串的列表</span></div><div class="line">type(rgx.findall(seq))</div><div class="line">rgx = re.compile(<span class="string">"(GC)&#123;3,&#125;"</span>)</div><div class="line"><span class="comment"># 模式中含有1个组，返回1个列表</span></div><div class="line"></div><div class="line">rgx.findall(seq)</div><div class="line"><span class="comment"># 每个匹配对应的组</span></div><div class="line"></div><div class="line">rgx = re.compile(<span class="string">"((GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="comment"># 含有2个组，为每个匹配返回一个元组，整体就是一个元组列表</span></div><div class="line">rgx.findall(seq)</div><div class="line">rgx = re.compile(<span class="string">"((?:GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="comment"># 利用非捕获组得到唯一的匹配</span></div><div class="line">rgx.findall(seq)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"TAT"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 没有组，反回字符串列表</span></div><div class="line"><span class="meta">... </span>rgx.findall(seq)</div><div class="line">[<span class="string">'TAT'</span>, <span class="string">'TAT'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 返回匹配的字符串的列表</span></div><div class="line"><span class="meta">... </span>type(rgx.findall(seq))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">list</span>'&gt;</span></div><div class="line">&gt;&gt;&gt; rgx = re.compile("(GC)&#123;3,&#125;")</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 模式中含有1个组，返回1个列表</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx.findall(seq)</div><div class="line">[<span class="string">'GC'</span>, <span class="string">'GC'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 每个匹配对应的组</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"((GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 含有2个组，为每个匹配返回一个元组，整体就是一个元组列表</span></div><div class="line"><span class="meta">... </span>rgx.findall(seq)</div><div class="line">[(<span class="string">'GCGCGCGC'</span>, <span class="string">'GC'</span>), (<span class="string">'GCGCGC'</span>, <span class="string">'GC'</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>rgx = re.compile(<span class="string">"((?:GC)&#123;3,&#125;)"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 利用非捕获组得到唯一的匹配</span></div><div class="line"><span class="meta">... </span>rgx.findall(seq)</div><div class="line">[<span class="string">'GCGCGCGC'</span>, <span class="string">'GCGCGC'</span>]</div></pre></td></tr></table></figure>
<h2 id="案例第六寻找多个亚模式sub-patterns">案例第六：寻找多个亚模式（sub-patterns）</h2>
<p>不同的组可以用于标记，其格式为<code>?P&lt;组名字&gt;</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">rgx = re.compile(<span class="string">"(?P&lt;TBX&gt;TATA..).*(?P&lt;CGislands&gt;(?:GC)&#123;3,&#125;)"</span>)</div><div class="line">seq = <span class="string">"ATATAAGATGCGCGCGCTTATGCGCGCA"</span></div><div class="line">result = rgx.search(seq)</div><div class="line">print(result.group(<span class="string">'CGislands'</span>))</div><div class="line">print(result.group(<span class="string">'TBX'</span>))</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python t.py</div><div class="line">GCGCGC</div><div class="line">TATAAG</div></pre></td></tr></table></figure>
<h3 id="example7用户支持的模式匹配行">Example7:用户支持的模式匹配行</h3>
<p>这行代码主要是为了统计某个单词在文本文件中有多少个，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re, sys</div><div class="line">myregex = re.compile(sys.argv[<span class="number">2</span>])</div><div class="line">counter = <span class="number">0</span></div><div class="line">fh = open(sys.argv[<span class="number">1</span>])</div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fh:</div><div class="line">    <span class="keyword">if</span> myregex.search(line):</div><div class="line">        counter += <span class="number">1</span></div><div class="line">fh.closer()</div><div class="line">print(counter)</div></pre></td></tr></table></figure>
<p>代码解释如下：</p>
<p>第一，第2行代码：关于sys.argv[2]的用法，举1个小例子，在C盘的<code>C:\Users\20161111</code>目录下建立一个<code>.py</code>脚本，命名为<code>test.py</code>，输入下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line">a = sys.argv[<span class="number">0</span>]</div><div class="line">print(a)</div></pre></td></tr></table></figure>
<p>保存，快捷键<code>Win+R</code>，打开cmd，输入<code>python test.py</code>，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">test.py</div></pre></td></tr></table></figure>
<p>由此可见，sys.argv[0]表示的就是<code>test.py</code>这个文件本身，现在将<code>tetst.py</code>代码中的sys.argv[0]更改为<code>sys.argv[1]</code>,再次运行，输入<code>python test.py what</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py what</div><div class="line">what</div></pre></td></tr></table></figure>
<p>运行的结果变成了what，再次修改，将sys.argv[1]改为sys.argv[2:]，运行，输入<code>python test.py test0 what1 how3 apple4</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py test0 what1 how3 apple4</div><div class="line">[<span class="string">'what1'</span>, <span class="string">'how3'</span>, <span class="string">'apple4'</span>]</div><div class="line"></div><div class="line">C:\Users\<span class="number">20161111</span>&gt;</div></pre></td></tr></table></figure>
<p>得到的结果是：‘what1’, ‘how3’, ‘apple4’。再倒回去想一下，sys.argv[0]表示的是test.py本身，sys.argv[1]表示的是输入的第1个参数，sys.argv[2:]表示的是第2个参数往后，这与切片的表示形式是一样的。</p>
<p>结论就是，sys.argv[ ]其实就是一个列表，里边的项为用户输入的参数，关键就是要明白这参数是从程序外部输入的，而非代码本身的什么地方，要想看到它的效果就应该将程序保存了，从外部来运行程序并给出参数（参考资料：<a href="https://www.cnblogs.com/aland-1415/p/6613449.html" target="_blank" rel="external">Python中 sys.argv[]的用法简明解释</a>）。</p>
<p>第二，第4行代码，fh = open(sys.argv[1])表示的就是打开某个文件。</p>
<p>第三，现在运行一下这个脚本，将脚本保存到C盘的根目录下，命名为<code>count_line.py</code>，同时在同一个目录新建一个文本文件，输入以下文字：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">line1</div><div class="line">line2</div><div class="line">line3</div><div class="line">line4</div></pre></td></tr></table></figure>
<p>将文件命名为<code>line_test.txt</code>，打开cmd，输入命令<code>python count_line.py count_test,line</code>，一共是2个参数（前面的python不算），参数1是脚本名称，即count_line.py，参数2是文本文件，即count_test，参数3是要统计的文字，即line，运行结果如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\20161111&gt;python count_line.py line_test.txt line</div><div class="line">4</div></pre></td></tr></table></figure>
<p>可以发现，这个文本文件中有4个line这个单词。但是这个脚本有个缺陷，就是，如果一行中有两个line这个单词，它还是会统计为1个，如下所示，将文本文件更改为这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">line1</div><div class="line">line2</div><div class="line">line3</div><div class="line">line4 line5</div></pre></td></tr></table></figure>
<p>继续运行上述脚本，结果如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\20161111&gt;python count_line.py line_test.txt line</div><div class="line">4</div></pre></td></tr></table></figure>
<p>因此，需要对脚本进行更改，更改后的版本如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re, sys</div><div class="line">myregex = re.compile(sys.argv[<span class="number">2</span>])</div><div class="line">counter = <span class="number">0</span></div><div class="line"></div><div class="line">fh = open(sys.argv[<span class="number">1</span>])</div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fh:</div><div class="line">    counter += len(myregex.findall(line))</div><div class="line">fh.close()</div><div class="line"></div><div class="line">print(counter)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\20161111&gt;python count_line.py line_test.txt line</div><div class="line">5</div></pre></td></tr></table></figure>
<h2 id="在python中正则表达式的规则非常难记有没有工具可以用来检测正则表达式的正确与否">10. 在Python中，正则表达式的规则非常难记，有没有工具可以用来检测正则表达式的正确与否？</h2>
<p>答：有个工具是Kodos，这个工具是用Python写成的，输入正则表达式，它能够在相应的输出框显示出正则表达式的结查，官网是：http://kodos.sourceforge.net/，软件是在WIndows下运行的，打开后界面如下所示：</p>
<div class="figure">
<img src="http://kodos.sourceforge.net/images/match.gif" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="如何通过正则表达式替换一些字符串">11. 如何通过正则表达式替换一些字符串？</h2>
<p>答：如果要实现这个目的，需要用到re.sub()方法，sub就是substitution的简写，它的用法是<code>sub(rpl,str[,count=0])</code></p>
<p>具体参数的含义如下所示：</p>
<ol style="list-style-type: decimal">
<li>rpl：原始的字符串；</li>
<li>str，需要替换原始字符串的字符串。</li>
<li>[,count=0]，可选参数，表示替换的最大次数，默认是0，表示替换所有匹配。</li>
</ol>
<p>re.sub的使用非常类似于replace方法，参见下面的案例，代码如下所示：</p>
<p>这个案例展示的是：删除GC重复（该行有超过3个GC），代码解释参见注释 <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">regex = re.compile(<span class="string">"(?:GC)&#123;3,&#125;"</span>) <span class="comment"># 匹配至少3个GC结边的字符串</span></div><div class="line">seq = <span class="string">"ATGATCGTACTGCGCGCTTCATGTGATGCGCGCGCGCAGACTATAAG"</span></div><div class="line">print(<span class="string">"Before:"</span>, seq)</div><div class="line">print(<span class="string">"After:"</span>, regex.sub(<span class="string">""</span>,seq))</div></pre></td></tr></table></figure></p>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">Before: ATGATCGTACTGCGCGCTTCATGTGATGCGCGCGCGCAGACTATAAG</div><div class="line">After: ATGATCGTACTTTCATGTGATAGACTATAAG</div></pre></td></tr></table></figure>
<p>第二个方法：<code>subn(rpl,str[,count=0])</code>也能实现<code>re.sub</code>的功能。</p>
<p>不同之处在于，subn会返回替换后的字符串和替换的次数，将上述代码用subn演示，就如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">regex = re.compile(<span class="string">"(?:GC)&#123;3,&#125;"</span>) <span class="comment"># 匹配至少3个GC结边的字符串</span></div><div class="line">seq = <span class="string">"ATGATCGTACTGCGCGCTTCATGTGATGCGCGCGCGCAGACTATAAG"</span></div><div class="line">print(<span class="string">"Before:"</span>, seq)</div><div class="line">print(<span class="string">"After:"</span>, regex.subn(<span class="string">""</span>,seq))</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">Before: ATGATCGTACTGCGCGCTTCATGTGATGCGCGCGCGCAGACTATAAG</div><div class="line">After: (<span class="string">'ATGATCGTACTTTCATGTGATAGACTATAAG'</span>, <span class="number">2</span>)</div></pre></td></tr></table></figure>
<h2 id="正则表达式在生物信息学方面有什么用处">12. 正则表达式在生物信息学方面有什么用处？</h2>
<p>答：正则表达式可以用于搜索PROSITE（这是一个蛋白质拉点和序列模式数据库），这个数据库的信息模式就是序列与描述序列的字符串。例如下面的这段字符串：</p>
<p><code>K-[KR]-C-G-H-[LMQR]</code>，这段字符串表示的是异柠檬酸酶的活性位点。具体的每个字母含义如下：</p>
<p>位于第1个位置的是K，位于第2个位置提是K或R，随后是CGH，最后是一段氨基酸序列，即L，M，Q或R。如果要在这个序列中搜索，必须要把PROSITE的格式转化为符合Python正则表达式的表示方式，就像这样<code>K[KR]CGH[LMQR]</code>。</p>
<p>为了将PROSITE转化为REGEX的基本格式，这个过程中包括移除连接符（“-”），将括号之间的数字替换为大括号之间的数字，并将“x”替换为点号，接着看一个腺苷酸环化酶相关蛋白2（ adenylyl cyclase associated protein 2）的例子。</p>
<p>此蛋白在PROSITE中的版本如下：</p>
<p><code>[LIVM](2)-x-R-L-[DE]-x(4)-R-L-E</code>，这种序列是一致性模式（Consensus pattern）。</p>
<p>其中，L是亮氨酸，I是异亮氨酸，V是缬氨酸，M是甲硫氨酸，x代表任意氨基酸，R是精氨酸，D是天冬氨酸，E是谷氨酸。</p>
<p>REGEX（正则表达式）版本如下：</p>
<p><code>[LIVM]{2}.RL[DE].{4}RLE</code></p>
<h3 id="example8在fasta格式中搜索蛋白质的模式">Example8：在FASTA格式中搜索蛋白质的模式</h3>
<p>现在假设我们要在一个FASTA格式的文件中寻找这个模式。除了要找到这个模式外，我们有可能还需要在上下文中检索它的位置，即位于在这个模式之前与之后的10个氨基酸序列（代码中用小写字母表示），下面是一个Fasta格式的文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;Q5R5X8|CAP2_PONPY CAP <span class="number">2</span> - Pongo pygmaeus (Orangutan).</div><div class="line">MANMQGLVERLERAVSRLESLSAESHRPPGNCGEVNGVIGGVAPSVEAFDKLMDSMVAEFLKNSRILAGDVETHAEMVHSAFQAQRAFLLMASQYQQPHENDVAALLKPISEKIQEIQTFRERNRGSNMFNHLSAVSESIPALGWIAVSPKPGPYVKEMNDAATFYTNRVLKDYKHSDLRHVDWVKSYLNIWSELQAYIKEHHTTGLTWSKTGPVASTVSAFSVLSSGPGLPPPPPPPPPPGPPPLLENEGKKEESSPSRSALFAQLNQGEAITKGLRHVTDDQKTYKNPSLRAQGGQTRSPTKSHTPSPTSPKSYPSQKHAPVLELEGKKWRVEYQEDRNDLVISETELKQVAYIFKCEKSTLQIKGKVNSIIIDNCKKLGLVFDNVVGIVEVINSQDIQIQVMGRVPTISINKTEGCHIYLSEDALDCEIVSAKSSEMNILIPQDGDYREFPIPEQFKTAWDGSKLITEPAEIMA</div></pre></td></tr></table></figure>
<p>下面的代码实现的就是这个功能，即在1个FASTA文件中寻找这个模式，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">pattern = <span class="string">"[LIVM]&#123;2&#125;.RL[DE].&#123;4&#125;RLE"</span></div><div class="line">fh = open(<span class="string">'D:/prot.fas'</span>)</div><div class="line">fh.readline()</div><div class="line">seq = <span class="string">""</span></div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fh:</div><div class="line">    seq += line.strip()</div><div class="line">rgx = re.compile(pattern)</div><div class="line">result = rgx.search(seq)</div><div class="line">patternfound = result.group()</div><div class="line">span = result.span()</div><div class="line">leftpos = span[<span class="number">0</span>]<span class="number">-10</span></div><div class="line"><span class="keyword">if</span> leftpos &lt; <span class="number">0</span>:</div><div class="line">    leftpos = <span class="number">0</span></div><div class="line">print(seq[leftpos:span[<span class="number">0</span>]].lower() + patternfound + seq[span[<span class="number">1</span>]:span[<span class="number">1</span>]+<span class="number">10</span>].lower())</div><div class="line">fh.close()</div></pre></td></tr></table></figure>
<p>运行代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">manmqgLVERLERAVSRLEslsaeshrpp</div></pre></td></tr></table></figure>
<h3 id="example9-清洗序列">Example9： 清洗序列</h3>
<p>正则表达式在清除序列方面更加常用，需要清理的序列通常是一些非标准的序列，就像下面的这样：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> ATGACCATGA TTACGCCAAG CTCTAATACG ACTCACTATA GGGAAAGCTT GCATGCCTGC</div><div class="line"><span class="number">61</span> AGGTCGACTC TAGAGGATCT ACTAGTCATA TGGATATCGG ATCCCCGGGT ACCGAGCTCG</div><div class="line"><span class="number">121</span> AATTCACTGG CCGTCGTTTT</div></pre></td></tr></table></figure>
<p>这个序列里面有空格，有数字，这些都不是我们所需要的，需要把它们的清除掉，清除序列的代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line">regex = re.compile(<span class="string">' |\d|\n|\t'</span>) <span class="comment"># 有一个空格</span></div><div class="line">seq = <span class="string">''</span></div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> open(<span class="string">'D:/pMOSBlue.txt'</span>):</div><div class="line">    seq += regex.sub(<span class="string">''</span>,line)</div><div class="line">print(seq)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">ATGACCATGATTACGCCAAGCTCTAATACGACTCACTATAGGGAAAGCTTGCATGCCTGCAGGTCGACTCTAGAGGATCTACTAGTCATATGGATATCGGATCCCCGGGTACCGAGCTCGAATTCACTGGCCGTCGTTTT</div></pre></td></tr></table></figure>
<p>代码解释：最重要的就是这个模式：<code>regex = re.compile(' |\d|\n|\t')</code>，其中’ |||’表示的是，数字或换行，或空格。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/07/Python/Python学习笔记（7）-条件与循环语句/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/07/Python/Python学习笔记（7）-条件与循环语句/" itemprop="url">Python学习笔记（7）-条件与循环语句</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-07T12:00:00+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,102
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  19
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="条件与循环语句">条件与循环语句</h2>
<h3 id="条件与循环语句的表达式">条件与循环语句的表达式</h3>
<p>在选择结构和循环结构中，都要根据条件表达式的值来确定下一步的执行流程，条件表达式的值只要不是False、0、0.0、0j、None、空列表、空元组、空集合、空字典、空字符串、空range对象或其他空迭代对象，Python解释器都认为其与True等价，从这个意义上来讲，所有Python合法表达式都可以作为条件表达式，包括含有函数调用的表达式。</p>
<h2 id="if语句">if语句</h2>
<h3 id="if条件语句的格式">if条件语句的格式</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> condition_1:</div><div class="line">    statement_block_1</div><div class="line"><span class="keyword">elif</span> condition_2:</div><div class="line">    statement_block_2</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    statement_block_3</div></pre></td></tr></table></figure>
<p>参数解释：</p>
<ol style="list-style-type: decimal">
<li>如果 “condition_1” 为 True 将执行 “statement_block_1” 块语句</li>
<li>如果 “condition_1” 为False，将判断 “condition_2”</li>
<li>如果“condition_2” 为 True 将执行 “statement_block_2” 块语句</li>
<li>如果 “condition_2” 为False，将执行“statement_block_3”块语句</li>
<li>每个条件后面要使用冒号 :，表示接下来是满足条件后要执行的语句块。</li>
<li>使用缩进来划分语句块，相同缩进数的语句在一起组成一个语句块。</li>
</ol>
<h3 id="if案例">if案例</h3>
<h4 id="简单的if语句案例">简单的if语句案例：</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ cat <span class="keyword">if</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">var1 =<span class="number">100</span></div><div class="line"><span class="keyword">if</span> var1:</div><div class="line">    print(<span class="string">"1 - if expression condition is true"</span>)</div><div class="line">    print(var1)</div><div class="line"></div><div class="line">var2 = <span class="number">0</span></div><div class="line"><span class="keyword">if</span> var2:</div><div class="line">    print(<span class="string">"2 - if expression condition is true"</span>)</div><div class="line">    print(var2)</div><div class="line">print(<span class="string">"Good bye"</span>)</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ python3 <span class="keyword">if</span>.py </div><div class="line"><span class="number">1</span> - <span class="keyword">if</span> expression condition <span class="keyword">is</span> true</div><div class="line"><span class="number">100</span></div><div class="line">Good bye</div></pre></td></tr></table></figure>
<h4 id="使用整数作为if条件表达式">使用整数作为if条件表达式</h4>
<p>如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> <span class="number">3</span>:</div><div class="line"><span class="meta">... </span>print(<span class="number">4</span>)</div><div class="line">...</div><div class="line"><span class="number">4</span></div></pre></td></tr></table></figure>
<h4 id="if语句中判断相等是用">if语句中判断相等是用“==”</h4>
<p>如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> a == <span class="number">8</span>:</div><div class="line"><span class="meta">... </span>print(a)</div><div class="line">...</div><div class="line"><span class="number">8</span></div></pre></td></tr></table></figure>
<p>代码解释：if a == 8表示：如果条件a==8返回的值是True，就执行下面的语句，此语句后面的冒号是必需的，下面一行语句print(a)前面要有4个空格的缩进。 如果if后面不放语句时，比如空出来用于后续补充，可以用pass语句，就是什么也不做，如下所示：</p>
<h4 id="pass语句">pass语句</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> X &lt; <span class="number">0</span>:</div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p>如果误用了等号作为判断条件，那么就会出错，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> (a = <span class="number">3</span>) <span class="keyword">and</span> (b = <span class="number">4</span>)</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span></div><div class="line">    <span class="keyword">if</span> (a = <span class="number">3</span>) <span class="keyword">and</span> (b = <span class="number">4</span>)</div><div class="line">          ^</div><div class="line">SyntaxError: invalid syntax</div></pre></td></tr></table></figure>
<h4 id="列表作为if条件表达式">列表作为if条件表达式：</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 案例1，非空的列表</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> a:</div><div class="line"><span class="meta">... </span>print(a)</div><div class="line">...</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"></div><div class="line"><span class="comment"># 案例2，空列表</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = []</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> a:</div><div class="line"><span class="meta">... </span>    print(a)</div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>    print(<span class="string">'Empty'</span>)</div><div class="line">...</div><div class="line">Empty</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="三元运算符">三元运算符</h4>
<p>语法为<code>value1 if condition else value2</code>，当条件表达式condition的值与True等价时，表达式的值为value1，否则表达式的值为value2。value1和value2本身可以是复杂的表达式，也可以包括函数调用，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">6</span>) <span class="keyword">if</span> a &gt; <span class="number">3</span> <span class="keyword">else</span> print(<span class="number">5</span>)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">6</span> <span class="keyword">if</span> a &gt; <span class="number">3</span> <span class="keyword">else</span> <span class="number">5</span>)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">6</span> <span class="keyword">if</span> a &gt; <span class="number">13</span> <span class="keyword">else</span> <span class="number">9</span> <span class="comment"># 赋值运算符优先级低</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b</div><div class="line"><span class="number">9</span></div></pre></td></tr></table></figure>
<p>三元运算符案例第二：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">name = <span class="string">"qiwsir"</span> <span class="keyword">if</span> <span class="string">"laoqi"</span> <span class="keyword">else</span> <span class="string">"github"</span></div><div class="line">print(name)</div><div class="line"> </div><div class="line">name = <span class="string">"qiwsir"</span> <span class="keyword">if</span> <span class="string">""</span> <span class="keyword">else</span> <span class="string">"github"</span></div><div class="line">print(name)</div><div class="line"> </div><div class="line">name = <span class="string">"qiwsir"</span> <span class="keyword">if</span> <span class="string">"github"</span> <span class="keyword">else</span> <span class="string">""</span></div><div class="line">print(name)</div></pre></td></tr></table></figure>
<p>这种操作的公式为： A = Y if X else Z 这表示为： 如果X为真，那么就执行Y。 如果X为假，那么就执行Z。 如下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = <span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">"python"</span> <span class="keyword">if</span> x &gt; y <span class="keyword">else</span> <span class="string">"qiwsir"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">qiwsir</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">... </span>x = <span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = <span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">"python"</span> <span class="keyword">if</span> x &lt; y <span class="keyword">else</span> <span class="string">"qiwsir"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">python</div></pre></td></tr></table></figure>
<p>代码解释：在第一步中，因为x&gt;y是假，因此执行Z，即qiwsir，在第二步中，因为x <y 是真，执行y，即python。其实可以这么理解，这一段代码是从左向右执行的，如果中间的判别式是对的，则就此执行结束，如果中间的判别式是错的，继续向右执行。="" ####="" 多分枝条件语句="" <figure="" class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">print(<span class="string">"请输入任意一个数字： "</span>)</div><div class="line">number = int(input())</div><div class="line"> </div><div class="line"><span class="keyword">if</span> number == <span class="number">10</span>:</div><div class="line">    print(<span class="string">"您输入的数字是: %d"</span> % number)</div><div class="line">    print(<span class="string">"Youare smart!"</span>)</div><div class="line"><span class="keyword">elif</span> number &gt; <span class="number">10</span>:</div><div class="line">    print(<span class="string">"您输入的数字是&#123;&#125;"</span>.format(number))</div><div class="line">    print(<span class="string">"This number is more than 10"</span>)</div><div class="line"><span class="keyword">elif</span> number &lt; <span class="number">10</span>:</div><div class="line">    print(<span class="string">"您输入的数字是： %d"</span> % number)</div><div class="line">    print(<span class="string">"This number is less than 10"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">"Are your a human"</span>)</div></pre></td></tr></table></y></p>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">请输入任意一个数字：</div><div class="line"><span class="number">23</span></div><div class="line">您输入的数字是<span class="number">23</span></div><div class="line">This number <span class="keyword">is</span> more than <span class="number">10</span></div></pre></td></tr></table></figure>
<p>代码解释：如果输入的是10，则输出You are smart，如果大于10，则执行下一条语句，如果小于10，执行第三条语句，这第一条到第三条一共有3种选择，称为分支。其中elif是else if的缩写。</p>
<h4 id="if语句的嵌套">if语句的嵌套</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> x &lt; y:</div><div class="line">    print(<span class="string">"x is less than y"</span>)</div><div class="line"><span class="keyword">elif</span> x &gt; y:</div><div class="line">    print(<span class="string">"x is greater than y"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">"x and y are equal"</span>)</div></pre></td></tr></table></figure>
<p>上述语句可以改写为嵌套语句，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> x == y:</div><div class="line">    print(<span class="string">"x and y are equal"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">if</span> x &lt; y:</div><div class="line">         print(<span class="string">"x is less than y"</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        print(<span class="string">"x is greater than y"</span>)</div></pre></td></tr></table></figure></p>
<p>外部的条件判断包含两个分支。第一个分支只有一个简单的语句。第二个分支包含了另外一重条件判断，这个内部条件判断有两个分支。这两个分支都是简单的语句，他们的位置也可以继续放条件判断语句的。 逻辑运算符有时候对简化嵌套条件判断很有用。比如下面这个代码就能改写成更简单的版本:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="number">0</span> &lt; x:</div><div class="line">    <span class="keyword">if</span> x &lt; <span class="number">10</span>:</div><div class="line">        print(<span class="string">"x is a positive single-digit number."</span>)</div></pre></td></tr></table></figure>
<p>上面的例子中，只有两个条件都满足了才会运行print语句，所以就用逻辑运算符来实现同样的效果即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="number">0</span> &lt; x <span class="keyword">and</span> x &lt;<span class="number">10</span>:</div><div class="line">    print(<span class="string">"x is a positive single-digit number."</span>)</div></pre></td></tr></table></figure>
<p>还可以更加简单： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="number">0</span> &lt; x &lt; <span class="number">10</span>:</div><div class="line">    print(<span class="string">"x is a positive single-digit number."</span>)</div></pre></td></tr></table></figure></p>
<h4 id="案例ifelse面试资格确认">案例：if…else:面试资格确认</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">age = <span class="number">24</span></div><div class="line">subject = <span class="string">"计算机 "</span></div><div class="line">college = <span class="string">"非重点"</span></div><div class="line"><span class="keyword">if</span> (age &gt; <span class="number">25</span> <span class="keyword">and</span> subject ==<span class="string">"电子信息工程 "</span>) <span class="keyword">or</span> (college ==<span class="string">"重点"</span> <span class="keyword">and</span> subject ==<span class="string">"电子信息工程"</span>) <span class="keyword">or</span> (age&lt;=<span class="number">28</span> <span class="keyword">and</span> subject==<span class="string">"计算机"</span>):</div><div class="line">    print(<span class="string">"恭喜，您已经获得我公司的面试机会！"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">"抱歉，您未达到面试要求"</span>)</div></pre></td></tr></table></figure>
<h4 id="案例if判断今天是今年的第几天">案例if：判断今天是今年的第几天。</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> time</div><div class="line">date = time.localtime()</div><div class="line"><span class="comment"># 获取当前日期时间</span></div><div class="line"></div><div class="line">year,month,day=date[:<span class="number">3</span>]</div><div class="line">day_month=[<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>]</div><div class="line"></div><div class="line"><span class="keyword">if</span> year%<span class="number">400</span> == <span class="number">0</span> <span class="keyword">or</span> (year%<span class="number">4</span>==<span class="number">0</span> <span class="keyword">and</span> year%<span class="number">100</span>!=<span class="number">0</span>):</div><div class="line"><span class="comment"># 判断是否为闰年</span></div><div class="line">    day_month[<span class="number">1</span>] = <span class="number">29</span></div><div class="line">    </div><div class="line"><span class="keyword">if</span> month ==<span class="number">1</span>:</div><div class="line">    print(day)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(sum(day_month[:month<span class="number">-1</span>])+day)</div></pre></td></tr></table></figure>
<h2 id="while语句">while语句</h2>
<p>while语句的格式如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> 判断条件：</div><div class="line">    语句</div></pre></td></tr></table></figure>
<h3 id="while语句案例">while语句案例</h3>
<h4 id="简单案例">简单案例</h4>
<p>以下实例使用了 while 来计算 1 到 100 的总和：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ cat <span class="keyword">while</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">n = <span class="number">100</span></div><div class="line"></div><div class="line">sum = <span class="number">0</span></div><div class="line">counter = <span class="number">1</span></div><div class="line"><span class="keyword">while</span> counter &lt;= n:</div><div class="line">    sum = sum + counter</div><div class="line">    counter +=<span class="number">1</span></div><div class="line"></div><div class="line">print(<span class="string">"1 to %d sum up is: %d"</span>%(n, sum))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ python3 <span class="keyword">while</span>.py </div><div class="line"><span class="number">1</span> to <span class="number">100</span> sum up <span class="keyword">is</span>: <span class="number">5050</span></div></pre></td></tr></table></figure>
<h4 id="常量作为while的条件表达式">常量作为while的条件表达式</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">i = s = <span class="number">0</span></div><div class="line"><span class="keyword">while</span> i &lt;= <span class="number">10</span>:</div><div class="line"><span class="meta">... </span>s+=i</div><div class="line"><span class="meta">... </span>i+=<span class="number">1</span></div><div class="line">...</div><div class="line">print(s)</div><div class="line"><span class="number">55</span></div></pre></td></tr></table></figure>
<h4 id="break语句">break语句</h4>
<p>在while循环语句，满足一定条件时，用break跳出循环：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>i =s=<span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line"><span class="meta">... </span>    s+=i</div><div class="line"><span class="meta">... </span>    i+=<span class="number">1</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">if</span> i &gt; <span class="number">10</span>:</div><div class="line"><span class="meta">... </span>        <span class="keyword">break</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s)</div><div class="line"><span class="number">55</span></div></pre></td></tr></table></figure>
<h4 id="while案例">while案例</h4>
<p>用户输入若干个成绩，求所有成绩的平均分。每输入一个成绩后询问是否继续输入下一个成绩，回答yes就继续输入下一个成绩，回答no就停止输入成绩。 <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">numbers = []</div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    x = input(<span class="string">'请输入一个整数:'</span>)</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        numbers.append(int(x))</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        print(<span class="string">'不是整数'</span>)</div><div class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">        flag = input(<span class="string">'继续输入吗？（yes/no）'</span>)</div><div class="line">        <span class="keyword">if</span> flag.lower() <span class="keyword">not</span> <span class="keyword">in</span> (<span class="string">'yes'</span>,<span class="string">'no'</span>):</div><div class="line">            print(<span class="string">"只能输入yes或no"</span>)</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">break</span></div><div class="line">    <span class="keyword">if</span> flag.lower()==<span class="string">'no'</span>:</div><div class="line">        <span class="keyword">break</span></div><div class="line"></div><div class="line">print(sum(numbers)/len(numbers))</div></pre></td></tr></table></figure></p>
<h2 id="for语句">for语句</h2>
<p>Python中主要有两种形式的循环结构，for循环和while循环。while循环一般用于循环次数难以提前确定的情况；而for循环一般用于循环次数可以提前确定的情况，尤其适用于枚举或遍历序列或迭代对象中元素的场合。当循环带有else子句时，如果循环因子条件因为条件青工达不成立或序列遍历结束而自然结束时则执行else结构中的语句，如果循环是因为执行了break语句而导致循环提前结束则不执行else中的语句，其完整语法形式为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> 条件表达式：</div><div class="line">       循环体</div><div class="line"><span class="keyword">else</span>：</div><div class="line">    <span class="keyword">else</span> 子句代码块</div></pre></td></tr></table></figure>
<p>或者是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> 取值 <span class="keyword">in</span> 序列或迭代对象：</div><div class="line">    循环语句</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">else</span>子句代码块</div></pre></td></tr></table></figure>
<h3 id="for循环中常用的操作符">for循环中常用的操作符</h3>
<table>
<thead>
<tr class="header">
<th>操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt;</td>
<td>小于</td>
</tr>
<tr class="even">
<td>&lt;=</td>
<td>小于或等于</td>
</tr>
<tr class="odd">
<td>&gt;</td>
<td>大于</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>大于或等于</td>
</tr>
<tr class="odd">
<td>==</td>
<td>等于，比较对象是否相等</td>
</tr>
<tr class="even">
<td>!=</td>
<td>不等于</td>
</tr>
</tbody>
</table>
<h3 id="for循环案例">for循环案例</h3>
<h4 id="简单案例-1">简单案例</h4>
<p>使用for循环遍历：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">11</span>,<span class="number">1</span>):</div><div class="line"><span class="meta">... </span>s +=i</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s)</div><div class="line"><span class="number">110</span></div></pre></td></tr></table></figure>
<h4 id="带有else子句的循环结构">带有else子句的循环结构</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">101</span>):</div><div class="line"><span class="meta">... </span>s +=i</div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(s)</div><div class="line">...</div><div class="line"><span class="number">5050</span></div></pre></td></tr></table></figure>
<h4 id="带有while的循环结构">带有while的循环结构</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> i &lt;= <span class="number">100</span>:</div><div class="line"><span class="meta">... </span>s += i</div><div class="line"><span class="meta">... </span>i += i</div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(s)</div><div class="line">...</div><div class="line"><span class="number">5150</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="显示元组中的每个元素">显示元组中的每个元素</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">5</span>):</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">'The for loop is over'</span>)</div><div class="line">...</div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line">The <span class="keyword">for</span> loop <span class="keyword">is</span> over</div></pre></td></tr></table></figure>
<h4 id="打印字符串中的每个元素">打印字符串中的每个元素</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>hello = <span class="string">"world"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> hello:</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line">...</div><div class="line">w</div><div class="line">o</div><div class="line">r</div><div class="line">l</div><div class="line">d</div></pre></td></tr></table></figure>
<h4 id="根据索引显示每个字符">根据索引显示每个字符</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(len(hello)):</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line">...</div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"根据每个字符的索引显示每个字符"</span>)</div><div class="line">根据每个字符的索引显示每个字符</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(len(hello)):</div><div class="line"><span class="meta">... </span>print(hello[i])</div><div class="line">...</div><div class="line">w</div><div class="line">o</div><div class="line">r</div><div class="line">l</div><div class="line">d</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h3 id="range函数的用法">range()函数的用法</h3>
<p>range()函数经常与for循环配合使用，它的用法是<code>range(a,b,c)</code>，其中c为步长，a与b是范围，先看一个简单的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(range(<span class="number">0</span>,<span class="number">9</span>,<span class="number">1</span>)))</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(range(<span class="number">0</span>,<span class="number">9</span>,<span class="number">2</span>)))</div><div class="line">[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(range(<span class="number">0</span>,<span class="number">9</span>,<span class="number">3</span>)))</div><div class="line">[<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>]</div></pre></td></tr></table></figure>
<p>如果你需要遍历数字序列，可以使用内置range()函数。它会生成数列，例如:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</div><div class="line"><span class="meta">... </span>    print(i)</div><div class="line">...</div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div></pre></td></tr></table></figure>
<p>或者指定区间，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>,<span class="number">9</span>) :</div><div class="line">    print(i)</div><div class="line"> </div><div class="line">    </div><div class="line"><span class="number">5</span></div><div class="line"><span class="number">6</span></div><div class="line"><span class="number">7</span></div><div class="line"><span class="number">8</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="range函数控制循环次数">range()函数控制循环次数。</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</div><div class="line">        print((<span class="string">' * '</span>*i).center(n*<span class="number">3</span>))</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n, <span class="number">0</span>, <span class="number">-1</span>):</div><div class="line">        print((<span class="string">' * '</span>*i).center(n*<span class="number">3</span>))</div><div class="line">main(<span class="number">6</span>)</div></pre></td></tr></table></figure>
<h4 id="案例找出100以内能被3整除的正整数">案例：找出100以内能被3整除的正整数</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aliquot = []</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">100</span>):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> n % <span class="number">3</span> == <span class="number">0</span>:</div><div class="line"><span class="meta">... </span>aliquot.append(n)</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aliquot)</div><div class="line">[<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">15</span>, <span class="number">18</span>, <span class="number">21</span>, <span class="number">24</span>, <span class="number">27</span>, <span class="number">30</span>, <span class="number">33</span>, <span class="number">36</span>, <span class="number">39</span>, <span class="number">42</span>, <span class="number">45</span>, <span class="number">48</span>, <span class="number">51</span>, <span class="number">54</span>, <span class="number">57</span>, <span class="number">60</span>, <span class="number">63</span>, <span class="number">66</span>, <span class="number">69</span>, <span class="number">72</span>, <span class="number">75</span>, <span class="number">78</span>, <span class="number">81</span>, <span class="number">84</span>, <span class="number">87</span>, <span class="number">90</span>, <span class="number">93</span>, <span class="number">96</span>, <span class="number">99</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h4 id="for循环遍历序列类型对象">for循环遍历序列类型对象</h4>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>name_str = <span class="string">"test"</span> <span class="comment"># 字符串</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(name_str))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">str</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">for</span> <span class="title">i</span> <span class="title">in</span> <span class="title">name_str</span>:</span></div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="comment">##-----------##</span></div><div class="line">...</div><div class="line">t</div><div class="line">e</div><div class="line">s</div><div class="line">t</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>name_list = list(name_str) <span class="comment"># 列表</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(name_str)</div><div class="line">test</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> name_list: <span class="comment"># 列表的循环</span></div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="comment">##-----------##</span></div><div class="line">...</div><div class="line">t</div><div class="line">e</div><div class="line">s</div><div class="line">t</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>name_set = set(name_str) <span class="comment"># 集合</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(name_set)</div><div class="line">&#123;<span class="string">'e'</span>, <span class="string">'s'</span>, <span class="string">'t'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">##-----------##</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>name_tuple = tuple(name_str) <span class="comment"># 元组</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> name_tuple:</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="comment">##-----------##</span></div><div class="line">...</div><div class="line">t</div><div class="line">e</div><div class="line">s</div><div class="line">t</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>name_dict = &#123;<span class="string">"name"</span>: <span class="string">"qiwsir"</span>, <span class="string">"lang"</span>: <span class="string">"python"</span>, <span class="string">"website"</span>: <span class="string">"qiwsir.github.io"</span>&#125; <span class="comment"># 字典</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> name_dict:</div><div class="line"><span class="meta">... </span>print(i, <span class="string">"--&gt;"</span>, name_dict[i])</div><div class="line">...</div><div class="line">name --&gt; qiwsir</div><div class="line">lang --&gt; python</div><div class="line">website --&gt; qiwsir.github.io</div></pre></td></tr></table></figure>
<h4 id="遍历字典元素">遍历字典元素</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a_dict = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>,<span class="string">"lang"</span>:<span class="string">"python"</span>,<span class="string">"email"</span>:<span class="string">"qiwsir@gmail.com"</span>,<span class="string">"website"</span>:<span class="string">"www.itdiffer.com"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a_dict)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>, <span class="string">'email'</span>: <span class="string">'qiwsir@gmail.com'</span>, <span class="string">'website'</span>: <span class="string">'www.itdiffer.com'</span>&#125;</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k,v <span class="keyword">in</span> a_dict.items():</div><div class="line"><span class="meta">... </span>print(k,v)</div><div class="line">...</div><div class="line">name qiwsir</div><div class="line">lang python</div><div class="line">email qiwsir@gmail.com</div><div class="line">website www.itdiffer.com</div></pre></td></tr></table></figure>
<h4 id="案例计算两个列表中对应元素的和">案例：计算两个列表中对应元素的和</h4>
<p>两个列表分别为：a = [1,2,3,4,5]和b = [9,8,7,6,5]，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">71</span>,<span class="number">22</span>,<span class="number">663</span>,<span class="number">64</span>,<span class="number">15</span>] </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">19</span>,<span class="number">48</span>,<span class="number">74</span>,<span class="number">46</span>,<span class="number">54</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = []</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</div><div class="line"><span class="meta">... </span>c.append(a[i] + b[i])</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(c)</div><div class="line">[<span class="number">90</span>, <span class="number">70</span>, <span class="number">737</span>, <span class="number">110</span>, <span class="number">69</span>]</div></pre></td></tr></table></figure></p>
<h4 id="案例将值与键进行转换">案例：将值与键进行转换</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>yinfor = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>,<span class="string">"sit"</span>:<span class="string">"qiwsir.github.io"</span>,<span class="string">"lang"</span>:<span class="string">"python"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(yinfor)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>, <span class="string">'sit'</span>: <span class="string">'qiwsir.github.io'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>infor = &#123;&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k,v <span class="keyword">in</span> yinfor.items():</div><div class="line"><span class="meta">... </span>infor[v] = k</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(infor)</div><div class="line">&#123;<span class="string">'qiwsir'</span>: <span class="string">'name'</span>, <span class="string">'qiwsir.github.io'</span>: <span class="string">'sit'</span>, <span class="string">'python'</span>: <span class="string">'lang'</span>&#125;</div></pre></td></tr></table></figure>
<h4 id="案例字符的切片及循环">案例:字符的切片及循环</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>raw = <span class="string">"Do you love Python? Python is a good script"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>raw_list = raw.split(<span class="string">" "</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(raw_list)</div><div class="line">[<span class="string">'Do'</span>, <span class="string">'you'</span>, <span class="string">'love'</span>, <span class="string">'Python?'</span>, <span class="string">'Python'</span>, <span class="string">'is'</span>, <span class="string">'a'</span>, <span class="string">'good'</span>, <span class="string">'script'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i, string <span class="keyword">in</span> enumerate(raw_list):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> string == <span class="string">"Python"</span>:</div><div class="line"><span class="meta">... </span>raw_list[i] = <span class="string">"Ruby"</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(raw_list)</div><div class="line">[<span class="string">'Do'</span>, <span class="string">'you'</span>, <span class="string">'love'</span>, <span class="string">'Python?'</span>, <span class="string">'Ruby'</span>, <span class="string">'is'</span>, <span class="string">'a'</span>, <span class="string">'good'</span>, <span class="string">'script'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 发现有问题，继续修改：</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i, string <span class="keyword">in</span> enumerate(raw_list):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> <span class="string">"Python"</span> <span class="keyword">in</span> string:</div><div class="line"><span class="meta">... </span>raw_list[i] = <span class="string">"Ruby"</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(raw_list)</div><div class="line">[<span class="string">'Do'</span>, <span class="string">'you'</span>, <span class="string">'love'</span>, <span class="string">'Ruby'</span>, <span class="string">'Ruby'</span>, <span class="string">'is'</span>, <span class="string">'a'</span>, <span class="string">'good'</span>, <span class="string">'script'</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">" "</span>.join(raw_list))</div><div class="line">Do you love Ruby Ruby <span class="keyword">is</span> a good script</div></pre></td></tr></table></figure>
<h4 id="forelse求1到99中的整数根">for…else：求1到99中的整数根</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">99</span>,<span class="number">1</span>,<span class="number">-1</span>): <span class="comment"># n是从99到1的整数</span></div><div class="line"><span class="meta">... </span>root = sqrt(n) <span class="comment"># root是对n开根号</span></div><div class="line"><span class="meta">... </span><span class="keyword">if</span> root == int(root): <span class="comment"># 如果root是整数，就打印n，并中断</span></div><div class="line"><span class="meta">... </span>print(n)</div><div class="line"><span class="meta">... </span><span class="keyword">break</span></div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">"Nothing"</span>)</div><div class="line">...</div><div class="line"><span class="number">81</span></div></pre></td></tr></table></figure>
<h4 id="案例forbreak求200以内能被17整除的最大正整数">案例(for…break)：求200以内能被17整除的最大正整数</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">200</span>,<span class="number">0</span>,<span class="number">-2</span>):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> i%<span class="number">17</span> ==<span class="number">0</span>:</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="keyword">break</span></div><div class="line">...</div><div class="line"><span class="number">170</span></div></pre></td></tr></table></figure>
<h4 id="案例鸡兔同笼的问题">案例：鸡兔同笼的问题</h4>
<p>假设共有鸡、兔30只，脚90只，求鸡、兔各有多少只？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> cock <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">30</span>):</div><div class="line"><span class="meta">... </span>rabbit = <span class="number">30</span>-cock</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> rabbit*<span class="number">4</span> + cock*<span class="number">2</span>== <span class="number">90</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">'鸡的数量为'</span>,cock,<span class="string">'只'</span>)</div><div class="line"><span class="meta">... </span>print(<span class="string">'兔的数量为'</span>,rabbit,<span class="string">'只'</span>)</div><div class="line">...</div><div class="line">鸡的数量为 <span class="number">15</span> 只</div><div class="line">兔的数量为 <span class="number">15</span> 只</div></pre></td></tr></table></figure>
<h4 id="案例4求1100之间能被7整除但不能同时被5整除的所有整数">案例4：求1~100之间能被7整除，但不能同时被5整除的所有整数。</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">101</span>):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> (n%<span class="number">7</span> ==<span class="number">0</span>) <span class="keyword">and</span> n%<span class="number">5</span>!=<span class="number">0</span>:</div><div class="line"><span class="meta">... </span>print(n)</div><div class="line">...</div><div class="line"><span class="number">7</span></div><div class="line"><span class="number">14</span></div><div class="line"><span class="number">21</span></div><div class="line"><span class="number">28</span></div><div class="line"><span class="number">42</span></div><div class="line"><span class="number">49</span></div><div class="line"><span class="number">56</span></div><div class="line"><span class="number">63</span></div><div class="line"><span class="number">77</span></div><div class="line"><span class="number">84</span></div><div class="line"><span class="number">91</span></div><div class="line"><span class="number">98</span></div></pre></td></tr></table></figure>
<h4 id="案例输出水仙花数">案例：输出水仙花数</h4>
<p>所谓水仙花数，是指一个3位的十进制数，其余各位数字的立方和恰好等于该数本身。例如，153是水仙花数，因为<code>153=1^3+5^3+3^3</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>,<span class="number">1000</span>):</div><div class="line"><span class="meta">... </span>ge = i%<span class="number">10</span></div><div class="line"><span class="meta">... </span>shi = i//<span class="number">10</span>%<span class="number">10</span></div><div class="line"><span class="meta">... </span>bai = i//<span class="number">100</span></div><div class="line"><span class="meta">... </span><span class="keyword">if</span> ge**<span class="number">3</span> + shi**<span class="number">3</span> + bai**<span class="number">3</span> ==i:</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line">...</div><div class="line"><span class="number">153</span></div><div class="line"><span class="number">370</span></div><div class="line"><span class="number">371</span></div><div class="line"><span class="number">407</span></div></pre></td></tr></table></figure>
<h4 id="案例求200以内能被17整除的最大正整数">案例：求200以内能被17整除的最大正整数。</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">200</span>,<span class="number">0</span>,<span class="number">-2</span>):</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> i%<span class="number">17</span> ==<span class="number">0</span>:</div><div class="line"><span class="meta">... </span>print(i)</div><div class="line"><span class="meta">... </span><span class="keyword">break</span></div><div class="line">...</div><div class="line"><span class="number">170</span></div></pre></td></tr></table></figure>
<h4 id="案例9whilebreak判断一个数字的奇偶数">案例9：while…break判断一个数字的奇偶数</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">8</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> a:</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> a % <span class="number">2</span> == <span class="number">0</span>:</div><div class="line"><span class="meta">... </span><span class="keyword">break</span></div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">"%d is olld number"</span>%a)</div><div class="line"><span class="meta">... </span>a = <span class="number">0</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"%d is even number"</span>%a)</div><div class="line"><span class="number">8</span> <span class="keyword">is</span> even number</div></pre></td></tr></table></figure>
<p>当a=8的时候，执行循环体中的break跳出循环，执行最后的打印语句，得到结果8 is even number，如果a=9，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">9</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> a:</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> a % <span class="number">2</span> == <span class="number">0</span>:</div><div class="line"><span class="meta">... </span><span class="keyword">break</span></div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">"%d is odd number"</span>%a)</div><div class="line"><span class="meta">... </span>a = <span class="number">0</span></div><div class="line">...</div><div class="line"><span class="number">9</span> <span class="keyword">is</span> odd number</div></pre></td></tr></table></figure>
<p>此时会跳过break，进入else下面的语句。</p>
<h2 id="enumerate函数">enumerate函数</h2>
<p>enumerate()是python的内置函数。</p>
<p>enumerate在字典上是枚举、列举的意思，对于一个可迭代的（iterable）/可遍历的对象（如列表、字符串），enumerate将其组成一个索引序列，利用它可以同时获得索引和值。enumerate多用于在for循环中得到计数。</p>
<h3 id="同时得到一个元素的索引和内容">同时得到一个元素的索引和内容</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>seasons = [<span class="string">'Spring'</span>,<span class="string">'Summer'</span>,<span class="string">'Fall'</span>,<span class="string">'Winter'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(seasons)</div><div class="line">[<span class="string">'Spring'</span>, <span class="string">'Summer'</span>, <span class="string">'Fall'</span>, <span class="string">'Winter'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(enumerate(seasons)))</div><div class="line">[(<span class="number">0</span>, <span class="string">'Spring'</span>), (<span class="number">1</span>, <span class="string">'Summer'</span>), (<span class="number">2</span>, <span class="string">'Fall'</span>), (<span class="number">3</span>, <span class="string">'Winter'</span>)]</div></pre></td></tr></table></figure>
<h3 id="使用案例">使用案例</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>seasons = [<span class="string">'Spring'</span>,<span class="string">'Summer'</span>,<span class="string">'Fall'</span>,<span class="string">'Winter'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(seasons)</div><div class="line">[<span class="string">'Spring'</span>, <span class="string">'Summer'</span>, <span class="string">'Fall'</span>, <span class="string">'Winter'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(enumerate(seasons,start=<span class="number">3</span>)))</div><div class="line">[(<span class="number">3</span>, <span class="string">'Spring'</span>), (<span class="number">4</span>, <span class="string">'Summer'</span>), (<span class="number">5</span>, <span class="string">'Fall'</span>), (<span class="number">6</span>, <span class="string">'Winter'</span>)]</div></pre></td></tr></table></figure>
<h3 id="列表元素的提取">列表元素的提取</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>mylist = [<span class="string">"qiwsir"</span>,<span class="number">703</span>,<span class="string">'python'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(mylist)</div><div class="line">[<span class="string">'qiwsir'</span>, <span class="number">703</span>, <span class="string">'python'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(enumerate(mylist)))</div><div class="line">[(<span class="number">0</span>, <span class="string">'qiwsir'</span>), (<span class="number">1</span>, <span class="number">703</span>), (<span class="number">2</span>, <span class="string">'python'</span>)]</div></pre></td></tr></table></figure>
<h2 id="break语句-1">break语句</h2>
<p>break语句和continue语句在while循环及for循环中都可以使用，并且一般常与选择结构结合使用。break 语句可以跳出 for 和 while 的循环体。如果你从 for 或 while 循环中终止，任何对应的循环 else 块将不执行，如下所示：</p>
<h3 id="简单break案例">简单break案例</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">如果你需要遍历数字序列，可以使用内置range()函数。它会生成数列，例如: </div><div class="line"></div><div class="line">​```python</div><div class="line">&gt;&gt;&gt;<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</div><div class="line"><span class="meta">... </span>    print(i)</div><div class="line">...</div><div class="line"><span class="number">0</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line">​</div></pre></td></tr></table></figure>
<p>或者指定区间，如下所示：</p>
<p>​<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>,<span class="number">9</span>) :</div><div class="line">    print(i)</div><div class="line"> </div><div class="line">    </div><div class="line"><span class="number">5</span></div><div class="line"><span class="number">6</span></div><div class="line"><span class="number">7</span></div><div class="line"><span class="number">8</span></div><div class="line">&gt;&gt;&gt;</div><div class="line">​</div></pre></td></tr></table></figure></p>
<h4 id="range函数控制循环次数-1">range()函数控制循环次数。</h4>
<p>​<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</div><div class="line">        print((<span class="string">' * '</span>*i).center(n*<span class="number">3</span>))</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n, <span class="number">0</span>, <span class="number">-1</span>):</div><div class="line">        print((<span class="string">' * '</span>*i).center(n*<span class="number">3</span>))</div><div class="line">main(<span class="number">6</span>)</div><div class="line">​</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### break案例2：计算小于100的最大素数</div><div class="line">从下面的这个案例中就可以看出break语句在循环中的作用 。注：素质又叫质数，质数定义为在大于1的自然数中，除了1和它本身以外不再有其他因数。</div><div class="line"></div><div class="line">```python</div><div class="line">&gt;&gt;&gt; for n in range(100,1,-1):</div><div class="line">... for i in range(2,n):</div><div class="line">... if n%i == 0:</div><div class="line">... break</div><div class="line">... else:</div><div class="line">... print(n)</div><div class="line">... break</div><div class="line">...</div><div class="line">97</div></pre></td></tr></table></figure>
<h2 id="continue语句">continue语句</h2>
<p>continue语句被用来告诉Python跳过当前循环块中的剩余语句，然后继续进行下一轮循环，如下所示：</p>
<h3 id="continue案例1">continue案例1:</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ cat continue2.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> letter <span class="keyword">in</span> <span class="string">'Runoob'</span>:</div><div class="line">    <span class="keyword">if</span> letter == <span class="string">'o'</span>:</div><div class="line">        <span class="keyword">continue</span></div><div class="line">    print(<span class="string">'Currnet letter is: '</span>,letter)</div><div class="line"></div><div class="line">var = <span class="number">10</span></div><div class="line"><span class="keyword">while</span> var &gt; <span class="number">0</span>:</div><div class="line">    var = var <span class="number">-1</span></div><div class="line">    <span class="keyword">if</span> var == <span class="number">5</span>:  <span class="comment"># script will jump loop when var=5</span></div><div class="line">        <span class="keyword">continue</span></div><div class="line">    print(<span class="string">'Currnet variable is: '</span>,var)</div><div class="line">print(<span class="string">"Good bye!"</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ python3 continue2.py </div><div class="line">Currnet letter <span class="keyword">is</span>:  R</div><div class="line">Currnet letter <span class="keyword">is</span>:  u</div><div class="line">Currnet letter <span class="keyword">is</span>:  n</div><div class="line">Currnet letter <span class="keyword">is</span>:  b</div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">9</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">8</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">7</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">6</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">4</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">3</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">2</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">1</span></div><div class="line">Currnet variable <span class="keyword">is</span>:  <span class="number">0</span></div><div class="line">Good bye!</div></pre></td></tr></table></figure>
<h3 id="continue案例2">continue案例2:</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">9</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> a:</div><div class="line"><span class="meta">... </span><span class="keyword">if</span> a % <span class="number">2</span> == <span class="number">0</span>:</div><div class="line"><span class="meta">... </span>a = a<span class="number">-1</span></div><div class="line"><span class="meta">... </span><span class="keyword">continue</span> <span class="comment">#如果是偶数，就返回循环的开始</span></div><div class="line"><span class="meta">... </span><span class="keyword">else</span>:</div><div class="line"><span class="meta">... </span>print(<span class="string">"%d is olld number"</span>%a) <span class="comment">#如果是奇数，就打印出来</span></div><div class="line"><span class="meta">... </span>a = a<span class="number">-1</span></div><div class="line">...</div><div class="line"><span class="number">9</span> <span class="keyword">is</span> olld number</div><div class="line"><span class="number">7</span> <span class="keyword">is</span> olld number</div><div class="line"><span class="number">5</span> <span class="keyword">is</span> olld number</div><div class="line"><span class="number">3</span> <span class="keyword">is</span> olld number</div><div class="line"><span class="number">1</span> <span class="keyword">is</span> olld number</div></pre></td></tr></table></figure>
<h2 id="pass语句-1">pass语句</h2>
<p>Python pass是空语句，是为了保持程序结构的完整性。pass不做任何事情，一般用做占位语句，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;<span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line"><span class="meta">... </span>    <span class="keyword">pass</span>  <span class="comment"># 等待键盘中断 (Ctrl+C)</span></div></pre></td></tr></table></figure>
<h3 id="pass语句案例1">pass语句案例1</h3>
<p>在面向对象的程序设计中，pass语句经常这么使用，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEmptyClass</span>:</span></div><div class="line">    <span class="keyword">pass</span></div></pre></td></tr></table></figure>
<p>此时定义了一个类，只是现在没有具体想好怎么写它，先占一个空位。</p>
<h3 id="pass语句案例2">pass语句案例2</h3>
<p>以下代码在字母为<code>o</code>时执行pass语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ cat <span class="keyword">pass</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> letter <span class="keyword">in</span> <span class="string">'Runoob'</span>:</div><div class="line">    <span class="keyword">if</span> letter == <span class="string">'o'</span>:</div><div class="line">        <span class="keyword">pass</span></div><div class="line">        print(<span class="string">"Execute pass block"</span>)</div><div class="line">    print(<span class="string">'Current letter is :'</span>,letter)</div><div class="line"></div><div class="line">print(<span class="string">"Good, bye"</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">02</span>condition$ python3 <span class="keyword">pass</span>.py </div><div class="line">Current letter <span class="keyword">is</span> : R</div><div class="line">Current letter <span class="keyword">is</span> : u</div><div class="line">Current letter <span class="keyword">is</span> : n</div><div class="line">Execute <span class="keyword">pass</span> block</div><div class="line">Current letter <span class="keyword">is</span> : o</div><div class="line">Execute <span class="keyword">pass</span> block</div><div class="line">Current letter <span class="keyword">is</span> : o</div><div class="line">Current letter <span class="keyword">is</span> : b</div><div class="line">Good, bye</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/06/Python/Python学习笔记（6）-函数构建/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/06/Python/Python学习笔记（6）-函数构建/" itemprop="url">Python学习笔记（6）-函数构建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-06T12:00:00+08:00">
                2018-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,147
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  18
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="函数的构建格式">函数的构建格式</h2>
<p>在Python中，函数的构建要遵循一定的格式，如下所示：</p>
<ol style="list-style-type: decimal">
<li>函数代码块以 def 关键词开头，后接函数标识符名称和圆括号 ()。</li>
<li>任何传入参数和自变量必须放在圆括号中间，圆括号之间可以用于定义参数。</li>
<li>函数的第一行语句可以选择性地使用文档字符串—用于存放函数说明。</li>
<li>函数内容以冒号起始，并且缩进。</li>
<li><code>return [表达式]</code>结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回 None。</li>
</ol>
<p>Python函数的构建方法示意图如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180519/mJ5cgIJekH.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="一个简单的函数构建">一个简单的函数构建</h2>
<p>在下面的例子中，构建了一个将华氏度转换为摄氏度的函数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fahrenheit_coverter</span><span class="params">(C)</span>:</span></div><div class="line">    fahrenheit = C*<span class="number">9</span>/<span class="number">5</span> +<span class="number">32</span></div><div class="line">    <span class="keyword">return</span> str(fahrenheit) +<span class="string">' F'</span></div><div class="line">C2F = fahrenheit_coverter(<span class="number">35</span>)</div><div class="line">print(C2F)</div></pre></td></tr></table></figure>
<p>将上述文件保存在C盘，命名为test.py，运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python t.py</div><div class="line"><span class="number">95.0</span> F</div></pre></td></tr></table></figure>
<h2 id="在交互模式下定义函数">在交互模式下定义函数</h2>
<p> 如果在交互模式下面定义函数，解释器会显示三个小点来提醒你定义还没有完成，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">test_python</span><span class="params">()</span>:</span></div><div class="line">...</div></pre></td></tr></table></figure>
<p>在函数定义完毕的结尾，必须输入一行空白行。定义函数会创建一个函数类的对象，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">test_python</span><span class="params">()</span>:</span></div><div class="line"><span class="meta">... </span>    print(<span class="string">"I test def function"</span>)</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>test_python()</div><div class="line">I test <span class="function"><span class="keyword">def</span> <span class="title">function</span></span></div><div class="line"><span class="function">&gt;&gt;&gt;</span></div></pre></td></tr></table></figure>
<p>第一行：def test_python(): 定义函数</p>
<p>第二行：print(“I test def function”) 输入函数的内容，前面要空四格</p>
<p>第三行：是一空行，输入几个空格，直接回车就行；</p>
<p>第四行：继续回车，函数创建完毕，输入test_python()，显示结果。</p>
<h2 id="函数的嵌套">函数的嵌套</h2>
<p>在函数中也能创建函数，如下面的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_lyrics</span><span class="params">()</span>:</span></div><div class="line">    print(<span class="string">"I'm a lumberjack, and I'm okay."</span>)</div><div class="line">    print(<span class="string">"I sleep all night and I work all day."</span>)</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">repeat_lyrics</span><span class="params">()</span>:</span></div><div class="line">    print_lyrics()</div><div class="line">repeat_lyrics()</div></pre></td></tr></table></figure>
<p>运行后如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python test.py</div><div class="line">I<span class="string">'m a lumberjack, and I'</span>m okay.</div><div class="line">I sleep all night <span class="keyword">and</span> I work all day.</div></pre></td></tr></table></figure>
<h2 id="函数的参数传递">函数的参数传递</h2>
<p>在Python中，类型属于对象，变量是没有类型的，先看下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">a = <span class="string">"Runoob"</span></div></pre></td></tr></table></figure>
<p>在上述代码中，<code>[1, 2, 3]</code>是List类型，<code>&quot;Runoob&quot;</code>是String类型，而变量a是没有类型的，它仅仅是一个对象的引用（一个指针），它可以指向List类型的对象，也哦可以是指向String类型对象。</p>
<h2 id="可更改mutable与不可更改immutable对象">可更改(mutable)与不可更改(immutable)对象</h2>
<p>在python中，strings,tuples,和numbers是不可更改的对象，而list,dict等则是可以修改的对象。</p>
<ol style="list-style-type: decimal">
<li>不可变类型：变量赋值a=5后再赋值a=10，这里实际是新生成一个int值对象10，再让a指向它，而5被丢弃，不是改变a的值，相当于新生成了a。</li>
<li>可变类型：变量赋值la=[1,2,3,4]后再赋值la[2]=5则是将listla的第三个元素值更改，本身la没有动，只是其内部的一部分值被修改了。</li>
</ol>
<h2 id="python函数的参数传递">python函数的参数传递：</h2>
<ol style="list-style-type: decimal">
<li>不可变类型：如整数、字符串、元组。如fun（a），传递的只是a的值，没有影响a对象本身。比如在fun（a）内部修改a的值，只是修改另一个复制的对象，不会影响a本身。</li>
<li>可变类型：如列表，字典。如fun（la），则是将la真正的传过去，修改后fun外部的la也会受影响</li>
</ol>
<p>在python中，一切皆对象，严格意义上来讲，我们不能说值传递还是引用传递，我们应该说传不可变对象和传可变对象。</p>
<h2 id="python传不可变对象实例">python传不可变对象实例</h2>
<p>看这个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat para.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">ChangeInt</span><span class="params">(a)</span>:</span></div><div class="line">    a = <span class="number">10</span></div><div class="line"></div><div class="line">b = <span class="number">2</span></div><div class="line">ChangeInt(b)</div><div class="line">print(b)</div><div class="line"><span class="comment"># The result is 2</span></div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 para.py </div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<p>在这个案例中，有int对象2，指向它的变量是b，在传递给ChangeInt函数时，按传值的方式复制了变量b，a和b都指向了同一个Int对象，在a=10时，则新生成一个int值对象10，并让a指向它。</p>
<h2 id="python传可变对象实例">python传可变对象实例</h2>
<p>可变对象在函数里修改了参数，那么在调用这个函数的函数里，原始的参数也被改变了，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat para2.py</div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">changeme</span><span class="params">(mylist)</span>:</span></div><div class="line">    mylist.append([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</div><div class="line">    print(<span class="string">"The value inside function is: "</span>,mylist)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">mylist=[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>]</div><div class="line">changeme(mylist)</div><div class="line">print(<span class="string">"The value outside function is: "</span>,mylist)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 para2.py</div><div class="line">The value inside function <span class="keyword">is</span>:  [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</div><div class="line">The value outside function <span class="keyword">is</span>:  [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</div></pre></td></tr></table></figure>
<p>传入函数的和在末尾添加新内容的对象用的是同一个引用，因此输出了相同的结果。</p>
<h2 id="函数的参数">函数的参数</h2>
<p>以下是调用函数时可使用的正式参数类型：</p>
<ol style="list-style-type: decimal">
<li>必需参数</li>
<li>关键字参数</li>
<li>默认参数</li>
<li>不定长参数</li>
</ol>
<h3 id="必需参数">必需参数</h3>
<p>必需参数须以正确的顺序传入函数。调用时的数量必须和声明时的一样。调用printme()函数，你必须传入一个参数，不然会出现语法错误，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function1.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span><span class="params">(str)</span>:</span></div><div class="line">    print(str)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printme()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function1.py </div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"function1.py"</span>, line <span class="number">7</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    printme()</div><div class="line">TypeError: printme() missing <span class="number">1</span> required positional argument: <span class="string">'str'</span></div></pre></td></tr></table></figure>
<h3 id="关键字参数">关键字参数</h3>
<p>关键字参数和函数调用关系紧密，函数调用使用关键字参数来确定传入的参数值。使用关键字参数允许函数调用时参数的顺序与声明时不一致，因为 Python 解释器能够用参数名匹配参数值。以下实例在函数 printme() 调用时使用参数名：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function2.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span><span class="params">(str)</span>:</span></div><div class="line">    print(str)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printme(str=<span class="string">"Runoob tutorial"</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function2.py </div><div class="line">Runoob tutorial</div></pre></td></tr></table></figure>
<p>以下实例中演示了函数参数的使用不需要使用指定顺序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function3.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span><span class="params">(name, age)</span>:</span></div><div class="line">    print(<span class="string">"Name: "</span>,name)</div><div class="line">    print(<span class="string">"Age: "</span>,age)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printinfo(age=<span class="number">50</span>,name=<span class="string">"runoob"</span>)</div><div class="line">printinfo(<span class="string">"Zhang"</span>,<span class="number">20</span>)</div><div class="line">printinfo(<span class="number">20</span>,<span class="string">"Zhang"</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function3.py </div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">50</span></div><div class="line">Name:  Zhang</div><div class="line">Age:  <span class="number">20</span></div><div class="line">Name:  <span class="number">20</span></div><div class="line">Age:  Zhang</div></pre></td></tr></table></figure>
<p>从结果来看，如果不按顺序输入参数，那么可以使用赋值语句将实参直接赋值给相应的形参。</p>
<h3 id="默认参数">默认参数</h3>
<p>调用函数时，如果没有传递参数，则会使用默认参数。以下实例中如果没有传入age参数，则使用默认值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function4.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span><span class="params">(name,age=<span class="number">35</span>)</span>:</span></div><div class="line">    print(<span class="string">"Name: "</span>,name)</div><div class="line">    print(<span class="string">"Age: "</span>,age)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printinfo(age=<span class="number">50</span>, name=<span class="string">"runoob"</span>)</div><div class="line">print(<span class="string">"------------------------"</span>)</div><div class="line">printinfo(name=<span class="string">"runoob"</span>)</div><div class="line">printinfo(<span class="number">20</span>,<span class="string">"runoob"</span>)</div><div class="line">printinfo(<span class="string">"runoob"</span>,<span class="number">20</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function4.py </div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">50</span></div><div class="line">------------------------</div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">35</span></div><div class="line">Name:  <span class="number">20</span></div><div class="line">Age:  runoob</div><div class="line">Name:  runoob</div><div class="line">Age:  <span class="number">20</span></div></pre></td></tr></table></figure>
<h3 id="不定长参数">不定长参数</h3>
<p>你可能需要一个函数能处理比当初声明时更多的参数。这些参数叫做不定长参数，和上述2种参数不同，声明时不会命名。基本语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">functionname</span><span class="params">([formal_args,] *var_args_tuple )</span>:</span></div><div class="line">   <span class="string">"函数_文档字符串"</span></div><div class="line">   function_suite</div><div class="line">   <span class="keyword">return</span> [expression]</div></pre></td></tr></table></figure>
<p>加了星号（<code>*</code>）的变量名会存放所有未命名的变量参数。如果在函数调用时没有指定参数，它就是一个空元组。我们也可以不向函数传递未命名的变量。如下实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat function5.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span><span class="params">(arg1, *vartuple)</span>:</span></div><div class="line">    print(<span class="string">"Output: "</span>)</div><div class="line">    print(arg1)</div><div class="line">    <span class="keyword">for</span> var <span class="keyword">in</span> vartuple:</div><div class="line">        print(var)</div><div class="line">    <span class="keyword">return</span></div><div class="line"></div><div class="line">printinfo(<span class="number">10</span>)</div><div class="line">printinfo(<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 function5.py </div><div class="line">Output: </div><div class="line"><span class="number">10</span></div><div class="line">Output: </div><div class="line"><span class="number">11</span></div><div class="line"><span class="number">12</span></div><div class="line"><span class="number">13</span></div></pre></td></tr></table></figure>
<h2 id="匿名函数lambda">匿名函数lambda</h2>
<p>python使用lambda来创建匿名函数。所谓匿名，意即不再使用def语句这样标准的形式定义一个函数，它的特点如下：</p>
<ol style="list-style-type: decimal">
<li>lambda只是一个表达式，函数体比def简单很多。</li>
<li>lambda的主体是一个表达式，而不是一个代码块。仅仅能在lambda表达式中封装有限的逻辑进去。</li>
<li>lambda函数拥有自己的命名空间，且不能访问自己参数列表之外或全局命名空间里的参数。</li>
<li>虽然lambda函数看起来只能写一行，却不等同于C或C++的内联函数，后者的目的是调用小函数时不占用栈内存从而增加运行效率。</li>
</ol>
<p>语法格式如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">lambda</span> [arg1 [,arg2,.....argn]]:expression</div></pre></td></tr></table></figure></p>
<p>看一个简单的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">lambda</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">sum = <span class="keyword">lambda</span> arg1, arg2: arg1 + arg2</div><div class="line"><span class="comment"># 这里就是定义了一个函数，这个函数实现的功能就是两个数字相加</span></div><div class="line"></div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">10</span>, <span class="number">20</span>))</div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">20</span>,<span class="number">20</span>))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">lambda</span>.py </div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">30</span></div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">40</span></div></pre></td></tr></table></figure>
<p>上面的这个案例如果改成常规的函数写法，则是如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">lambda</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">sum = <span class="keyword">lambda</span> arg1, arg2: arg1 + arg2</div><div class="line"></div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">10</span>, <span class="number">20</span>))</div><div class="line">print(<span class="string">"The value summed is :  "</span>,sum(<span class="number">20</span>,<span class="number">20</span>))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">lambda</span>.py </div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">30</span></div><div class="line">The value summed <span class="keyword">is</span> :   <span class="number">40</span></div></pre></td></tr></table></figure>
<h3 id="匿名函数与普通函数的区别">匿名函数与普通函数的区别</h3>
<p>看下面的一段代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat <span class="keyword">lambda</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a,b)</span>:</span></div><div class="line">    <span class="keyword">return</span> a+b</div><div class="line">a=<span class="number">2</span></div><div class="line">b=<span class="number">3</span></div><div class="line">print(<span class="string">'a+b='</span>, add(a,b))</div><div class="line"></div><div class="line">a=<span class="number">2</span></div><div class="line">b=<span class="number">3</span></div><div class="line">addl = <span class="keyword">lambda</span> a,b:a+b</div><div class="line">print(<span class="string">'a+b='</span>,addl(a,b))</div><div class="line"></div><div class="line">print(<span class="string">'type(add(a,b)):'</span>,type(add(a,b)))</div><div class="line">print(<span class="string">'type(addl):'</span>,type(addl))</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 <span class="keyword">lambda</span>.py </div><div class="line">a+b= <span class="number">5</span></div><div class="line">a+b= <span class="number">5</span></div><div class="line">type(add(a,b)): &lt;<span class="class"><span class="keyword">class</span> '<span class="title">int</span>'&gt;</span></div><div class="line"><span class="class"><span class="title">type</span><span class="params">(addl)</span>:</span> &lt;<span class="class"><span class="keyword">class</span> '<span class="title">function</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>从上面我们可以看见add(a,b)的类型是int，而addl(a,b)的类型则是函数。从这里也能看出Lambda表达式确实是一种函数的表示方式。lambda的一般形式是关键字lambda后面跟一个或多个参数，紧跟一个冒号，以后是一个表达式。lambda是一个表达式而不是一个语句。它能够出现在python语法不允许def出现的地方。</p>
<h3 id="lambda案例第1快速组建列表">lambda案例第1:快速组建列表</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = <span class="keyword">lambda</span> x:x**<span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>l = [list1(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(l)</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>]</div></pre></td></tr></table></figure>
<h3 id="lambda函数减少函数命名">lambda函数：减少函数命名</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat lambda1.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">many</span><span class="params">(n)</span>:</span></div><div class="line">        <span class="keyword">return</span> n*f</div><div class="line">    <span class="keyword">return</span> many</div><div class="line">food = input(<span class="string">'What kind of fruti do you like?'</span>)</div><div class="line">f = eat(food)</div><div class="line">print(f(<span class="number">5</span>))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 lambda1.py </div><div class="line">What kind of fruti do you like? Yes</div><div class="line"> Yes Yes Yes Yes Yes</div></pre></td></tr></table></figure>
<p>上述代码改写为lambda则是如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> n:f*n</div><div class="line">    </div><div class="line">food = input(<span class="string">'What kind of fruit do you like?'</span>)</div><div class="line">f = eat(food)</div><div class="line">print(f(<span class="number">5</span>))</div></pre></td></tr></table></figure>
<p>再看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat original.py <span class="comment"># 这是原代码</span></div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line">freshfruit = [<span class="string">' banana'</span>,<span class="string">' loganberry '</span>,<span class="string">'passion fruit'</span>] <span class="comment"># 建立一个列表</span></div><div class="line">print(freshfruit) <span class="comment">#显示列表，发现前2个元素有空格</span></div><div class="line">list3 =[w.strip() <span class="keyword">for</span> w <span class="keyword">in</span> freshfruit] <span class="comment"># 去除空格</span></div><div class="line">print(list3) <span class="comment">#空格去掉后的效果</span></div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 original.py </div><div class="line">[<span class="string">' banana'</span>, <span class="string">' loganberry '</span>, <span class="string">'passion fruit'</span>]</div><div class="line">[<span class="string">'banana'</span>, <span class="string">'loganberry'</span>, <span class="string">'passion fruit'</span>]</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat original_trans.py <span class="comment"># 改写为lambda形式</span></div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">freshfruit = [<span class="string">' banana'</span>,<span class="string">' loganberry '</span>,<span class="string">'passion fruit'</span>]</div><div class="line">list3 = list(map(<span class="keyword">lambda</span> x:x.strip(),freshfruit))</div><div class="line"><span class="comment"># lambda x:x.strip()这里就相当于一个函数，map则是将这个函数映射到freshfruit的每个元素上</span></div><div class="line">print(list3)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 original_trans.py </div><div class="line">[<span class="string">'banana'</span>, <span class="string">'loganberry'</span>, <span class="string">'passion fruit'</span>]</div></pre></td></tr></table></figure>
<h3 id="案例使用列表推导式实现嵌套列表的平铺如下所示">案例：使用列表推导式实现嵌套列表的平铺，如下所示：</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>vec = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print([num <span class="keyword">for</span> elem <span class="keyword">in</span> vec <span class="keyword">for</span> num <span class="keyword">in</span> elem])</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div></pre></td></tr></table></figure>
<p>这个列表推导式中有2个循环，第1个循环可以看作是外循环，执行得慢，第2个循环是内循环，执行得快，上面代码等价于下面的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat test1.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">vec = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]]</div><div class="line">result = []</div><div class="line"><span class="keyword">for</span> elem <span class="keyword">in</span> vec:</div><div class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> elem:</div><div class="line">        result.append(num)</div><div class="line">print(result)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 test1.py </div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div></pre></td></tr></table></figure>
<h3 id="案例过滤掉不合条件的元素">案例：过滤掉不合条件的元素</h3>
<p>列表推导式中可以使用if语句来进行筛选，只在结果列表中保留符合条件的元素，下面的代码是过滤当前目录下的所有文件，只保留以<code>.py</code>结尾的文件，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print([filename <span class="keyword">for</span> filename <span class="keyword">in</span> os.listdir(<span class="string">'.'</span>) <span class="keyword">if</span> filename.endswith(<span class="string">'.py'</span>)])</div><div class="line">[<span class="string">'a.py'</span>, <span class="string">'count_line.py'</span>, <span class="string">'practice.py'</span>, <span class="string">'python.py'</span>, <span class="string">'t.py'</span>]</div></pre></td></tr></table></figure></p>
<p>代码解释：</p>
<ol style="list-style-type: decimal">
<li><code>os.listdir()</code>方法用于返回指定的文件夹包含的文件或文件夹的名字的列表。这个列表以字母顺序，括号中的参数可以是路径，例如c:，也可以不加，用’.’来表示。</li>
<li><code>endswith()</code>方法用于判断字符串是否以指定后缀结尾，如果以指定后缀结尾返回True，否则返回False。可选参数“start”与“end”为检索字符串的开始与结束位置。</li>
</ol>
<h3 id="案例过滤满足一定条件的元素">案例：过滤满足一定条件的元素</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list4= [<span class="number">-1</span>, <span class="number">-4</span>, <span class="number">6</span>, <span class="number">7.5</span> ,<span class="number">-2.3</span>, <span class="number">9</span>, <span class="number">-11</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list4)</div><div class="line">[<span class="number">-1</span>, <span class="number">-4</span>, <span class="number">6</span>, <span class="number">7.5</span>, <span class="number">-2.3</span>, <span class="number">9</span>, <span class="number">-11</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>result = [i <span class="keyword">for</span> i <span class="keyword">in</span> list4 <span class="keyword">if</span> i &lt; <span class="number">0</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(result)</div><div class="line">[<span class="number">-1</span>, <span class="number">-4</span>, <span class="number">-2.3</span>, <span class="number">-11</span>]</div></pre></td></tr></table></figure>
<h2 id="带有返回值的函数">带有返回值的函数</h2>
<p><code>return[表达式]</code>语句用于退出函数，选择性地向调用方返回一个表达式。不带参数值的<code>return</code>语句返回<code>None</code>，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">return</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">(arg1, arg2)</span>:</span></div><div class="line">    total = arg1 + arg2</div><div class="line">    print(<span class="string">"Inside function is :  "</span>,total)</div><div class="line">    <span class="keyword">return</span> total</div><div class="line"></div><div class="line">total = sum(<span class="number">10</span>, <span class="number">20</span>)</div><div class="line">print(<span class="string">"Outside function is : "</span>,total)</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">return</span>.py </div><div class="line">Inside function <span class="keyword">is</span> :   <span class="number">30</span></div><div class="line">Outside function <span class="keyword">is</span> :  <span class="number">30</span></div></pre></td></tr></table></figure>
<h2 id="变量作用域">变量作用域</h2>
<p>Python中，程序的变量并不是在哪个位置都可以访问的，访问权限决定于这个变量是在哪里赋值的。变量的作用域决定了在哪一部分程序可以访问哪个特定的变量名称。Python的作用域一共有4种，分别是： 1. L（Local）局部作用域</p>
<ol start="2" style="list-style-type: decimal">
<li><p>E（Enclosing）闭包函数外的函数中</p></li>
<li><p>G（Global）全局作用域</p></li>
<li><p>B（Built-in）内建作用域</p></li>
</ol>
<p>Pyhton以<code>L–&gt;E–&gt;G–&gt;B</code>的规则查找，即：在局部找不到，便会去局部外的局部找（例如闭包），再找不到就会去全局找，再者去内建中找，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">x = int(<span class="number">2.9</span>)  <span class="comment"># 内建作用域</span></div><div class="line"> </div><div class="line">g_count = <span class="number">0</span>  <span class="comment"># 全局作用域</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></div><div class="line">    o_count = <span class="number">1</span>  <span class="comment"># 闭包函数外的函数中</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></div><div class="line">        i_count = <span class="number">2</span>  <span class="comment"># 局部作用域</span></div></pre></td></tr></table></figure>
<p>Python中只有<code>模块（module）</code>，<code>类（class）</code>以及函数<code>（def、lambda）</code>才会引入新的作用域，其它的代码块（如<code>if/elif/else/</code>、<code>try/except</code>、<code>for/while</code>等）是不会引入新的作用域的，也就是说这些语句内定义的变量，外部也可以访问，如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> <span class="keyword">True</span>:</div><div class="line"><span class="meta">... </span>    msg = <span class="string">"I am a learner"</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>msg</div><div class="line"><span class="string">'I am a learner'</span></div></pre></td></tr></table></figure>
<p>在这个案例中，msg变量定义在if语句块中，但外部还是可以访问的。如果将msg定义在函数中，则它就是局部变量，外部不能访问，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat local_variable.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></div><div class="line">    msg_inner = <span class="string">"I am a learner"</span></div><div class="line"></div><div class="line">print(msg_inner)</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 local_variable.py </div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"local_variable.py"</span>, line <span class="number">6</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    print(msg_inner)</div><div class="line">NameError: name <span class="string">'msg_inner'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</div></pre></td></tr></table></figure>
<p>从错误提示就能看出，msg_inner并示未定义，因为它是局部变量，只能在函数内部使用。</p>
<h2 id="全局变量和局部变量">全局变量和局部变量</h2>
<p>定义在函数内部的变量拥有一个局部作用域，定义在函数外的拥有全局作用域。局部变量只能在其被声明的函数内部访问，而全局变量可以在整个程序范围内访问。调用函数时，所有在函数内声明的变量名称都将被加入到作用域中，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat global_local_variable.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">total = <span class="number">0</span> </div><div class="line"><span class="comment"># this is a global variable</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span><span class="params">(arg1, arg2)</span>:</span></div><div class="line">    total = arg1 + arg2</div><div class="line">    <span class="comment"># Here, total is a local variable</span></div><div class="line">    print(<span class="string">"Variable inside function is local variable: "</span>,total)</div><div class="line">    <span class="keyword">return</span> total</div><div class="line"></div><div class="line">sum(<span class="number">10</span>, <span class="number">20</span>)</div><div class="line">print(<span class="string">"Variable outside function is global variable: "</span>,total)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 global_local_variable.py </div><div class="line">Variable inside function <span class="keyword">is</span> local variable:  <span class="number">30</span></div><div class="line">Variable outside function <span class="keyword">is</span> <span class="keyword">global</span> variable:  <span class="number">0</span></div></pre></td></tr></table></figure>
<h2 id="global和nonlocal关键字">global和nonlocal关键字</h2>
<p>当内部作用域想修改外部作用域的变量时，就要用到global和nonlocal关键字，在下面的案例中，修改了全局变量num：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat <span class="keyword">nonlocal</span>.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">num = <span class="number">1</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">global</span> num <span class="comment"># need to keyword "global" for statement</span></div><div class="line">    print(num)</div><div class="line">    num = <span class="number">123</span></div><div class="line">    print(num)</div><div class="line"></div><div class="line">fun1()</div><div class="line"></div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 <span class="keyword">nonlocal</span>.py </div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">123</span></div></pre></td></tr></table></figure>
<p>如果要修改嵌套作用域（enclosing作用域，外层非全局作用域）中的变量则需要nonlocal关键字了，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat nonlocal2.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">()</span>:</span></div><div class="line">    num = <span class="number">10</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></div><div class="line">        <span class="keyword">nonlocal</span> num </div><div class="line">        num = <span class="number">100</span></div><div class="line">        print(num)</div><div class="line">    inner()</div><div class="line">    print(num)</div><div class="line">outer()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 nonlocal2.py </div><div class="line"><span class="number">100</span></div><div class="line"><span class="number">100</span></div></pre></td></tr></table></figure>
<p>再看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ cat action_scope_error.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">a = <span class="number">10</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></div><div class="line">    a = a + <span class="number">1</span></div><div class="line">    print(a)</div><div class="line">test()</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">01</span>basic$ python3 action_scope_error.py </div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"action_scope_error.py"</span>, line <span class="number">7</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">    test()</div><div class="line">  File <span class="string">"action_scope_error.py"</span>, line <span class="number">5</span>, <span class="keyword">in</span> test</div><div class="line">    a = a + <span class="number">1</span></div><div class="line">UnboundLocalError: local variable <span class="string">'a'</span> referenced before assignment</div></pre></td></tr></table></figure>
<p>错误信息为局部作用域引用错误，因为test函数中的a使用的是局部变量，未定义，无法修改。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/05/Python/Python学习笔记（5）-数据类型之集合/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/05/Python/Python学习笔记（5）-数据类型之集合/" itemprop="url">Python学习笔记（5）-数据类型之集合</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-05T12:00:00+08:00">
                2018-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,004
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  9
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="集合的定义">集合的定义</h2>
<p>集合是无序可变序列，使用一对大括号（这一点和字典比较类似）作为界定符，元素之间使用逗号分隔，同一个集合内的每个元素都是唯一的，元素之间不允许重复。</p>
<p>集合的英文是set，其特点是：</p>
<ol style="list-style-type: decimal">
<li>有的可变，有的不可变；元素无次充，不可重复。</li>
<li>元组(tuple）是列表（list）和字符串（str）的杂合，集合(set）是list和dict的杂合。</li>
<li>集合用<code>{}</code>来定义 ，其中的元素没有序列，并且集合中的元素不可重利，类似于dict的键。</li>
<li>集合可以在原处修改。</li>
</ol>
<h2 id="集合的创建">集合的创建</h2>
<h3 id="使用set进行创建">使用set()进行创建</h3>
<p>可以使用set()直接创建集合，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = set(<span class="string">"qiwsir"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'s'</span>, <span class="string">'i'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(s1))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">set</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>从结果可以看出，qiwsir中有两个i，但在s1中则只有一个i，即集合中的元素不能重复，如果原来的数据中存在重复的元素，则转换为集合时就只保留一个，再看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = set([<span class="number">123</span>,<span class="string">"google"</span>,<span class="string">"face"</span>,<span class="string">"book"</span>,<span class="string">"facebook"</span>,<span class="string">"book"</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s2)</div><div class="line">&#123;<span class="string">'google'</span>, <span class="number">123</span>, <span class="string">'book'</span>, <span class="string">'face'</span>, <span class="string">'facebook'</span>&#125;</div></pre></td></tr></table></figure>
<p>从结果可以看出，创建集合的时候与显示集合的时候，元素的顺序不同，这说明集合中的元素没有顺序。再看一案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = set(<span class="string">"qiwsir"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'s'</span>, <span class="string">'i'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1[<span class="number">1</span>] = [<span class="string">"I"</span>]</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">TypeError: <span class="string">'set'</span> object does <span class="keyword">not</span> support item assignment</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'s'</span>, <span class="string">'i'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>&#125;</div></pre></td></tr></table></figure>
<p>这说明，集合不是序列类型，不能用索引方式对其进行修改。</p>
<p>### 直接使用大括号创建集合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="number">3</span>, <span class="number">5</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">&#123;<span class="number">3</span>, <span class="number">5</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">set</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>集合中只能包含数字、字符串、元组等不可变类型（或者说可哈希）的数据，而不能包括列表、字典、集合等可变类型的数据。python提供了一个内置函数hash()来计算对象的哈希值，凡是无法计算哈希值（调用hash()函数时抛出异常）的对象都不能作为集合的元素，也不能作为字典对象的“键”。</p>
<h2 id="集合的转换">集合的转换</h2>
<p>类型名称函数能够实现类型的转换，例如str()可以将对象转化为字符串，用list()和set()能够将集合和列表进行转换，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = set(<span class="string">"qiwsir"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'s'</span>, <span class="string">'i'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst = list(s1)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(lst)</div><div class="line">[<span class="string">'s'</span>, <span class="string">'i'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>lst[<span class="number">1</span>] = <span class="string">"I"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(lst)</div><div class="line">[<span class="string">'s'</span>, <span class="string">'I'</span>, <span class="string">'r'</span>, <span class="string">'q'</span>, <span class="string">'w'</span>]</div></pre></td></tr></table></figure>
<h2 id="集合元素的添加">集合元素的添加</h2>
<p>集合元素的添加使用<code>add()</code>方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a_set = &#123;<span class="string">'a'</span>,<span class="string">"i"</span>,<span class="string">"1"</span>,<span class="number">1</span>&#125; <span class="comment">#创建集合</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a_set)</div><div class="line">&#123;<span class="string">'i'</span>, <span class="string">'1'</span>, <span class="string">'a'</span>, <span class="number">1</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(a_set)) <span class="comment">#查看对象的类型</span></div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">set</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">a_set</span>.<span class="title">add</span><span class="params">(<span class="string">"qiwsir"</span>)</span> # 添加一个元素</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">print</span><span class="params">(a_set)</span></span></div><div class="line">&#123;1, 'a', 'i', '1', 'qiwsir'&#125;</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b_set = set(<span class="string">"python"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(b_set))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">set</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">print</span><span class="params">(b_set)</span></span></div><div class="line">&#123;'h', 'o', 'y', 't', 'n', 'p'&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b_set.add(<span class="string">"test"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(b_set)</div><div class="line">&#123;<span class="string">'h'</span>, <span class="string">'o'</span>, <span class="string">'y'</span>, <span class="string">'test'</span>, <span class="string">'t'</span>, <span class="string">'n'</span>, <span class="string">'p'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="合并集合">合并集合</h2>
<p>update()方法用于合并另外一个集合的元素到当前集合中，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = &#123;<span class="string">'a'</span>,<span class="string">'b'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'a'</span>, <span class="string">'b'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = &#123;<span class="string">'github'</span>,<span class="string">'qiwsir'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s2)</div><div class="line">&#123;<span class="string">'qiwsir'</span>, <span class="string">'github'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1.update(s2)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s1)</div><div class="line">&#123;<span class="string">'github'</span>, <span class="string">'qiwsir'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>&#125;</div></pre></td></tr></table></figure></p>
<h2 id="集合的运行">集合的运行</h2>
<p>字典和集合的in操作比列表快很多。因为python字典和集合使用hash表来存储元素，因此元素查找操作非常快，这就直接决定了关键字in作用于字典和集合时比作用于列表要快得多，看一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> random</div><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line">x = list(range(<span class="number">10000</span>))</div><div class="line"><span class="comment"># 生成列表</span></div><div class="line"></div><div class="line">y = set(range(<span class="number">10000</span>))</div><div class="line"><span class="comment"># 生成集合</span></div><div class="line"></div><div class="line">z = dict(zip(range(<span class="number">1000</span>),range(<span class="number">10000</span>)))</div><div class="line"><span class="comment"># 生成字典</span></div><div class="line"></div><div class="line">r = random.randint(<span class="number">0</span>,<span class="number">9999</span>)</div><div class="line"><span class="comment"># 生成随机数</span></div><div class="line"></div><div class="line">start = time.time()</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9999999</span>):</div><div class="line">    r <span class="keyword">in</span> x</div><div class="line">print(<span class="string">'list, time used: '</span>,time.time() - start)</div><div class="line"></div><div class="line">start = time.time()</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9999999</span>):</div><div class="line">    r <span class="keyword">in</span> y </div><div class="line">print(<span class="string">'set, time used: '</span>,time.time() - start)</div><div class="line"></div><div class="line">start = time.time()</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">999999999</span>):</div><div class="line">     r <span class="keyword">in</span> z</div><div class="line">print(<span class="string">'dict, time used: '</span>,time.time() - start)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">C:\Users\<span class="number">20161111</span>&gt;python a.py</div><div class="line">list, time used:  <span class="number">1369.371190071106</span></div><div class="line">set, time used:  <span class="number">1.289543867111206</span></div><div class="line">dict, time used:  <span class="number">95.13067197799683</span></div></pre></td></tr></table></figure>
<h2 id="删除set中的元素">删除set中的元素</h2>
<h3 id="pop函数">pop()函数</h3>
<p>pop()随机删除并返回集全中的一个元素，如果集合为空，则抛出异常，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.pop()</div><div class="line"><span class="string">'b'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="remove方法">remove()方法</h3>
<p>remove()方法用于删除集合中的元素，如果指定元素不存在，就抛出异常，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.remove(<span class="string">"test"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="discard方法">discard()方法</h3>
<p>discard()方法用于从集合中删除一个特定的元素，如果元素不在集合中，则忽略该操作，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.discard(<span class="string">"test"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="remove与discard的区别">remove()与discard()的区别</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.discard(<span class="string">"test"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.discard(<span class="string">"test"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>&#125;</div></pre></td></tr></table></figure>
<p>所实现的目的与remove一样，区别在于如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.discard(<span class="string">"5"</span>)</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>运行结果：无</p>
<p>而remove()的结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.remove(<span class="string">"5"</span>)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">KeyError: <span class="string">'5'</span>&gt;&gt;&gt; s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.remove(<span class="string">"5"</span>)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">KeyError: <span class="string">'5'</span></div></pre></td></tr></table></figure>
<p>remove与discard的区别在于，remove在删除指定的元素时，如果此元素不在set中，则就会出错，如果是discard删除，不存在此元素时，则不返回任何值。</p>
<h3 id="clear清除所有元素">clear()清除所有元素</h3>
<p>clear()方法清空集合中的所有元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3= &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="number">123</span>,<span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">&#123;<span class="string">'b'</span>, <span class="number">123</span>, <span class="string">'a'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(bool(s3)) <span class="comment">#有元素，则返回True</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s3.clear()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s3)</div><div class="line">set()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(bool(s3)) <span class="comment"># 无元素返回False</span></div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure>
<h2 id="集合冻结">集合冻结</h2>
<p>frozenset() 返回一个冻结的集合，冻结后集合不能再添加或删除任何元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s4 = frozenset(<span class="string">"test000"</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s4)</div><div class="line">frozenset(&#123;<span class="string">'0'</span>, <span class="string">'s'</span>, <span class="string">'e'</span>, <span class="string">'t'</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s4.add(<span class="string">"python"</span>)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">AttributeError: <span class="string">'frozenset'</span> object has no attribute <span class="string">'add'</span></div></pre></td></tr></table></figure>
<h2 id="集合的运算">集合的运算</h2>
<h3 id="判断两个集合的从属关系">判断两个集合的从属关系</h3>
<p>in()：元素与集合的关系可以用in来进行判断，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5)</div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"123"</span> <span class="keyword">in</span> s5) <span class="comment"># "123"是否在集合s5中</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"123--"</span> <span class="keyword">in</span> s5) <span class="comment"># "123---"是否在集合s5中</span></div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure></p>
<h3 id="集合与集合的关系">集合与集合的关系</h3>
<p>集合与集合的关系可以用<code>==,!=,&gt;,&lt;,issuperset,issubset</code>来表示，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5)</div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s6 = &#123;<span class="string">"543"</span>,<span class="number">123</span>,<span class="number">993</span>,<span class="string">"test001"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s6)</div><div class="line">&#123;<span class="string">'test001'</span>, <span class="number">993</span>, <span class="number">123</span>, <span class="string">'543'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s7 = &#123;<span class="string">"123"</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7)</div><div class="line">&#123;<span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5 == s6) <span class="comment"># s5是否与s6等同</span></div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5 != s6) <span class="comment"># s5是否与s6等同</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7 &lt; s5) <span class="comment"># s7是否是s5的子集</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7.issubset(s5)) <span class="comment"># s7是否是s5的子集</span></div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5.issuperset(s7)) <span class="comment"># s5是否是s7的超集</span></div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure>
<h3 id="集合求并集">集合求并集(<code>|</code>)</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5)</div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s6 = &#123;<span class="string">"543"</span>,<span class="number">123</span>,<span class="number">993</span>,<span class="string">"test001"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s6)</div><div class="line">&#123;<span class="string">'test001'</span>, <span class="number">993</span>, <span class="number">123</span>, <span class="string">'543'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s7 = &#123;<span class="string">"123"</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7)</div><div class="line">&#123;<span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5|s6) <span class="comment"># 求s5和s6的并集</span></div><div class="line">&#123;<span class="number">993</span>, <span class="string">'test001'</span>, <span class="string">'543'</span>, <span class="string">'123'</span>, <span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'test'</span>, <span class="number">123</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5.union(s7)) <span class="comment"># 求s5和s7的并集</span></div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'test'</span>, <span class="string">'123'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="集合求交集">集合求交集(<code>&amp;</code>)</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5)</div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s6 = &#123;<span class="string">"543"</span>,<span class="number">123</span>,<span class="number">993</span>,<span class="string">"test001"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s6)</div><div class="line">&#123;<span class="string">'test001'</span>, <span class="number">993</span>, <span class="number">123</span>, <span class="string">'543'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s7 = &#123;<span class="string">"123"</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7)</div><div class="line">&#123;<span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5 &amp; s6) <span class="comment"># 求s5和s6的交集</span></div><div class="line">set()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5.intersection(s7)) <span class="comment"># 求s5和s7的交集</span></div><div class="line">&#123;<span class="string">'123'</span>, <span class="string">'test'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="集合求差集-">集合求差集（<code>-</code>）</h3>
<p>差集如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180519/kD5jhGlLG3.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>代码为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5)</div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'test'</span>, <span class="string">'123'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s6 = &#123;<span class="string">"543"</span>,<span class="number">123</span>,<span class="number">993</span>,<span class="string">"test001"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s6)</div><div class="line">&#123;<span class="number">993</span>, <span class="string">'test001'</span>, <span class="number">123</span>, <span class="string">'543'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s7 = &#123;<span class="string">"123"</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s7)</div><div class="line">&#123;<span class="string">'test'</span>, <span class="string">'123'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5 - s6) <span class="comment"># 求s5和s6的差集</span></div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>, <span class="string">'test'</span>, <span class="string">'123'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5.difference(s7)) <span class="comment"># 求s5和s7的差集</span></div><div class="line">&#123;<span class="number">432</span>, <span class="string">'678'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="集合的对称差集">集合的对称差集（）</h3>
<p>对称差集示意图如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180519/gcjJk5D08H.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>代码为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>s5 = &#123;<span class="string">"123"</span>,<span class="string">"678"</span>,<span class="number">432</span>,<span class="string">'123'</span>,<span class="string">"test"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s8 = &#123;<span class="string">"123"</span>,<span class="string">"test"</span>,<span class="number">9999</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(s5.symmetric_difference(s8)) <span class="comment"># 求s5和s7的对称差集</span></div><div class="line">&#123;<span class="number">9999</span>, <span class="number">432</span>, <span class="string">'678'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="集合推导式">集合推导式</h2>
<p>Python支持集合推导式，集合推导式使用的是大括号，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>squared = &#123;x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(squared)</div><div class="line">&#123;<span class="number">1</span>, <span class="number">4</span>&#125;</div></pre></td></tr></table></figure>
<p>再看另外一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;x.strip() <span class="keyword">for</span> x <span class="keyword">in</span> (<span class="string">' he '</span>, <span class="string">'she '</span>, <span class="string">' I'</span>)&#125;</div><div class="line">&#123;<span class="string">'I'</span>, <span class="string">'he'</span>, <span class="string">'she'</span>&#125;</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = &#123;random.randint(<span class="number">1</span>,<span class="number">500</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>)&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 生成随机数，自动去除重复元素</span></div><div class="line"><span class="meta">... </span>len(x)</div><div class="line"><span class="number">94</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;str(x) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)&#125;</div><div class="line">&#123;<span class="string">'2'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, <span class="string">'0'</span>, <span class="string">'4'</span>, <span class="string">'7'</span>, <span class="string">'9'</span>, <span class="string">'8'</span>, <span class="string">'3'</span>, <span class="string">'1'</span>&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/04/Python/Python学习笔记（4）-数据类型之字典/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/04/Python/Python学习笔记（4）-数据类型之字典/" itemprop="url">Python学习笔记（4）-数据类型之字典</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-04T12:00:00+08:00">
                2018-04-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,988
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  19
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="字典的定义">字典的定义</h2>
<p>字典包括一系列的索引，不过就已经不叫索引了，而是叫键，然后还对应着一个值，叫键值。每个键对应着各自的一个单独的键值。这种键和键值的对应关系也叫键值对，有时候也叫项。其中，“键：值”元素的无序可变序列，字典中的每个元素包括“键”和“值”两部分，表示一种映射或对应关系，也称为关联数组。定义字典时，每个元素的“键”和“值”用冒号分隔，不同元素之间用逗号分隔，所有的元素放在一对大括号中。字典就像是一个列表一样，但更加泛化了，是列表概念的推广。在列表里面，索引必须是整数；而在字典里面，你可以用几乎任何类型来做索引了。用数学语言来说，一个字典就代表了从键到键值的一种映射关系，所以你也可以说每个键映射到一个键值。举例来说，我们可以建立一个从英语单词映射到西班牙语单词的字典，这样键和简直就都是字符串了。</p>
<h2 id="建立字典">建立字典</h2>
<h3 id="使用dict函数">使用dict()函数</h3>
<p>dict这个函数创建一个没有项目的空字典，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp = dict()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp</div><div class="line">&#123;&#125;</div></pre></td></tr></table></figure>
<p>其中，大括号代表了一个空字典，要在字典里添加项（项是指字典的键与值的对应关系，也叫键值对），可以使用方括号，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp[<span class="string">'one'</span>] = <span class="string">'uno'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp</div><div class="line">&#123;<span class="string">'one'</span>: <span class="string">'uno'</span>&#125;</div></pre></td></tr></table></figure>
<p>也可以采用直接给定的“键：值”来创建字典，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>d = dict(name = <span class="string">'Dong'</span>, age = <span class="number">37</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(d)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'age'</span>: <span class="number">37</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="通过dict转化为字典">通过dict转化为字典</h3>
<p>如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>keys = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>values = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dictionary = dict(zip(keys,values))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(dictionary)</div><div class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'d'</span>: <span class="number">4</span>&#125;</div></pre></td></tr></table></figure>
<p>给定内容为“键”，创建“值”为空的字典：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>adict = dict.fromkeys([<span class="string">'name'</span>,<span class="string">'age'</span>,<span class="string">'sex'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(adict)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="keyword">None</span>, <span class="string">'age'</span>: <span class="keyword">None</span>, <span class="string">'sex'</span>: <span class="keyword">None</span>&#125;</div></pre></td></tr></table></figure>
<p>fromkeys() 方法用于创建一个新的字典，并以可迭代对象中的元素分别作为字典中的键，且所有键对应同一个值，默认为None。</p>
<h2 id="字典的修改">字典的修改</h2>
<p>当以指定“键”为下标，并为字典元素赋值时，有两种含义：①若该“键”存在，则表示修改该“键”对应的值；②若该键不存在，则表示添加一个新的“键：值”，也就是添加一个新元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict =&#123;<span class="string">'age'</span>:<span class="number">35</span>, <span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict)</div><div class="line">&#123;<span class="string">'age'</span>: <span class="number">35</span>, <span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict[<span class="string">'age'</span>] = <span class="number">38</span> <span class="comment">#修改元素值</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict[<span class="string">'address'</span>] = <span class="string">'SDIBT'</span> <span class="comment"># 添加新元素</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict)</div><div class="line">&#123;<span class="string">'age'</span>: <span class="number">38</span>, <span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>, <span class="string">'address'</span>: <span class="string">'SDIBT'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="添加字典更新字典">添加字典——更新字典</h2>
<p>update()方法可以将另一个字典的“键：值”一次性全部添加到当前的字典对象，如果两个字典中存在相同的“键”，则以另外一个字典中的“值”为准对当前字典进行更新，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict.items())</div><div class="line">dict_items([(<span class="string">'age'</span>, <span class="number">37</span>), (<span class="string">'score'</span>, [<span class="number">98</span>, <span class="number">97</span>]), (<span class="string">'name'</span>, <span class="string">'Dong'</span>), (<span class="string">'sex'</span>, <span class="string">'male'</span>)])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.update(&#123;<span class="string">'a'</span>:<span class="number">97</span>, <span class="string">'age'</span>:<span class="number">39</span>&#125;) <span class="comment"># 修改'age'键的值，同时添加新元素'a':97</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict)</div><div class="line">&#123;<span class="string">'age'</span>: <span class="number">39</span>, <span class="string">'score'</span>: [<span class="number">98</span>, <span class="number">97</span>], <span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>, <span class="string">'a'</span>: <span class="number">97</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="删除字典-del函数">删除字典-del函数</h2>
<p>del可以删除整个字典，也可以删除字典中指定的元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict)</div><div class="line">&#123;<span class="string">'age'</span>: <span class="number">37</span>, <span class="string">'score'</span>: [<span class="number">98</span>, <span class="number">97</span>], <span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> aDict</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">NameError: name <span class="string">'aDict'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDIct</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">NameError: name <span class="string">'aDIct'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</div></pre></td></tr></table></figure>
<h2 id="删除字典-pop和popitem方法">删除字典-pop()和popitem()方法</h2>
<p>(1)pop() 方法删除字典给定键 key 所对应的值，返回值为被删除的值。key值必须给出。 否则，返回default值。</p>
<p>(2)popitem() 方法随机返回并删除字典中的一对键和值(一般删除末尾对)。</p>
<p>如果字典已经为空，却调用了此方法，就报出KeyError异常，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.popitem() <span class="comment"># 弹出一个元素，如果是空字典，则会抛出异常</span></div><div class="line">(<span class="string">'sex'</span>, <span class="string">'male'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.pop(<span class="string">'age'</span>)</div><div class="line"><span class="number">37</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(aDict) <span class="comment"># 弹出指定键对应的元素</span></div><div class="line">&#123;<span class="string">'score'</span>: [<span class="number">98</span>, <span class="number">97</span>], <span class="string">'name'</span>: <span class="string">'Dong'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="随机删除字典元素">随机删除字典元素</h2>
<p>dd.popitem()的功能是随机删除字典中的一个元素，并将所删除的值返回，运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dd  = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>,<span class="string">"lang"</span>:<span class="string">"python"</span>,<span class="string">"web"</span>:<span class="string">"www.itdiffer.com"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(dd.popitem())</div><div class="line">(<span class="string">'web'</span>, <span class="string">'www.itdiffer.com'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(dd)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="字典的清除">字典的清除</h2>
<p>字典的清除使用clear()方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.clear()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">&#123;&#125;</div></pre></td></tr></table></figure>
<p>清除与删除是两种不同的操作，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a.clear()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">&#123;&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> a</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">NameError: name <span class="string">'a'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</div></pre></td></tr></table></figure>
<h2 id="访问项键值">访问项（键：值）</h2>
<p>字典中的项没有顺序，因此也没有索引，但可以通过键来直接查找键值，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp = &#123;<span class="string">'one'</span>: <span class="string">'uno'</span>, <span class="string">'three'</span>: <span class="string">'tres'</span>, <span class="string">'two'</span>: <span class="string">'dose'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp[<span class="string">'three'</span>] = <span class="string">'tres'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp[<span class="string">'two'</span>] = <span class="string">'dose'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp</div><div class="line">&#123;<span class="string">'one'</span>: <span class="string">'uno'</span>, <span class="string">'three'</span>: <span class="string">'tres'</span>, <span class="string">'two'</span>: <span class="string">'dose'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>eng2sp</div><div class="line">&#123;<span class="string">'one'</span>: <span class="string">'uno'</span>, <span class="string">'three'</span>: <span class="string">'tres'</span>, <span class="string">'two'</span>: <span class="string">'dose&#125;</span></div><div class="line"><span class="string">&gt;&gt;&gt; eng2sp['</span>one<span class="string">']</span></div><div class="line"><span class="string">'</span>uno<span class="string">'</span></div></pre></td></tr></table></figure>
<h2 id="访问项get函数">访问项——get()函数</h2>
<p>get()函数用法：get() 函数返回指定键的值，如果值不在字典中返回默认值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.get(<span class="string">'age'</span>) <span class="comment"># 如果字典中存在该"键"，则返回对应的值</span></div><div class="line"><span class="number">37</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.get(<span class="string">'address'</span>,<span class="string">'Not Exists'</span>) <span class="comment"># 指定的"键"不存在，返回指定的默认值</span></div><div class="line"><span class="string">'Not Exists'</span></div></pre></td></tr></table></figure>
<h2 id="访问项setdefault-函数">访问项——<strong>setdefault()</strong> 函数</h2>
<p>此方法用于返回指定“键”对应的“值”，如果字典中不存在该“键”，就添加一个新元素，并设置该键对应的值，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.setdefault(<span class="string">'address'</span>,<span class="string">'SDIBT'</span>) <span class="comment"># 添加新元素</span></div><div class="line"><span class="string">'SDIBT'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict</div><div class="line">&#123;<span class="string">'age'</span>: <span class="number">37</span>, <span class="string">'score'</span>: [<span class="number">98</span>, <span class="number">97</span>], <span class="string">'name'</span>: <span class="string">'Dong'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>, <span class="string">'address'</span>: <span class="string">'SDIBT'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="访问项遍历字典">访问项——遍历字典</h2>
<p>对字典对象进行迭代时，默认是遍历字典的键，如果使用items()方法返回字典中的元素，即所有的项（项这里是指“键：值”对）。字典对象的keys()方法返回所有的值，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict=&#123;<span class="string">'age'</span>:<span class="number">37</span>, <span class="string">'score'</span>:[<span class="number">98</span>,<span class="number">97</span>],<span class="string">'name'</span>:<span class="string">'Dong'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> aDict:</div><div class="line"><span class="meta">... </span>print(item)</div><div class="line">...</div><div class="line">age</div><div class="line">score</div><div class="line">name</div><div class="line">sex</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> aDict.items():</div><div class="line"><span class="meta">... </span>print(item)</div><div class="line">...</div><div class="line">(<span class="string">'age'</span>, <span class="number">37</span>)</div><div class="line">(<span class="string">'score'</span>, [<span class="number">98</span>, <span class="number">97</span>])</div><div class="line">(<span class="string">'name'</span>, <span class="string">'Dong'</span>)</div><div class="line">(<span class="string">'sex'</span>, <span class="string">'male'</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.items()</div><div class="line">dict_items([(<span class="string">'age'</span>, <span class="number">37</span>), (<span class="string">'score'</span>, [<span class="number">98</span>, <span class="number">97</span>]), (<span class="string">'name'</span>, <span class="string">'Dong'</span>), (<span class="string">'sex'</span>, <span class="string">'male'</span>)])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.keys()</div><div class="line">dict_keys([<span class="string">'age'</span>, <span class="string">'score'</span>, <span class="string">'name'</span>, <span class="string">'sex'</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>aDict.values()</div><div class="line">dict_values([<span class="number">37</span>, [<span class="number">98</span>, <span class="number">97</span>], <span class="string">'Dong'</span>, <span class="string">'male'</span>])</div></pre></td></tr></table></figure>
<h2 id="同置函数对字典的处理">同置函数对字典的处理</h2>
<p>内置函数len()，max()，min()，sum()，sorted()以及成员测试运算符in也适用于字典对象，但默认作用于字典的“键”，若想作用于元素，即“键：值”对，则需要使用字典的对象items()方法，若作用于“值”，则需要使用valules()方法。</p>
<h2 id="案例实战字典应用">案例实战：字典应用</h2>
<p>案例实战：字典应用 　　下面的一段代码会生成包括1000个随机字符的字符串，然后统计每具字符的出现次数。</p>
<p>包解释：</p>
<ol style="list-style-type: decimal">
<li><code>string:String</code>模块包含许多有用的常量和类，以及一些不推荐的遗留函数，这些函数也可以作为字符串上的方法使用。此外，Python的内置字符串类支持序列类型(str、Unicode、list、tuple、byteArray、Buffer、xrange)中描述的序列类型方法，以及String方法部分中描述的特定字符串的方法。若要输出格式化字符串，可以使用模板字符串或字符串格式操作部分的%运算符。另外，有关基于正则表达式的字符串函数，请参见re模块。</li>
<li><code>random:</code>这个模块是用于实现各种分页的伪随机数生成器。对于整数来说，它可以从一个范围内进行均匀选择，对于序列来说，此模块中的有可以均匀选择一个元素的函数，以及生成一个随机排列的列表的耿发，以及用于不放回抽样的函数。</li>
</ol>
<p>代码解释：</p>
<ol style="list-style-type: decimal">
<li><code>ascii_letters</code>是生成所有字母，从a-z和A-Z</li>
<li><code>digits</code>是生成所有数字0-9.</li>
<li><code>punctuation</code>生成标点符号</li>
<li><code>random.choice</code>随机选择一个元素</li>
</ol>
<h3 id="第种方案最常规的实现方法">第１种方案：最常规的实现方法</h3>
<p>代码如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> string</div><div class="line"><span class="keyword">import</span> random</div><div class="line">x = string.ascii_letters + string.digits + string.punctuation</div><div class="line">y = [random.choice(x) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>)]</div><div class="line"><span class="comment"># 生成包含1000个随机字符的列表</span></div><div class="line"></div><div class="line">z = <span class="string">''</span>.join(y)</div><div class="line"><span class="comment"># 把列表中的字符连接成字符串</span></div><div class="line">d = dict()</div><div class="line"><span class="comment"># 空字典</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> ch <span class="keyword">in</span> z:</div><div class="line"> d[ch] = d.get(ch,<span class="number">0</span>) + <span class="number">1</span></div><div class="line"><span class="comment"># 修改每个字符的频次</span></div><div class="line">print(d)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">D:\&gt;python test.py</div><div class="line">&#123;<span class="string">'&#125;'</span>: <span class="number">11</span>, <span class="string">'r'</span>: <span class="number">11</span>, <span class="string">'Z'</span>: <span class="number">15</span>, <span class="string">'I'</span>: <span class="number">5</span>, <span class="string">'a'</span>: <span class="number">19</span>, <span class="string">'T'</span>: <span class="number">13</span>, <span class="string">'#'</span>: <span class="number">15</span>, <span class="string">'U'</span>: <span class="number">8</span>, <span class="string">'\\'</span>: <span class="number">11</span>, <span class="string">'g'</span>: <span class="number">15</span>, <span class="string">'-'</span>: <span class="number">10</span>, <span class="string">'M'</span>: <span class="number">15</span>, <span class="string">'3'</span>: <span class="number">13</span>, <span class="string">'d'</span>: <span class="number">12</span>, <span class="string">'K'</span>: <span class="number">14</span>, <span class="string">'f'</span>: <span class="number">7</span>, <span class="string">'v'</span>: <span class="number">9</span>, <span class="string">'&gt;'</span>: <span class="number">6</span>, <span class="string">'2'</span>: <span class="number">9</span>, <span class="string">'='</span>: <span class="number">12</span>, <span class="string">'&lt;'</span>: <span class="number">10</span>, <span class="string">'6'</span>: <span class="number">15</span>, <span class="string">'m'</span>: <span class="number">16</span>, <span class="string">'V'</span>: <span class="number">15</span>, <span class="string">'?'</span>: <span class="number">8</span>, <span class="string">'F'</span>: <span class="number">13</span>, <span class="string">'c'</span>: <span class="number">15</span>, <span class="string">'5'</span>: <span class="number">17</span>, <span class="string">')'</span>: <span class="number">11</span>, <span class="string">'!'</span>: <span class="number">5</span>, <span class="string">'Y'</span>: <span class="number">8</span>, <span class="string">'l'</span>: <span class="number">15</span>, <span class="string">'e'</span>: <span class="number">13</span>, <span class="string">'P'</span>: <span class="number">6</span>, <span class="string">'&amp;'</span>: <span class="number">9</span>, <span class="string">'['</span>: <span class="number">15</span>, <span class="string">'@'</span>: <span class="number">13</span>, <span class="string">'+'</span>: <span class="number">6</span>, <span class="string">'t'</span>: <span class="number">13</span>, <span class="string">']'</span>: <span class="number">14</span>, <span class="string">'O'</span>: <span class="number">12</span>, <span class="string">'G'</span>: <span class="number">16</span>, <span class="string">'k'</span>: <span class="number">11</span>, <span class="string">'R'</span>: <span class="number">16</span>, <span class="string">'L'</span>: <span class="number">12</span>, <span class="string">'8'</span>: <span class="number">13</span>, <span class="string">'`'</span>: <span class="number">10</span>, <span class="string">'W'</span>: <span class="number">11</span>, <span class="string">'S'</span>: <span class="number">15</span>, <span class="string">'E'</span>: <span class="number">13</span>, <span class="string">'N'</span>: <span class="number">11</span>, <span class="string">'~'</span>: <span class="number">11</span>, <span class="string">'9'</span>: <span class="number">7</span>, <span class="string">'i'</span>: <span class="number">9</span>, <span class="string">','</span>: <span class="number">12</span>, <span class="string">'_'</span>: <span class="number">10</span>, <span class="string">'|'</span>: <span class="number">9</span>, <span class="string">'q'</span>: <span class="number">17</span>, <span class="string">'J'</span>: <span class="number">12</span>, <span class="string">"'"</span>: <span class="number">12</span>, <span class="string">'&#123;'</span>: <span class="number">10</span>, <span class="string">'u'</span>: <span class="number">6</span>, <span class="string">'1'</span>: <span class="number">9</span>, <span class="string">'0'</span>: <span class="number">8</span>, <span class="string">'$'</span>: <span class="number">11</span>, <span class="string">'b'</span>: <span class="number">12</span>, <span class="string">'A'</span>: <span class="number">11</span>, <span class="string">'('</span>: <span class="number">12</span>, <span class="string">'z'</span>: <span class="number">5</span>, <span class="string">'x'</span>: <span class="number">8</span>, <span class="string">'4'</span>: <span class="number">10</span>, <span class="string">'/'</span>: <span class="number">12</span>, <span class="string">'*'</span>: <span class="number">11</span>, <span class="string">'o'</span>: <span class="number">11</span>, <span class="string">'p'</span>: <span class="number">11</span>, <span class="string">'Q'</span>: <span class="number">7</span>, <span class="string">':'</span>: <span class="number">7</span>, <span class="string">'s'</span>: <span class="number">12</span>, <span class="string">'.'</span>: <span class="number">7</span>, <span class="string">'D'</span>: <span class="number">4</span>, <span class="string">'^'</span>: <span class="number">6</span>, <span class="string">'%'</span>: <span class="number">8</span>, <span class="string">'X'</span>: <span class="number">8</span>, <span class="string">'"'</span>: <span class="number">8</span>, <span class="string">'y'</span>: <span class="number">9</span>, <span class="string">'w'</span>: <span class="number">9</span>, <span class="string">'n'</span>: <span class="number">10</span>, <span class="string">'H'</span>: <span class="number">11</span>, <span class="string">'B'</span>: <span class="number">9</span>, <span class="string">';'</span>: <span class="number">10</span>, <span class="string">'h'</span>: <span class="number">8</span>, <span class="string">'j'</span>: <span class="number">8</span>, <span class="string">'C'</span>: <span class="number">3</span>, <span class="string">'7'</span>: <span class="number">3</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="第种方案上述代码可以更改为">第２种方案：上述代码可以更改为：</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> string</div><div class="line"><span class="keyword">import</span> random</div><div class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</div><div class="line"></div><div class="line">x = string.ascii_letters + string.digits + string.punctuation</div><div class="line">y = [random.choice(x) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>)]</div><div class="line"><span class="comment"># 生成包含1000个随机字符的列表</span></div><div class="line"></div><div class="line">z = <span class="string">''</span>.join(y)</div><div class="line"><span class="comment"># 把列表中的字符连接成字符串</span></div><div class="line"></div><div class="line">frequences = defaultdict(int)</div><div class="line"></div><div class="line">print(frequences)</div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> z:</div><div class="line"> frequences[item] += <span class="number">1</span></div><div class="line"></div><div class="line">print(frequences.items())</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> D:\&gt;python test.py</div><div class="line">defaultdict(&lt;class 'int'&gt;, &#123;&#125;)</div><div class="line">dict_items([(<span class="string">'I'</span>, <span class="number">14</span>), (<span class="string">"'"</span>, <span class="number">9</span>), (<span class="string">':'</span>, <span class="number">13</span>), (<span class="string">'|'</span>, <span class="number">9</span>), (<span class="string">'k'</span>, <span class="number">10</span>), (<span class="string">'['</span>, <span class="number">9</span>), (<span class="string">'E'</span>, <span class="number">13</span>), (<span class="string">'T'</span>, <span class="number">11</span>), (<span class="string">'K'</span>, <span class="number">12</span>), (<span class="string">'n'</span>, <span class="number">18</span>), (<span class="string">'a'</span>, <span class="number">8</span>), (<span class="string">'-'</span>, <span class="number">13</span>), (<span class="string">'Y'</span>, <span class="number">12</span>), (<span class="string">'&#123;'</span>, <span class="number">16</span>), (<span class="string">'2'</span>, <span class="number">11</span>), (<span class="string">'.'</span>, <span class="number">10</span>), (<span class="string">'z'</span>, <span class="number">9</span>), (<span class="string">'?'</span>, <span class="number">15</span>), (<span class="string">'_'</span>, <span class="number">8</span>), (<span class="string">'A'</span>, <span class="number">13</span>), (<span class="string">'U'</span>, <span class="number">11</span>), (<span class="string">'C'</span>, <span class="number">14</span>), (<span class="string">'O'</span>, <span class="number">14</span>), (<span class="string">'1'</span>, <span class="number">11</span>), (<span class="string">'p'</span>, <span class="number">12</span>), (<span class="string">'`'</span>, <span class="number">7</span>), (<span class="string">'6'</span>, <span class="number">11</span>), (<span class="string">'j'</span>, <span class="number">11</span>), (<span class="string">'&lt;'</span>, <span class="number">8</span>), (<span class="string">'$'</span>, <span class="number">16</span>), (<span class="string">'\\'</span>, <span class="number">7</span>), (<span class="string">'Z'</span>, <span class="number">11</span>), (<span class="string">'3'</span>, <span class="number">10</span>), (<span class="string">'W'</span>, <span class="number">14</span>), (<span class="string">'i'</span>, <span class="number">10</span>), (<span class="string">'x'</span>, <span class="number">8</span>), (<span class="string">'q'</span>, <span class="number">9</span>), (<span class="string">'%'</span>, <span class="number">10</span>), (<span class="string">'B'</span>, <span class="number">7</span>), (<span class="string">'M'</span>, <span class="number">12</span>), (<span class="string">'&amp;'</span>, <span class="number">16</span>), (<span class="string">'N'</span>, <span class="number">13</span>), (<span class="string">'9'</span>, <span class="number">14</span>), (<span class="string">'&#125;'</span>, <span class="number">7</span>), (<span class="string">'Q'</span>, <span class="number">8</span>), (<span class="string">'!'</span>, <span class="number">10</span>), (<span class="string">'/'</span>, <span class="number">10</span>), (<span class="string">'J'</span>, <span class="number">13</span>), (<span class="string">'s'</span>, <span class="number">13</span>), (<span class="string">'G'</span>, <span class="number">8</span>), (<span class="string">'5'</span>, <span class="number">11</span>), (<span class="string">'e'</span>, <span class="number">19</span>), (<span class="string">'L'</span>, <span class="number">6</span>), (<span class="string">'u'</span>, <span class="number">9</span>), (<span class="string">'g'</span>, <span class="number">10</span>), (<span class="string">'7'</span>, <span class="number">16</span>), (<span class="string">'f'</span>, <span class="number">8</span>), (<span class="string">'+'</span>, <span class="number">14</span>), (<span class="string">'0'</span>, <span class="number">12</span>), (<span class="string">'"'</span>, <span class="number">10</span>), (<span class="string">'('</span>, <span class="number">17</span>), (<span class="string">'b'</span>, <span class="number">6</span>), (<span class="string">'&gt;'</span>, <span class="number">9</span>), (<span class="string">'m'</span>, <span class="number">10</span>), (<span class="string">'v'</span>, <span class="number">11</span>), (<span class="string">'h'</span>, <span class="number">12</span>), (<span class="string">'y'</span>, <span class="number">9</span>), (<span class="string">'l'</span>, <span class="number">10</span>), (<span class="string">'r'</span>, <span class="number">16</span>), (<span class="string">']'</span>, <span class="number">13</span>), (<span class="string">'^'</span>, <span class="number">12</span>), (<span class="string">'~'</span>, <span class="number">8</span>), (<span class="string">'4'</span>, <span class="number">14</span>), (<span class="string">'o'</span>, <span class="number">10</span>), (<span class="string">'w'</span>, <span class="number">10</span>), (<span class="string">'@'</span>, <span class="number">11</span>), (<span class="string">'X'</span>, <span class="number">10</span>), (<span class="string">'S'</span>, <span class="number">6</span>), (<span class="string">'#'</span>, <span class="number">10</span>), (<span class="string">'c'</span>, <span class="number">6</span>), (<span class="string">'R'</span>, <span class="number">14</span>), (<span class="string">'H'</span>, <span class="number">15</span>), (<span class="string">','</span>, <span class="number">8</span>), (<span class="string">'D'</span>, <span class="number">11</span>), (<span class="string">'='</span>, <span class="number">8</span>), (<span class="string">'8'</span>, <span class="number">5</span>), (<span class="string">')'</span>, <span class="number">11</span>), (<span class="string">'*'</span>, <span class="number">2</span>), (<span class="string">'d'</span>, <span class="number">7</span>), (<span class="string">'V'</span>, <span class="number">11</span>), (<span class="string">';'</span>, <span class="number">5</span>), (<span class="string">'t'</span>, <span class="number">8</span>), (<span class="string">'P'</span>, <span class="number">8</span>), (<span class="string">'F'</span>, <span class="number">4</span>)])</div></pre></td></tr></table></figure>
<h3 id="第种方案">第３种方案：</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> string</div><div class="line"><span class="keyword">import</span> random</div><div class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</div><div class="line"></div><div class="line">x = string.ascii_letters + string.digits + string.punctuation</div><div class="line">y = [random.choice(x) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>)]</div><div class="line"><span class="comment"># 生成包含1000个随机字符的列表</span></div><div class="line"></div><div class="line">z = <span class="string">''</span>.join(y)</div><div class="line"><span class="comment"># 把列表中的字符连接成字符串</span></div><div class="line"></div><div class="line">frequences = Counter(z)</div><div class="line">print(frequences.items())</div><div class="line">print(frequences.most_common(<span class="number">1</span>))</div><div class="line">print(frequences.most_common(<span class="number">3</span>))</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">D:\&gt;python test.py</div><div class="line">dict_items([(<span class="string">'!'</span>, <span class="number">4</span>), (<span class="string">':'</span>, <span class="number">6</span>), (<span class="string">'A'</span>, <span class="number">9</span>), (<span class="string">'e'</span>, <span class="number">6</span>), (<span class="string">'R'</span>, <span class="number">5</span>), (<span class="string">'*'</span>, <span class="number">16</span>), (<span class="string">'2'</span>, <span class="number">6</span>), (<span class="string">'m'</span>, <span class="number">17</span>), (<span class="string">'"'</span>, <span class="number">6</span>), (<span class="string">'&#123;'</span>, <span class="number">9</span>), (<span class="string">'i'</span>, <span class="number">13</span>), (<span class="string">'\\'</span>, <span class="number">8</span>), (<span class="string">'r'</span>, <span class="number">8</span>), (<span class="string">'/'</span>, <span class="number">10</span>), (<span class="string">'&gt;'</span>, <span class="number">9</span>), (<span class="string">'f'</span>, <span class="number">14</span>), (<span class="string">'#'</span>, <span class="number">18</span>), (<span class="string">'w'</span>, <span class="number">13</span>), (<span class="string">']'</span>, <span class="number">8</span>), (<span class="string">'J'</span>, <span class="number">9</span>), (<span class="string">'V'</span>, <span class="number">12</span>), (<span class="string">'s'</span>, <span class="number">13</span>), (<span class="string">'&#125;'</span>, <span class="number">11</span>), (<span class="string">'Q'</span>, <span class="number">12</span>), (<span class="string">'5'</span>, <span class="number">13</span>), (<span class="string">'k'</span>, <span class="number">9</span>), (<span class="string">'t'</span>, <span class="number">10</span>), (<span class="string">'S'</span>, <span class="number">9</span>), (<span class="string">'='</span>, <span class="number">7</span>), (<span class="string">'n'</span>, <span class="number">13</span>), (<span class="string">'7'</span>, <span class="number">13</span>), (<span class="string">'p'</span>, <span class="number">7</span>), (<span class="string">'X'</span>, <span class="number">13</span>), (<span class="string">'~'</span>, <span class="number">5</span>), (<span class="string">'.'</span>, <span class="number">15</span>), (<span class="string">'E'</span>, <span class="number">15</span>), (<span class="string">'&amp;'</span>, <span class="number">12</span>), (<span class="string">'B'</span>, <span class="number">9</span>), (<span class="string">'q'</span>, <span class="number">14</span>), (<span class="string">"'"</span>, <span class="number">8</span>), (<span class="string">'U'</span>, <span class="number">13</span>), (<span class="string">'Z'</span>, <span class="number">7</span>), (<span class="string">'F'</span>, <span class="number">9</span>), (<span class="string">','</span>, <span class="number">13</span>), (<span class="string">'v'</span>, <span class="number">15</span>), (<span class="string">'a'</span>, <span class="number">8</span>), (<span class="string">'P'</span>, <span class="number">12</span>), (<span class="string">'+'</span>, <span class="number">13</span>), (<span class="string">'G'</span>, <span class="number">14</span>), (<span class="string">'@'</span>, <span class="number">21</span>), (<span class="string">'y'</span>, <span class="number">10</span>), (<span class="string">'$'</span>, <span class="number">9</span>), (<span class="string">'j'</span>, <span class="number">16</span>), (<span class="string">'D'</span>, <span class="number">13</span>), (<span class="string">'b'</span>, <span class="number">9</span>), (<span class="string">'z'</span>, <span class="number">12</span>), (<span class="string">'c'</span>, <span class="number">12</span>), (<span class="string">'3'</span>, <span class="number">12</span>), (<span class="string">'0'</span>, <span class="number">11</span>), (<span class="string">')'</span>, <span class="number">11</span>), (<span class="string">'Y'</span>, <span class="number">15</span>), (<span class="string">'d'</span>, <span class="number">11</span>), (<span class="string">'?'</span>, <span class="number">11</span>), (<span class="string">'I'</span>, <span class="number">5</span>), (<span class="string">'L'</span>, <span class="number">13</span>), (<span class="string">'_'</span>, <span class="number">9</span>), (<span class="string">'O'</span>, <span class="number">9</span>), (<span class="string">'('</span>, <span class="number">7</span>), (<span class="string">'l'</span>, <span class="number">6</span>), (<span class="string">'^'</span>, <span class="number">8</span>), (<span class="string">'%'</span>, <span class="number">9</span>), (<span class="string">'u'</span>, <span class="number">13</span>), (<span class="string">'&lt;'</span>, <span class="number">13</span>), (<span class="string">'`'</span>, <span class="number">10</span>), (<span class="string">'|'</span>, <span class="number">14</span>), (<span class="string">'C'</span>, <span class="number">16</span>), (<span class="string">'1'</span>, <span class="number">11</span>), (<span class="string">'-'</span>, <span class="number">10</span>), (<span class="string">'o'</span>, <span class="number">8</span>), (<span class="string">'x'</span>, <span class="number">8</span>), (<span class="string">'8'</span>, <span class="number">12</span>), (<span class="string">'M'</span>, <span class="number">12</span>), (<span class="string">'g'</span>, <span class="number">13</span>), (<span class="string">'T'</span>, <span class="number">11</span>), (<span class="string">';'</span>, <span class="number">7</span>), (<span class="string">'H'</span>, <span class="number">12</span>), (<span class="string">'6'</span>, <span class="number">10</span>), (<span class="string">'['</span>, <span class="number">9</span>), (<span class="string">'K'</span>, <span class="number">11</span>), (<span class="string">'9'</span>, <span class="number">10</span>), (<span class="string">'W'</span>, <span class="number">6</span>), (<span class="string">'4'</span>, <span class="number">11</span>), (<span class="string">'h'</span>, <span class="number">12</span>), (<span class="string">'N'</span>, <span class="number">4</span>)])</div><div class="line">[(<span class="string">'@'</span>, <span class="number">21</span>)]</div><div class="line">[(<span class="string">'@'</span>, <span class="number">21</span>), (<span class="string">'#'</span>, <span class="number">18</span>), (<span class="string">'m'</span>, <span class="number">17</span>)]</div></pre></td></tr></table></figure>
<h2 id="字典排序">字典排序</h2>
<p>内置函数sorted()可以对字典元素进行排序并返回新列表，充分利用key参数可以实现丰富的排序功能，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>phonebook = &#123;<span class="string">'Linda'</span>:<span class="string">'7750'</span>,<span class="string">'Bob'</span>:<span class="string">'9345'</span>,<span class="string">'Carol'</span>:<span class="string">'5834'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(phonebook.items(), key=itemgetter(<span class="number">1</span>))</div><div class="line">[(<span class="string">'Carol'</span>, <span class="string">'5834'</span>), (<span class="string">'Linda'</span>, <span class="string">'7750'</span>), (<span class="string">'Bob'</span>, <span class="string">'9345'</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 按字典的"值"进行排序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(phonebook.items(),key=itemgetter(<span class="number">0</span>))</div><div class="line">[(<span class="string">'Bob'</span>, <span class="string">'9345'</span>), (<span class="string">'Carol'</span>, <span class="string">'5834'</span>), (<span class="string">'Linda'</span>, <span class="string">'7750'</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#按字典的"键"进行排序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(phonebook.items(),key=<span class="keyword">lambda</span> item:item[<span class="number">0</span>])</div><div class="line">[(<span class="string">'Bob'</span>, <span class="string">'9345'</span>), (<span class="string">'Carol'</span>, <span class="string">'5834'</span>), (<span class="string">'Linda'</span>, <span class="string">'7750'</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 按字典的"键"进行排序</span></div></pre></td></tr></table></figure>
<h2 id="提取字典的子集">提取字典的子集</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>students_score = &#123;<span class="string">'jack'</span>:<span class="number">80</span>,<span class="string">'james'</span>:<span class="number">91</span>, <span class="string">'leo'</span>:<span class="number">100</span>, <span class="string">'sam'</span>:<span class="number">60</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 提取分数超过90分的学生信息，并变成字典</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(students_score)</div><div class="line">&#123;<span class="string">'jack'</span>: <span class="number">80</span>, <span class="string">'james'</span>: <span class="number">91</span>, <span class="string">'leo'</span>: <span class="number">100</span>, <span class="string">'sam'</span>: <span class="number">60</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>good_score = &#123;name:score <span class="keyword">for</span> name, score <span class="keyword">in</span> students_score.items() <span class="keyword">if</span> score &gt; <span class="number">90</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(good_score)</div><div class="line">&#123;<span class="string">'james'</span>: <span class="number">91</span>, <span class="string">'leo'</span>: <span class="number">100</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="提取字典中的某个键的值">提取字典中的某个键的值</h2>
<p>如果此键不在字典中，就会返回none。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'lang'</span>:<span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(d)</div><div class="line">&#123;<span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(d.get(<span class="string">"lang"</span>))</div><div class="line">python</div></pre></td></tr></table></figure>
<h2 id="计算字典的健值">计算字典的健值</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>stocks = &#123;<span class="string">'wanke'</span>:<span class="number">25.6</span>, <span class="string">'wulingye'</span>:<span class="number">32.4</span>, <span class="string">'maotai'</span>:<span class="number">299.4</span>,<span class="string">'huatai'</span>:<span class="number">18.6</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(stocks)</div><div class="line">&#123;<span class="string">'wanke'</span>: <span class="number">25.6</span>, <span class="string">'wulingye'</span>: <span class="number">32.4</span>, <span class="string">'maotai'</span>: <span class="number">299.4</span>, <span class="string">'huatai'</span>: <span class="number">18.6</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(min(stocks.values()))</div><div class="line"><span class="number">18.6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(max(stocks.values()))</div><div class="line"><span class="number">299.4</span></div></pre></td></tr></table></figure>
<h2 id="字典的翻转">字典的翻转</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>stocks = &#123;<span class="string">'wanke'</span>:<span class="number">25.6</span>, <span class="string">'wulingye'</span>:<span class="number">32.4</span>, <span class="string">'maotai'</span>:<span class="number">299.4</span>,<span class="string">'huatai'</span>:<span class="number">18.6</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(stocks)</div><div class="line">&#123;<span class="string">'wanke'</span>: <span class="number">25.6</span>, <span class="string">'wulingye'</span>: <span class="number">32.4</span>, <span class="string">'maotai'</span>: <span class="number">299.4</span>, <span class="string">'huatai'</span>: <span class="number">18.6</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>invert_stocks = dict([(v,k) <span class="keyword">for</span> k,v <span class="keyword">in</span> stocks.items()])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(invert_stocks)</div><div class="line">&#123;<span class="number">25.6</span>: <span class="string">'wanke'</span>, <span class="number">32.4</span>: <span class="string">'wulingye'</span>, <span class="number">299.4</span>: <span class="string">'maotai'</span>, <span class="number">18.6</span>: <span class="string">'huatai'</span>&#125;</div></pre></td></tr></table></figure>
<h2 id="字典推导式">字典推导式</h2>
<p>字典推导和列表推导的使用方法是类似的，只不中括号该改成大括号。直接举例说明：</p>
<p>案例1:大小写key合并</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>mcase = &#123;<span class="string">'a'</span>: <span class="number">10</span>, <span class="string">'b'</span>: <span class="number">34</span>, <span class="string">'A'</span>: <span class="number">7</span>, <span class="string">'Z'</span>: <span class="number">3</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>mcase_frequency = &#123;</div><div class="line"><span class="meta">... </span>    k.lower(): mcase.get(k.lower(), <span class="number">0</span>) + mcase.get(k.upper(), <span class="number">0</span>)</div><div class="line"><span class="meta">... </span>    <span class="keyword">for</span> k <span class="keyword">in</span> mcase.keys()</div><div class="line"><span class="meta">... </span>    <span class="keyword">if</span> k.lower() <span class="keyword">in</span> [<span class="string">'a'</span>,<span class="string">'b'</span>]</div><div class="line"><span class="meta">... </span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(mcase_frequency)</div><div class="line">&#123;<span class="string">'a'</span>: <span class="number">17</span>, <span class="string">'b'</span>: <span class="number">34</span>&#125;</div></pre></td></tr></table></figure>
<p>案例2:快速更换key和value</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>mcase = &#123;<span class="string">'a'</span>: <span class="number">10</span>, <span class="string">'b'</span>: <span class="number">34</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>mcase_frequency = &#123;v: k <span class="keyword">for</span> k, v <span class="keyword">in</span> mcase.items()&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(mcase_frequency)</div><div class="line">&#123;<span class="number">10</span>: <span class="string">'a'</span>, <span class="number">34</span>: <span class="string">'b'</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="使用字典推导式生成符合特定条件的字典">使用字典推导式生成符合特定条件的字典</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;i:str(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>)&#125;</div><div class="line">&#123;<span class="number">1</span>: <span class="string">'1'</span>, <span class="number">2</span>: <span class="string">'2'</span>, <span class="number">3</span>: <span class="string">'3'</span>, <span class="number">4</span>: <span class="string">'4'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'b'</span>,<span class="string">'d'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;i:j <span class="keyword">for</span> i,j <span class="keyword">in</span> zip(x,y)&#125;</div><div class="line">&#123;<span class="string">'A'</span>: <span class="string">'a'</span>, <span class="string">'B'</span>: <span class="string">'b'</span>, <span class="string">'C'</span>: <span class="string">'b'</span>, <span class="string">'D'</span>: <span class="string">'d'</span>&#125;</div></pre></td></tr></table></figure>
<p>再看一个案例，在这个案例中，寻找得到分最高的同学：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat dict1.py</div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">scores = &#123;<span class="string">"Zhang San"</span>:<span class="number">45</span>, <span class="string">"Li Si"</span>:<span class="number">78</span>, <span class="string">"Wang Wu"</span>:<span class="number">40</span>, <span class="string">"Zhou Liu"</span>:<span class="number">96</span>, <span class="string">"Zhao Qi"</span>:<span class="number">65</span>, <span class="string">"Sun Ba"</span>:<span class="number">90</span>, <span class="string">"Zheng Jiu"</span>:<span class="number">78</span>, <span class="string">"Wu Shi"</span>:<span class="number">99</span>,<span class="string">"Dong Shiyi"</span>:<span class="number">60</span>&#125;</div><div class="line"></div><div class="line">print(scores)</div><div class="line">higest = max(scores.values())</div><div class="line">lowest = min(scores.values())</div><div class="line">print(higest)</div><div class="line">print(lowest)</div><div class="line">average = sum(scores.values())/len(scores)</div><div class="line">print(average)</div><div class="line">higestPerson = [name <span class="keyword">for</span> name, score <span class="keyword">in</span> scores.items() <span class="keyword">if</span> score == higest]</div><div class="line">print(higestPerson)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 dict1.py </div><div class="line">&#123;<span class="string">'Zhang San'</span>: <span class="number">45</span>, <span class="string">'Li Si'</span>: <span class="number">78</span>, <span class="string">'Wang Wu'</span>: <span class="number">40</span>, <span class="string">'Zhou Liu'</span>: <span class="number">96</span>, <span class="string">'Zhao Qi'</span>: <span class="number">65</span>, <span class="string">'Sun Ba'</span>: <span class="number">90</span>, <span class="string">'Zheng Jiu'</span>: <span class="number">78</span>, <span class="string">'Wu Shi'</span>: <span class="number">99</span>, <span class="string">'Dong Shiyi'</span>: <span class="number">60</span>&#125;</div><div class="line"><span class="number">99</span></div><div class="line"><span class="number">40</span></div><div class="line"><span class="number">72.33333333333333</span></div><div class="line">[<span class="string">'Wu Shi'</span>]</div></pre></td></tr></table></figure>
<h3 id="使用字典推导式提取字典的键与值">使用字典推导式提取字典的键与值</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat test2.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line">x = [randint(<span class="number">1</span>,<span class="number">10</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">20</span>)]</div><div class="line"><span class="comment"># 生成20个范围在1到10之间的随机数</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> enumerate(x):</div><div class="line">    print(i)</div><div class="line">m = max(x)</div><div class="line">print(m)</div><div class="line">print([index <span class="keyword">for</span> index, value <span class="keyword">in</span> enumerate(x) <span class="keyword">if</span> value ==m])</div><div class="line">print(enumerate(x))</div><div class="line">print(x)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 test2.py </div><div class="line">(<span class="number">0</span>, <span class="number">10</span>)</div><div class="line">(<span class="number">1</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">2</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">3</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">4</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">5</span>, <span class="number">8</span>)</div><div class="line">(<span class="number">6</span>, <span class="number">4</span>)</div><div class="line">(<span class="number">7</span>, <span class="number">9</span>)</div><div class="line">(<span class="number">8</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">9</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">10</span>, <span class="number">1</span>)</div><div class="line">(<span class="number">11</span>, <span class="number">3</span>)</div><div class="line">(<span class="number">12</span>, <span class="number">9</span>)</div><div class="line">(<span class="number">13</span>, <span class="number">3</span>)</div><div class="line">(<span class="number">14</span>, <span class="number">7</span>)</div><div class="line">(<span class="number">15</span>, <span class="number">6</span>)</div><div class="line">(<span class="number">16</span>, <span class="number">8</span>)</div><div class="line">(<span class="number">17</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">18</span>, <span class="number">10</span>)</div><div class="line">(<span class="number">19</span>, <span class="number">6</span>)</div><div class="line"><span class="number">10</span></div><div class="line">[<span class="number">0</span>, <span class="number">18</span>]</div><div class="line">&lt;enumerate object at <span class="number">0x7f2c5c02ec60</span>&gt;</div><div class="line">[<span class="number">10</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">10</span>, <span class="number">6</span>]</div></pre></td></tr></table></figure>
<p><strong>注1：</strong>其中用到了enumerate()，这是python的内置函数、在字典上是枚举、列举的意思，它可以遍历/可迭代的对象(如列表、字符串)，enumerate多用于在for循环中得到计数，利用它可以同时获得索引和值，即需要index和value值的时候可以使用enumerate。</p>
<p><strong>注2：</strong>如果不用for循环，enumerate()返回的是一个enumerate对象，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat test3.py </div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line">x = [randint(<span class="number">1</span>,<span class="number">10</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">20</span>)]</div><div class="line"><span class="comment"># 生成20个范围在1到10之间的随机数</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> enumerate(x):</div><div class="line">    print(i)</div><div class="line">print(enumerate(x))</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 test3.py </div><div class="line">(<span class="number">0</span>, <span class="number">8</span>)</div><div class="line">(<span class="number">1</span>, <span class="number">7</span>)</div><div class="line">(<span class="number">2</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">3</span>, <span class="number">4</span>)</div><div class="line">(<span class="number">4</span>, <span class="number">10</span>)</div><div class="line">(<span class="number">5</span>, <span class="number">4</span>)</div><div class="line">(<span class="number">6</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">7</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">8</span>, <span class="number">6</span>)</div><div class="line">(<span class="number">9</span>, <span class="number">5</span>)</div><div class="line">(<span class="number">10</span>, <span class="number">6</span>)</div><div class="line">(<span class="number">11</span>, <span class="number">3</span>)</div><div class="line">(<span class="number">12</span>, <span class="number">10</span>)</div><div class="line">(<span class="number">13</span>, <span class="number">10</span>)</div><div class="line">(<span class="number">14</span>, <span class="number">7</span>)</div><div class="line">(<span class="number">15</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">16</span>, <span class="number">1</span>)</div><div class="line">(<span class="number">17</span>, <span class="number">7</span>)</div><div class="line">(<span class="number">18</span>, <span class="number">9</span>)</div><div class="line">(<span class="number">19</span>, <span class="number">8</span>)</div><div class="line">&lt;enumerate object at <span class="number">0x7f8b77ae2c60</span>&gt;</div></pre></td></tr></table></figure>
<h2 id="查看字典元素的多少">查看字典元素的多少</h2>
<p>使用len()函数，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;i:str(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>)&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">&#123;<span class="number">1</span>: <span class="string">'1'</span>, <span class="number">2</span>: <span class="string">'2'</span>, <span class="number">3</span>: <span class="string">'3'</span>, <span class="number">4</span>: <span class="string">'4'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(len(a))</div><div class="line"><span class="number">4</span></div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="字典的复制">字典的复制</h2>
<p>如果直接用<code>=</code>复制字典，其实是为同一个对象贴了两个标签，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = a</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(b)</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a,b)</div><div class="line"><span class="number">5</span> <span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(a),id(b))</div><div class="line"><span class="number">1895588128</span> <span class="number">1895588128</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示，可以发现，a与d的id是一样的，它们表示的是同一个对象，如果用copy方法来进行复制，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>ad = &#123;<span class="string">"name"</span>:<span class="string">"qiwsir"</span>,<span class="string">"lang"</span>:<span class="string">"python"</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>bd = ad</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cd = ad.copy()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(cd)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(cd))</div><div class="line"><span class="number">2434395979280</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(ad))</div><div class="line"><span class="number">2434395576072</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>cd[<span class="string">"name"</span>] = <span class="string">"itdiffer.com"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(cd)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'itdiffer.com'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(ad)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'qiwsir'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div></pre></td></tr></table></figure>
<p>继续修改，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>bd[<span class="string">"name"</span>] = <span class="string">"laoqi"</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(bd)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'laoqi'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(ad)</div><div class="line">&#123;<span class="string">'name'</span>: <span class="string">'laoqi'</span>, <span class="string">'lang'</span>: <span class="string">'python'</span>&#125;</div></pre></td></tr></table></figure>
<p>修改了bd所对应的对象后，ad的对象也变了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/04/Principle/GSEA笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/04/Principle/GSEA笔记/" itemprop="url">GSEA笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-04T12:00:00+08:00">
                2018-04-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物信息学/" itemprop="url" rel="index">
                    <span itemprop="name">生物信息学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  8,232
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  30
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="gsea缩写">GSEA缩写</h2>
<p>GSEA的全称是Gene Set Enrichment Analysis，中文翻译就是基因集富集分析，最早提出GSEA的文章是下面的这篇文献：</p>
<p>基因集富集分析是分析基因表达信息的一种方法，富集是指将基因按照先验知识，也就是基因组注释信息进行分类（注：我个人理解先验知识就是先于经验的知识，例如我们从书本上知道地球是圆的，这就是先验知识，我自己没有亲自去测量，也无法观察到，就知道地球是圆的。基因组注释就是对碱基序列的注释，给出一段碱基序列，根据前人研究的结果，我知识它是什么基因，发挥了什么功能，以上就是对先验知识的理解）。最早提出GSEA的文章是下面的这篇文献：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Subramanian, A., et al. (2005). &quot;Gene set enrichment analysis: A knowledge-based approach for interpreting genome-wide expression profiles.&quot; Proceedings of the National Academy of Sciences 102(43): 15545-15550.</div></pre></td></tr></table></figure>
<h2 id="常规分析的局限">常规分析的局限</h2>
<p>使用芯片或测序技术已经成了生物研究的常规手段，获取某个样本的整个表达谱已经不再困难，但是，如何从这些表达谱中发掘有用的信息，以及对生物学现象进行解释则是一个挑战。在一个典型的研究中，例如我们研究某个抗肿瘤药物对于两种肿瘤细胞（一个对药物敏感，一个不敏感）的效应，然后检验这两类肿瘤细胞的表达谱，可以获得数千个基因的变化信息。我们根据这两类细胞之间基因表达差异的情况，例如根据它们之间的差异倍数，对它们进行排序，得到一个列表<code>L</code>，就可以从中获得一些信息。常规的做法就关注那些表达量差异极大的基因，也就是列表<code>L</code>顶部或底部的基因，用于发现这两类细胞不同变化的一些线索，不过这种方法有一些局限。</p>
<ol style="list-style-type: decimal">
<li>经过多重假设检验校正，或许没有一个基因满足统计学显著性的阈值，因为相关的生物学差异相对于实验误差来说，并不明显，也就是不好区分出基因的差异与实验误差。</li>
<li>也许会有很多差异基因，但是这些差异基因无法与生物学内容整合起来，也就是说用这些差异基因不太好解释生物学现象。</li>
<li>单基因分析方法也许会错过许多对通路有重要影响的基因。细胞过程经常会协同影响一批基因。例如，编码一个代谢通路的一批基因的表达量都升高20%，就会造成非常大的影响，这种影响有可能比一个基因的表达量增加20倍都有效。</li>
<li>当两个不同的团队对同一个生物学体系都进行研究时，他们得到的差异基因或许就不太一致。</li>
</ol>
<p>GSEA就是为了解决上述的问题而提出来的。此方法可以在基因集（也就是多个基因）水平上来处理表达谱数据。这里所说的基因集（gene sets）是指基于当前积累的知识，例如关于生物通路知识或以前得到的共表达数据来定义的一组基因。GSEA主要研究一个基因集S（这里的S指的是我们定义的基因集）出现在目标基因列表L（也就是实验得到的按表达倍数排序的基因列表L）的顶部或底部是否与实验中的不同表型有关。</p>
<p>因此，我们就可以知道，GSEA分析有三个特点：①分析的基因集合而不是单个基因；②将基因与预定义的基因集进行比较；③富集分析。</p>
<p>与GO（Gene Ontology）和KEGG pathway分析相比，GSEA分析的主要优势在于：</p>
<p>一般的差异分析（GO和Pathway）往往侧重于比较两组间的基因表达差异，集中关注少数几个显著上调或下调的基因，这容易遗漏部分差异表达不显著却有重要生物学意义的基因，忽略一些基因的生物特性、基因调控网络之间的关系及基因功能和意义等有价值的信息。而GSEA不需要指定明确的差异基因阈值，算法会根据实际数据的整体趋势， 为研究者们提供了一种合理地解决目前芯片分析瓶颈问题的方法,即使在没有先验经验存在的情况下也能在表达谱整体层次上对数条基因进行分析,从而从数理统计上把表达谱芯片数据与生物学意义很好地衔接起来,使得研究者们能够更轻松、更合理地解读芯片或测序结果。</p>
<h2 id="gsea的原理">GSEA的原理</h2>
<p>首先是对每个样本里面的基因表达值在样本内部进行排序，这里可以理解为，实验组与对照组的差异基因进行排序。但是，这个差异如何量化，有多种方法，可以是Signal2noise，或者是T检验的值，或者是fold change的值，或者是logFC等。而GSEA默认的就是signal-to-noise metric来对基因进行排序。如果要想计算Signal2Noise ，每个group必须要有3个及以上的samples。</p>
<p>现在我们定义一下各种参数。</p>
<p>其中我们把自己测出来的差异基因的排序列表称为<code>目标基因列表L</code>，把根据先验知识预先定义的基因集称为<code>功能基因集S</code>（这个基因集可以是与免疫有关的，可以是与某个代谢通路有关的，也可以是与miRNA有关的，具体的看GSEA官网），把这个基因集中的成员称为<code>s</code>（前者是大写，后者是小写）。GSEA的运行原理就是判断<code>功能基因集S</code>里面的成员<code>s</code>在<code>目标基因列表L</code>里面是随机分布的，还是主要聚集在<code>目标基因列表L</code>的顶部或底部。如果我们研究的<code>功能基因集S</code>的成员显著聚集在<code>目标基因列表L</code>的顶部或底部，那么就说明此基因集成员对实验干预造成的结果有作用，就是我们要关注的基因集。</p>
<p>以下是GSEA计算中的几个概念。</p>
<ul>
<li>Enrichment Score，即ES，中文翻译为富集得分。它反应的是基因集成员<code>s</code>在<code>目标基因列表L</code>端富集的程度，计算方法是，从<code>目标基因列表L</code>的第一个基因开始，计算一个累计统计值。当遇到一个落在<code>功能基因集S</code>里面的基因，则增加统计值。遇到一个不在<code>功能基因集S</code>里面的基因，则降低统计值。每一步统计值增加或减少的幅度与基因的表达变化程度是相关的。富集得分ES是从没有遇到时候开始计算，直到最大值。正值ES表示基因集在列表的顶部富集，负值ES表示基因集在列表的底部富集，它的算法如下所示：</li>
<li>ES score的算法如下图所示：</li>
</ul>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/07k6cigf11.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>其中<code>目标基因列表L</code>表示的就是差异基因已经排序后的序列，<code>S</code>指的是<code>功能基因集S</code>，我们看左边的<code>Ranked List</code>这个部分，它右边是<code>FC</code>，即表达倍数（明显能看出来是从大小到排列的），红色表示的是Hit，也就是说这个基因在<code>功能基因集S</code>里面，如果在，就加分，也就是说在右边的表格里的<code>Contribution to running sum for ES</code>加上相应的分数。如果是蓝色，表示这个基因不在，就减去相应的分数。</p>
<ul>
<li><p>评估富集得分(ES)的显著性。显著性是通过置换检验 (permutation test)的方法来进行检验的。具体过程是，我们转换不同分数下的数据，并且再一次计算ES值，使之形成一个新的ES分布（假分布），从经验上来讲，交换之后，ES的p值相对于新的ES值（统计分布）来说若是显著的变化，则有理由说明此基因集是有一定的生物学意义的。若样品量少，也可基于基因集做置换检验 (permutation test)，计算p-value。</p></li>
<li><p>多重假设检验校正。当评估了所有基因的数据之后，我们要使用多重假设检验来评估它们的显著性。首先把每一个基因的ES值根据基因集的大小进行标准化，得到均一化后的ES值，即NES，全称为Normalized Enrichment Score，之后针对NES计算假阳性发现率（FDR），并以此划出假阳性部分对应每一个NES值。FDR是评估一个NES表达值中所发现的假阳性可能性大小；它是由NES的观测值和零分布时比较得出的。</p></li>
<li><p>Leading-edge subset，对富集得分贡献最大的基因成员。</p></li>
</ul>
<h2 id="gsea分析所需要的文件">GSEA分析所需要的文件</h2>
<h3 id="gct文件">GCT文件</h3>
<p>GCT格式是由分割符分开的一个数据文件，它记录的是基因表达的数据集，也就是我们要进行GSEA计算的原始数据，它的格式如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/097ii2H0j1.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>从左到右，顺时针看到下，GCT文件包含以下这些信息：</p>
<ol style="list-style-type: decimal">
<li><code>Always &quot;#1.2&quot;</code>：这个单元格里一直标注的是<code>#1.2</code>，不用管它。</li>
<li><code># of samples</code>：这个是样本的数目，在上面的表格中，这个数目是130。</li>
<li><code>Third column onwards are sample names. These must be UNIQUE</code>，它是样本的名称，样本的名称必须保证是唯一的，不能出现重复。</li>
<li><code>Data stars on line</code>：第4行，这是每个基因具体的数值。</li>
<li><code>Each column contains expression values from 1 sample. Missing values are allowed(leave empty)</code>：基因表达的数值可以是空。</li>
<li><code>Column 2:Row descriptions.</code>：第2列，对基因的描述，可以为空（填上na）。</li>
<li><code>Column 1:Rowidentifiers</code>：这一列是基因的标识，通常是探针集的id（probe set ids）或克隆号，此列数据必须唯一，不能出现重复。</li>
<li><code>A2单元格：The # of rows</code>：探针的数目。</li>
</ol>
<h3 id="cls文件">CLS文件</h3>
<p>CLS的全称是Categorical (e.g tumor vs normal) class file format，它表示的是分组的信息，下面是一个CLS文件的内容：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/87HLjaCEGJ.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>以上面的图片为例说明，第1行有3个数字，分别为38， 2， 1。其中38是样本的数目，2是分组的数目，1不用管。第2行，分别是ALL和AML，这表示的是分组的信息，即有2个组，分别为ALL和AML。第4行，分别是0和1，0表示ALL，1表示AML，它们的数目表示各自的样本有多少个。再看一个案例：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/H1JhhC5giK.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在这个案例中，我们可以看到一共有9个样本，分了3组；这3组分别为KRAS_MUT，WT，MYC_MUT，第3行是具体的分组数目。</p>
<p>常用的定义基因集的文件主要有GMT与GMX。</p>
<h3 id="gmt文件">GMT文件</h3>
<p>GMT文件的全称是Gene Matrix Transposed file format，中文是“基因矩阵转换文件格式”，缩写为GMT。GMT文件是由制表符分割的文件，它用于描述基因集，可以理解为高通量测序的注释文件。下图是GMT文件的一个案例，每行代表一个基因集：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/2CELehIc0L.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在上面的图片中，我们可以看到，第1行表示的一个是基因集，第1列表示的是是基因集的名称，这一列不能出现重复的基因集。第2列是对基因集的一个简单描述，可以选择不填（写上na），第1列的长度可以不等，如果要在Excel表格中编辑GMT文件，一定要注意Excel的自动纠正功能（例如，Excel有可能把SEP8基因自动纠正为8-Sep）。</p>
<h3 id="gmx文件">GMX文件</h3>
<p>GMX文件是另外一种描述基因集的文件格式，下图是GMX的一个案例，它与GMT格式正好相反，它的每列代表一个基因，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/ecJHKmbd8a.png?imsageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h3 id="rnk文件">RNK文件</h3>
<p>RNK文件的全称是Ranked list file format，这个文件是一个有序的基因列表，第1列是基因名称（A1单元格忽略），第2列是数值（可以是表达倍数差异，也可以使用类似于t检验进行的排序），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180624/1c24eDgdiG.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="gsea使用案例">GSEA使用案例</h2>
<p>这个案例使用的是GESA官网的数据，数据是p53突变型与野生型的肝细胞系的表达谱，这里使用的是芯片的表达数据，芯片现在已经不怎么用了，这里只是讲一下GSEA官网这个软件的使用。</p>
<h3 id="第1案例">第1案例</h3>
<p>第一步，去<a href="http://software.broadinstitute.org/gsea/downloads.jsp" target="_blank" rel="external">官网地址</a>下载GSEA软件，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/EKhiLF46Li.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>下载后，打开，界面如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/IcIIDIHHi6.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>GSEA的官网提供了一些数据的案例，我们可以拿来练习一下，地址<a href="http://software.broadinstitute.org/gsea/datasets.jsp" target="_blank" rel="external">点击这里</a>，这些数据如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/ah0dgeD2Bd.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这里以第2行的<code>p53</code>为例说明一下，这一行中有三个数据文件，分别为<code>P53-hug95av2.gct</code>，<code>P53_collapsed.gct</code>和<code>P53.cls</code>，都把它们下载下来。其中<code>P53-hug95av2.gct</code>，<code>P53_collapsed.gct</code>这两个文件都是基因表达文件，其中，带有<code>collapsed.gct</code>的文件表示这个表达谱文件中的标记符（通常是一串数字）已经被基因名（symbol）替换掉了，另外一个文件是原始文件，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/A4h06CEBmA.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>使用Excel打开<code>P53-hug95av2.gct</code>这个数据文件（其实也可以使用Notepad++或PilotEdit Lite这类文本编辑器来打开gct文件），这个文件是分级以及表达量的数据，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/62H63F9cGg.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在用Excel打开P53.cls这个文件，这个文件是注释信息，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180612/c6BgK0Cl5d.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>从注释信息中我们可以得知，有50个样本，分为两组，分别为2和1表示这两组，2表示MUT组，1表示WT组。将上述的数据导入到GSEA中，过程如下所示：</p>
<p>打开<code>Load data</code>，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/gEB2CFa560.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>此时右侧出现新的页画，打开<code>Browse for file</code>，找到原始数据文件夹，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/82H1Kge6hI.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>导入要分析的文件，分别为cls，gct文件（gmt文件后面可以直接在软件中下载），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/g8A6dj05KL.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>此时，单击左侧的<code>Run GSEA</code>，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/Ke4HEefgAF.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>此时出现一些参数的选择页面，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/4LkaeHgbcb.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在第一行的<code>Expression dataset</code>中选择表达的数据文件，即<code>P53_collapsed_symbols.gct</code>；</p>
<p>在第二行的<code>Gene sets database</code>中选择基因集文件，即gmt文件，单击右侧的省略号，此时出现基因集文件的选择框，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/4Agek6g28I.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>根据<a href="http://software.broadinstitute.org/gsea/doc/desktop_tutorial.jsp" target="_blank" rel="external">官网的的信息</a>，选择<code>c2.all.v6.2.symbols.gmt</code>这个基因集，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/kl5cHmi0JK.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>第三行，Number of permutations，此处设为10（我开始设了1000，没跑出来）；</p>
<p>第四行，Phenotype labels，选择<code>MUT_versus_WT</code>或<code>WT_versus_MUT</code>，顺序不同会导致最终生成的ES图不同，我开始的时候，设为<code>MUT_versus_WT</code>，发现ES得分的图是倒的，不好看，现在就设为<code>WT_versus_MUT</code>；</p>
<p>第五行，Collapse dataset to gene symbols，此处填false，这个参数用于说明是否要把探针的编号转换为基因ID（gene symbols），由于<code>P53_collapsed.gct</code>这个文件本身就已经是使用基因ID了，因此不需要转换，设为false；</p>
<p>第六行，Permutation type：填入phenotype。</p>
<p>第七行，Clip platfrom，芯片类型，前面Collapse dataset to gene symbols已经是false了，因此这里不用选，再看第二个页面，也就是Basic fields，填入要分析的样本名称，保存结果的文件夹，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/6AHAA16H6B.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>填完之后，单击最下面的Run，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/fbh5aa7i2m.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>此时，GSEA开始运行，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/LCk7gLcgGA.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>运行结束后，系统有提示，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180730/B90387GG4f.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在进入保存结果的文件夹，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/7GIe2C7EJl.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>其中，我们选择index这个html文件，就可以看到分析整体结果，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/lDJ4lBc8Da.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>打开，如下所示：</p>
<h3 id="gsea结果解读">GSEA结果解读</h3>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/0dGdCbiG32.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/gL51cgeiA2.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h4 id="第1部分">第1部分</h4>
<p>现在分别查看这些结果的信息，先看第一部分：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/ELEheEaGE7.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在这一部分中，从上到下，可以看到：</p>
<ul>
<li><p>431/899表示在WT这一分组中，一共有899个的功能基因集，其中421个上升；</p></li>
<li><p>99个基因集的FDR小于25%；</p></li>
<li><p>118个基因集的名义p值小于1%；</p></li>
<li><p>118个基因集的名义p值小于5%；</p></li>
<li><p>Snapshot of enrichment results中单击<code>Snapshot</code>可以看富集的结果，默认情况下，只显示前20个，如下所示：</p></li>
</ul>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/4IL8FHFJ1C.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在单击第1张图，就可以查看富集分析的结果，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/J4De7L4kfE.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>再回到主页面，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/d8HlkCeFGH.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>单击<code>enrichment results in html</code>就可以查看所有的富集分析结果，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/5j1bgaIa3D.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在把标题栏放大，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/0gH2DKB9gL.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/j142mcKifb.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>其中，<code>GS follow link to MSgnDB</code>表示具体的功能基因集S的名称；</p>
<p><code>GS DETAILS</code>可以查看具体的某个功能基因集S的富集分析结果；</p>
<p>SIZE表示基因集里的基因数；</p>
<p>ES表示富集分数的ES值；</p>
<p>NES表示校正后的ES值；</p>
<p>NOM p=val是名义P值；</p>
<p>FDR q-val用FDR法校正后的P值，即Qvalue；</p>
<p>FWER p-val用FWER法（Bonferonni校正）校正后的P值</p>
<p>RANK AT AMX表示ES值达到最大进度，对应的通路基因的排名；</p>
<p>LEADING EDGE，显示了用于定义Leading edge subset的一些参数，分别有Tags，List，Signal。</p>
<ul>
<li><p>Tags指的是，在ES最大值这个点之前，功能基因集S中的成员s在目标基因列表中的概率（此时ES为正值），或者说是在ES最大值这个点之后，功能基因集S中的成员s在目标基因列表中的概率（此时ES为负值）。这个指标看的是，对ES有贡献的基因数目占功能基因集S中总数目的百分比。</p></li>
<li><p>List指的是，在ES最大值这个点之前，在排序的目标基因列表L中的基因数目（此时ES值为正）占L总基因数目的百分比，或者说是在ES最大值这个点之后，在排序的目标基因列表L中的基因数目（此时ES值为正）占L总基因数目的百分比，它反映的是，目标基因列表L中多少个基因参与了ES的计算。</p></li>
<li><p>Signal指的是富集信号的强度，它由Tags和List构成，如下所示：</p></li>
</ul>
<p><span class="math inline">\((Tags \% )(1-Gene\%)(\frac{N}{N-Nh})\)</span></p>
<p>其中，N是目标基因集L中的基因数目，Nh指的是功能基因集S中的基因数目。如果功能基因集中的所有基因都位于目标基因集L中的前列，那么信号强度就是最大，或者说是100%，如果功能基因集S中的基因都分散在整个目标基因列表L中，那么信号强度就下降到了0%（这一处不太理解，Gene%代表的是什么文中没有提，可能是List，原文如下所示：</p>
<blockquote>
<p>where N is the number of genes in the list and Nh is the number of genes in the gene set.If the gene set is entirely within the first Nh positions in the list, then the signal strength is maximal or 100%. If the gene set is spread throughout the list, then the signal strength decreases towards 0%.</p>
</blockquote>
<p>现在单击一下<code>GS DETAILS</code>这一栏中的<code>Details..</code>，就会看到某个基因集的详细结果，如下所示：</p>
<p>拉到中间区域，就会看到这样的结果，即；</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/c9G1j8Jgac.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在解释一下这个列表：</p>
<ul>
<li><p>PROBE，基因探针名；</p></li>
<li><p>DESCRIPTION，对这个基因的描述，如果没有，则是na</p></li>
<li><p>GENE SYMBOL，基因名</p></li>
<li><p>GENE_TITLE，来源于芯片的注释文件，如果不是芯片，就没有，空白；</p></li>
<li><p>RANK IN GENE LIST，基因集S的成员在目标基因列表L中的位置；</p></li>
<li><p>RANK METRIC SCORE，基因集S的成员在目标基因列表L位于中的打分情况，貌似最高位于的分数最高，然后递减；</p></li>
<li><p>RUNNING ES，运行的富集分数，也就是在排序基因列表L中某个点上的富集分数，可以看到最高点的分数是0.7459，这个可能就是ES的得分，如下所示：</p></li>
</ul>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/E2C9mCEafd.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<ul>
<li>CORE ENRICHMENT，这一栏中，有的标记为Yes，背景是浅绿色，这些标记为Yes的基因，则是功能基因集S中的Leading-edge subset。它们对ES的贡献最大。</li>
</ul>
<p>如果在GSEA软件中运行Leading Edge Analy8sis，就会出现下面的结果，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/mGI8K5FmE7.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>其中，先看第1张图，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/G3fEg84Jm3.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这是一张热图，它显示了leading edge subset中的基因情况，在热图中，基因的表达值按5种颜色进行区分，分别为red, pink, light blue, dark blue，它们代表基要因的表达水平为high, moderate,low, lowest。</p>
<p>再看第2张图，即右上，这是Set-to-Set图，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/iCL60LB2jm.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这些颜色块显示了subset之间的重叠情况，如果颜色块越深（仔细看，有些颜色非常浅），表明subsets之间的重叠性越高，一个小方格中的A与B的密度对应了X/Y的比例，其中X是A中leading edge genes的数目，Y表示，A与B的并集。颜色越深，表明，A与B含有的相同的leading edge gens越多，如果方格是白色的，表明A与B不含有相同的leading edge genes。</p>
<p>再看第3张图，即左下的图，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/kHhB0gkcGb.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这张图的最底部是基因的名称，纵坐标表示，含有这个基因的功能基因集S的数目。</p>
<p>再看第4张图，也就是右下图，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/eAm871E0hJ.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这个图是直方图，其中横坐标Jacquard表示，每对leading edge subset的交集除以并集（可以看到，它就是个小数，毕竟交集的数目要小于并集的数目）。Number of Occurrences表示在一个指定的bin内，配对的leading edge subset数目，在这个案例中，大多数的subset配对的Jaccard结果都位于0到0.02之间，可以说，大部分的配对的Subsets都没有重合的部分。</p>
<p>下面是原文：</p>
<blockquote>
<p>The last plot is a histogram, where the Jacquard is the intersection divided by the union for a pair of leading edge subsets. Number of Occurrences is the number of leading edge subset pairs in a particular bin. In this example, most subset pairs have no overlap (Jacquard = 0).</p>
</blockquote>
<h3 id="gsea的主要观察指标">GSEA的主要观察指标</h3>
<p>GSEA主要看四个指标，分别为ES，NES，名义p值，FDR值，现在分别解释一下。</p>
<ul>
<li>ES，即Enrichment Score，富集分数，看一张典型的GSEA分析图，如下所示：</li>
</ul>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/E96Kc9lkbe.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<ol style="list-style-type: decimal">
<li>ES，全称为Enrichment Score，即富集分数，一开始都是0，就是绿色长蛇状的粗线，这个绿色的曲线就是ES的值计算过程，从左到右每遇到一个基因，就计算出一个ES值，连成线，最高峰为富集得分（ES）。</li>
<li>中间的长得像条形码的图形，图片中长得像条形码的东西就是功能基因集S在目标基因列表L中所在的位置。</li>
<li>红色直线是绿色曲线的顶点，它左侧的数据是Leading edge subs，et，也就是对富集得分贡献最大的基因成员，若富集得分为正值，则则表示这基因集位于L的顶部，如果富集得分为负值，则位于L的底部。</li>
<li>当用功能基因集S从上到下，遍历排序好的目标基因列表L时，此时最下面的灰色区域就是不同基因的排序结果，它与分组情况相关，排序的结果从正值到负值进行排列，正值是与第1个分组有关（例如WT组），负值与第2个分组有关（例如MUT组），它是按从高到低进行排序的基因次数，排序用的是Signal2noise。</li>
</ol>
<ul>
<li>NES，即Normalized Enrichment Score。</li>
</ul>
<p>这是校正后的ES数值。由于ES的计算原理是，一个<code>目标基因列表L</code>中的基因是否在一个<code>功能基因集S</code>中出现来计算的，但是各个<code>功能基因集S</code>中所包括的基因数不同，而且不同的<code>功能基因集S</code>与要分析的<code>目标基因列表L</code>的相关性也不同，置换次数也不同，因此在比较数据集在不同功能基因集中的富集程度时，需要对ES进行标准化处理。</p>
<p>通过校正原始ES值，NES可以解释<code>功能基因集S</code>大小的差异，以及<code>功能基因集S</code>和<code>目标基因列表L</code>之间的相关性，因此NES可以用于比较基因集之间的结果，GSEA定义的NES公式如下所示：</p>
<p><span class="math inline">\(NES=\frac{actual ES}{mean(ESs \ against \ all \ permutations \ of \ the \ dataset)}\)</span></p>
<p>NES基于所有数据集置换(permutation)的基因集富集分数进行计算的，因此通过改变置换方法，以及置换数目，或者是基因表达数据量的大小，都能影响NES。例如，现在我们看2个分析： 第一，你分析一个表达数据集，GSEA会产生一个有序列表，并对这个列表进行分析； 第二，你使用GSEA对上面这个有序列表重排序，并分析。 如果你使用相同的参数设置（这里的相同是指相同的功能基因集S，相同的目标基因列表L），那么你得到的的ES就是相同的；但是如果你在两次分析时，设定了不同的置换次数（permuation）的话，那么校正后的富集分数，即NES则不同。这两次分析能反映出用于置换的数据集的很大不同（表达数据集与排序的基因列表），如下所示（第1次的置换次数是149，第2次是10）：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/9A2J3Jha8k.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<ul>
<li>FDR，全称为false discovery rate，即错误发现率。</li>
</ul>
<p>FDR描述的是一个估计的可能性，即当一个功能基因集的NES值确定后，判断其中可能包含的错误的阳性发现率，例如FDR=25%意味着，对此NES值的确定，4次中可能有1次是错的，在GSEA的结果报告中，高亮显示了FDR值小于25%的富集功能基因集，因为从这些富集功能基因集中最可能产生有意义的科学假设，方便进一步深入研究，在多数情况下，选择FDR为25%来作为阈值，因为通常用于分析的芯片表达数据之间，大部分都缺乏一致性，而且每次分析的功能基因集数据不多，但是当分析的芯片数据集较小，分析时选择的是探针之间的随机组合，而不是表型间的随机组合，P值采用的严格度不高时，应该选择更加严格的FDR阈值，例如FDR=5%。一般而言，NES的绝对值越大，FDR的值就越小，说明宝座度越高的功能基因集，分析的结果可信度就越高。</p>
<ul>
<li>名义P值，全称为Nominal P Value。</li>
</ul>
<p>名义p值描述提针对某一个<code>功能基因集S</code>得到的富集得分的统计显著性，p值越小，越能说明基因的富集性越好。但在GSEA分析结果的四个参数中，只有FDR值进行了<code>功能基因集S</code>大小和多重假设检验的校正，而p值没有，因此，当分析结果中出现一个高度富集的<code>功能基因集S</code>，具有很小的名义p值，却有很大的FDR值时，往往意味着其实和其它功能基因子相比较，它的富集并不是很显著，原因可能是用于分析的芯片数据样本量较少，或者是杂交信号微弱，又或是选择的功能基因子集并没有很好地反映样本的物理学意义。在GSEA的报告中，当p=0时，这就意味着实际的p值小于1/随机组合的次数，例如，当选择的随机组合数为100时，报告中的p=0实际上是说p值小于0.01，所以提高随机数，就能得到更精确的p值，通常情况下，运行GSEA的随机组合次数都会选择1000，但不要超过1000（个人电脑一般选10），否则系统内存会被耗尽。</p>
<p>通常情况下，我们一般认为|NES|&gt;1，NOM p-val&lt;0.05，FDR q-val&lt;0.25的通路下的基因集合是有意义的。</p>
<p>现在再回到主页面，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/mjjJ4fJdEj.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>Detailed enrichment results in excel format (tab delimited text)这一行是使用Excel表格呈现的富集分析结果；</p>
<p>最后一行，即Guide to interpret results，则是对结果的说明。</p>
<h4 id="第2部分">第2部分</h4>
<p>再看结果的第二部分，即如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/eEEG0A2209.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这是对MUT组的富集分析结果，内容与WT组的差不多。</p>
<h4 id="第3部分">第3部分</h4>
<p>现在看第3部分，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/c8jhhL7jI6.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这里的信息提示，一共分析了10100个基因；</p>
<h4 id="第4部分">第4部分</h4>
<p>看第4部分，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/1I106lBKf6.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这是是功能基因集S的一些信息，第一行提示，根据min=15,max=500的标准来筛选，1329个基因集中，不能用的有430个，能用的有899个；</p>
<p>第二行信息说明，能用的基因集是899个（WT组有421个，MUT组有478个）；</p>
<p>第三行说明，基因集的内容，也就是不同的功能基因集中有多少个基因。</p>
<h4 id="第5部分">第5部分</h4>
<p>再看第5部分，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/lKjbHmj4fm.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>从这一部分中，我们可以看到这些信息：</p>
<p>第1行：一共有10100个基因；</p>
<p>第2行：WT组的基因是5707个，占56.5%，它所点相关关系面积的59.8%（这个59.8%我的理解就是在ES富集分析图中，最下面的那个灰色区域）；</p>
<p>第3行：MUT组的基因是4393个，占43.5%，它所点相关关系面积的40.2%；</p>
<p>第4行：目标基因列表的排序，是个Excel表格，打开，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/k0E1gBfCAk.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>一共是10100个，最后一部分如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/FgFJkmI55h.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>第5行：热图和相关关系的示意图（只显示了前50个基因），其中，热图用5种颜色来表示基因表达水平的高低，即red, pink,light blue, dark blue分别表示high, moderate, low, lowest，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/9L6IAAJcL0.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>（热图内容：Heat Map of the top 50 features for each phenotype in P53_collapsed_symbols.P53.cls#WT_versus_MUT ）</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/hEGgDFLGD9.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>（图片内容：Fig 2: Ranked Gene List Correlation Profile     Ranked list correlations for P53_collapsed_symbols.P53.cls#WT_versus_MUT ）</p>
<p>此外，在GSEA的使用的手册上发现，还有一种蝴蝶图(Butterfly plot)不过，在我的这个分析中，貌似没有找到。蝴蝶图显示的是基因顺序和排序度量得分（ranking metric score）之间的正相关和负相关的关系。默认情况下，蝴蝶图只显示排名前100的基因，这也就是说，它只显示目标基因列表的前100个和最后100个基因。不过，可以在Run GSEA Page这个页面中设置Number of markers参数来设置显示的基因数。富集图下面的部分显示了观察到的基因排列和ranking metric score得分之间的相关关系，蝴蝶图显示了观察到的相关关系，以及置换(1%,5%,50%)正相关，负暗相关的关系。蝴蝶图提供了一些哪些功能基因集的置换能够改变基因排序和ranking metric score的信息，如下所示（这张图是从使用手册中截取的，不清楚）：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/5A6HeHG45C.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h4 id="第6部分">第6部分</h4>
<p>再看第6部分，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/G39Jm7BJ64.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>第1行表示，p值与NES的图，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/cL4LDLL2b3.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>第2行显示了全局的ES值，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/39LE4mf6d4.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h4 id="第7-8部分">第7-8部分</h4>
<p>剩下的内容如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180731/j2d0GG2igB.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p><code>Other</code>则是这次分析的一些参数，<code>Comments</code>作为随机种子的时间戳。</p>
<h2 id="参考资料">参考资料</h2>
<p><a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1528721179&amp;ver=932&amp;signature=BDn09HfM3akefGbPg09cA1FY6KvL8dKh8H9wdC8KpEIHyAcAxiFEfCy0JcYxY8WgCFRymGXCDJTL*jE5eh7-nAd3fnHOJnpOHxDda8JFNOPrkZYcSp1q2JCeDJ6amwdY&amp;new=1" target="_blank" rel="external">1. GSEA分析一文就够.Jimmy.生信技能树</a></p>
<p><a href="http://blog.genesino.com/2017/10/gsea/" target="_blank" rel="external">2.GSEA富集分析 - 界面操作</a></p>
<p><a href="https://www.jianshu.com/p/d4171f3eefb5" target="_blank" rel="external">3.基因集富集分析</a></p>
<p><a href="http://www.360doc.com/content/16/1026/18/19913717_601568937.shtml" target="_blank" rel="external">4.GSEA分析是个什么鬼（上）</a></p>
<p><a href="http://software.broadinstitute.org/gsea/doc/GSEAUserGuideFrame.html" target="_blank" rel="external">5.GSEA User Guide</a></p>
<p><a href="http://software.broadinstitute.org/gsea/doc/desktop_tutorial.jsp" target="_blank" rel="external">6.Quick Tour of the GSEA Java Desktop Application</a></p>
<p><a href="http://www.bio-info-trainee.com/1282.html" target="_blank" rel="external">7.用GSEA来做基因集富集分析</a></p>
<p><a href="http://www.bio-info-trainee.com/3330.html" target="_blank" rel="external">8.使用PGSEA包进行基因集分析</a></p>
<p><a href="http://www.bio-info-trainee.com/2144.html" target="_blank" rel="external">9.制作自己的gene set文件给gsea软件</a></p>
<p><a href="http://software.broadinstitute.org/gsea/doc/desktop_tutorial.jsp" target="_blank" rel="external">10.Quick Tour of the GSEA Java Desktop Application</a></p>
<p>11.冯春琼, 邹亚光, 周其赵,等. GSEA在全基因组表达谱芯片数据分析中的应用[J]. 现代生物医学进展, 2009, 9(13):2553-2557.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/04/Principle/pathview包学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/04/Principle/pathview包学习笔记/" itemprop="url">pathview包笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-04T12:00:00+08:00">
                2018-04-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物信息学/" itemprop="url" rel="index">
                    <span itemprop="name">生物信息学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5,845
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  27
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言">前言</h2>
<p>这几天在学习Y叔的clusterProfiler包时，在进行KEGG分析的最后，要使用一个pathview包，这个包的内容比较多，花了一点时间学习了一下，以下是笔记内容。</p>
<h2 id="pathview功能">pathview功能</h2>
<p><code>pathview</code>这个包中最常用的可能就是<code>pathview()</code>这个函数，它可以自动下载通路图形数据（pathway graph data），解释数据文件，并将用户的目的基因集映射到靶通路上（target pathway），最终生成含有已经映射好数据的图形，pathview函数按照其功能可以分为四个模块，分别为Downloader（下载KEGG数据），Parser（解析KEGG数据文件），Mapper（将基因映射到KEGG通路上）和Viewer（查看映射了数据后的KEGG通路）。</p>
<p>Pathview能够生成两种视力模型，第一种是初始KEGG视图（native KEGG），也就是PNG格式的图形；第二种是Graphviz视图，也就是PDF格式的图形。其中Graphviz可羽主很好地控制KEGG图的节点与边缘属性，能够更好地呈现通路的拓扑结构。</p>
<h2 id="安装">安装</h2>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</div><div class="line">biocLite(<span class="string">"pathview"</span>)</div><div class="line"><span class="keyword">library</span>(pathview)</div><div class="line">data(gse16873.d) <span class="comment"># data for practice</span></div></pre></td></tr></table></figure>
<h2 id="pathview参数">pathview参数</h2>
<p>pathview的参数如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">pathview(gene.data = <span class="literal">NULL</span>, cpd.data = <span class="literal">NULL</span>, pathway.id,</div><div class="line">species = <span class="string">"hsa"</span>, kegg.dir = <span class="string">"."</span>, cpd.idtype = <span class="string">"kegg"</span>, gene.idtype =</div><div class="line"><span class="string">"entrez"</span>, gene.annotpkg = <span class="literal">NULL</span>, min.nnodes = <span class="number">3</span>, kegg.native = <span class="literal">TRUE</span>,</div><div class="line">map.null = <span class="literal">TRUE</span>, expand.node = <span class="literal">FALSE</span>, split.group = <span class="literal">FALSE</span>, map.symbol =</div><div class="line"><span class="literal">TRUE</span>, map.cpdname = <span class="literal">TRUE</span>, node.sum = <span class="string">"sum"</span>, discrete=list(gene=<span class="literal">FALSE</span>,</div><div class="line">cpd=<span class="literal">FALSE</span>), limit = list(gene = <span class="number">1</span>, cpd = <span class="number">1</span>), bins = list(gene = <span class="number">10</span>, cpd</div><div class="line">= <span class="number">10</span>), both.dirs = list(gene = <span class="literal">T</span>, cpd = <span class="literal">T</span>), trans.fun = list(gene =</div><div class="line"><span class="literal">NULL</span>, cpd = <span class="literal">NULL</span>), low = list(gene = <span class="string">"green"</span>, cpd = <span class="string">"blue"</span>), mid =</div><div class="line">list(gene = <span class="string">"gray"</span>, cpd = <span class="string">"gray"</span>), high = list(gene = <span class="string">"red"</span>, cpd =</div><div class="line"><span class="string">"yellow"</span>), na.col = <span class="string">"transparent"</span>, <span class="keyword">...</span>)</div></pre></td></tr></table></figure>
<p>参数含义如下所示：</p>
<ol style="list-style-type: decimal">
<li>gene.data是需要提供的基因向量，默认是Entrez_ID，由gene.idtype决定；</li>
<li>cpd.data 指的药物分子的名称向量；</li>
<li>Pathway.id指的是在KEGG中的ID；</li>
<li>kegg.native默认是TRUE输出完整pathway的png格式文件，反之输出仅是输入的基因列表的pdf文件；</li>
<li>Map.null默认是TRUE，当使用FALSE时其pdf的文件图像会更漂亮；</li>
<li>Split.group，主要是在kegg.native为FALSE的时候会起到一定的作用，主要是将在同一个反应的基因归在一起；</li>
<li>new.signature=FALSE将会将标签去掉，只显示图像。</li>
</ol>
<h2 id="基本用法">基本用法</h2>
<p>这里看一个非常简单的案例，以下是用于生成KEGG通路图的练习数据，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">data(gse16873.d)</div><div class="line">head(gse16873.d)</div><div class="line">class(gse16873.d)</div></pre></td></tr></table></figure>
<p>数据集如下所示:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt; head(gse16873.d)</div><div class="line">               DCIS_1      DCIS_2       DCIS_3      DCIS_4       DCIS_5      DCIS_6</div><div class="line"><span class="number">10000</span>     -<span class="number">0.30764480</span> -<span class="number">0.14722769</span> -<span class="number">0.023784808</span> -<span class="number">0.07056193</span> -<span class="number">0.001323087</span> -<span class="number">0.15026813</span></div><div class="line"><span class="number">10001</span>      <span class="number">0.41586805</span> -<span class="number">0.33477259</span> -<span class="number">0.513136907</span> -<span class="number">0.16653712</span>  <span class="number">0.111122223</span>  <span class="number">0.13400734</span></div><div class="line"><span class="number">10002</span>      <span class="number">0.19854925</span>  <span class="number">0.03789588</span>  <span class="number">0.341865341</span> -<span class="number">0.08527420</span>  <span class="number">0.767559264</span>  <span class="number">0.15828609</span></div><div class="line"><span class="number">10003</span>     -<span class="number">0.23155297</span> -<span class="number">0.09659311</span> -<span class="number">0.104727283</span> -<span class="number">0.04801404</span> -<span class="number">0.208056443</span>  <span class="number">0.03344448</span></div><div class="line"><span class="number">100048912</span> -<span class="number">0.04490724</span> -<span class="number">0.05203146</span>  <span class="number">0.036390376</span>  <span class="number">0.04807823</span>  <span class="number">0.027205816</span>  <span class="number">0.05444739</span></div><div class="line"><span class="number">10004</span>     -<span class="number">0.08756237</span> -<span class="number">0.05027725</span>  <span class="number">0.001821133</span>  <span class="number">0.03023835</span>  <span class="number">0.008034394</span> -<span class="number">0.06860749</span></div><div class="line">&gt; class(gse16873.d)</div><div class="line">[<span class="number">1</span>] <span class="string">"matrix"</span></div></pre></td></tr></table></figure>
<p>从上面结可以知道，<code>gse16873.d</code>这个数据集是个基因表达矩阵，在上面数据中，第1列是基因名，第2列至第7列是样本名以及不同样本相应基因的表达水平，数值是从-1到1不等，现在使用<code>pathview</code>生成KEGG图，来看此函数的基础用法，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>], pathway.id = <span class="string">"04110"</span>, species = <span class="string">"hsa"</span>, out.suffix = <span class="string">"gse16873-basic"</span>)</div></pre></td></tr></table></figure>
<p>在工作目录下会生成2张图片，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/jiAEEc3m03.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>其中<code>hsa04110</code>是人类的参考KEGG通路，另外的一张图形是将目的基因映射到参考图形上后，又生成的图形，如下所示：</p>
<p>先看第一张，<code>hsa04110</code>，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/HB737bb1Df.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>再看第二张，<code>hsa04110.gse16873-basic</code>，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/FAek4CAF6j.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="具体用法">具体用法</h2>
<p>pathview包以3个通路的使用为例说明了一下这个包的用法，看一下<code>demo.paths</code>这个数据集，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&gt; demo.paths</div><div class="line">$sel.paths</div><div class="line">[<span class="number">1</span>] <span class="string">"04110"</span> <span class="string">"00620"</span> <span class="string">"00640"</span></div><div class="line"></div><div class="line">$kpos1</div><div class="line">[<span class="number">1</span>] <span class="string">"topright"</span>    <span class="string">"bottomright"</span> <span class="string">"topright"</span>   </div><div class="line"></div><div class="line">$kpos2</div><div class="line">[<span class="number">1</span>] <span class="string">"topright"</span>    <span class="string">"topright"</span>    <span class="string">"bottomright"</span></div><div class="line"></div><div class="line">$spos</div><div class="line">[<span class="number">1</span>] <span class="string">"bottomleft"</span> <span class="string">"bottomleft"</span> <span class="string">"topright"</span>  </div><div class="line"></div><div class="line">$offs</div><div class="line">[<span class="number">1</span>] -<span class="number">1.0</span> -<span class="number">1.0</span> -<span class="number">0.8</span></div></pre></td></tr></table></figure>
<p><code>demo.paths</code>这个数据中的一些信息来源于<code>GSE16873</code>这个数据，它是从GEO上下载了，是一批乳腺癌的数据。</p>
<p>先来看一下<code>Cell Cycle</code>这个典型的通路，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">i&lt;-<span class="number">1</span></div><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>], </div><div class="line">                   pathway.id = demo.paths$sel.paths[i],</div><div class="line">                   species = <span class="string">"hsa"</span>, </div><div class="line">                   out.suffix = <span class="string">"gse16873-002"</span>, </div><div class="line">                   kegg.native = <span class="literal">T</span>)</div></pre></td></tr></table></figure>
<p>从前面可知，我们使用的数据是<code>gse16873.d[, 1]</code>，现在看一这个数据，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; head(gse16873.d[, <span class="number">1</span>])</div><div class="line">      <span class="number">10000</span>       <span class="number">10001</span>       <span class="number">10002</span>       <span class="number">10003</span>   <span class="number">100048912</span>       <span class="number">10004</span> </div><div class="line">-<span class="number">0.30764480</span>  <span class="number">0.41586805</span>  <span class="number">0.19854925</span> -<span class="number">0.23155297</span> -<span class="number">0.04490724</span> -<span class="number">0.08756237</span></div></pre></td></tr></table></figure>
<p><code>gse16873.d[, 1]</code>是第1个样本<code>DCIS_1</code>的表达数据，看一下原始的数据，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/8ehFI984Gg.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>pathway.id指的是在KEGG中的ID，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; demo.paths$sel.paths[1]</div><div class="line">[1] &quot;04110&quot;</div></pre></td></tr></table></figure>
<p>species用于指定物种，这个数据是来源于乳腺癌，物种是人，因此使用<code>has</code>。</p>
<p>out.suffix = “gse16873-002”这个用于指定输出图形的后缀。</p>
<p>kegg.native = T用于指定是否输出原始的KEGG通路，默认情况是输出，这里参数为T。</p>
<p>最终生成的文件可以通过<code>list.files</code>来查看一下生成的文件，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; list.files(pattern=<span class="string">"hsa04110"</span>, full.names=<span class="literal">T</span>)</div><div class="line">[<span class="number">1</span>] <span class="string">"./hsa04110.gse16873-002.png"</span> <span class="string">"./hsa04110.png"</span>             </div><div class="line">[<span class="number">3</span>] <span class="string">"./hsa04110.xml"</span></div></pre></td></tr></table></figure>
<p>现在先看第1张图（<code>hsa04110.png</code>），原始图，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/EiHJ0aciC1.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>再看第二图（<code>hsa04110.gse16873-002.png</code>），也就是映射了表达数据的KEGG通路图，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/m4J0IEF9BK.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>可以看一下<code>pv.out</code>的数据结构与内容，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&gt; str(pv.out)</div><div class="line">List of <span class="number">2</span></div><div class="line"> $ plot.data.gene:<span class="string">'data.frame'</span>:	<span class="number">92</span> obs. of  <span class="number">10</span> variables:</div><div class="line">  ..$ kegg.names: chr [<span class="number">1</span>:<span class="number">92</span>] <span class="string">"1029"</span> <span class="string">"51343"</span> <span class="string">"4171"</span> <span class="string">"4998"</span> <span class="keyword">...</span></div><div class="line">  ..$ labels    : chr [<span class="number">1</span>:<span class="number">92</span>] <span class="string">"CDKN2A"</span> <span class="string">"FZR1"</span> <span class="string">"MCM2"</span> <span class="string">"ORC1"</span> <span class="keyword">...</span></div><div class="line">  ..$ all.mapped: chr [<span class="number">1</span>:<span class="number">92</span>] <span class="string">"1029"</span> <span class="string">"51343"</span> <span class="string">"4171,4172,4173,4174,4175,4176"</span> <span class="string">"4998,4999,5000,5001,23594,23595"</span> <span class="keyword">...</span></div><div class="line">  ..$ type      : chr [<span class="number">1</span>:<span class="number">92</span>] <span class="string">"gene"</span> <span class="string">"gene"</span> <span class="string">"gene"</span> <span class="string">"gene"</span> <span class="keyword">...</span></div><div class="line">  ..$ x         : num [<span class="number">1</span>:<span class="number">92</span>] <span class="number">532</span> <span class="number">919</span> <span class="number">553</span> <span class="number">494</span> <span class="number">919</span> <span class="number">919</span> <span class="number">188</span> <span class="number">432</span> <span class="number">123</span> <span class="number">77</span> <span class="keyword">...</span></div><div class="line">  ..$ y         : num [<span class="number">1</span>:<span class="number">92</span>] <span class="number">124</span> <span class="number">536</span> <span class="number">556</span> <span class="number">556</span> <span class="number">297</span> <span class="number">519</span> <span class="number">519</span> <span class="number">191</span> <span class="number">704</span> <span class="number">687</span> <span class="keyword">...</span></div><div class="line">  ..$ width     : num [<span class="number">1</span>:<span class="number">92</span>] <span class="number">46</span> <span class="number">46</span> <span class="number">46</span> <span class="number">46</span> <span class="number">46</span> <span class="number">46</span> <span class="number">46</span> <span class="number">46</span> <span class="number">46</span> <span class="number">46</span> <span class="keyword">...</span></div><div class="line">  ..$ height    : num [<span class="number">1</span>:<span class="number">92</span>] <span class="number">17</span> <span class="number">17</span> <span class="number">17</span> <span class="number">17</span> <span class="number">17</span> <span class="number">17</span> <span class="number">17</span> <span class="number">17</span> <span class="number">17</span> <span class="number">17</span> <span class="keyword">...</span></div><div class="line">  ..$ mol.data  : num [<span class="number">1</span>:<span class="number">92</span>] <span class="number">0.129</span> -<span class="number">0.404</span> -<span class="number">0.42</span> <span class="number">0.986</span> <span class="number">1.181</span> <span class="keyword">...</span></div><div class="line">  ..$ mol.col   : Factor w/ <span class="number">10</span> levels <span class="string">"#00FF00"</span>,<span class="string">"#30EF30"</span>,..: <span class="number">5</span> <span class="number">3</span> <span class="number">3</span> <span class="number">9</span> <span class="number">9</span> <span class="number">9</span> <span class="number">9</span> <span class="number">9</span> <span class="number">5</span> <span class="number">6</span> <span class="keyword">...</span></div><div class="line"> $ plot.data.cpd : <span class="literal">NULL</span></div><div class="line"></div><div class="line"></div><div class="line">&gt; head(pv.out$plot.data.gene)</div><div class="line">  kegg.names labels                            all.mapped type   x   y</div><div class="line"><span class="number">1</span>       <span class="number">1029</span> CDKN2A                                  <span class="number">1029</span> gene <span class="number">532</span> <span class="number">124</span></div><div class="line"><span class="number">2</span>      <span class="number">51343</span>   FZR1                                 <span class="number">51343</span> gene <span class="number">919</span> <span class="number">536</span></div><div class="line"><span class="number">3</span>       <span class="number">4171</span>   MCM2         <span class="number">4171</span>,<span class="number">4172</span>,<span class="number">4173</span>,<span class="number">4174</span>,<span class="number">4175</span>,<span class="number">4176</span> gene <span class="number">553</span> <span class="number">556</span></div><div class="line"><span class="number">4</span>       <span class="number">4998</span>   ORC1       <span class="number">4998</span>,<span class="number">4999</span>,<span class="number">5000</span>,<span class="number">5001</span>,<span class="number">23594</span>,<span class="number">23595</span> gene <span class="number">494</span> <span class="number">556</span></div><div class="line"><span class="number">5</span>        <span class="number">996</span>  CDC27 <span class="number">996</span>,<span class="number">8697</span>,<span class="number">8881</span>,<span class="number">10393</span>,<span class="number">25847</span>,<span class="number">29882</span>,<span class="number">51433</span> gene <span class="number">919</span> <span class="number">297</span></div><div class="line"><span class="number">6</span>        <span class="number">996</span>  CDC27 <span class="number">996</span>,<span class="number">8697</span>,<span class="number">8881</span>,<span class="number">10393</span>,<span class="number">25847</span>,<span class="number">29882</span>,<span class="number">51433</span> gene <span class="number">919</span> <span class="number">519</span></div><div class="line">  width height   mol.data mol.col</div><div class="line"><span class="number">1</span>    <span class="number">46</span>     <span class="number">17</span>  <span class="number">0.1291987</span> <span class="comment">#BEBEBE</span></div><div class="line"><span class="number">2</span>    <span class="number">46</span>     <span class="number">17</span> -<span class="number">0.4043256</span> <span class="comment">#5FDF5F</span></div><div class="line"><span class="number">3</span>    <span class="number">46</span>     <span class="number">17</span> -<span class="number">0.4202181</span> <span class="comment">#5FDF5F</span></div><div class="line"><span class="number">4</span>    <span class="number">46</span>     <span class="number">17</span>  <span class="number">0.9864873</span> <span class="comment">#FF0000</span></div><div class="line"><span class="number">5</span>    <span class="number">46</span>     <span class="number">17</span>  <span class="number">1.1811525</span> <span class="comment">#FF0000</span></div><div class="line"><span class="number">6</span>    <span class="number">46</span>     <span class="number">17</span>  <span class="number">1.1811525</span> <span class="comment">#FF0000</span></div></pre></td></tr></table></figure>
<p>上面的绘图命令生成的图形只有一层，节点的颜色是在原始图层的基础上进行绘制的，原始的EKGG节点标答（节点名称）保持完整。这种方式的绘图输出的KEGG PNG文件与原始图形的大小一样，不过计算时间比较长。如果想快速生成图形，并且不介意生成的图片体积，那么可以使用双层图形，即设置<code>same.pyaer=F</code>，这种方式的绘图就会在另外的一个图形上添加节点的颜色与标签，并且它会用正式基因号码（official genee symbol）来替换原来的KEGG编号，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>], pathway.id = demo.paths$sel.paths[i],species = <span class="string">"hsa"</span>, out.suffix = <span class="string">"gse16873.2layer"</span>, kegg.native = <span class="literal">T</span>,same.layer = <span class="literal">F</span>)</div></pre></td></tr></table></figure>
<p>生成的图下如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/DF0f43Cc4C.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>可以发现，有几个节点的字迹更加清楚，并且这个图形的体积增加了约1倍，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/F9haCBeg2H.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在比较一下新生成图形中的一些标签，可以发现，新的图形用了正式的基因编号（official gene symbol）替换了原来的KEGG编号（或者是EC编号），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/jhAHj0DaI7.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在这两个案例中，我们看到了原始的KEGG通路图，这种绘图方式我们可以得到KEGG上所有的节点与元数据（meta-data），不过这两种图形都是PNG格式的位图，我们还可以利用Graphviz引擎重新组装KEGG通路图形，使之生成新的布局格式，这种新的图形的格式是PDF格式，它的节点与原来PNG格式的通路图形的节点是一样，只是布局不一样，并且我们可以更好地控制这种PDF图形的节点与边缘，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>], pathway.id = demo.paths$sel.paths[i],species = <span class="string">"hsa"</span>, out.suffix = <span class="string">"gse16873-003"</span>, kegg.native = <span class="literal">F</span>,sign.pos = demo.paths$spos[i])</div></pre></td></tr></table></figure>
<p>生成的图形如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/1eml04f3mE.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>不过，在上面的这张图形里，主图和图例都在一个图层（也可以理解为在一页PDF）上，图例挤占了太多的空间，如果我们把主图和图例放到两个图层上（或者说是把它们分别放到两页PDF上），就需要如下操作，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>], pathway.id = demo.paths$sel.paths[i],species = <span class="string">"hsa"</span>, out.suffix = <span class="string">"gse16873.2layer"</span>, kegg.native = <span class="literal">F</span>,sign.pos = demo.paths$spos[i], same.layer = <span class="literal">F</span>)</div></pre></td></tr></table></figure>
<p>生成的图形如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/d705DG2fBJ.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在分别把它们放大，先看主图：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/l83gjEfkfH.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>再来看一下图例，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/LAaEc6Jf41.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在Graphviz视图下，用户可以更好的控制图形布局，可以将一组节点（node groups）进行拆分，把它们分到一个个分散的节点上（使用<code>split.group = T</code>参数），也可以将多个基因节点扩展为单个基因（使用<code>expand.node = T.</code>参数）。这两种操作都可以继承原来图形的边缘（edges）。当我们要绘制一个基因/蛋白-基因/蛋白相互作用图的时候，或许就能用到，这样就能更好地查看网络特征（模块化）数据。在原始的KEGG图中，一个基因的节点可能代表了多个具体相似或冗余功能的多个基因，一个节点的基因数目可能是1到多个不等。将通路中的这些相似功能的基因放在一个节点上，可以使分析结果更加清楚，也具备可读性。因此，默认性下，并不把这个节点进行拆分，但是这种图形是以节点为导向的（node-wise），如果我们以基因为导向（gene-wise），就可以使用<code>node.sum</code>参数，现在看一下把节点进行拆分的图形，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>], pathway.id = demo.paths$sel.paths[i],species = <span class="string">"hsa"</span>, out.suffix = <span class="string">"gse16873.split"</span>, kegg.native = <span class="literal">F</span>,sign.pos = demo.paths$spos[i], split.group = <span class="literal">T</span>)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/KEHBlkIEGe.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在看一下，把不同的节点扩展到具体的基因上，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>], pathway.id = demo.paths$sel.paths[i],species = <span class="string">"hsa"</span>, out.suffix = <span class="string">"gse16873.split.expanded"</span>, kegg.native = <span class="literal">F</span>,sign.pos = demo.paths$spos[i], split.group = <span class="literal">T</span>, expand.node = <span class="literal">T</span>)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/3fEa3Eh14F.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="数据整合">数据整合</h2>
<p>Pathview有很强的数据的整合功能，可以将基因表达，蛋白表达，代谢物的水平直接映射到KEGG通路图上。</p>
<h3 id="化合物和基因数据">化合物和基因数据</h3>
<p>在前面的案例中，我们看到了一些经典信号通路的基因数据。有时候我们也要观察一些代谢通路的数据，除了基因节点外，这些通路还包括化合物节点。因此，我们可以将基因与化合物数据同时整合到代谢通路中去。在这里，我们所说的基因是一个非常广泛的概念，它包括基因，转录本，蛋白，酶以及它们的表达水平，修饰以及任何可以测量的数据。对于化合物来说，同样如此，化合物数据包括代谢物，药物以及它们可以测量的一些指标。在这个案例中，我们仍然使用乳腺癌的芯片数据，随后我们生成一个模拟的化合物或代谢物组数据。</p>
<p>生成模拟的代谢物数据，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sim.cpd.data &lt;- sim.mol.data(mol.type=<span class="string">"cpd"</span>, nmol=<span class="number">3000</span>)</div><div class="line">data(cpd.simtypes)</div><div class="line">i &lt;- <span class="number">3</span></div><div class="line">print(demo.paths$sel.paths[i])</div></pre></td></tr></table></figure>
<p>我们先成一个含有基因与与化合物数据的原始KEGG图，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>], cpd.data = sim.cpd.data,pathway.id = demo.paths$sel.paths[i], species = <span class="string">"hsa"</span>, out.suffix = <span class="string">"gse16873.cpd"</span>,keys.align = <span class="string">"y"</span>, kegg.native = <span class="literal">T</span>, key.pos = demo.paths$kpos1[i])</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/DJB14j1f3D.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>使用上述数据生成Graphviz图形，这种图形可以更好地呈现层级结构，对于代谢通路来说，需要从xml文件中解析具体反应，然后将它们转换为基因和化合物节点的关系，使用椭圆来表示化合物节点，它们的标签是标准的化合物名称，来源于CHEMBL数据库，KEGG的数据文件中并不提供化合物的标准名词。化合物的名称是长字符串，可以换行符来调整这些名称，从而使它们在图形中处于合适位置，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>],</div><div class="line">                   cpd.data = sim.cpd.data,pathway.id = demo.paths$sel.paths[i],</div><div class="line">                   species = <span class="string">"hsa"</span>,</div><div class="line">                   out.suffix = <span class="string">"gse16873.cpd"</span>,</div><div class="line">                   keys.align = <span class="string">"y"</span>,</div><div class="line">                   kegg.native = <span class="literal">F</span>,</div><div class="line">                   key.pos = demo.paths$kpos2[i],</div><div class="line">                   sign.pos = demo.paths$spos[i],</div><div class="line">                   cpd.lab.offset = demo.paths$offs[i])</div></pre></td></tr></table></figure>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/mdbFFhfB78.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h3 id="多样本数据">多样本数据</h3>
<p>前面的案例中使用的都是一个样本的数据，它们要么是向量的形式，要么是矩阵的一列的形式。不过pathview也能处理多个样本数据，针对每个样本生成各自的图形，让我们先生成一批模拟的化合物的数据，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">set.seed(<span class="number">10</span>)</div><div class="line">sim.cpd.data2 &lt;- matrix(sample(sim.cpd.data, <span class="number">18000</span>,replace = <span class="literal">T</span>), ncol = <span class="number">6</span>)</div><div class="line">rownames(sim.cpd.data2) &lt;- names(sim.cpd.data)</div><div class="line">colnames(sim.cpd.data2) &lt;- paste(<span class="string">"exp"</span>, <span class="number">1</span>:<span class="number">6</span>, sep = <span class="string">""</span>)</div><div class="line">head(sim.cpd.data2, <span class="number">3</span>)</div></pre></td></tr></table></figure>
<p>数据如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; head(sim.cpd.data2, <span class="number">3</span>)</div><div class="line">              exp1       exp2      exp3       exp4        exp5</div><div class="line">C02787  <span class="number">0.62355826</span> -<span class="number">0.1108793</span>  <span class="number">1.069398</span> -<span class="number">0.9595403</span> <span class="number">1.653444849</span></div><div class="line">C08521 -<span class="number">1.23737070</span>  <span class="number">0.4676360</span> -<span class="number">2.064253</span> -<span class="number">0.6593838</span> <span class="number">0.004274093</span></div><div class="line">C01043 -<span class="number">0.01768295</span>  <span class="number">0.5472769</span> -<span class="number">0.592388</span> -<span class="number">0.1190882</span> <span class="number">0.950917578</span></div><div class="line">            exp6</div><div class="line">C02787  <span class="number">1.360614</span></div><div class="line">C08521  <span class="number">0.512765</span></div><div class="line">C01043 -<span class="number">1.130288</span></div></pre></td></tr></table></figure>
<p>在下面的样本数据中，<code>gene.data</code>有3个样本，而<code>cpd.data</code>有2个样本，我们想在一张图中含有所有的这些信息。要么使用初始KEGG图形，要么使用GRaphviz图形。在这两种图形中，我们可以看到基因节点和化合物节点根据不同的样本被分成多个区域，由于<code>gene.data</code>和<code>cpd.data</code>的样本数并不一样，因此我们就要考虑到样本的实际配对情况，例如，<code>gene.data</code>的第1列要与<code>cpd.data</code>的第1列相匹配。</p>
<p>现在生成KEGG视图的图形，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>:<span class="number">3</span>],</div><div class="line">                   cpd.data = sim.cpd.data2[, <span class="number">1</span>:<span class="number">2</span>], </div><div class="line">                   pathway.id = demo.paths$sel.paths[i],</div><div class="line">                   species = <span class="string">"hsa"</span>, </div><div class="line">                   out.suffix = <span class="string">"gse16873.cpd.3-2s"</span>, </div><div class="line">                   keys.align = <span class="string">"y"</span>,</div><div class="line">                   kegg.native = <span class="literal">T</span>,</div><div class="line">                   match.data = <span class="literal">F</span>,</div><div class="line">                   multi.state = <span class="literal">T</span>,</div><div class="line">                   same.layer = <span class="literal">T</span>)</div><div class="line">head(pv.out$plot.data.cpd)</div></pre></td></tr></table></figure>
<p>图形如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/jKG32iGLG7.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>数据如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; head(pv.out$plot.data.cpd)</div><div class="line">   kegg.names labels all.mapped     type   x   y width height       exp1       exp2 exp1.col exp2.col</div><div class="line">26     C00222 C00222     C00222 compound 242 327     8      8 -0.1322799  0.1614143  #BEBEBE  #BEBEBE</div><div class="line">27     C00804 C00804     C00804 compound 239 449     8      8 -0.1996916 -1.0967526  #BEBEBE  #0000FF</div><div class="line">28     C01013 C01013            compound 341 327     8      8         NA         NA  #FFFFFF  #FFFFFF</div><div class="line">29     C00099 C00099     C00099 compound 342 388     8      8  1.4532987 -0.9155783  #FFFF00  #0000FF</div><div class="line">31     C00083 C00083     C00083 compound 239 228     8      8  0.6580861 -0.3964395  #EFEF30  #8F8FCE</div><div class="line">79     C00109 C00109     C00109 compound 779 105     8      8 -0.9303826 -1.5159213  #0000FF  #0000FF</div></pre></td></tr></table></figure>
<p>也可以选择每个样本画一张图，在这种情况下，<code>gene.data</code>中的样本要与<code>cpd.data</code>中的样本匹配，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#plot samples/states separately</span></div><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>:<span class="number">3</span>],</div><div class="line">                   cpd.data = sim.cpd.data2[, <span class="number">1</span>:<span class="number">2</span>],</div><div class="line">                   pathway.id = demo.paths$sel.paths[i],</div><div class="line">                   species = <span class="string">"hsa"</span>,</div><div class="line">                   out.suffix = <span class="string">"gse16873.cpd.3-2s"</span>,</div><div class="line">                   keys.align = <span class="string">"y"</span>,</div><div class="line">                   kegg.native = <span class="literal">T</span>,</div><div class="line">                   match.data = <span class="literal">F</span>,</div><div class="line">                   multi.state = <span class="literal">F</span>,</div><div class="line">                   same.layer = <span class="literal">T</span>)</div></pre></td></tr></table></figure>
<p>从结果中可以发现，画了3张图，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/GEb5LF43L0.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>打开第1张图，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/GHF5KA7ml8.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>.上面的图形是在同一张图层上画的，如果我们画在两张图层上，就会节省时间，不过这种绘图方式，会丢失原始的KEGG基因标签（或EC编号），使用标准的基因名称替代，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>:<span class="number">3</span>],</div><div class="line">                   cpd.data = sim.cpd.data2[, <span class="number">1</span>:<span class="number">2</span>],</div><div class="line">                   pathway.id = demo.paths$sel.paths[i],</div><div class="line">                   species = <span class="string">"hsa"</span>,</div><div class="line">                   out.suffix = <span class="string">"gse16873.cpd.3-2s.2layer"</span>,</div><div class="line">                   keys.align = <span class="string">"y"</span>,</div><div class="line">                   kegg.native = <span class="literal">T</span>,</div><div class="line">                   match.data = <span class="literal">F</span>,</div><div class="line">                   multi.state = <span class="literal">T</span>,</div><div class="line">                   same.layer = <span class="literal">F</span>)</div></pre></td></tr></table></figure>
<p>这里我们设置了<code>multi.stat=T</code>，也就是生成1张图，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/EcJeL8E1AA.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h3 id="离散数据">离散数据</h3>
<p>前面的案例中使用的都是连续数据，不过有时候我们还会遇到离散数据，例如，有时候，我们根据统计量（p值或差异表达倍数），我们选择了一些差异基因或者是化合物。此时的输入数据就是一张列表，这些输入的数据就是字符向量（named vector）或者是1，0这种数据（要么显著，要么不显著），或者是一张数目有限的有差异的基因 或化合物。在接下来的案例中，我们使用<code>gene.data</code>和<code>cpd.data</code>或者只使用<code>gene.data</code>来说明一下离散型数据的绘图方法。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span>(org.Hs.eg.db)</div><div class="line">gse16873.t &lt;- apply(gse16873.d, <span class="number">1</span>, <span class="keyword">function</span>(x) t.test(x,alternative = <span class="string">"two.sided"</span>)$p.value)</div><div class="line">sel.genes &lt;- names(gse16873.t)[gse16873.t &lt; <span class="number">0.1</span>]</div><div class="line">sel.cpds &lt;- names(sim.cpd.data)[abs(sim.cpd.data) &gt; <span class="number">0.5</span>]</div><div class="line">pv.out &lt;- pathview(gene.data = sel.genes,</div><div class="line">                   cpd.data = sel.cpds,</div><div class="line">                   pathway.id = demo.paths$sel.paths[i],</div><div class="line">                   species = <span class="string">"hsa"</span>,</div><div class="line">                   out.suffix = <span class="string">"sel.genes.sel.cpd"</span>,</div><div class="line">                   keys.align = <span class="string">"y"</span>,</div><div class="line">                   kegg.native = <span class="literal">T</span>,</div><div class="line">                   key.pos = demo.paths$kpos1[i],</div><div class="line">                   limit = list(gene = <span class="number">5</span>, cpd = <span class="number">2</span>),</div><div class="line">                   bins = list(gene = <span class="number">5</span>, cpd = <span class="number">2</span>),</div><div class="line">                   na.col = <span class="string">"gray"</span>,</div><div class="line">                   discrete = list(gene = <span class="literal">T</span>, cpd = <span class="literal">T</span>))</div></pre></td></tr></table></figure>
<p>生成图形如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/2i03kiGF0j.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>不使用<code>cpd.dtaa</code>的图形如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/5a6dfl6Dfm.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h3 id="id映射id-mapping">ID映射（ID mapping）</h3>
<p>pathview包有很强大的ID映射功能，在下面的案例中，我们使用mapper来将外源的ID转换为标准的KEGG ID，我们只需要使用<code>gene.idtype</code>或<code>cpd.idtype</code>来指定外的ID类型即可，虽然pathview有自动转换ID的功能，不过它只支持某些ID类型，具体细节可以查看<code>gene.idtype.list</code>和<code>data(rn.list)</code>，`names(rn.list)。</p>
<p>ID转换案例如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">data(<span class="string">"gene.idtype.list"</span>)</div><div class="line">cpd.cas &lt;- sim.mol.data(mol.type = <span class="string">"cpd"</span>,</div><div class="line">                        id.type = cpd.simtypes[<span class="number">2</span>],</div><div class="line">                        nmol = <span class="number">10000</span>)</div><div class="line">gene.ensprot &lt;- sim.mol.data(mol.type = <span class="string">"gene"</span>,</div><div class="line">                             id.type = gene.idtype.list[<span class="number">4</span>],</div><div class="line">                             nmol = <span class="number">50000</span>)</div><div class="line">pv.out &lt;- pathview(gene.data = gene.ensprot,</div><div class="line">                   cpd.data = cpd.cas,</div><div class="line">                   gene.idtype = gene.idtype.list[<span class="number">4</span>],</div><div class="line">                   cpd.idtype = cpd.simtypes[<span class="number">2</span>],</div><div class="line">                   pathway.id = demo.paths$sel.paths[i],</div><div class="line">                   species = <span class="string">"hsa"</span>,</div><div class="line">                   same.layer = <span class="literal">T</span>,</div><div class="line">                   out.suffix = <span class="string">"gene.ensprot.cpd.cas"</span>,</div><div class="line">                   keys.align = <span class="string">"y"</span>,</div><div class="line">                   kegg.native = <span class="literal">T</span>,</div><div class="line">                   key.pos = demo.paths$kpos2[i],</div><div class="line">                   sign.pos = demo.paths$spos[i],</div><div class="line">                   limit = list(gene = <span class="number">3</span>, cpd = <span class="number">3</span>),</div><div class="line">                   bins = list(gene = <span class="number">6</span>, cpd = <span class="number">6</span>))</div></pre></td></tr></table></figure>
<p>生成的图形如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/jG5mIEafhA.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>对于那些不在自动映射列表中的外部ID来说，用户可以使用<code>mol.sum</code>函数来处理ID与数据映射。在这里我们提到了<code>id.map</code>函数，它能在外源ID和KEGG标准ID之间进行映射，需要注意的是，这些ID映射函数可以独立于<code>pathview</code>运行，在下面的案例中，我们就使用了这个函数来处理<code>gene.ensprot</code>和<code>cpd.kc</code>数据，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">id.map.cas &lt;- cpdidmap(in.ids = names(cpd.cas),</div><div class="line">                       in.type = cpd.simtypes[<span class="number">2</span>],</div><div class="line">                       out.type = <span class="string">"KEGG COMPOUND accession"</span>)</div><div class="line">cpd.kc &lt;- mol.sum(mol.data = cpd.cas,</div><div class="line">                  id.map = id.map.cas)</div><div class="line">id.map.ensprot &lt;- id2eg(ids = names(gene.ensprot),</div><div class="line">                        category = gene.idtype.list[<span class="number">4</span>],</div><div class="line">                        org = <span class="string">"Hs"</span>)</div><div class="line">gene.entrez &lt;- mol.sum(mol.data = gene.ensprot,</div><div class="line">                       id.map = id.map.ensprot)</div><div class="line">pv.out &lt;- pathview(gene.data = gene.entrez,</div><div class="line">                   cpd.data = cpd.kc,</div><div class="line">                   pathway.id = demo.paths$sel.paths[i],</div><div class="line">                   species = <span class="string">"hsa"</span>,</div><div class="line">                   same.layer = <span class="literal">T</span>,</div><div class="line">                   out.suffix = <span class="string">"gene.entrez.cpd.kc"</span>,</div><div class="line">                   keys.align = <span class="string">"y"</span>,</div><div class="line">                   kegg.native = <span class="literal">T</span>,</div><div class="line">                   key.pos = demo.paths$kpos2[i],</div><div class="line">                   sign.pos = demo.paths$spos[i],</div><div class="line">                   limit = list(gene = <span class="number">3</span>, cpd = <span class="number">3</span>),</div><div class="line">                   bins = list(gene = <span class="number">6</span>, cpd = <span class="number">6</span>))</div></pre></td></tr></table></figure>
<p>生成图形如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/k2jCadaAjj.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>KEGG使用NCBI的GeneID或者是EntrezID来作为模式动物（例如人类，小鼠，兔子）的ID，同时它还使用Locus tag和其它的ID来标记其它的物种，例如动物，植物，真菌，寄生虫等。Pathview含有且个矩阵<code>lorg</code>，它含有支持的KEGG物种的完整列表，以及默认ID，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&gt; data(korg)</div><div class="line">&gt; head(korg)</div><div class="line">     ktax.id  tax.id  kegg.code scientific.name           common.name                     entrez.gnodes kegg.geneid</div><div class="line">[<span class="number">1</span>,] <span class="string">"T01001"</span> <span class="string">"9606"</span>  <span class="string">"hsa"</span>     <span class="string">"Homo sapiens"</span>            <span class="string">"human"</span>                         <span class="string">"1"</span>           <span class="string">"4860"</span>     </div><div class="line">[<span class="number">2</span>,] <span class="string">"T01005"</span> <span class="string">"9598"</span>  <span class="string">"ptr"</span>     <span class="string">"Pan troglodytes"</span>         <span class="string">"chimpanzee"</span>                    <span class="string">"1"</span>           <span class="string">"450169"</span>   </div><div class="line">[<span class="number">3</span>,] <span class="string">"T02283"</span> <span class="string">"9597"</span>  <span class="string">"pps"</span>     <span class="string">"Pan paniscus"</span>            <span class="string">"bonobo"</span>                        <span class="string">"1"</span>           <span class="string">"100995503"</span></div><div class="line">[<span class="number">4</span>,] <span class="string">"T02442"</span> <span class="string">"9595"</span>  <span class="string">"ggo"</span>     <span class="string">"Gorilla gorilla gorilla"</span> <span class="string">"western lowland gorilla"</span>       <span class="string">"1"</span>           <span class="string">"109023675"</span></div><div class="line">[<span class="number">5</span>,] <span class="string">"T01416"</span> <span class="string">"9601"</span>  <span class="string">"pon"</span>     <span class="string">"Pongo abelii"</span>            <span class="string">"Sumatran orangutan"</span>            <span class="string">"1"</span>           <span class="string">"100174548"</span></div><div class="line">[<span class="number">6</span>,] <span class="string">"T03265"</span> <span class="string">"61853"</span> <span class="string">"nle"</span>     <span class="string">"Nomascus leucogenys"</span>     <span class="string">"northern white-cheeked gibbon"</span> <span class="string">"1"</span>           <span class="string">"100584841"</span></div><div class="line">     ncbi.geneid ncbi.proteinid uniprot </div><div class="line">[<span class="number">1</span>,] <span class="string">"4860"</span>      <span class="string">"NP_000261"</span>    <span class="string">"P00491"</span></div><div class="line">[<span class="number">2</span>,] <span class="string">"450169"</span>    <span class="string">"XP_016775493"</span> <span class="string">"H2PZ67"</span></div><div class="line">[<span class="number">3</span>,] <span class="string">"100995503"</span> <span class="string">"XP_008964610"</span> <span class="literal">NA</span>      </div><div class="line">[<span class="number">4</span>,] <span class="string">"109023675"</span> <span class="string">"XP_018867610"</span> <span class="string">"G3RN05"</span></div><div class="line">[<span class="number">5</span>,] <span class="string">"100174548"</span> <span class="string">"NP_001127475"</span> <span class="string">"Q5R8N6"</span></div><div class="line">[<span class="number">6</span>,] <span class="string">"100584841"</span> <span class="string">"XP_003267957"</span> <span class="string">"G1QTR4"</span></div></pre></td></tr></table></figure>
<p>查看一下使用EntrzeID作为默认ID的物种，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; sum(korg[,<span class="string">"entrez.gnodes"</span>]==<span class="string">"1"</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">137</span></div></pre></td></tr></table></figure>
<p>再来看一下其用其它ID来作为默认ID的物种，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; sum(korg[,<span class="string">"entrez.gnodes"</span>]==<span class="string">"0"</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">4662</span></div></pre></td></tr></table></figure>
<p>查看地一下没有使用Entrez Gene，以及无法进行自动注释的物种，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&gt; na.idx=is.na(korg[,<span class="string">"ncbi.geneid"</span>])</div><div class="line">&gt; head(korg[na.idx,])</div><div class="line">     ktax.id  tax.id   kegg.code scientific.name               common.name                entrez.gnodes</div><div class="line">[<span class="number">1</span>,] <span class="string">"T04346"</span> <span class="string">"99883"</span>  <span class="string">"tng"</span>     <span class="string">"Tetraodon nigroviridis"</span>      <span class="string">"spotted green pufferfish"</span> <span class="string">"0"</span>          </div><div class="line">[<span class="number">2</span>,] <span class="string">"T04344"</span> <span class="string">"13037"</span>  <span class="string">"dpl"</span>     <span class="string">"Danaus plexippus"</span>            <span class="string">"monarch butterfly"</span>        <span class="string">"0"</span>          </div><div class="line">[<span class="number">3</span>,] <span class="string">"T04347"</span> <span class="string">"6669"</span>   <span class="string">"dpx"</span>     <span class="string">"Daphnia pulex"</span>               <span class="string">"common water flea"</span>        <span class="string">"0"</span>          </div><div class="line">[<span class="number">4</span>,] <span class="string">"T04345"</span> <span class="string">"37682"</span>  <span class="string">"ats"</span>     <span class="string">"Aegilops tauschii"</span>           <span class="string">"wheat D"</span>                  <span class="string">"0"</span>          </div><div class="line">[<span class="number">5</span>,] <span class="string">"T04784"</span> <span class="string">"635003"</span> <span class="string">"fcy"</span>     <span class="string">"Fragilariopsis cylindrus"</span>    <span class="string">""</span>                         <span class="string">"0"</span>          </div><div class="line">[<span class="number">6</span>,] <span class="string">"T00068"</span> <span class="string">"316407"</span> <span class="string">"ecj"</span>     <span class="string">"Escherichia coli K-12 W3110"</span> <span class="string">""</span>                         <span class="string">"0"</span>          </div><div class="line">     kegg.geneid         ncbi.geneid ncbi.proteinid uniprot     </div><div class="line">[<span class="number">1</span>,] <span class="string">"GSTEN00003704G001"</span> <span class="literal">NA</span>          <span class="string">"CAF89712"</span>     <span class="string">"Q4TBM0"</span>    </div><div class="line">[<span class="number">2</span>,] <span class="string">"KGM_03374"</span>         <span class="literal">NA</span>          <span class="string">"EHJ69834"</span>     <span class="string">"G6D9J3"</span>    </div><div class="line">[<span class="number">3</span>,] <span class="string">"DAPPUDRAFT_234292"</span> <span class="literal">NA</span>          <span class="string">"EFX87852"</span>     <span class="string">"E9FY21"</span>    </div><div class="line">[<span class="number">4</span>,] <span class="string">"F775_03731"</span>        <span class="literal">NA</span>          <span class="string">"EMT12934"</span>     <span class="string">"N1R273"</span>    </div><div class="line">[<span class="number">5</span>,] <span class="string">"FRACYDRAFT_206063"</span> <span class="literal">NA</span>          <span class="string">"OEU20811"</span>     <span class="string">"A0A1E7FRL2"</span></div><div class="line">[<span class="number">6</span>,] <span class="string">"JW2487"</span>            <span class="literal">NA</span>          <span class="string">"BAA16390"</span>     <span class="string">"P0AFL6"</span></div></pre></td></tr></table></figure>
<p>看一下Bioconductor中可以使用外源Gene ID进行注释的物种，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&gt; data(bods)</div><div class="line">&gt; bods</div><div class="line">      package             species               kegg code id.type</div><div class="line"> [<span class="number">1</span>,] <span class="string">"org.Ag.eg.db"</span>      <span class="string">"Anopheles"</span>           <span class="string">"aga"</span>     <span class="string">"eg"</span>   </div><div class="line"> [<span class="number">2</span>,] <span class="string">"org.At.tair.db"</span>    <span class="string">"Arabidopsis"</span>         <span class="string">"ath"</span>     <span class="string">"tair"</span> </div><div class="line"> [<span class="number">3</span>,] <span class="string">"org.Bt.eg.db"</span>      <span class="string">"Bovine"</span>              <span class="string">"bta"</span>     <span class="string">"eg"</span>   </div><div class="line"> [<span class="number">4</span>,] <span class="string">"org.Ce.eg.db"</span>      <span class="string">"Worm"</span>                <span class="string">"cel"</span>     <span class="string">"eg"</span>   </div><div class="line"> [<span class="number">5</span>,] <span class="string">"org.Cf.eg.db"</span>      <span class="string">"Canine"</span>              <span class="string">"cfa"</span>     <span class="string">"eg"</span>   </div><div class="line"> [<span class="number">6</span>,] <span class="string">"org.Dm.eg.db"</span>      <span class="string">"Fly"</span>                 <span class="string">"dme"</span>     <span class="string">"eg"</span>   </div><div class="line"> [<span class="number">7</span>,] <span class="string">"org.Dr.eg.db"</span>      <span class="string">"Zebrafish"</span>           <span class="string">"dre"</span>     <span class="string">"eg"</span>   </div><div class="line"> [<span class="number">8</span>,] <span class="string">"org.EcK12.eg.db"</span>   <span class="string">"E coli strain K12"</span>   <span class="string">"eco"</span>     <span class="string">"eg"</span>   </div><div class="line"> [<span class="number">9</span>,] <span class="string">"org.EcSakai.eg.db"</span> <span class="string">"E coli strain Sakai"</span> <span class="string">"ecs"</span>     <span class="string">"eg"</span>   </div><div class="line">[<span class="number">10</span>,] <span class="string">"org.Gg.eg.db"</span>      <span class="string">"Chicken"</span>             <span class="string">"gga"</span>     <span class="string">"eg"</span>   </div><div class="line">[<span class="number">11</span>,] <span class="string">"org.Hs.eg.db"</span>      <span class="string">"Human"</span>               <span class="string">"hsa"</span>     <span class="string">"eg"</span>   </div><div class="line">[<span class="number">12</span>,] <span class="string">"org.Mm.eg.db"</span>      <span class="string">"Mouse"</span>               <span class="string">"mmu"</span>     <span class="string">"eg"</span>   </div><div class="line">[<span class="number">13</span>,] <span class="string">"org.Mmu.eg.db"</span>     <span class="string">"Rhesus"</span>              <span class="string">"mcc"</span>     <span class="string">"eg"</span>   </div><div class="line">[<span class="number">14</span>,] <span class="string">"org.Pf.plasmo.db"</span>  <span class="string">"Malaria"</span>             <span class="string">"pfa"</span>     <span class="string">"orf"</span>  </div><div class="line">[<span class="number">15</span>,] <span class="string">"org.Pt.eg.db"</span>      <span class="string">"Chimp"</span>               <span class="string">"ptr"</span>     <span class="string">"eg"</span>   </div><div class="line">[<span class="number">16</span>,] <span class="string">"org.Rn.eg.db"</span>      <span class="string">"Rat"</span>                 <span class="string">"rno"</span>     <span class="string">"eg"</span>   </div><div class="line">[<span class="number">17</span>,] <span class="string">"org.Sc.sgd.db"</span>     <span class="string">"Yeast"</span>               <span class="string">"sce"</span>     <span class="string">"orf"</span>  </div><div class="line">[<span class="number">18</span>,] <span class="string">"org.Ss.eg.db"</span>      <span class="string">"Pig"</span>                 <span class="string">"ssc"</span>     <span class="string">"eg"</span>   </div><div class="line">[<span class="number">19</span>,] <span class="string">"org.Xl.eg.db"</span>      <span class="string">"Xenopus"</span>             <span class="string">"xla"</span>     <span class="string">"eg"</span></div></pre></td></tr></table></figure>
<p>在前面的案例中，我们使用的是人的数据，它们使用Entrez Gene来作为默认的gene ID，pathview可以使用Locus tag或其它的gene ID来作为KEGG的默认ID，下面我们就使用了E coli的K12来作为案例说明一下，如下所示</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">eco.dat.kegg &lt;- sim.mol.data(mol.type=<span class="string">"gene"</span>,id.type=<span class="string">"kegg"</span>,species=<span class="string">"eco"</span>,nmol=<span class="number">3000</span>)</div><div class="line">head(eco.dat.kegg)</div><div class="line">pv.out &lt;- pathview(gene.data = eco.dat.kegg,</div><div class="line">                   gene.idtype=<span class="string">"kegg"</span>,</div><div class="line">                   pathway.id = <span class="string">"00640"</span>,</div><div class="line">                   species = <span class="string">"eco"</span>,</div><div class="line">                   out.suffix = <span class="string">"eco.kegg"</span>,</div><div class="line">                   kegg.native = <span class="literal">T</span>,</div><div class="line">                   same.layer=<span class="literal">T</span>)</div></pre></td></tr></table></figure>
<p>数据如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; head(eco.dat.kegg)</div><div class="line">      b4526       b1145       b2423       b0251       b2053       b2119 </div><div class="line">-1.15259948  0.46416071  0.72893247  0.41061745 -1.46114720 -0.01890809</div></pre></td></tr></table></figure>
<p>绘图如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/0Cc7ie65Lc.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>也可以使用Entrez gene ID来进行分析，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">eco.dat.entrez &lt;- sim.mol.data(mol.type=<span class="string">"gene"</span>,id.type=<span class="string">"entrez"</span>,species=<span class="string">"eco"</span>,nmol=<span class="number">3000</span>)</div><div class="line">head(eco.dat.entrez)</div></pre></td></tr></table></figure>
<p>数据如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; head(eco.dat.entrez)</div><div class="line">     <span class="number">946172</span>      <span class="number">945943</span>      <span class="number">947303</span>      <span class="number">945003</span>      <span class="number">946915</span>      <span class="number">946983</span> </div><div class="line">-<span class="number">1.15259948</span>  <span class="number">0.46416071</span>  <span class="number">0.72893247</span>  <span class="number">0.41061745</span> -<span class="number">1.46114720</span> -<span class="number">0.01890809</span></div></pre></td></tr></table></figure>
<p>绘图如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">pv.out &lt;- pathview(gene.data = eco.dat.entrez,</div><div class="line">                   gene.idtype=<span class="string">"entrez"</span>,</div><div class="line">                   pathway.id = <span class="string">"00640"</span>,</div><div class="line">                   species = <span class="string">"eco"</span>,</div><div class="line">                   out.suffix = <span class="string">"eco.entrez"</span>,</div><div class="line">                   kegg.native = <span class="literal">T</span>,</div><div class="line">                   same.layer=<span class="literal">T</span>)</div></pre></td></tr></table></figure>
<p>pathview会从KEGG中下载gene ID，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/dcFLhAmk6h.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>最终结果如下所示：</p>
<p>（下载速度太慢，不写了）。</p>
<p>从<code>bods</code>这个数据中我们可以知道，E coli K12是一个Bioconductor注释的物种，因此可以使用其它的ID对其进行转换，例如使用正式的基因标记（official gene symbols），当我们使用<code>pathview</code>时，这样的数据首选会映射到Entrez Gene ID，然后映射到默认的KEGG ID（Locus tag），如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">egid.eco=eg2id(names(eco.dat.entrez), category=<span class="string">"symbol"</span>, pkg=<span class="string">"org.EcK12.eg.db"</span>)</div><div class="line">eco.dat.symbol &lt;- eco.dat.entrez</div><div class="line">names(eco.dat.symbol) &lt;- egid.eco[,<span class="number">2</span>]</div><div class="line">head(eco.dat.kegg)</div><div class="line">pv.out &lt;- pathview(gene.data = eco.dat.symbol, gene.idtype=<span class="string">"symbol"</span>,pathway.id = <span class="string">"00640"</span>, species = <span class="string">"eco"</span>, out.suffix = <span class="string">"eco.symbol.2layer"</span>,kegg.native = <span class="literal">T</span>, same.layer=<span class="literal">F</span>)</div></pre></td></tr></table></figure>
<p>下载太慢，不写了，我也用不到大肠杆菌的分析。</p>
<p>笔记到此结束。</p>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><a href="https://mp.weixin.qq.com/s/TLuLQdQCT989kMOxPlvL8A" target="_blank" rel="external">R语言实现KEGG通路富集可视化</a></li>
<li>Pathview: pathway based data integration and visualization</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/03/Python/Python学习笔记（3）-数据类型之列表与元组/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/Python/Python学习笔记（3）-数据类型之列表与元组/" itemprop="url">Python学习笔记（3）-数据类型之列表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T12:00:00+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5,435
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  23
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一列表的概念">（一）列表的概念</h2>
<p>序列是Python中最基本的数据结构，和字符串差不多，列表是一系列的数值的序列，序列中的每个元素都分配一个数字，这个数字代表了它的位置，这个数字也叫索引，第一个索引是0，第二个索引是1，依此类推。序列都可以进行的操作包括索引，切片，加，乘，检查成员。</p>
<p>列表是包含若干元素的有序连接内存空间，其形式是中括号。当列表增加或删除元素时，列表对象自动进行内存的扩展或收缩，从而保证元素之间没有缝隙。但是当插入和删除非尾部元素时会涉及列表中大量元素的移动，效率较低，因此除非确实有必要，否则应尽量从列表尾部进行元素的增加与删除。</p>
<p>列表中的元素类型可以不同，可以同时分别为整数、实数、字符串等基本类型，也可以是列表、元组、字典、集合以及其他自定义类型的对象。序列都可以进行的操作包括索引，切片，加，乘，检查成员。</p>
<h2 id="列表的创建">列表的创建</h2>
<h3 id="常规创建列表">常规创建列表</h3>
<p>创建一个列表，只要把逗号分隔的不同的数据项使用方括号括起来即可。如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = [<span class="string">'physics'</span>, <span class="string">'chemistry'</span>, <span class="number">1997</span>, <span class="number">2000</span>];</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ];</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list3 = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>];</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list1)</div><div class="line">[<span class="string">'physics'</span>, <span class="string">'chemistry'</span>, <span class="number">1997</span>, <span class="number">2000</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list2)</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list3)</div><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</div></pre></td></tr></table></figure>
<h3 id="使用list函数创建列表">使用list函数创建列表</h3>
<p><code>list()</code>函数可以将元组，字符串，字典，集合或其它类型的可迭代对象转换为列表。在将字典转换为列表时，默认是将字典的“键”转换为列表，而不是把字符的元素转换为列表，如果要把字典的元素转换为列表，需要使用字典对象的<code>items()</code>方法，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a_list = list((<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将元组转换为列表</span></div><div class="line"><span class="meta">... </span>print(a_list)</div><div class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b_list = list(range(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(b_list)</div><div class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将range对象转换为列表</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(<span class="string">'hello world'</span>))</div><div class="line">[<span class="string">'h'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>, <span class="string">' '</span>, <span class="string">'w'</span>, <span class="string">'o'</span>, <span class="string">'r'</span>, <span class="string">'l'</span>, <span class="string">'d'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将字符串转换为列表</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(&#123;<span class="number">3</span>, <span class="number">7</span>, <span class="number">4</span>&#125;))</div><div class="line">[<span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将集合转换为列表</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c_list = list(&#123;<span class="string">'a'</span>:<span class="number">3</span>, <span class="string">'b'</span>:<span class="number">9</span>,  <span class="string">'c'</span>:<span class="number">78</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(c_list)</div><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将字典的键转换为列表</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d_list = list(&#123;<span class="string">'a'</span>:<span class="number">3</span>,<span class="string">'b'</span>:<span class="number">9</span>, <span class="string">'c'</span>:<span class="number">78</span>&#125;.items())</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(d_list)</div><div class="line">[(<span class="string">'a'</span>, <span class="number">3</span>), (<span class="string">'b'</span>, <span class="number">9</span>), (<span class="string">'c'</span>, <span class="number">78</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将字典的键值转换为列表</span></div></pre></td></tr></table></figure>
<h2 id="列表和字符串">列表和字符串</h2>
<p>字符串是一系列字符的序列，而列表是一系列值的序列，但一个由字符组成的列表是不同于字符串的。要把一个字符串转换成字符列表，可以用 list这个函数，如下所示： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>t = list(s)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>t</div><div class="line">[<span class="string">'s'</span>, <span class="string">'p'</span>, <span class="string">'a'</span>, <span class="string">'m'</span>]</div></pre></td></tr></table></figure></p>
<h2 id="判断两个列表是否是同一个对象">判断两个列表是否是同一个对象</h2>
<p>使用的函数是<code>is()</code>，先看一个案例： <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">'banana'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">'banana'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b <span class="keyword">is</span> a</div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure></p>
<p>在这个例子中，Python 只建立了一个字符串对象，然后a和b 都指向它。但当你建立两个列表的时候，你得到的就是两个对象了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</div><div class="line"><span class="keyword">False</span></div></pre></td></tr></table></figure>
<p>在这个情况下，我们可以说两个列表是相等的，因为它们有相同的元素，但它们不是同一个列表，因为他们并不是同一个对象。如果两个对象是同一个对象，那它们必然是相等的，但如果它们相等，却未必是同一个对象。如果a是一个对象了，然后你赋值c=a，那么这两个变量都指向同一个对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c = a</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>c <span class="keyword">is</span> a</div><div class="line"><span class="keyword">True</span></div></pre></td></tr></table></figure>
<p>一个变量和一个对象的关系叫做引用。在上面这个例子中a和c是对同一对象的两个引用。这样一个对象有不止一个引用，就也有了不止一个名字，所以就说这个对象有别名了。如果一个别名对象是可修改的，那么对一个别名做出的修改就会影响到其他引用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>c[<span class="number">0</span>] = <span class="number">100</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a</div><div class="line">[<span class="number">100</span>, <span class="number">2</span>, <span class="number">3</span>]</div></pre></td></tr></table></figure>
<p>这一性质是很有用处的，但很容易让初学者犯错。所以一般来说，处理可变对象的时候，还是尽量避免别名使用，这样更安全些。</p>
<h2 id="删除列表">删除列表</h2>
<p>当一个列表不再使用时，可以使用del将其删除，del也可以删除列表，字典等可变序列中的部分元素，而不能删除元组、字符串等不可变序列中的部分元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> x[<span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">1</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> x</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">NameError: name <span class="string">'x'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</div></pre></td></tr></table></figure>
<p>列表可以删除其中的元素，元组不行。使用<code>del</code>删除对象后，Python会在恰当的时机调用垃圾回收机制来释放内存，在必要的时候也可以导入Python的标准库gc，使用其中的<code>gc.collect()</code>函数立刻启动垃圾回收机制来释放内存。</p>
<h2 id="列表元素的添加">列表元素的添加</h2>
<p>append()，insert()，extend()功能：向列表对象中添加元素，其中append()向列表尾部追加一个元素，insert()在列表任意指定位置插入一个元素，extend()用于将另一个列表中的所有元素追加到当前列表中的尾部。这3个方法都属于原地操作，不影响列表对象在内存中的起始地址，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">3</span>,  <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(x))</div><div class="line"><span class="number">2434396012360</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 查看内存地址</span></div><div class="line"><span class="meta">... </span>x.append(<span class="number">55</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 在尾部追加元素</span></div><div class="line"><span class="meta">... </span>print(x)</div><div class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">55</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.insert(<span class="number">0</span>,<span class="number">99</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 在指定位置插入元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.extend([<span class="number">5</span>, <span class="number">6</span>, <span class="number">8</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 在尾部追加多个元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">99</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">55</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">8</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(x))</div><div class="line"><span class="number">2434396012360</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 列表在内存中的地址不变</span></div></pre></td></tr></table></figure>
<p>运算符<code>+</code>和<code>*</code>也能实现列表增加元素的目的，但这两个运算符不属于原地操作，而是返回新列表，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(x))</div><div class="line"><span class="number">2434396012296</span></div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = x + [<span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(x))</div><div class="line"><span class="number">2434395797512</span></div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = x*<span class="number">2</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(id(x))</div><div class="line"><span class="number">2434396012296</span></div></pre></td></tr></table></figure>
<h2 id="列表的删除popremoveclear">列表的删除——pop()、remove()、clear()</h2>
<p>这3个方法用于删除列表中的元素，其中pop()用于删除并返回指定位置（默认是最后一个）上的元素，remove()用于删除列表中第一个值与指定值相等的元素（当不知道某个值在哪个位置时用比较合适），clear()用于清空列表。这3个方法属于原地操作，不影响列表对象的内存地址。另外，也可以使用del命令删除列表中指定位置的元素，也属于原地操作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x.pop())</div><div class="line"><span class="number">7</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 弹出并返回尾部元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x.pop(<span class="number">0</span>))</div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 弹出并返回指定位置的元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x.clear())</div><div class="line"><span class="keyword">None</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 删除所有元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x2)</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x2.remove(<span class="number">2</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x2)</div><div class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 删除首个值为2的元素</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> x2[<span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x2)</div><div class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 删除指定位置上的元素</span></div><div class="line">...</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>注：在列表中间位置插入或删除元素时，会影响该位置后面所有元素后的下标，要尽量避免在列表中间位置进行元素的插入和删除操作。</p>
<h2 id="列表元素统计countindex">列表元素统计count()、index()</h2>
<p>count()用于返回列表中指定元素中出现的次数，index()用于返回指定元素在列表中首次出现的位置，如果该元素不在列表中则抛出异常。除此之外，成员测试运算符in也可以测试列表中是否存在某个元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.count(<span class="number">3</span>) <span class="comment">#元素3在列表x中出现的次数</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.count(<span class="number">5</span>) <span class="comment">#元素5在列表x中出现的次数</span></div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.index(<span class="number">2</span>) <span class="comment">#元素2在列表x中首次出现的索引</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.index(<span class="number">4</span>)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> <span class="keyword">in</span> x <span class="comment"># 5不是列表x的元素</span></div><div class="line"><span class="keyword">False</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span> <span class="keyword">in</span> x</div><div class="line"><span class="keyword">True</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.index(<span class="number">5</span>) <span class="comment"># 列表中没有5，抛出异常</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">ValueError: <span class="number">5</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">in</span> list</div></pre></td></tr></table></figure>
<h2 id="列表的排序sort">列表的排序——sort()</h2>
<p>列表对象的sort()和reverse()是对列表进行原地排序和逆序，意思是用处理后的数据替换原来的数据，列表中元素原来的顺序丢失。如果原来的顺序不想丢失，可以使用sorted()和reversed()来实现，其中sorted()返回新列表，reversed()返回一个逆序排列后的迭代对象，这两个函数都不对原列表做任何修改。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = list(range(<span class="number">11</span>)) <span class="comment"># 生成包含11个整数的列表</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>random.shuffle(x)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># shuffle() 方法将序列的所有元素随机排序</span></div><div class="line"><span class="meta">... </span>print(x)</div><div class="line">[<span class="number">8</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">6</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.sort(key=<span class="keyword">lambda</span> item:len(str(item)),reverse = <span class="keyword">True</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">10</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">6</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.sort(key = str)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x.sort()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</div></pre></td></tr></table></figure>
<h2 id="列表的排序sorted">列表的排序——sorted()</h2>
<p>sorted()返回新列表，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h3 id="排序的key参数">排序的key参数</h3>
<p>关于排序方法的key参数，充分利用列表对象的sort()方法和内置函数sorted()的key参数，可以实现更加复杂的排序，以内置函数sroted()为例说明一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>gameresult = [[<span class="string">'Bob'</span>, <span class="number">95.0</span>, <span class="string">'A'</span>],[<span class="string">'Alan'</span>, <span class="number">86.0</span>, <span class="string">'C'</span>],[<span class="string">'Mandy'</span>, <span class="number">83.5</span>, <span class="string">'A'</span>],[<span class="string">'Rob'</span>, <span class="number">89.3</span>, <span class="string">'E'</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(gameresult, key=itemgetter(<span class="number">2</span>))</div><div class="line">[[<span class="string">'Bob'</span>, <span class="number">95.0</span>, <span class="string">'A'</span>], [<span class="string">'Mandy'</span>, <span class="number">83.5</span>, <span class="string">'A'</span>], [<span class="string">'Alan'</span>, <span class="number">86.0</span>, <span class="string">'C'</span>], [<span class="string">'Rob'</span>, <span class="number">89.3</span>, <span class="string">'E'</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 按子列表第3个元素进行升序排序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(gameresult, key = itemgetter(<span class="number">2</span>, <span class="number">0</span>))</div><div class="line">[[<span class="string">'Bob'</span>, <span class="number">95.0</span>, <span class="string">'A'</span>], [<span class="string">'Mandy'</span>, <span class="number">83.5</span>, <span class="string">'A'</span>], [<span class="string">'Alan'</span>, <span class="number">86.0</span>, <span class="string">'C'</span>], [<span class="string">'Rob'</span>, <span class="number">89.3</span>, <span class="string">'E'</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 按第3个元素升序，然后按第1个升序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(gameresult, key = itemgetter(<span class="number">2</span>, <span class="number">0</span>), reverse = <span class="keyword">True</span>)</div><div class="line">[[<span class="string">'Rob'</span>, <span class="number">89.3</span>, <span class="string">'E'</span>], [<span class="string">'Alan'</span>, <span class="number">86.0</span>, <span class="string">'C'</span>], [<span class="string">'Mandy'</span>, <span class="number">83.5</span>, <span class="string">'A'</span>], [<span class="string">'Bob'</span>, <span class="number">95.0</span>, <span class="string">'A'</span>]]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = [<span class="string">"what"</span>, <span class="string">"I'm"</span>, <span class="string">"sorting"</span>, <span class="string">"by"</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 以一个列表为内容进行排序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list2 = [<span class="string">"something"</span>, <span class="string">"else"</span>, <span class="string">"to"</span>, <span class="string">"sort"</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 对另一个列表的内容进行排序</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>pairs = zip(list1, list2)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 把两个列表中的对应位置元素配对</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>[item[<span class="number">1</span>] <span class="keyword">for</span> item <span class="keyword">in</span> sorted(pairs, key = <span class="keyword">lambda</span> x:x[<span class="number">0</span>], reverse = <span class="keyword">True</span>)]</div><div class="line">[<span class="string">'something'</span>, <span class="string">'to'</span>, <span class="string">'sort'</span>, <span class="string">'else'</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>], [<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 以第2个元素升序、第3个元素降序排序</span></div><div class="line"><span class="meta">... </span>sorted(x, key = <span class="keyword">lambda</span> item:(item[<span class="number">1</span>], -item[<span class="number">2</span>]))</div><div class="line">[[<span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>]]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="string">'aaaa'</span>, <span class="string">'bc'</span>, <span class="string">'d'</span>, <span class="string">'b'</span>, <span class="string">'ba'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(x, key = <span class="keyword">lambda</span> item:(len(item), item))</div><div class="line">[<span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'ba'</span>, <span class="string">'bc'</span>, <span class="string">'aaaa'</span>]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="列表常用方法的汇总">列表常用方法的汇总</h2>
<table>
<colgroup>
<col width="35%">
<col width="64%">
</colgroup>
<thead>
<tr class="header">
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>lst.append(x)</td>
<td>将元素x添加到列表lst的尾部</td>
</tr>
<tr class="even">
<td>lst.extend(L)</td>
<td>将列表L中所有元素添加至列表lst的尾部</td>
</tr>
<tr class="odd">
<td>lst.insert(index,x)</td>
<td>在列表lst指定位置index处添加元素x，该位置后面的所有元素后移一个位置</td>
</tr>
<tr class="even">
<td>lst.remove(x)</td>
<td>在列表lst中删除首次出现的指定元素，该元素之后的所有元素向前移一个位置</td>
</tr>
<tr class="odd">
<td>lst.pop([index])</td>
<td>删除并返回列表lst中下标为Index（默认为-1）的元素</td>
</tr>
<tr class="even">
<td>lst.clear()</td>
<td>删除不用列lst中的所有元素，但保留列表对象</td>
</tr>
<tr class="odd">
<td>lst.index(x)</td>
<td>返回列表lst中第一个值为x元素的下标，若不存在值为x的元素则抛出异常</td>
</tr>
<tr class="even">
<td>lst.count(x)</td>
<td>返回指定元素x在列表lst中的出现位置</td>
</tr>
<tr class="odd">
<td>lst.reverse()</td>
<td>对列lst所有元素进行逆序</td>
</tr>
<tr class="even">
<td>lst.sort(key=None,reverse=False)</td>
<td>对列表lst中的元素进行排序，key用来指定排序依据，reverse决定升序（False）还是降序（True）</td>
</tr>
<tr class="odd">
<td>lst.copy()</td>
<td>返回列表lst的浅复制</td>
</tr>
</tbody>
</table>
<h2 id="内置函数对列表的操作">内置函数对列表的操作</h2>
<p>max()，min()返回列表中所有元素的最大值和最小值；sum()函数用于返回数值型列表中所有元素之和，len()函数用于返回列表中元素的个数，zip()函数用于将多个列表中元素重新组合为元组并返回包含这些元组的zip对象，enumerate()函数返回包含若干下标和值的迭代对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = list(range(<span class="number">11</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>random.shuffle(x)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(x)</div><div class="line">[<span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">8</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>max(x)</div><div class="line"><span class="number">10</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>min(x)</div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>sum(x)</div><div class="line"><span class="number">55</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>len(x)</div><div class="line"><span class="number">11</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(zip(x, [<span class="number">1</span>]*<span class="number">11</span>))</div><div class="line">[(<span class="number">3</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">5</span>, <span class="number">1</span>), (<span class="number">10</span>, <span class="number">1</span>), (<span class="number">6</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">7</span>, <span class="number">1</span>), (<span class="number">4</span>, <span class="number">1</span>), (<span class="number">9</span>, <span class="number">1</span>), (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">8</span>, <span class="number">1</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 多列表重新组合</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(zip(range(<span class="number">1</span>,<span class="number">4</span>)))</div><div class="line">[(<span class="number">1</span>,), (<span class="number">2</span>,), (<span class="number">3</span>,)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># zip()函数也可以用于一个序列或迭代对象</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(zip([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>],[<span class="number">1</span>,<span class="number">2</span>]))</div><div class="line">[(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 如果两个列表不等长，以短的为准</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>enumerate(x)</div><div class="line">&lt;enumerate object at <span class="number">0x00000236CD4EBF78</span>&gt;</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(enumerate(x))</div><div class="line">[(<span class="number">0</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">5</span>), (<span class="number">3</span>, <span class="number">10</span>), (<span class="number">4</span>, <span class="number">6</span>), (<span class="number">5</span>, <span class="number">1</span>), (<span class="number">6</span>, <span class="number">7</span>), (<span class="number">7</span>, <span class="number">4</span>), (<span class="number">8</span>, <span class="number">9</span>), (<span class="number">9</span>, <span class="number">0</span>), (<span class="number">10</span>, <span class="number">8</span>)]</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="map函数">map()函数</h2>
<p>map()函数的用法：</p>
<p><code>map(func, seq1[, seq2,…])</code></p>
<p>第一个参数接受一个函数名，后面的参数接受一个或多个可迭代的序列，返回的是一个集合。</p>
<p>Python函数编程中的map()函数是将func作用于seq中的每一个元素，并将所有的调用的结果作为一个list返回。如果func为None，作用同zip()。当seq只有一个时，将函数func作用于这个seq的每个元素上，并得到一个新的seq。</p>
<p>让我们来看一下只有一个seq的时候，map()函数是如何工作的。 一个最简单的例子,如基于<code>f(x) = x^2</code>,map()作用于list [1, 2, 3, 4, 5, 6, 7, 8, 9]后的结果如下:返回结果仍为list。</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180519/C09gA5BLC5.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">power2</span><span class="params">(x)</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">return</span> x**<span class="number">2</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(map(power2,a))</div><div class="line">&lt;map object at <span class="number">0x00000236CD4E66A0</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(map(power2,a)))</div><div class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>]</div></pre></td></tr></table></figure>
<p>map不能直接返回结果，必须要有list作用于结果之上，才能显示为列表。</p>
<p>再看一个map()函数的案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(str, range(<span class="number">5</span>)))</div><div class="line">[<span class="string">'0'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 将一个函数依次作用到序列对象的每个元素上，这里就是将str这个函数作用于range(5)的每个元素上；</span></div><div class="line"><span class="meta">... </span><span class="comment"># 转换为字符串</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add5</span><span class="params">(v)</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">return</span> v + <span class="number">5</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(add5, range(<span class="number">10</span>)))</div><div class="line">[<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x, y)</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">return</span> x + y</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(add, range(<span class="number">5</span>), range(<span class="number">5</span>, <span class="number">10</span>)))</div><div class="line">[<span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 把双参数函数映射到两个序列上</span></div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(<span class="keyword">lambda</span> x, y:x+y, range(<span class="number">5</span>), range(<span class="number">5</span>, <span class="number">10</span>)))</div><div class="line">[<span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>]</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>[add(x,y) <span class="keyword">for</span> x, y <span class="keyword">in</span> zip(range(<span class="number">5</span>), range(<span class="number">5</span>, <span class="number">10</span>))]</div><div class="line">[<span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>]</div></pre></td></tr></table></figure>
<h2 id="zip函数合并列表">zip()函数合并列表</h2>
<p>使用zip()函数来可以把列表合并，并创建一个元组对的列表，在python 3.0中zip()是可迭代对象，使用时必须将其包含在一个list中，方便一次性显示出所有结果，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>y = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>z = [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>xyz = zip(x, y, z)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(xyz)</div><div class="line">[(<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>), (<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>), (<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>)]</div></pre></td></tr></table></figure>
<h2 id="reduce函数">reduce()函数</h2>
<p>标准库中functools中的函数reduce()可以将一个接收2个参数的函数以累积的方式从左到右依次作用到一个序列或迭代器对象的所有元素上，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x, y)</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">return</span> x + y</div><div class="line">...</div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>seq = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(add, range(<span class="number">10</span>))</div><div class="line"><span class="number">45</span></div><div class="line">&gt;&gt;&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(<span class="keyword">lambda</span> x, y:x+y, seq)</div><div class="line"><span class="number">45</span></div></pre></td></tr></table></figure>
<h2 id="列表推导式">列表推导式</h2>
<p>推导式comprehensions（又称解析式），是Python的一种独有特性。推导式是可以从一个数据序列构建另一个新的数据序列的结构体。 共有三种推导，分别为：①列表(list)推导式；②字典(dict)推导式 ；③集合(set)推导式。列表推导式的英文为List Comprehensions，它提供了一种简便的方式创建list，它的语法形式为<code>[表达式  for 变量  in序列或迭代对象]</code>。列表推导式由这些成分构成：①中括号（里面含有表达式）；②for（后面跟着其他的for或if语句）。下面是一个案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>multiples = [i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">30</span>) <span class="keyword">if</span> i % <span class="number">3</span> <span class="keyword">is</span> <span class="number">0</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(multiples)</div><div class="line">[<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">15</span>, <span class="number">18</span>, <span class="number">21</span>, <span class="number">24</span>, <span class="number">27</span>]</div></pre></td></tr></table></figure>
<h3 id="列表推导式案例2">列表推导式案例2:</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">squared</span><span class="params">(x)</span>:</span></div><div class="line">    <span class="keyword">return</span> x*x</div><div class="line"></div><div class="line">multiples = [squared(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">30</span>) <span class="keyword">if</span> i % <span class="number">3</span> <span class="keyword">is</span> <span class="number">0</span>]</div><div class="line">print(multiples)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">squared</span><span class="params">(x)</span>:</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">return</span> x*x</div><div class="line">...</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>multiples = [squared(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">30</span>) <span class="keyword">if</span> i % <span class="number">3</span> <span class="keyword">is</span> <span class="number">0</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(multiples)</div><div class="line">[<span class="number">0</span>, <span class="number">9</span>, <span class="number">36</span>, <span class="number">81</span>, <span class="number">144</span>, <span class="number">225</span>, <span class="number">324</span>, <span class="number">441</span>, <span class="number">576</span>, <span class="number">729</span>]</div></pre></td></tr></table></figure>
<h3 id="列表推导式的应用">列表推导式的应用</h3>
<p>列表推导式中使用多个循环，实现多序列元素的任意组合，并且可以结合条件语句过滤特定元素，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<p>上面的代码与下面的相同，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat test4.py</div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line">result = []</div><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]:</div><div class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> [<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>]:</div><div class="line">        <span class="keyword">if</span> x != y:</div><div class="line">         result.append((x,y))</div><div class="line">print(result)</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 test4.py</div><div class="line">[(<span class="number">1</span>, <span class="number">3</span>), (<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">2</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">4</span>), (<span class="number">3</span>, <span class="number">1</span>), (<span class="number">3</span>, <span class="number">4</span>)]</div></pre></td></tr></table></figure>
<h3 id="使用列表推导式实现矩阵转置">使用列表推导式实现矩阵转置</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>matrix = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>], [<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>a = [[row[i] <span class="keyword">for</span> row <span class="keyword">in</span> matrix ] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>)]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</div><div class="line">[[<span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>], [<span class="number">2</span>, <span class="number">6</span>, <span class="number">10</span>], [<span class="number">3</span>, <span class="number">7</span>, <span class="number">11</span>], [<span class="number">4</span>, <span class="number">8</span>, <span class="number">12</span>]]</div></pre></td></tr></table></figure>
<p>使用内置函数zip()和list()也能实现矩阵转置：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>matrix = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>], [<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(map(list,zip(*matrix))))</div><div class="line">[[<span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>], [<span class="number">2</span>, <span class="number">6</span>, <span class="number">10</span>], [<span class="number">3</span>, <span class="number">7</span>, <span class="number">11</span>], [<span class="number">4</span>, <span class="number">8</span>, <span class="number">12</span>]]</div></pre></td></tr></table></figure>
<h3 id="列表推导式的复杂案例">列表推导式的复杂案例</h3>
<p>列表推导式中可以使用函数或复杂表达式，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ cat test5.py</div><div class="line"><span class="comment">#!/usr/bin/python3</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(v)</span>:</span></div><div class="line">    <span class="keyword">if</span> v%<span class="number">2</span> ==<span class="number">0</span>:</div><div class="line">     v=v**<span class="number">2</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">     v=v+<span class="number">1</span></div><div class="line">    <span class="keyword">return</span> v</div><div class="line">print([f(v) <span class="keyword">for</span> v <span class="keyword">in</span> [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">-1</span>] <span class="keyword">if</span> v &gt; <span class="number">0</span>])</div><div class="line">print([v**<span class="number">2</span> <span class="keyword">if</span> v%<span class="number">2</span> ==<span class="number">0</span> <span class="keyword">else</span> v+<span class="number">1</span> <span class="keyword">for</span> v <span class="keyword">in</span> [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>,<span class="number">-1</span>] <span class="keyword">if</span> v &gt; <span class="number">0</span>])</div><div class="line">biotest@biotest-VirtualBox:~/python3/<span class="number">03</span>file$ python3 test5.py</div><div class="line">[<span class="number">4</span>, <span class="number">4</span>, <span class="number">16</span>]</div><div class="line">[<span class="number">4</span>, <span class="number">4</span>, <span class="number">16</span>]</div></pre></td></tr></table></figure>
<h2 id="二元组的概念">（二）元组的概念</h2>
<p>元组是Python的一个重要序列结构，从形式上来看，元组的所有元素放在一对圆括号中，元素之间使用逗号分隔，下面来说一下如何创建元组。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>) <span class="comment"># 直接把元组赋值给一个变量</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(x) <span class="comment"># 查看变量的类型</span></div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">tuple</span>'&gt;</span></div><div class="line">&gt;&gt;&gt; x=(3,) # 如果元组中只有一个元素，则需要在后面加上逗号</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line">(<span class="number">3</span>,)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>type(x)</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">tuple</span>'&gt;</span></div><div class="line"><span class="class">&gt;&gt;&gt; <span class="title">tuple</span><span class="params">(range<span class="params">(<span class="number">1</span>,<span class="number">5</span>)</span>)</span></span></div><div class="line"><span class="class"><span class="params">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span></span></div><div class="line"><span class="class">&gt;&gt;&gt;</span></div></pre></td></tr></table></figure>
<p>元组中的元素无法改变，虽然元组支持切片操作，但是只能通过切片来访问元组中的元素，而不支持使用切片来修改元组中元素的值。</p>
<p><strong>但为什么还要使用元组呢？</strong></p>
<p>答：因为Python内部对元组做了大量的优化，访问和处理速度比列表更快。如果定义了一系列常量，主要用途仅是对它们进行遍历或其他类似用途，而不需要对其元素进行任何修改，那么一般建立使用元组而不使用列表。</p>
<h2 id="元组的特殊情况">元组的特殊情况</h2>
<p>虽然元组属于不可变序列，其元素值是不可改变的，但是如果元组中包括可变序列，情况又变得复杂一些，例如下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>x = ([<span class="number">1</span>,<span class="number">2</span>],<span class="number">3</span>) <span class="comment"># 元组中包含列表</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line">([<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">5</span> <span class="comment"># 修改元组中列表的元素</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line">([<span class="number">5</span>, <span class="number">2</span>], <span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[<span class="number">0</span>].append(<span class="number">8</span>) <span class="comment">#为元组中的列表增加元素</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x</div><div class="line">([<span class="number">5</span>, <span class="number">2</span>, <span class="number">8</span>], <span class="number">3</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>x[<span class="number">0</span>]=x[<span class="number">0</span>]+<span class="number">10</span> <span class="comment"># 修改列元组中的值，出错</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">TypeError: can only concatenate list (<span class="keyword">not</span> <span class="string">"int"</span>) to list</div></pre></td></tr></table></figure>
<h2 id="元组的成器推导式">元组的成器推导式</h2>
<p>生成器推导式与列表推导式非常类似，只是生成器推导式使用圆括号而不是列表推导式所用的方括号。与列表推导式不同的是，生成器推导式的结果是一个生成器对象，而不是列表，也不是元组。使用生成器对象的元素时，可以根据需要将其转化为列表或元组，也可以使用生成器对象的__next__()方法或内置函数next()进行遍历，或者直接将其作用迭代器对象来使用。但不管哪种方法访问其元素，当所有元素访问结束后，如果需要重新访问其中的元素，则必须重新创建该生成器对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>g = ((i +<span class="number">2</span> )**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)) <span class="comment"># 创建生成器对象</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g</div><div class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x000001898CE64678</span>&gt;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>tuple(g) <span class="comment"># 将生成器对象转换为元组</span></div><div class="line">(<span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>, <span class="number">100</span>, <span class="number">121</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>list(g) <span class="comment"># 生成器对象已经遍历结束，没有元素了</span></div><div class="line">[]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g = ((i +<span class="number">2</span> )**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g.__next__() <span class="comment"># 使用生成器对象的__next__()方法获取元素</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g.__next__() <span class="comment"># 获取下一个元素</span></div><div class="line"><span class="number">9</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(g) <span class="comment"># 使用内置函数next()获取生成器对象中的元素</span></div><div class="line"><span class="number">16</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>next(g) <span class="comment"># 获取下一个元素</span></div><div class="line"><span class="number">25</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>g = ((i +<span class="number">2</span> )**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>))</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> g:</div><div class="line"><span class="meta">... </span>    print(item, end= <span class="string">' '</span>) <span class="comment"># 使用循环直接遍历生成器对象中的元素</span></div><div class="line">...</div><div class="line"><span class="number">4</span> <span class="number">9</span> <span class="number">16</span> <span class="number">25</span> <span class="number">36</span> <span class="number">49</span> <span class="number">64</span> <span class="number">81</span> <span class="number">100</span> <span class="number">121</span> &gt;&gt;&gt;</div></pre></td></tr></table></figure>
<h2 id="生成器对象">生成器对象</h2>
<p>将列表推导式的[]改成()即可得到生成器，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>multiples = (i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">30</span>) <span class="keyword">if</span> i % <span class="number">3</span> <span class="keyword">is</span> <span class="number">0</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(type(multiples))</div><div class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">generator</span>'&gt;</span></div></pre></td></tr></table></figure>
<p>包含yield语句的函数可以用来创建可迭代的生成器对象。下面的代码演示了如何使用生成器来生成斐波那契数列的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></div><div class="line"> a, b = <span class="number">1</span>, <span class="number">1</span>                    <span class="comment"># 序列解包，同时为多个元素赋值</span></div><div class="line"> <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">     <span class="keyword">yield</span> a                    <span class="comment"># 暂停执行，需要时再产生一个新元素</span></div><div class="line">     a, b = b, a+b              <span class="comment"># 序列解包，继续生成新元素</span></div><div class="line">a = f()                         <span class="comment"># 创建生成器对象</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):             <span class="comment"># 斐波那契数列中前10个元素</span></div><div class="line"> print(a.__next__(),end = <span class="string">' '</span>)</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> f():</div><div class="line"> <span class="keyword">if</span> i &gt; <span class="number">100</span>:                    <span class="comment"># 斐波那契数列中第一个大于100的元素</span></div><div class="line">  print(i, end = <span class="string">' '</span>)</div><div class="line">  <span class="keyword">break</span></div><div class="line">a = f()</div><div class="line">print(next(a))</div><div class="line">print(next(a))</div><div class="line">print(next(a))</div></pre></td></tr></table></figure>
<p>运行后，结果如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">D:\&gt;python test.py</div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">8</span> <span class="number">13</span> <span class="number">21</span> <span class="number">34</span> <span class="number">55</span> <span class="number">144</span> <span class="number">1</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/04/03/Principle/KEGG笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/Principle/KEGG笔记/" itemprop="url">KEGG学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T12:00:00+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物信息学/" itemprop="url" rel="index">
                    <span itemprop="name">生物信息学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,673
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  14
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="通路分析">通路分析</h2>
<p>一个生物学过程的实现会涉及到许多蛋白质，这些蛋白质合在一起就是一个通路。通路分析能够帮助我们更好地了解某个或某一些蛋白质在一个生物学过程中所扮演的角色。</p>
<p>最常用的通路分析数据库是京都基因与基因组百科全书 (Kyoto Encyclopedia of Genes and Genomes, KEGG)。1995年，KEGG数据库项目由京都大学化学研究所教授Minoru Kanehisa领头启动。KEGG数据库是手工绘制的KEGG途径图的集合，每个途径图包含分子相互作用和反应的网络，将基因组中的基因与通路中的基因产物（主要是蛋白质）连接。KEGG pathway analysis即为将目的基因定位到KEGG途径图中的过程。</p>
<p>KEGG和GO的作用是类似的，只是KEGG里面最知名的是代谢通路(pathway)的注释，它是查询差异基因参与的信号通路比较权威的数据库，KEGG Pathway对差异基因进行通路分析，可以了解实验条件下显著改变的代谢通路，在机制研究中非常重要。GO分析好比是将基因分门别类放入一个个功能类群的篮子，而pathway则是将基因一个个具体放到代谢网络中的指定位置。</p>
<p>下图为small cell lung cancer的KEGG途径图。</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180409/5e1AC87cD0.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="kegg通路的查看">KEGG通路的查看</h2>
<p>输入www.kegg.jp进入KEGG的官网，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/EAH7bAggAi.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>单击中间的<code>KEGG PATHWAY</code>就可以进入到pathway界面，里面有7个KEGG PATHWAY，分别为：新陈代谢（Metabolism）、遗传信息处理（Genetic Information Processing）、环境信息处理（Environmental Information Processing）、细胞过程（Cellular Processes）、生物系统（Organismal Systems）、人类疾病（Human Diseases）、药物开发（Drug Development），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/h6GF942d5m.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>再看一下KEGG的其它的信息，看一下有多少个通路，单击<code>Current Stastics</code>，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180728/BAaF4eKg8d.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>可以看到，现在貌似有528个通路。现在回到首页，看一下KEGG通路的几个大类。先看第一个大类，<code>1.Metabolism</code>（这是一级分类），它的下面还有几个小类（如<code>1.1 Carbohydrate</code>，这是二级分类），如上图的红色方框所示，在每个小类下面，例如<code>1.1 Carbohydrate</code>下面，还有很多小类（例如<code>00010 Glycolysis/Gluconeogenesis</code>，这是三级分类），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/eclFJB8AK6.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>现在单击一下<code>00010</code>这个小类，也就是KEGG的三级分类，再在代谢通路上单击某个成分（例如酶，化合物）就能看到它们的详细信息，这就是第四层，我们就可以看到这个页面，从这个页面中我们可以知道，这个是糖酵解/糖异生参考通路（<code>Glycolysis / Gluconeogenesis - Reference pathway</code>），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/lcmIAja4mA.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在文字的介绍下面，是这个通路的参考示意图（Reference map），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/Bdae6F7Bfl.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在这张通路图中，每个方框都可以单击，查看每个节点的详细信息。</p>
<p>上面的这个通路只是其中一种，它的名称是<code>map00010</code>，通路名称的命名是由2部分构成的，第1部分是2-4个字母，第2部分是5个数字，第1部分的字母前缀表示不同类型的pathway，它们的含义如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">map-参考pathway</div><div class="line">ko-参考pathway（KO）</div><div class="line">ec-参考pathway（EC）</div><div class="line">rn-参考pathway（Reaction）</div><div class="line">org-物种特异pathway map</div></pre></td></tr></table></figure>
<p>我们上面呈现这个参考通路（reference pathway）的编号就是<code>map00010</code>，参考通路是用人工绘制而成的，参考通路是没有颜色的，都是黑色的方框，白色的底。我们可以看到，在上图的左下角上面写的有<code>00010</code>这5个字母，前面没有<code>map</code>这3个字母，不过看网址，里面确实有，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/LGJ10EelA4.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>前面说到参考通路是没有颜色的，都是黑色的方框，白色的底，如果是<code>ko00010</code>，那么它的图形就是下面的这个样子：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/bI5EddjCl2.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>可以看到，这个KO通路是有颜色的，它是在参考通路的基础上，利用计算机生成的，这个紫色的通路表示的是一种不区分物种的，所有通路，它除了颜色与参考通路有所不同外，其余的都相同。</p>
<p>我们再看一张通路图，看一张人类的，这张图命名为<code>has00010</code>，其中，<code>has</code>表示人类，它也是在参考通路的基础上，利用计算机生成的，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/ci0i4ALA4K.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/kADiIGIB1c.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在这张图中，我们可以发现这张通路与前面的<code>ko00010</code>通路不一样，紫色的通路中所有的矩形都涂成了紫色，而<code>has00010</code>通路则是有一部分涂了绿色，有一部分没有涂绿色，其中涂了绿色的方框表示是人类这个物种特有的，现在单击一下<code>3.1.9.1</code>这个方框，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/m3Lbhc1ll5.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>就能看到这个节点的详细信息，我们可以发现<code>3.1.3.9</code>是全称是<code>EC:3.1.3.9</code>，它表示一种酶，所含信息如下所示（这就是代谢通路图的第四层内容）：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/L6IfIIf8jC.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>在这张表格中，第一行的<code>Entry</code>中，有一个数字，即<code>2538</code>，这个是此酶的EntrezID编号，还有一个数字<code>T01001</code>，它是T number表示，KEGG数据库使用这个编码来表示基因组中的这个基因。</p>
<p>现在单击一个圆点，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/AjFBfGfglL.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>然后就会显示出另外一个网页，这表明，这个圆点是一个化合物，编号为<code>C05345</code>，其中前面的<code>C</code>表示化合物，即Compound，它的信息如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/eBlb12ldAK.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>再单击一个某个圆角矩形，例如就单击<code>Propanoate metabolism</code>，也就是丙酯代谢，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/BmdIcgAbKC.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>单击后，就发现我们切换一到了另外的一条通路上去，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/C5BhID9kjg.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这个通路的名称是<code>map00640</code>，因此，我们就知道了，KEGG通路中，圆角矩阵表示是的其它通路，圆点表示的是化合物，常规矩形表示的是酶（也就是某个基因）。</p>
<p><code>map00010</code>这个通路上有些符号没有，现在换一个通路，看一下<code>map04115</code>这个通路，它是p53信号通路，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/fcej5bjK2l.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>这个信号通路中有一些前面没有的符号，现在介绍一下：</p>
<ul>
<li>黑色箭头表示激活，如下所示：</li>
</ul>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/lAffLEjDbg.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<ul>
<li>T型头表示抑制，如下所示：</li>
</ul>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/eaC42eE5c2.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<ul>
<li><code>+p</code>表示磷酸化，如下所示：</li>
</ul>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/akHcBBI0cm.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p><code>-p</code>表示去磷酸化（截图来源于WNT信号通路，编号map04310），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/6glBIedm4l.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p><code>+u</code>表示泛素化，（截图来源于WNT信号通路，编号map04310），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/h51ad0h9hD.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p><code>+g</code>表示糖基化；</p>
<p><code>+m</code>表示甲基化；</p>
<p>虚线箭头表示间接作用，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/fgjEGfgkIh.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>两个矩阵在一块儿表示复合体，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/15lGA3mea2.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>箭头加圆点，加箭头表示转录激活（截图来源于WNT信号通路，编号map04310），如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180727/145lkAFGhf.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="kegg中代码">KEGG中代码</h2>
<ol style="list-style-type: decimal">
<li><code>K+num</code>，基因ID号，表示在所有同源物种中具有相似结构或功能的一类同源蛋白，如K04456=&gt;丝氨酸/苏氨酸蛋白激酶（备注：K建议大写）。</li>
<li><code>ko + num</code>，代谢通路名称，表示一个特定的生物路径，如：k04151=&gt;PIK-Akt信号通路，备注：ko小写。</li>
<li><code>M+num</code>，模块名称，M00676=&gt;PI3K-Akt信号模块。</li>
<li><code>C+num</code>，代合物名，如C00533表示NO。</li>
<li><code>E-.-.-.-</code>，酶名，例如EC2.7.1.11.1=&gt;丝氨酶/苏氨酸激酶，即K04456，AKT。</li>
<li><code>R+num</code>，反应名。</li>
<li><code>RC+num</code>，反应类型，RP + RP+num，反应物质对。</li>
</ol>
<h2 id="kegg的用途">KEGG的用途</h2>
<p>人类的七千多个基因组都是有已知功能的，KEGG把这七千多个基因分成了300个类，就是我们通常说的kegg通路；比如，我现在做了个实验，发现某细胞系里面的两万个基因里面有300个基因变化了，那这300个基因会涉及到KEGG数据库的哪几个通路？这时候就需要用到我的工具啦~将这300个基因加入工具里面，得出结果：有30个Cell cycle通路。</p>
<h2 id="kegg分析的原理">KEGG分析的原理</h2>
<p>例如，Cell Cycle KEGG 通路 hsa04110只有124个基因；而加了实验刺激后，细胞有300个基因发生统计学显著变化的情况下，如果有30个基因属于Cell Cycle通路，有高达10%的概率，那到底这个Cell Cycle通路是不是被显著改变了呢？ 首先，把这300个基因都用KEGG数据库的500多个通路注释，然后一个个通路循环做超几何分布检验，给出p值；例如细胞在正常的情况下，只有124个基因属于Cell Cycle 通路，那么细胞在常规情况下与所有基因的比值就是124/7000，也就是2%，而我的实验结果显示，在300个有显著性差异的基因中，有30个属于Cell Cycle，比例是30/300，也就是10%，通过超几何分布计算，发现，p值远远小于0.001（大概计算了一下，p值为<span class="math inline">\(4.949\times 10^{-13}\)</span>），也就是差异有显著性，因此我可以下结论，所以我的这个处理显著的改变了细胞系的Cell Cycle 通路。</p>
<h2 id="kegg实战">KEGG实战</h2>
<p>这里使用KEGG分析的数据，还是与GO分析中的数据一样，具体的参照<a href="http://rvdsd.top/2018/04/02/BioInformation/%E7%94%9F%E4%BF%A1-0-GO%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/">《GO分析笔记》</a>这篇笔记，都是使用DOSE这个包中的基因名称。</p>
<h3 id="第一步安装clusterprofiler包">第一步，安装clusterProfiler包</h3>
<p>通常来说，GO分析与KEGG是放在一块儿做的，并且clusterProfiler包同时能做GO分析与KEGG分析，如果前面安装过了clusterProfiler包，那么此时就可以直接分析了，下面是安装clusterProfiler包的过程：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</div><div class="line">biocLite(<span class="string">'clusterProfiler'</span>)</div><div class="line"><span class="keyword">library</span>(clusterProfiler)</div></pre></td></tr></table></figure>
<h3 id="第二步准备原始数据">第二步，准备原始数据</h3>
<p>使用DOSE包中的数据，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">data(geneList, package=<span class="string">"DOSE"</span>)</div><div class="line">gene &lt;- names(geneList)[abs(geneList) &gt; <span class="number">2</span>]</div><div class="line">gene.df &lt;- bitr(gene, fromType = <span class="string">"ENTREZID"</span>,</div><div class="line">                toType = c(<span class="string">"ENSEMBL"</span>, <span class="string">"SYMBOL"</span>),</div><div class="line">                OrgDb = org.Hs.eg.db)</div><div class="line">head(gene.df)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; head(gene.df)</div><div class="line">  ENTREZID         ENSEMBL SYMBOL</div><div class="line">1     4312 ENSG00000196611   MMP1</div><div class="line">2     8318 ENSG00000093009  CDC45</div><div class="line">3    10874 ENSG00000109255    NMU</div><div class="line">4    55143 ENSG00000134690  CDCA8</div><div class="line">5    55388 ENSG00000065328  MCM10</div><div class="line">6      991 ENSG00000117399  CDC20</div></pre></td></tr></table></figure>
<h3 id="第三步enrichkegg函数">第三步，enrichKEGG函数</h3>
<p>使用<code>enrichKEGG</code>函数，此函数的用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">enrichKEGG(gene, organism = <span class="string">"hsa"</span>, keyType = <span class="string">"kegg"</span>, pvalueCutoff = <span class="number">0.05</span>,</div><div class="line">  pAdjustMethod = <span class="string">"BH"</span>, universe, minGSSize = <span class="number">10</span>, maxGSSize = <span class="number">500</span>,</div><div class="line">  qvalueCutoff = <span class="number">0.2</span>, use_internal_data = <span class="literal">FALSE</span>)</div></pre></td></tr></table></figure>
<p>现在解释一下这几个参数：</p>
<ol style="list-style-type: decimal">
<li>gene:基因集，一组向量，也就是差异基因的列表，使用的是entrezID；</li>
<li>organism = “hsa”，物种，hsa表示人类，mmu表示小鼠，clusterProfiler包支持约20个物种，具体的可以参考<a href="https://www.genome.jp/kegg/catalog/org_list.html" target="_blank" rel="external">KEGG数据库支持的物种列表</a>；</li>
<li>keyType = “kegg”，参数为<code>kegg</code>，<code>ncbi-geneid</code>，<code>ncib-proteinid</code>或<code>uniprot</code>；</li>
<li>pvalueCutoff = 0.05，设定的p值阈值；</li>
<li>pAdjustMethod = “BH”，p值的校正方法，分别有“holm”, “hochberg”, “hommel”, “bonferroni”, “BH”, “BY”, “fdr”, “none”；</li>
<li>universe，背景基因；</li>
<li>minGSSize = 10，被Ontology term注释的 ，用于检验的最小基因数目；</li>
<li>maxGSSize = 50，被Ontology term注释的 ，用于检验的最大基因数目；</li>
<li>qvalueCutoff = 0.2，q值的阈值；</li>
<li>use_internal_data = FALSE，逻辑值，是使用KEGG.db还是最新的在线KEGG数据，由于KEGG.db数据库自2012年起就不再更新了，因此这个数据库比较老，不过还有很多Bioconductor包还在使用这个数据库，enrichKEGG这个函数使用了一个参数，也就是<code>__internal__data</code>，这个参考默认情况下是<code>FALSE</code>，此时它会下载最新的KEGG数据，如果这个参数设为<code>TRUE</code>，那么enrichKEGG这个就会使用KEGG.db这个数据文件。</li>
</ol>
<p>现在对差异基因进行KEGG富集分析，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">kegg.result &lt;- enrichKEGG(gene=gene.df[,<span class="number">1</span>],</div><div class="line">                          organism=<span class="string">"hsa"</span>,</div><div class="line">                          pvalueCutoff=<span class="number">0.05</span>,</div><div class="line">                          pAdjustMethod=<span class="string">"BH"</span>, </div><div class="line">                          qvalueCutoff=<span class="number">0.1</span>,</div><div class="line">                          keyType = <span class="string">"kegg"</span>)</div><div class="line">write.csv(kegg.result,<span class="string">"D:\\kegg.csv"</span>)</div></pre></td></tr></table></figure>
<p>现在查看一下结果，如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/I7I4lC4iFL.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>结果解读：</p>
<ol style="list-style-type: decimal">
<li>ID： KEGG 数据库中通路唯一的编号信息。</li>
<li>Description ：Gene Ontology功能的描述信息</li>
<li>GeneRatio：差异基因中与该ID相关的基因数与整个该Term的总基因数的比值</li>
<li>BgRation：所有（ bg）基因中与该ID相关的基因数与所有（ bg）基因的比值</li>
<li>pvalue: 富集分析统计学显著水平，一般情况下， P-value &lt; 0.05 该功能为富集项</li>
<li>p.adjust 矫正后的P-Value</li>
<li>qvalue：对p值进行统计学检验的q值</li>
<li>Count：差异基因中与该Term相关的基因数</li>
</ol>
<h3 id="第四处绘图">第四处，绘图</h3>
<h4 id="条形图">条形图</h4>
<p>使用<code>barplot</code>函数，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">barplot(kegg.result)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/Ed9CgAGEL6.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h4 id="点状图">点状图</h4>
<p>如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dotplot(kegg.result)</div></pre></td></tr></table></figure>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/43LbhKmcCC.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>图示解析：RNA-seq中，对差异表达基因进行KEGG富集分析，可以通过散点图展示。此图中，KEGG富集程度通过Rich factor、qvalue和富集到此通路上的基因个数来衡量。</p>
<ol style="list-style-type: decimal">
<li>横坐标是Rich factor，数值越大表示富集程度越大。Rich factor=位于该pathway term下的差异表达基因数/位于该pathway term下的所有有注释基因数。</li>
<li>纵坐标是富集程度较高的pathway term（一般选取富集最显著的20条进行展示，不足20条则全部列出）。</li>
<li>q value是经过多重校验的p value，取值范围[0，1]，以颜色表示，越红表示q value越小，说明富集越明显。</li>
<li>点的大小表示该term下差异基因的个数，点越大表示基因数越多。</li>
</ol>
<h4 id="信号通路图">信号通路图</h4>
<p>使用<code>browseKEGG</code>函数，此函数的用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">browseKEGG(x, pathID)</div></pre></td></tr></table></figure>
<p>参数x是KEGG富集的结果，pathID是通路编号，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">browseKEGG(kegg.result,<span class="string">"hsa04110"</span>)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/HLbeDL1J1E.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<p>也可以使用<code>pathview</code>包的<code>pathview</code>函数来查看基因表达的情况，它的用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(<span class="string">"pathview"</span>)</div><div class="line">hsa04110 &lt;- pathview(gene.data  = geneList,</div><div class="line">                     pathway.id = <span class="string">"hsa04110"</span>,</div><div class="line">                     species    = <span class="string">"hsa"</span>,</div><div class="line">                     limit      = list(gene=max(abs(geneList)), cpd=<span class="number">1</span>))</div></pre></td></tr></table></figure>
<p>其中<code>pathview</code>中使用的数据与前面的KEGG分析的数据不一样，它除了含有geneID外，还有基因表达的数据，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; head(geneList)</div><div class="line">    <span class="number">4312</span>     <span class="number">8318</span>    <span class="number">10874</span>    <span class="number">55143</span>    <span class="number">55388</span>      <span class="number">991</span> </div><div class="line"><span class="number">4.572613</span> <span class="number">4.514594</span> <span class="number">4.418218</span> <span class="number">4.144075</span> <span class="number">3.876258</span> <span class="number">3.677857</span></div></pre></td></tr></table></figure>
<p>使用pathview生成KEGG图，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(<span class="string">"pathview"</span>)</div><div class="line">hsa04110 &lt;- pathview(gene.data  = geneList,</div><div class="line">                     pathway.id = <span class="string">"hsa04110"</span>,</div><div class="line">                     species    = <span class="string">"hsa"</span>,</div><div class="line">                     limit      = list(gene=max(abs(geneList)), cpd=<span class="number">1</span>))</div></pre></td></tr></table></figure>
<p>有关pathview包的详细信息，可以查看这篇笔记《pathview包笔记》。</p>
<p>生成的图形如下所示：</p>
<div class="figure">
<img src="http://ortxpw68f.bkt.clouddn.com/professional/180729/D8kC2k7b16.png?imageslim" alt="mark">
<p class="caption">mark</p>
</div>
<h2 id="参考资料">参考资料</h2>
<ol style="list-style-type: decimal">
<li><p><a href="https://mp.weixin.qq.com/s?src=3&amp;timestamp=1523265048&amp;ver=1&amp;signature=SlU3Ctn3S1ucuf07HpdA5BO7jftw2xUN1IpV84vyrd2zq-RdrZhJihCJ1WKkxk0DkrPc--l-Gz-rqX4274h94eqWPiZ2Zsx6*tz0buy1Zxg54pZ-6D6smfhmLAUtCAbBE52Q8qgh5SrjjuJcVBZH91psMGXAb8oqFWTmlxB-EIg=" target="_blank" rel="external">手把手教你看KEGG通路图！</a></p></li>
<li><p><a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1523265396&amp;ver=806&amp;signature=5oh1CmbL0GLyXQ62PnvxR7ZafrvmFU-09TV0vuGJ4TNVw7vVVaEw**EjPiKXQBiYJG6LmwtjT2YRNiBOBYu3matCTy3cvVG9SICTWYkPAln7ivUte0n*KsIXY*yVauf-&amp;new=1" target="_blank" rel="external">KEGG富集分析从未如此简单</a></p></li>
<li><p><a href="https://mp.weixin.qq.com/s/s2_yv7U65FlxE1nLqhxcDw" target="_blank" rel="external">GO、KEGG功能注释是一个相亲的过程</a></p></li>
<li><p><a href="http://www.bio-info-trainee.com/370.html" target="_blank" rel="external">转录组-GO和KEGG富集的R包clusterProfiler</a>s</p></li>
<li><p><a href="https://mp.weixin.qq.com/s/UowQnL4bD7QUFHIXQ_JQKQ" target="_blank" rel="external">RNA-seq中GO、KEGG结果图如何解读</a></p></li>
<li><p><a href="https://mp.weixin.qq.com/s/ikeEUimxdaZyiYWNSEdJoQ" target="_blank" rel="external">KEGG上的信号通路图怎么看？</a></p></li>
<li><p><a href="http://guangchuangyu.github.io/2015/02/kegg-enrichment-analysis-with-latest-online-data-using-clusterprofiler/" target="_blank" rel="external">KEGG enrichment analysis with latest online data using clusterProfiler</a></p></li>
<li></li>
</ol>
<p>​</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">RVDSD</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">118</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">63</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RVDSD</span>

  
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共471.8k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  










  
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine@1.1.4/dist/Valine.min.js"></script>
  <script type="text/javascript">
    new Valine({
        av: AV,
        el: '#vcomments' ,
        verify: true,
        notify: true,
        app_id: '4ORLDMxXCFDLSHPJ4wSSDkkw-gzGzoHsz',
        app_key: 'HSWpCY7XlN0pGV5DCrKoC0ic',
        placeholder: 'Comment input placeholder'
    });
  </script>



  





  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
