<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="RVDSD的个人笔记本">
<meta property="og:url" content="http://rvdsd.top/page/4/index.html">
<meta property="og:site_name" content="RVDSD的个人笔记本">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RVDSD的个人笔记本">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://rvdsd.top/page/4/"/>





  <title>RVDSD的个人笔记本</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RVDSD的个人笔记本</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学习过程中的输出</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/06/02/BioStatistics/生物统计-StatQuest学习笔记02-样本量与重复/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/02/BioStatistics/生物统计-StatQuest学习笔记02-样本量与重复/" itemprop="url">StatQuest学习笔记02——样本量与重复</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-02T12:10:54+08:00">
                2018-06-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物统计/" itemprop="url" rel="index">
                    <span itemprop="name">生物统计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,882
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  7
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这是StatQuest视频教程的第6、第7个。</p>
<h2 id="技术重复"><a href="#技术重复" class="headerlink" title="技术重复"></a>技术重复</h2><p>现在考虑一个场景，我们要对一批人进行采血，并对这些血样进行基因表达的分析。此时我们先对A进行采血，A的血样我们会检测3次，这3次就叫技术重复（technical replicates），因为我们是对同一个样品进行了测序，研究其基因表达谱，这其实类似于我们做RT-qPCR中的复孔（RT-qPCR我们通常对同一个样本的同一个基因做3个复孔）。</p>
<p>做技术重复我们要解决的问题是：</p>
<ol>
<li><p>能够对一个人的基因表达谱进行更加精确地检测；</p>
</li>
<li><p>能够评估一次实验数据是否精确，例如我们做了3次技术重复，这3次结果都非常接近，那么这批数据就非常可信，相反，如果这3次结果差异很大，那么这批数据就不太可信。通常来说，如果我们开发出了一种新的检测方法，3次技术重复是必不可少的。</p>
</li>
</ol>
<p>再看下面的案例：</p>
<p>   <img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/lLemJgLbjm.png?imageslim" alt="mark"></p>
<p>  如果我们对同一个人采血，采血了3次，对这3次分别检测他的基因表达，这3次实验我们也认为是技术重复，因为此时研究的对象是同一个人。此时我们从这3次实验中可以获知一些方法之外的信息，因为这3次实验的差异（差异可能很小），可能与一些除了检测方法之外的因素有关。</p>
<h2 id="生物学重复"><a href="#生物学重复" class="headerlink" title="生物学重复"></a>生物学重复</h2><p>现在我们再看一种情况，此时有三个人，分别为A，B，C，我们分别取他们的血样，进行基因检验，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/fbg9f18jd4.png?imageslim" alt="mark"></p>
<p>这三个分别来自于A，B，C三个人（男性）的重复称为生物学重复，生物学重复主要是为了研究一类对象中的基因表达情况，这个一类对象可以是人类，或者是小鼠，或者是植物，或者是细胞系（cell lines）。这个实验主要是为了研究男性的基因表达情况，从这些数据中你不太可能知道女性的基因表达情况。如果我只想研究Y染色体的基因表达情况，这就是一个很好的实验。但是，如果我想研究整个人类（包括男性与女性）的基因表达情况，我还需要检测女性的基因表达情况，然后汇总起来分析。</p>
<p>再来看一个情况。如果只检测A的基因表达情况，那么最终的结果只能说是研究了A的基因表达情况，而不是B或C的基因表达，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/840Ch0hkE1.png?imageslim" alt="mark"></p>
<h2 id="技术重复和生物学重复的使用"><a href="#技术重复和生物学重复的使用" class="headerlink" title="技术重复和生物学重复的使用"></a>技术重复和生物学重复的使用</h2><p> 在实际运用过得中，可以联合使用生物学重复和技术重复，这主要取决于实验类型。有时候如果增加更多的生物学重复，就可以不用技术重复，如果看文献的话，我们经常看到，某实验检测了几十个某病毒的基因表达谱，这些数据通常就不做技术重复，另外，还有一些实验，例如使用的是细胞系，细胞系的样本之间通常差异很小，都是由一个克隆长出来的，因此细胞系的通常也不做技术重复，只做2个生物学重复就行（有的还是做3个生物学重复），如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/K3kf0BDmIb.png?imageslim" alt="mark"></p>
<h2 id="样本量（simple-size）"><a href="#样本量（simple-size）" class="headerlink" title="样本量（simple size）"></a>样本量（simple size）</h2><p>试想以下场景：</p>
<ol>
<li>我们对蓝色男性的基因表达有兴趣；</li>
<li>我们是一个小鼠遗传学家，我们可以把这个蓝色的对象视为一种特殊品系的小鼠，例如C57BL/6；</li>
<li>我们对植物感兴趣，此时我们把这个蓝色的对象视为某个品种的树木。</li>
</ol>
<p>先看第一种场景：我们要对这三个蓝色男性（此时这个蓝色男性不再表示一个人，而是某个民族，例如汉族）进行采血，然后检测其基因表达，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/mFlbGm4Ccd.png?imageslim" alt="mark"></p>
<p>这样，我们就检测了3次汉族男性的基因表达情况，此时我们用N来表示样本数目，此时N=3。即使我们对每个血液样本检测了2次基因表达情况，如下所示，此时的样本数目仍然是3：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/G61Bj5BleL.png?imageslim" alt="mark"></p>
<p>其中一个样本的2次检测就是技术重复，只是用于评估基因检测方法是否精确，它不会告诉我们这3个样本之间的差异。如果我们研究基因检测方法的精确性，那么我们就需要多进行几次技术重复，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/gh8JbCe82d.png?imageslim" alt="mark"></p>
<p>此时，N=4（这个4表示对一个样本做了4次技术重复，注意与前面的生物学重复进行区分），我们要注意，技术重复只是在描述一个方法时才有意义。</p>
<h2 id="有效样品量（effective-sample-size）"><a href="#有效样品量（effective-sample-size）" class="headerlink" title="有效样品量（effective sample size）"></a>有效样品量（effective sample size）</h2><p>此时我们看一种比较复杂的情况，现在我们要研究一些男性基因表达谱的常规特征，这个时候就需要检测多个不同的男性，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180605/agj0f7jEci.png?imageslim" alt="mark"></p>
<p>在这个方案里，我们要检测除了蓝色男性之外的其他男性的基因表达情况，也就是说，我们要检测蓝色，黄色，绿色男性的基因表达情况，此时N=3。此到很好理解N=3，但是，如果蓝色是双胞胎，我们检测了这4个人的基因表达情况，也就是如下所示的情况，此时N值就不一定等于3了，如果说N值为4，也有点不太对劲，如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180605/d7hBlk00JI.png?imageslim" alt="mark"></p>
<p>事实上，此时N值是位于3到4之间的数字。双胞胎其实也是两个不同的的，独立的人，但他们的基因是高度相关的，至少与黄色，绿色人相比，这两个蓝色人的基因更加相似：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180605/baKAI2glCa.png?imageslim" alt="mark"></p>
<p>如果我们计算一下这对双胞胎的基因相关性（correlation），那么我们就能计算出有效的相样量（effective sample size）：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180605/md5dakKkAg.png?imageslim" alt="mark"></p>
<p>例如，如果我们计算出这对双胞胎的相关性是0.7（具体的计算过程先不要管），那么，有效的样本数就是如下所示的公式：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180605/30bH9h3bDc.png?imageslim" alt="mark"></p>
<p>代入公式，则为：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180605/Cec16i95ma.png?imageslim" alt="mark"></p>
<p>因此，当这两个双胞胎高度相关时，他们就不能被视作是2个样本，而是1.18个样本：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180605/7h195jF6EB.png?imageslim" alt="mark"></p>
<p>如果这对双胞胎之间的相关性很低，比如说是0.1，那么代入公式，有效样本量就如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180605/I0D41050F6.png?imageslim" alt="mark"></p>
<p>此时这两个双胞胎就相当于1.82个样本（这种算法很好理解，毕竟，如果两个人非常相似，就相当于是一个人了）。</p>
<p>在实际情况中，有效样本数的计算更加复杂，不过基本思想是一致的，也就是说，如果样本之间高度相似，它们不能被视为一个样本。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li>技术重复用于评估方法的准确性。</li>
<li>生物学重复用于评估其个物种的特性；</li>
<li>涉及多个样本的时候，如果某两个样本比较相似，要考虑到有效的样本数。</li>
</ol>
<h2 id="补充知识点"><a href="#补充知识点" class="headerlink" title="补充知识点"></a>补充知识点</h2><p>effective sample size：</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/06/02/BioStatistics/生物统计-05-正态分布/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/02/BioStatistics/生物统计-05-正态分布/" itemprop="url">正态分布笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-02T12:00:00+08:00">
                2018-06-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物统计/" itemprop="url" rel="index">
                    <span itemprop="name">生物统计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5,926
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  24
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="连续型变量的分布"><a href="#连续型变量的分布" class="headerlink" title="连续型变量的分布"></a>连续型变量的分布</h2><p>连续型变量是在连续区间取值，例如质量、长度、面积、体积、寿命、距离等就是连续型变量，现在试想一下连续变量观测值的直方图；如想其纵坐标为相对频数，那么所有这些矩形条的<strong>高度</strong>和为1，那么完全可以重新设置量纲，例这些矩形条的<strong>面积</strong>为1，如果不断增加观测值，并不断增加直方图的矩形条的数目，这些直方图就会越来越像一条光滑曲线，其下面的面积和为1，这种曲线就是概率密度函数(probability density function, pdf)，简称为密度函数或密度，下图就展示了逐渐增加矩形条数的直方图和一个形状类型的密度曲线：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">par(mfrow=c(<span class="number">2</span>,<span class="number">2</span>))</div><div class="line">x=rnorm(<span class="number">10000</span>)</div><div class="line">z&lt;-seq(-<span class="number">4</span>,<span class="number">4</span>,length=<span class="number">10000</span>)</div><div class="line">hist(x,<span class="number">20</span>,probability=<span class="literal">T</span>,col=<span class="number">2</span>)</div><div class="line">hist(x,<span class="number">50</span>,probability=<span class="literal">T</span>,col=<span class="number">2</span>)</div><div class="line">hist(x,<span class="number">100</span>,probability=<span class="literal">T</span>,col=<span class="number">2</span>)</div><div class="line">plot(z,dnorm(z),type=<span class="string">"l"</span>,</div><div class="line">     xlab=<span class="string">"x"</span>,ylab=<span class="string">"Density Function"</span>,</div><div class="line">     bty=<span class="string">"n"</span>,</div><div class="line">     main=<span class="string">"Dencity Function of x"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180814/lc436IHfHE.jpeg?imageslim" alt="mark"></p>
<p>在矩形面积和为1的直方图中，连续变量落入某个矩阵的概率为该矩形的面积，类似地，连续变量落入一个区间的概率就是概率密度函数曲线在这个区间上所覆盖的面积，也就是密度函数在这个区间上的积分，根据初等微积分，连续函数在一个点的积分是0（因为曲线下面的面积退化成一条垂直于x轴，平行于y轴的直线），因此对于连续变量，取任何一个单独特定值的概率都是0，而只有变量取值于某个（或若干个）区间的概率才有可能大于0。连续变量和离散变量类似，它的密度函数（这时用f表示随机变量X的密度函数）必须满足$f(x) \geq 0$，而且密度曲线下面覆盖的总面积为1，即：</p>
<p>$\int_{-\infty}  ^{ \infty }{f(x)}\,{\rm d}x=1$</p>
<p>而X落入区间(a,b)的概率则为：<br>$P(a\leq X \leq b)=\int_a^b{f(x)\,{\rm d}x}$</p>
<p>连续变量也有累积分布函数(cumulative distribution function, CDF)，定义为：</p>
<p>$F(x)=P(X\leq x)=\int_{-\infty}  ^{x }{f(x)}\,{\rm d}x$</p>
<p>这样，和离散变量一样，如果要求P(a&lt;X≦b)的值，就可以通过两个累积分布F(b)和F(a)之间在用公式获得，如下所示：</p>
<p>$P(a\leq X \leq b)=P(X\leq b)-P(X\leq a)=F(b)-F(a)$</p>
<p>而不用根据密度函数求积分了。</p>
<p>连续随机变量也有描述变量“位置”的总体均数、总体中位数、总体百分位数以及描述变量分布（集中）程度的总体标准差和总体方差等概念，对于连续分布随机变量X，它的总体均值（通常用μ表示）定义为：<br>$\mu=E(X)=\int_{-\infty}  ^{ \infty }{xf(x)}\,{\rm d}x$</p>
<p>这也称为X的数学期望，变量X的总体方差（通常用$\delta^2$表示），定义为：</p>
<p>$\delta^2=Var(X)=\int_{-\infty}  ^{ \infty }{(x-\mu)f(x)}\,{\rm d}x$</p>
<p>总体标准差定义为总体方差的平方根，如下所示：</p>
<p>$\delta=\sqrt{Var(X)}=\sqrt{\int_{-\infty}  ^{ \infty }{(x-\mu)f(x)}\,{\rm d}x}$</p>
<h2 id="正态分布"><a href="#正态分布" class="headerlink" title="正态分布"></a>正态分布</h2><p>下图是四个二项分布图，这四个二项分布有共同的p=0.1，但是有不同的n，分别为5，20，50，500，可以看出，当n较小时，分布很不对称，当n增加时，分布变得对称，实际上，当n充分大时，二项分布趋向于一个连续型对称分布，这就是正态分布(normal distribution)，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">n&lt;-c(<span class="number">5</span>,<span class="number">20</span>,<span class="number">50</span>,<span class="number">500</span>)</div><div class="line">p&lt;-<span class="number">0.1</span></div><div class="line">par(mfrow=c(<span class="number">2</span>,<span class="number">2</span>))</div><div class="line">barplot(dbinom(<span class="number">0</span>:n[<span class="number">1</span>],n[<span class="number">1</span>],p),main=<span class="string">"Binomial(5,0.1)"</span>)</div><div class="line">barplot(dbinom(<span class="number">0</span>:(<span class="number">2</span>*floor(<span class="number">2</span>*n[<span class="number">2</span>]/<span class="number">5</span>)),n[<span class="number">2</span>],p),main=<span class="string">"Binomial(20,0.1)"</span>)</div><div class="line">barplot(dbinom(<span class="number">0</span>:(floor(n[<span class="number">3</span>]/<span class="number">3</span>)),n[<span class="number">3</span>],p),main=<span class="string">"Binomial(50,0.1)"</span>)</div><div class="line">barplot(dbinom(<span class="number">25</span>:<span class="number">75</span>,n[<span class="number">4</span>],p),main=<span class="string">"Binomial(500,0.1)"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180814/J2GhBlFFml.jpeg?imageslim" alt="mark"></p>
<p>在实际生活中，近似地服从正态分布的变量也很常见，例如测量误差，商品的重量或尺寸，某特定人群的身高和体重等，此外，在一定条件下，许多不是正态分布的样本均值在样本量很大时，也可用正态分布来近似估计。</p>
<p>正态分布也是一族分布，不同的正态分布根据它们的均值和标准差不同而有所区别，因此一个正态分布用$N(\mu,\delta)$表示，其中$\mu$是总体均值，而$\delta$是总体标准差，正态分布也常用$N(\nu,\delta^2)$来表示，这里的$\delta^2$为总体方差，这些总体参数在实际问题中是未知的，但可以估计，例如用样本均值和样本标准差来估计总体均值和总体标准差，正态分布的密度曲线是一个对称的钟形曲线（最高点在均值处），正态分布$N(\mu,\delta)$的密度函数如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180814/45hm76GKm2.png?imageslim" alt="mark"></p>
<h3 id="正态分布的推导"><a href="#正态分布的推导" class="headerlink" title="正态分布的推导"></a>正态分布的推导</h3><p>在理解正态分布的时候，如果知道它的推导过程，以及曲线下面积是如何求的，就会对正态分布的理解更深入，但是这涉及到一定的数学知识，包括大数定量，微积分等，目前我没有能力理解这些，具体的可以看陈希孺的《概率论与数理统计》等资料。不过真正用这个函数来计算正态变量概率数值的情况不多，多数直接采用累积分布函数来计算的。</p>
<h2 id="正态分布密度曲线"><a href="#正态分布密度曲线" class="headerlink" title="正态分布密度曲线"></a>正态分布密度曲线</h2><p>下面分别绘制均值（以下用m表示）为0，标准差（以下用sd表示）为1，m=0，sd=0.5，m=0，sd=2，m=-2，sd=1的正态分布密度曲线（密度曲线下面的积分面积对应的就是相应范围内的概率），可以看出不同的均值与标准差，正态分布的密度曲线形状就不一样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">set.seed(1000)</div><div class="line">x &lt;- seq(-5,5,length.out=100)</div><div class="line">y &lt;- dnorm(x,0,1)</div><div class="line">plot(x,y,col=&quot;red&quot;,xlim=c(-5,5),ylim=c(0,1),type=&quot;l&quot;,</div><div class="line">xaxs=&quot;i&quot;,yaxs=&quot;i&quot;,ylab=&quot;density&quot;,xlab=&quot;&quot;,</div><div class="line">main=&quot;The Normal Density Distribution&quot;)</div><div class="line">lines(x,dnorm(x,0,0.5),col=&quot;green&quot;)</div><div class="line">lines(x,dnorm(x,0,2),col=&quot;blue&quot;)</div><div class="line">lines(x,dnorm(x,-2,1),col=&quot;orange&quot;)</div><div class="line">legend(&quot;topright&quot;,legend=paste(&quot;m=&quot;,c(0,0,0,-2),&quot;sd=&quot;,c(1,0.5,2,1)),lwd=1,col=c(&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;orange&quot;))</div></pre></td></tr></table></figure>
<p>结果如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/normaldistribution.png" alt=""></p>
<h2 id="正态分布累积曲线"><a href="#正态分布累积曲线" class="headerlink" title="正态分布累积曲线"></a>正态分布累积曲线</h2><p>代码如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">set.seed(1000)</div><div class="line">x &lt;- seq(-5,5,length.out=100)</div><div class="line">y &lt;- pnorm(x,0,1)</div><div class="line">plot(x,y,col=&quot;red&quot;,xlim=c(-5,5),ylim=c(0,1),type=&quot;l&quot;,</div><div class="line">xaxs=&quot;i&quot;,yaxs=&quot;i&quot;,ylab=&quot;density&quot;,xlab=&quot;&quot;,</div><div class="line">main=&quot;The Normal Cumulative Distribution&quot;)</div><div class="line">lines(x,pnorm(x,0,0.5),col=&quot;green&quot;)</div><div class="line">lines(x,pnorm(x,0,2),col=&quot;blue&quot;)</div><div class="line">lines(x,pnorm(x,-2,1),col=&quot;orange&quot;)</div><div class="line">legend(&quot;bottomright&quot;,legend=paste(&quot;m=&quot;,c(0,0,0,-2),&quot;sd=&quot;,c(1,0.5,2,1)),lwd=1,col=c(&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;orange&quot;))</div></pre></td></tr></table></figure>
<p>结果如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/normalcumulative.png" alt=""></p>
<h2 id="总体分位数和尾概率"><a href="#总体分位数和尾概率" class="headerlink" title="总体分位数和尾概率"></a>总体分位数和尾概率</h2><p>对于连续型随机变量X，α下侧分位数（又称α分位数，a-quantile）定义为满足关系$P(X\leq x)=\alpha$的数x，这里的α称为下（左）侧尾概率(lower/left tail probability)；而α上侧分位数（又称α上分位数，α-upper quantile）定义为它满足$P(X\geq x)=\alpha$的数x，这里的α称为上（右）侧尾概率(upper/right tail probability)。对于连续分布，α上侧分位数等于(1-α)下侧分位数，而(1-α)下侧分位数等于α上侧分位数，通常用$z_{\alpha}$表示标准正态分布α的上侧分位数，即对于标准正态分布变量Z，有$P(Z&gt;z_{\alpha})=\alpha$，有些文献用符号$z_{1-\alpha}$而不是$z_{\alpha}$来表示α上侧分位数。</p>
<p>下图表示的就是标准正态分布0.05上侧分位数$z_{\alpha}=z_{0.05}(=1.645)$，图形右边在区间$(z_{0.05},+\infty)$曲线下的面积等于相应的尾概率(α=0.05)：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">x&lt;-c(seq(-<span class="number">4</span>,<span class="number">4</span>,length=<span class="number">1000</span>))</div><div class="line">y&lt;-dnorm(x)</div><div class="line">plot(x,y,type=<span class="string">"l"</span>,xlab=<span class="string">"z"</span>,ylab=expression(phi(z)))</div><div class="line">abline(<span class="number">0</span>,<span class="number">0</span>)</div><div class="line">r&lt;-qnorm(<span class="number">0.05</span>,low=<span class="literal">F</span>)</div><div class="line">polygon(c(r,r,x[x&gt;r]),c(<span class="number">0</span>,dnorm(c(r,x[x&gt;r]))),col=<span class="string">"red"</span>)</div><div class="line">text(<span class="number">0</span>,<span class="number">0.2</span>,expression(P(Z&lt;z[<span class="number">0.05</span>])==<span class="number">0.95</span>))</div><div class="line">text(<span class="number">2.5</span>,<span class="number">0.08</span>,expression(P(Z&gt;z[<span class="number">0.05</span>])==<span class="number">0.05</span>))</div><div class="line">text(<span class="number">1.5</span>,<span class="number">0.02</span>,expression(P(z[<span class="number">0.05</span>])==<span class="number">1.645</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180814/EDjF9l72Le.png?imageslim" alt="mark"></p>
<p>随后要介绍的$\chi^2$分布，t分布和F分布都是由正态分布变量导出的三种分布。</p>
<h3 id="正态分布的概率计算"><a href="#正态分布的概率计算" class="headerlink" title="正态分布的概率计算"></a>正态分布的概率计算</h3><p>作为一个连续变量，正态变量落在某区间的概率不是等于在这个区间上，密度曲线下面的面积，下图的阴影面积等于标准正态分布变量落在区间(-1.5,1.5)中的概率，如果密度函数为$\phi(x)$，那么这个面积就等于以下的积分，如下所示：<br>$\int_{-1.5}^{1.5}{\phi(x)}\,{\rm d}x=\Phi(1.5)-\Phi(-1.5)$</p>
<p>在计算机未广泛应用之前，为了方便计算，数学家们就编制了标准正态分布表，而在计算机广泛使用之后，则很容易计算出服从正态分布的数据的某个范围的概率，但为了理解正态分布的原理，还是先看一下如何使用标准正态分布表来计算一下标准正态分布变量落在区间(-1.5,1.5)中的概率。</p>
<p>在使用标准正态表之前，我们知道这些信息：</p>
<ol>
<li>标准正态分布是关于y轴对称的；</li>
<li>标准正态分布的概率是落在-1.5到1.5这个区间内的曲线下面积；</li>
</ol>
<p>现在查表，可以知道1.5对应的这个数值是0.9332，它表示小于1.5的曲线下面积是0.9332，-1.5没法查，但是可以查-1.5对称的曲线下面积，-1.5关于y轴对称的直线是0.5，它的曲线下面积为0.6915，也就是说小于0.5的曲线下面积为0.6915，那么大于0.5的曲线下面积为1-0.6915=0.3085，这个0.3085其实就是小于-1.5的曲线下面积，那么标准正态分布变量落在区间(-1.5,1.5)中的概率就是0.9332-0.3085=0.6247</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180814/dIKJmdh26g.png?imageslim" alt="mark"></p>
<p>也就是这下面的这个灰色面积，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">x&lt;-c(seq(-<span class="number">4</span>,<span class="number">4</span>,length=<span class="number">1000</span>))</div><div class="line">y&lt;-dnorm(x)</div><div class="line">r1&lt;-<span class="number">0.5</span></div><div class="line">r2&lt;-<span class="number">1.5</span></div><div class="line">x2&lt;-c(r1,r1,x[x&lt;r2&amp;x&gt;r1],r2,r2)</div><div class="line">y2&lt;-c(<span class="number">0</span>,dnorm(c(r1,x[x&lt;r2&amp;x&gt;r1],r2)),<span class="number">0</span>)</div><div class="line">plot(x,y,type=<span class="string">"l"</span>,main=<span class="string">"P(-0.5&lt;Z&lt;1.5)=0.6246553"</span>,xlab=<span class="string">"z"</span>,ylab=expression(phi(z)))</div><div class="line">abline(<span class="number">0</span>,<span class="number">0</span>)</div><div class="line">polygon(x2,y2,col=<span class="string">"grey"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180814/b406a008fK.png?imageslim" alt="mark"></p>
<p>不过，现在一般不用查表，使用软件计算即可，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; pnorm(<span class="number">1.5</span>)-pnorm(-<span class="number">0.5</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">0.6246553</span></div></pre></td></tr></table></figure>
<h2 id="正态分布案例之一"><a href="#正态分布案例之一" class="headerlink" title="正态分布案例之一"></a>正态分布案例之一</h2><p>再看一个案例：</p>
<p>B县的全体高一学生参加某补习班的数学测验，计算分数后得知“数学测验结果”可视为平均值为45，标准差为10的正态分布，那么这些数据就可以表示为这个样子：</p>
<p>绘制出平均值为45，标准差为10的正态分布表示，下图斜线部分的面积是0.5，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/cGaHI75934.png?imageslim" alt="mark"></p>
<p>还可以得到出这些信息：</p>
<p>第一：得分在45分以上的考生比例，占全体考生总数的0.5（50%）；</p>
<p>第二：从全体考生中，随机抽出一个人，其得分在45分以上的概率为0.5（50%）；</p>
<p>第三，将这些数学成绩标准化后（也就是常说的Z转换），0以上的考比例，占全体考生总数的0.5（50%），如下所示（看红线，不要看0.29）：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/hd4Fc52cIA.png?imageslim" alt="mark"></p>
<p>再继续这个案例，由于它是符合平均数为45，标准差为10的正态分布，那么，如果我要求某一个分数以上的考生比例，例如63分以上的考生比例，它的计算过程就是先把这个数字转换到标准正态分布上，过程如下所示（这就是Z转换）：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/kFdbi5EiEg.png?imageslim" alt="mark"></p>
<p>然后从标准正态分布表查1.8，它对应的数字是0.4641，这个数字表示的是小于63这个数字的概率，那么大于63的概率就是：0.5-0.4641=0.0359（3.59%）。它对应的面积就是下面的这个样子：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/ibjJ1Dlk2c.png?imageslim" alt="mark"></p>
<p>将它转换为标准正态分布，则是这个样子：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180604/1iCjJefj5l.png?imageslim" alt="mark"></p>
<p>不过现在过计算正态分布并不需要查表，查表只是了解一下这个计算原理，现在都用计算机计算了。</p>
<h2 id="R语言正态分布函数"><a href="#R语言正态分布函数" class="headerlink" title="R语言正态分布函数"></a>R语言正态分布函数</h2><p>R语言中与正态分布有关的函数如下所示：</p>
<ol>
<li>密度函数： dnorm(x, mean = 0, sd = 1, log = FALSE)</li>
<li>分布函数： pnorm(q, mean = 0, sd = 1, lower.tail = TRUE, log.p = FALSE)</li>
<li>分位数函数：qnorm(p, mean = 0, sd = 1, lower.tail = TRUE, log.p = FALSE)</li>
<li>随机函数： rnorm(n, mean = 0, sd = 1)<br>其余的分布函数与正态分布的前缀相同。</li>
</ol>
<h3 id="正态分布相应的概率计算"><a href="#正态分布相应的概率计算" class="headerlink" title="正态分布相应的概率计算"></a>正态分布相应的概率计算</h3><p>求正态N(3.1.5)变量X在区间(2,4)中的概率p，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pnorm(4,3,1.5)-pnorm(2,3,1.5)</div></pre></td></tr></table></figure>
<blockquote>
<p>pnorm(4,3,1.5)-pnorm(2,3,1.5)<br>[1] 0.4950149</p>
</blockquote>
<h2 id="正态分布的检验"><a href="#正态分布的检验" class="headerlink" title="正态分布的检验"></a>正态分布的检验</h2><p>判断数据是否符合正态分布通常用的是非参数检验方法（因为总体分布未知）</p>
<h3 id="shapiro-test-函数"><a href="#shapiro-test-函数" class="headerlink" title="shapiro.test()函数"></a>shapiro.test()函数</h3><p>Shapiro-Wilk正态分布检验: 用来检验是否数据符合正态分布，类似于线性回归的方法一样，是检验其于回归曲线的残差。该方法推荐在样本量很小的时候使用，样本在3到5000之间。该检验原假设为H0:数据集符合正态分布，统计量W 最大值是1，越接近1，表示样本与正态分布匹配。如果p-value小于显著性水平α(0.05)，则拒绝H0，表示样本不符合正态分布，如果p-value在大于显著性水平，则接受H0，表示样本符合正态分布。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">set.seed(1)</div><div class="line">s &lt;- rnorm(1000)</div><div class="line">shapiro.test(s)</div></pre></td></tr></table></figure>
<p>其结果为：<br>Shapiro-Wilk normality test</p>
<p>data:  s<br>W = 0.9988, p-value = 0.7256</p>
<p>结论: W接近1，p-value&gt;0.05，不能拒绝原假设，所以数据集s符合正态分布。</p>
<h3 id="Kolmogorov-Smirnov连续分布检验"><a href="#Kolmogorov-Smirnov连续分布检验" class="headerlink" title="Kolmogorov-Smirnov连续分布检验"></a>Kolmogorov-Smirnov连续分布检验</h3><p>Kolmogorov-Smirnov连续分布检验:检验单一样本是不是服从某一预先假设的特定分布的方法。以样本数据的累计频数分布与特定理论分布比较，若两者间的差距很小，则推论该样本取自某特定分布族。<br>该检验原假设为H0:数据集符合正态分布，H1:样本所来自的总体分布不符合正态分布。令F0(x)表示预先假设的理论分布，Fn(x)表示随机样本的累计概率(频率)函数.<br>统计量D为: D=max|F0(x) - Fn(x)|，D值越小，越接近0，表示样本数据越接近正态分布，如果p-value小于显著性水平α(0.05)，则拒绝H0。</p>
<p>Kolmogorov-Smirnov 检验,用法如下： ks.test(x, y, …, alternative = c(“two.sided”, “less”, “greater”), exact = NULL)<br>R语言中ks.test有四个参数，第一个参数x为观测值向量，第二个参数y为第二观测值向量或者累计分布函数或者一个真正的累积分布函数如pnorm，只对连续CDF有效。第三个参数为指明是单侧检验还是双侧检验，exact参数为NULL或者一个逻辑值，表明是否需要计算精确的P值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">set.seed(1)</div><div class="line">s &lt;- rnorm(1000)</div><div class="line">ks.test(s,&quot;pnorm&quot;)</div></pre></td></tr></table></figure>
<p>结果如下：<br>One-sample Kolmogorov-Smirnov test</p>
<p>data:  s<br>D = 0.0211, p-value = 0.7673<br>alternative hypothesis: two-sided</p>
<p>D值很小, p-value&gt;0.05，不能拒绝原假设，所以数据集s符合正态分布。</p>
<h3 id="KS的第二案例应用"><a href="#KS的第二案例应用" class="headerlink" title="KS的第二案例应用"></a>KS的第二案例应用</h3><h4 id="比较两组数据的分布是否相同"><a href="#比较两组数据的分布是否相同" class="headerlink" title="比较两组数据的分布是否相同"></a>比较两组数据的分布是否相同</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ks.test(rnorm(100),rnorm(50))</div></pre></td></tr></table></figure>
<blockquote>
<p>Two-sample Kolmogorov-Smirnov test</p>
<p>data:  rnorm(100) and rnorm(50)<br>D = 0.14, p-value = 0.5185<br>alternative hypothesis: two-sided</p>
</blockquote>
<p>在这一案例中，我们比较了两个均值和方差一样的观测值，他们D值很小，p值大于0.05，所以我们不能拒绝两个观测值分布相同的假设。</p>
<h4 id="KS比较某一数据符合某一分布"><a href="#KS比较某一数据符合某一分布" class="headerlink" title="KS比较某一数据符合某一分布"></a>KS比较某一数据符合某一分布</h4><p>检验一组数据是否符合均匀分布（生成均匀分布的函数为runif))，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ks.test(rnorm(100),&quot;punif&quot;)</div></pre></td></tr></table></figure>
<p>结果中p-value为2.2e-16，我们用rnorm(100)生成的是正态分布的数据，因此它不符合均匀分布（参数为punif）。如果参数设为pnorm，再看一下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ks.test(rnorm(100),&quot;pnorm&quot;)</div></pre></td></tr></table></figure>
<p>结果的p值为0.6722，符合正态分布。</p>
<h3 id="Pearson-拟合优度chi-square检验"><a href="#Pearson-拟合优度chi-square检验" class="headerlink" title="Pearson 拟合优度chi-square检验"></a>Pearson 拟合优度chi-square检验</h3><p>（略）</p>
<h3 id="QQ图"><a href="#QQ图" class="headerlink" title="QQ图"></a>QQ图</h3><p>正态概率图用于检查一组数据是否服从正态分布。是实数与正态分布数据之间函数关系的散点图。如果这组实数服从正态分布，正态概率图将是一条直线。通常，概率图也可以用于确定一组数据是否服从任一已知分布，如二项分布或泊松分布。</p>
<p>QQ图是quantile—quantile的简写，一个根据正态分布的分位数，一个是样本分位数；如果两者在一条直线上，说明样本符合状态分布的分位数，即服从正态分布。QQ图是一种散点图,对应于正态分布的QQ图,就是由标准正态分布的分位数为横坐标,样本值为纵坐标的散点图. 要利用QQ图鉴别样本数据是否近似于正态分布,只需看QQ图上的点是否近似地在一条直线附近,而且该直线的斜率为标准差,截距为均值. 用QQ图还可获得样本偏度和峰度的粗略信息。</p>
<p>另外，还有一种PP图。P-P图是根据变量的累积比例与指定分布的累积比例之间的关系所绘制的图形。通过P-P图可以检验数据是否符合指定的分布。当数据符合指定分布时，P-P图中各点近似呈一条直线。如果P-P图中各点不呈直线，但有一定规律，可以对变量数据进行转换，使转换后的数据更接近指定分布。 Q-Q图同样可以用于检验数据的分布，所不同的是，Q-Q图是用变量数据分布的分位数与所指定分布的分位数之间的关系曲线来进行检验的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">set.seed(1)</div><div class="line">s &lt;- rnorm(1000)</div><div class="line">qqnorm(s)</div><div class="line">qqline(s,col=&quot;red&quot;)</div></pre></td></tr></table></figure>
<p>结果如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/qqpic.png" alt=""></p>
<p>解释：纵轴是数据的实际分位数，横轴是正态分布的理论分位数，红线是45度的参考线，如果数据是正态分布，则散点应该落在直线上。即实际分位数与理论分位数偏差不大。说明来自正态总体。</p>
<h3 id="峰度与偏度"><a href="#峰度与偏度" class="headerlink" title="峰度与偏度"></a>峰度与偏度</h3><h4 id="峰度（Kurtosis）"><a href="#峰度（Kurtosis）" class="headerlink" title="峰度（Kurtosis）"></a>峰度（Kurtosis）</h4><p>峰度是描述某变量所有取值分布形态陡缓程度的统计量，它是和正态分布相比较的。<br>公式如下所示：</p>
<script type="math/tex; mode=display">Kurtosis=\frac{\sum(X-\mu)^{4}}{\delta^{4}} -3</script><p>正态分布的Kurtosis为K=3,为了描述方便，有时候需要减3（上述公式就减了3），有的公式没有，但原理是相同的。<br><img src="http://ortxpw68f.bkt.clouddn.com/Kurtosis.png" alt=""><br>Kurtosis=0       与正态分布的陡缓程度相同。<br>Kurtosis&gt;0       比正态分布的高峰更加陡峭——尖顶峰<br>Kurtosis&lt;0       比正态分布的高峰来得平台——平顶峰</p>
<h4 id="偏度（Skewness）"><a href="#偏度（Skewness）" class="headerlink" title="偏度（Skewness）"></a>偏度（Skewness）</h4><p>偏度是描述某变量取值分布对称性的统计量。公式如下</p>
<script type="math/tex; mode=display">Skewness=\sum[(\frac{X-\mu}{\delta})^3]</script><p><img src="http://ortxpw68f.bkt.clouddn.com/Skewness.png" alt=""><br>Skewness=0     分布形态与正态分布偏度相同<br>Skewness&gt;0     正偏差数值较大，为正偏或右偏。长尾巴拖在右边。<br>Skewness&lt;0     负偏差数值较大，为负偏或左偏。长尾巴拖在左边。</p>
<h3 id="正态分布检验补充案例"><a href="#正态分布检验补充案例" class="headerlink" title="正态分布检验补充案例"></a>正态分布检验补充案例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">words1 = rnorm(100)</div><div class="line">words2 = rt(100, df=3)</div><div class="line"></div><div class="line">plot(density(words1))</div><div class="line">lines(density(words2))</div><div class="line">shapiro.test(words1)</div><div class="line">shapiro.test(words2)</div><div class="line"></div><div class="line">par(mfrow=c(2,1))</div><div class="line">qqnorm(words1);qqline(words1, col = 2)</div><div class="line">qqnorm(words2);qqline(words2, col = 2)</div></pre></td></tr></table></figure>
<p>words1与words2密度图如下所示：<br><img src="http://ortxpw68f.bkt.clouddn.com/test%20normalDistribution.png" alt=""></p>
<p>从图上大致可以看出来words1与标准正态图比较接近。</p>
<p>用shapiro检验后的结果如下所示：<br><img src="http://ortxpw68f.bkt.clouddn.com/test%20normalDistribution2.png" alt=""></p>
<p>从计算结果来看，words1是p值为0.09861，大于0.05，不能否定原假定，因此words1符合正态分布。同理,words2不符合正态分布。</p>
<p>QQ图的结果如下所示：<br><img src="http://ortxpw68f.bkt.clouddn.com/test%20normalDistribution3.png" alt=""></p>
<p>从QQ图中可以看出，words1符合正态分布，而words2不符合正态分布。</p>
<h2 id="R语言中进行正态分布检验的其它包"><a href="#R语言中进行正态分布检验的其它包" class="headerlink" title="R语言中进行正态分布检验的其它包"></a>R语言中进行正态分布检验的其它包</h2><h3 id="nortest包"><a href="#nortest包" class="headerlink" title="nortest包"></a>nortest包</h3><p>lillie.test()可以实行更精确的Kolmogorov-Smirnov检验。</p>
<p>ad.test()进行Anderson-Darling正态性检验。</p>
<p>cvm.test()进行Cramer-von Mises正态性检验。</p>
<p>pearson.test()进行Pearson卡方正态性检验。</p>
<p>sf.test()进行Shapiro-Francia正态性检验。</p>
<h3 id="fBasics包"><a href="#fBasics包" class="headerlink" title="fBasics包"></a>fBasics包</h3><p>ksnormTest() 进行Kolmogorov-Smirnov正态性检验。</p>
<p>shapiroTest() 进行Shapiro-Wilk正态性检验。</p>
<p>jarqueberaTest() 进行jarque-Bera正态性检验。</p>
<p>dagoTest() 进行D’Agostino正态性检验。</p>
<p>adTest() 进行Anderson-Darling正态性检验。</p>
<p>cvmTest() 进行Cramer-von Mises正态性检验。</p>
<p>lillieTest() 进行Lilliefors(KS)正态性检验。</p>
<p>pchiTest() 进行Pearson chi-square正态性检验。</p>
<p>sfTest() 进行Shapiro-Francia正态性检验。</p>
<p>jbTest() Finite sample adjusted JB LM and ALM test。</p>
<p>normalTest() 进行Kolmogorov-Smirnov正态性检验。</p>
<h3 id="Jarque-Bera-Test检验正态分布"><a href="#Jarque-Bera-Test检验正态分布" class="headerlink" title="Jarque-Bera Test检验正态分布"></a>Jarque-Bera Test检验正态分布</h3><p>Jarque-Bera检验是用于总体分布的正态性检验的一种方式。该检验基于数据样本的偏度和峰度，评价给定数据服从未知均值和方差正态分布的假设是否成立，正态分布的偏度（三阶矩）S=0，峰度（四阶矩）K=3，若样本来自正态总体，则他们分别在0，3附近。基于此构造一个包含x2(卡方)统计量：n为样本容量,k为自由度。代码如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">install.packages(<span class="string">"tseries"</span>)</div><div class="line"><span class="keyword">library</span>(tseries)</div><div class="line">set.seed(<span class="number">1</span>)</div><div class="line">x &lt;- rnorm(<span class="number">150</span>)</div><div class="line">res &lt;- jarque.bera.test(x)</div><div class="line">names(res)</div><div class="line">res$p.value</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt; set.seed(<span class="number">1</span>)</div><div class="line">&gt; x &lt;- rnorm(<span class="number">150</span>)</div><div class="line">&gt; res &lt;- jarque.bera.test(x)</div><div class="line">&gt; names(res)</div><div class="line">[<span class="number">1</span>] <span class="string">"statistic"</span> <span class="string">"parameter"</span> <span class="string">"p.value"</span>   <span class="string">"method"</span>    <span class="string">"data.name"</span></div><div class="line">&gt; res$p.value</div><div class="line">[<span class="number">1</span>] <span class="number">0.8601533</span></div></pre></td></tr></table></figure>
<p>p值大于0.05，可以视为符合正态分布。</p>
<h2 id="案例第二：用Jarque-Bera-Test检验正态分布"><a href="#案例第二：用Jarque-Bera-Test检验正态分布" class="headerlink" title="案例第二：用Jarque-Bera Test检验正态分布"></a>案例第二：用Jarque-Bera Test检验正态分布</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">install.packages(<span class="string">"Ecdat"</span>)</div><div class="line"><span class="keyword">library</span>(Ecdat)</div><div class="line">data(SP500)</div><div class="line">class(SP500)</div><div class="line">SPreturn &lt;- SP500$r500</div><div class="line">res &lt;- jarque.bera.test(SPreturn)</div><div class="line">names(res)</div><div class="line">res$p.value</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt; class(SP500)</div><div class="line">[<span class="number">1</span>] <span class="string">"data.frame"</span></div><div class="line">&gt; <span class="keyword">library</span>(Ecdat)</div><div class="line">&gt; data(SP500)</div><div class="line">&gt; class(SP500)</div><div class="line">[<span class="number">1</span>] <span class="string">"data.frame"</span></div><div class="line">&gt; SPreturn &lt;- SP500$r500</div><div class="line">&gt; res &lt;- jarque.bera.test(SPreturn)</div><div class="line">&gt; names(res)</div><div class="line">[<span class="number">1</span>] <span class="string">"statistic"</span> <span class="string">"parameter"</span> <span class="string">"p.value"</span>   <span class="string">"method"</span>    <span class="string">"data.name"</span></div><div class="line">&gt; res$p.value</div><div class="line">[<span class="number">1</span>] <span class="number">0</span></div></pre></td></tr></table></figure>
<h3 id="正态分布检验补充案例-1"><a href="#正态分布检验补充案例-1" class="headerlink" title="正态分布检验补充案例"></a>正态分布检验补充案例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">words1 = rnorm(100)</div><div class="line">words2 = rt(100, df=3)</div><div class="line"></div><div class="line">plot(density(words1))</div><div class="line">lines(density(words2))</div><div class="line">shapiro.test(words1)</div><div class="line">shapiro.test(words2)</div><div class="line"></div><div class="line">par(mfrow=c(2,1))</div><div class="line">qqnorm(words1);qqline(words1, col = 2)</div><div class="line">qqnorm(words2);qqline(words2, col = 2)</div></pre></td></tr></table></figure>
<p>words1与words2密度图如下所示：<br><img src="http://ortxpw68f.bkt.clouddn.com/test%20normalDistribution.png" alt=""></p>
<p>从图上大致可以看出来words1与标准正态图比较接近。</p>
<p>用shapiro检验后的结果如下所示：<br><img src="http://ortxpw68f.bkt.clouddn.com/test%20normalDistribution2.png" alt=""></p>
<p>从计算结果来看，words1是p值为0.09861，大于0.05，不能否定原假定，因此words1符合正态分布。同理,words2不符合正态分布。</p>
<p>QQ图的结果如下所示：<br><img src="http://ortxpw68f.bkt.clouddn.com/test%20normalDistribution3.png" alt=""></p>
<p>从QQ图中可以看出，words1符合正态分布，而words2不符合正态分布。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol>
<li><a href="http://blog.sina.com.cn/s/blog_670445240101m4z3.html" target="_blank" rel="external">每日一生信—富集分析（超几何分布）（Fisher’s Exact Test）</a> </li>
<li><a href="http://blog.sina.com.cn/s/blog_5d1edf6a0100ujcv.html" target="_blank" rel="external">R 超几何分布</a> </li>
<li><a href="https://en.wikipedia.org/wiki/Hypergeometric_distribution" target="_blank" rel="external">Wikipedia:Hypergeometric distribution</a></li>
<li>DawnGriffiths. 深入浅出统计学[M]. 电子工业出版社, 2012.</li>
<li>高桥信陈刚. 漫画统计学[M]. 科学出版社, 2009.</li>
<li>拉里·戈尼克, 沃尔科特·史密斯. 漫画统计学入门[M]. 辽宁教育出版社, 2002.</li>
<li>陈希孺.概率论与数理统计[M].中国科学技术大学出版社,1992.</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/06/02/BioStatistics/生物统计-04-常见概率分布/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/02/BioStatistics/生物统计-04-常见概率分布/" itemprop="url">常见概率分布</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-02T12:00:00+08:00">
                2018-06-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物统计/" itemprop="url" rel="index">
                    <span itemprop="name">生物统计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  7,866
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  31
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>随机变量取一切可能值的概率的规律称为<strong>概率分布(probability distribution)</strong>，简称为分布，通常使用表格，图形，公式来表示这些分布，一个概率分布总是一和个总体(population)相关联的，这里的总体也称为<strong>样本空间(sample space)</strong>，它是由某种试验的所有可能结果构成的集合，这些结果的获取服从某种概率规律，因此， 一个总体（样本空间）是由一个取值范围及与之相连的概率所组成。于是，给出了这个概率分布就等于知了总体，这些用数学语言表示的概率分布有一些理论参数，称为<strong>总体参数(population parameter)</strong>，对于一个样本来说，它有自己的一些参数，例如样本均值、样本方差、样本标准差、样本分位数等。相对于总体，它也有总体均值、总体方差、总体标准差，总体分位数等参数。只是对于不同的总体，这些参数可能不同，并且对于某些总体，某些参数可能就不存在。 </p>
<h2 id="离散型分布"><a href="#离散型分布" class="headerlink" title="离散型分布"></a>离散型分布</h2><p>离散变量很常见，例如在一批产品的质量检查中可能发现的次品数目、一日内通过某电话总体的通话次数、在若干次试验中成功的次数等，这些变量取离散值，而且按照某种概率来取每个值，取每个值的概率应该大于或等于0、小于或等于1，并且取各种值的概率之和应该等于1，用符号来表示就是，假定离散随机变量X的取值范围为$x_{1},x_{2},\cdots,$而且取可能值$x_{i}$的概率记为$P(x_{i})\equiv P(X)=x_{i}$，那么这些概率应该同时满足下面的关系：</p>
<p>$\sum_{i}P(x_{i})=1,\qquad 0 \leq P(x_{i})$</p>
<p>满足这样关系的概率$P(x_{i})$的总和就是该离散变量的概率分布。离散变量的取值不一定是有穷的，例如Poisson分布的取值范围就是所有的非负整数，因而有无穷多可能的值。</p>
<p>除了分布函数$P(X=x_{i})$外，还有<strong>累积分布函数(cumulative distribution function, CDF)</strong>的概念，离散随机变量的累积分布函数的定义如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/eBibh51HkF.png?imageslim" alt="mark"></p>
<p><strong>统计教科书上的各种概率分布表，通常都是累积分布函数的值</strong>，在计算时，这往往比原始的概率分布要方便，例如我要计算$P(a&lt;X \leq b)$，那么或者用求和来计算，即如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/fHGbFGliIA.png?imageslim" alt="mark"></p>
<p>或者是通过相减来计算，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/I2KLcEdFA0.png?imageslim" alt="mark"></p>
<p>显然，通过相减计算要容易得多，只需要找到F(b)和F(a)即可。</p>
<p>对于离散分布随机变量X来说，它的总体均值（通常用$\mu$表示）定义如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180816/B4ECgkBac3.png?imageslim" alt="mark"></p>
<p>它又称为X的数学期望，这里的符号$E(x)$就是X的期望(expectation)的意思。</p>
<p>变量X的总体方差通常用$\delta^2$表示，它的公式如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/4jGcihFbea.png?imageslim" alt="mark"></p>
<p>这里的符号$Var(X)$就是X的方差(variance)的意思，总体标准差定义为总体方差的平方根，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/HjcKe9cHB1.png?imageslim" alt="mark"></p>
<p>显然，这里的均值、方差等概率和样本均值、样本方差很相似，只要把这里的$x_{i}$换成样本点，而把$P(x_{i})$换成$1/n$（在样本方差经常使用$1/(n-1)$，在样本量大的时候$1/n$和$1/(n-1)$差别不大），就和样本量为n的情况下的样本均值和样本方差一致了，需要注意的是，总体均值和总体方差有可能是无穷或者不存在的（总体的数据很难得到，只能根据样本来推测总体），但样本均值和样本方差总是存在的。</p>
<p>下面看一些常见的离散型分布</p>
<h2 id="二项分布"><a href="#二项分布" class="headerlink" title="二项分布"></a>二项分布</h2><p>先看一个案例描述。</p>
<p>某项考虑有10道题，假定某考生答对每道题的概率是0.6，并假定各个题目的答案独立，而及格的标准则是至少答对6道题，那么至少答对6道题的概率就是事件“通过考试“的概率，这时，如果把答对题目的数目记为X，那么X是一个定量变量，而通过考虑的或者考试及格的概率就可以用以下公式来表示，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180816/k0DhlIhj8m.png?imageslim" alt="mark"></p>
<p>而没有一道题答对的概率为$P(X=0)$，这就是说10道题都答错，根据题目中的描述，我们知道答错题的概率是0.4，10道全错的概率就是$0.4^{10} \approx 0.0001048576$，</p>
<p>这个案例中描述的变量就是一个二项分布随机变量，每回答一道题就是一个试验，每次试验成功的概率是固定的，这里是0.6，这10次试验（答10道题）是互相独立的，在重复的独立试验中，如查每个试验仅可能为两种可能结果之一，而且得到相应结果的概率在每次试验中保持不变，则称这些重复独立试验为Bernoulli试验，一般用$p$和$q=(1-p)$分别表示每次试验得到的两种结果的概率，这两种结果通常被抽象地称为”成功“和”失败“，这当然不是实际意义上的成功和失败，仅仅是两种结果的代号而已。</p>
<p>人们一般会关心，如果进行n次Bernoulli试验，每次成功的概率是p，那么某中成功次数X=k次的概率是多少？</p>
<p>我们用下面的抽球案例来理解这个问题。</p>
<h3 id="抽球实验"><a href="#抽球实验" class="headerlink" title="抽球实验"></a>抽球实验</h3><p>Bernoulli试验：一个罐子中，含有1个红球，3个蓝球，每次随机取出1个球，观察其颜色，再放回，再抽取下一个球（这是有放回的抽样），每次抽得的红球的概率为p=1/4，蓝球的概率是q=1-p=3/4，用R表示红球的事件，用B表示蓝球的事件，而用P(RB)表示第一次得到的是红球，第二次得到的蓝球的概率等，用X表示在n次试验中观测到红球的次数，下面以n=2和n=3为例说明一下这个概率。</p>
<p>其中下面的这个公式</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180816/59jKHa8hfk.png?imageslim" alt="mark"></p>
<p>它表示从n个元素中选取k个元素的组合数。</p>
<p>现在看n=2的情况。</p>
<p>n=2表示是我们抽取2次，这里面又分3种情况。</p>
<p>第1种情况：2次抽取，抽到0个红球，也就是两次都是蓝球，这种情况的概率如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/gcDa8laAGg.png?imageslim" alt="mark"></p>
<p>第2种：2次抽取，刚好有一次观测到红球的概率（这种情况可以理解为，第1次红球，第2次蓝球或第1次蓝球，第2次红球），如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/7jlJLk636K.png?imageslim" alt="mark"></p>
<p>第3种：2次抽取，均是红球的概率：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/86Hb6fjHDD.png?imageslim" alt="mark"></p>
<p>现在看n=3的情况。</p>
<p>n=3表示是我们抽取3次，这里面又分4种情况。</p>
<p>第1种情况：抽取3次，只有0个红球，概率如下：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/8dH4i22F99.png?imageslim" alt="mark"></p>
<p>第2种情况：抽取3次，只抽到1个红球，概率如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/BjD76CckKB.png?imageslim" alt="mark"></p>
<p>第3种情况：抽取3次，抽到2个红球，概率如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/iK1JlBDjlG.png?imageslim" alt="mark"></p>
<p>第4种情况：抽取3次，抽到3个红球，概率如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/DB40kife7i.png?imageslim" alt="mark"></p>
<p>从这个问题的描述中我们可以知道下面的信息：</p>
<p>当n=2时，对于$k=0,1,2,P(X=k)=C_{2}^kp^kq^{2-k}$</p>
<p>当n=3时，对于$k=0,1,2,3,P(X=k)=C_{3}^kp^kq^{3-k}$</p>
<p>因此，我们可以把它们放在一起，如下所示：</p>
<p>$P(X=k)=C_{n}^kp^k(1-p)^{n-k},\quad k=0,1,\cdots,n,$</p>
<p>这里的$C_{n}^k$就是$(a+b)^n$展开的系数，我们把在成功概率为p的n次Bernoulli试验中成功次数X称为具有参数(n,p)的二项分布(binomial distribution)的随机变量，可以用B(n,p)、Bin(n,p)或Binomial(n,p)等表示这样的二项分布，由于参数中的n和p可能取不同的值，因此二项分布是一族分布，称为二项分布族，在n=1时的二项分布又称为bernoulli分布，它的概率分布如下所示：</p>
<p>$P(X=1)=p,\quad P(X=0)=1-p$</p>
<p>可以利用排列组合和二项式展开的性质证明：二项分布Binomial(n,p)变量的总体均值为$\mu=np$，方差为$\delta^2=np(1-p)$，标准差为$\delta=\sqrt{np(1-np)}$。</p>
<p>下图就是二项分布Binomial(5,p)的图，这里p取0.1，0.2，，，一直到0.9，可以看出，当p=0.5时，分布是对称的，当p为0.1或0.9时，分布概率偏向左边或右边，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">k &lt;- seq(<span class="number">0.1</span>,<span class="number">0.9</span>,<span class="number">0.1</span>)</div><div class="line">par(mfrow=c(<span class="number">3</span>,<span class="number">3</span>))</div><div class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">9</span>)</div><div class="line">  barplot(dbinom(<span class="number">0</span>:<span class="number">5</span>,<span class="number">5</span>,k[i]),xlab=<span class="string">"x"</span>,</div><div class="line">          ylab=<span class="string">"Probability"</span>,</div><div class="line">          ylim=c(<span class="number">0</span>,<span class="number">0.6</span>),</div><div class="line">          main=substitute(Binomial(<span class="number">5</span>,b),</div><div class="line">                          list(b=k[i])))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/6eD3LJkah5.jpg?imageslim" alt="mark"></p>
<p>案例分析</p>
<p>假定在一项外语考试中，如果每题有四个选项，只有1个是对的，一共有5道题，这些题目相互独立，如果答题者没有任何知识，全凭随机猜测，那么答对一道题的概率应该是0.25，此时答题就像是一系列bernoulli试验，每次试验成功的概率是0.25，失败的概率为1-0.25=0.75，如果用X表示答对的题目，则X可以看成是参数为n=5，p=0.25的二项分布，下表就给出了对于k=0,1,2,3,4,5，X的概率分布函数P(X=k)和累积分布函数$P(X\leq x)$，如下所示：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>k</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>$P(X=k)$</td>
<td>0.2373</td>
<td>0.3955</td>
<td>0.2637</td>
<td>0.08789</td>
<td>0.01465</td>
<td>0.00098</td>
</tr>
<tr>
<td>$P(X\leq x)$</td>
<td>0.2373</td>
<td>0.6328</td>
<td>0.8965</td>
<td>0.98438</td>
<td>0.99902</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<p>此时，$P(X=k)=C_{5}^k\times0.25^k\times0.75^{5-k},\quad k=0,1,2,3,4,5$</p>
<p>下图的左图显示的是概率分布图，下图的右图是累积分布函数图，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">par(mfrow=c(<span class="number">1</span>,<span class="number">2</span>))</div><div class="line">x &lt;- dbinom(<span class="number">0</span>:<span class="number">5</span>,<span class="number">5</span>,<span class="number">0.25</span>)</div><div class="line">barplot(x,xlab=<span class="string">"X"</span>,</div><div class="line">        ylab=<span class="string">"Probability Function"</span>,</div><div class="line">        ylim=c(<span class="number">0</span>,<span class="number">0.4</span>),</div><div class="line">        main=<span class="string">"Binomial(5,0.25)"</span>)</div><div class="line">plot(<span class="number">0</span>:<span class="number">5</span>,pbinom(<span class="number">0</span>:<span class="number">5</span>,<span class="number">5</span>,<span class="number">0.25</span>),</div><div class="line">     ylim = c(<span class="number">0</span>,<span class="number">1</span>),</div><div class="line">     type=<span class="string">"s"</span>,</div><div class="line">     xlab=<span class="string">"X"</span>,</div><div class="line">     ylab=<span class="string">"Cumulative Distribution Function"</span>,</div><div class="line">     main=<span class="string">"Binomial(5,0.25)"</span>)</div><div class="line">points(<span class="number">0</span>:<span class="number">5</span>,pbinom(<span class="number">0</span>:<span class="number">5</span>,<span class="number">5</span>,<span class="number">0.25</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/0DE2elemcj.jpeg?imageslim" alt="mark"></p>
<h2 id="多项分布"><a href="#多项分布" class="headerlink" title="多项分布"></a>多项分布</h2><p>二项分布是基于每次的实验有两个可能结果的重复独立Bernoulli试验，如果把二项分布进行拓展，例如每次实验不是有2个结果，而有k个结果，并且针对每个结果的概率分别为$(p_{1},p_{2},\cdots,p_{k})$，并且这些概率都是固定的，其实可以简单地理解为掷骰子，这样在n次实验中，得到的k个可能的结果数目为$(X_{1},X_{2},\cdots,X_{k})$的概率分布为多项分布（multinomial distribution），显然约束条件为：</p>
<p>$X_{1}+X_{2}+\cdots+X_{k}=n$</p>
<p>$p_{1}+p_{2}+\cdots+p_{k}=1$</p>
<p>多项分布可以用$M(n,p_{1},\cdots,p_{k})$表示，多项分布为多元分布，也就是说我们感兴趣的随机变量有k个$(X_{1},X_{2},\cdots,X_{k})$，这是一个k维随机向量，如果用$P(X_{1}=n_{1},X_{2}=n_{2},\cdots,X_{k}=n_{k})=p(n_{1},\cdots,n_{k})$代表多项分布k的可能结果在n次试验中分别出现$n_{1},\cdots,n_{k}$次的概率，而$p_{1},\cdots,p_{k}$分别为一次试验时各种结果出现的概率，于是多项分布可以用下面的公式来表示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/FaGcCAi3lD.png?imageslim" alt="mark"></p>
<p>其中下面就是多项式系数：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/1GACKGGb94.png?imageslim" alt="mark"></p>
<p>它就是多项式展开，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180801/5m93JHA38h.png?imageslim" alt="mark"></p>
<p>多面项分布的一个典型就是掷骰子，此时k=6，而对于一个正常的骰子来说，每掷一次，它的6个面朝上的概率是一样的，即$p_{1}=p_{2}=\cdots =p_{k}=1/6$，显然，多项分布是一个分布族，用不同的参数来区分。</p>
<h2 id="超几何分布"><a href="#超几何分布" class="headerlink" title="超几何分布"></a>超几何分布</h2><p>超几何分布是一种离散概率分布，它描述的是不放回抽样的问题。例如在一批产品里，一共有N件产品，其中有M件次品，那么当我们任何取n件产品，其中恰有X件次品的概率P就可以按归照下面的公式进行计算：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180721/6bed6CC66m.png?imageslim" alt="mark"></p>
<p>其实超几何分布就是不放回的Bernoulli试验。此处我们回忆一下二项分布，如下所示：</p>
<blockquote>
<p>二项分布：一个罐子里有m个白球，n个黑球，如果每次随机取出1个，记录下颜色后放回，重复这样的试验就形成了一系列独立的Bernoulli试验，每次摸到白球的概率是p=m/(m=n)，在取了k次后，取到白球的总次数X就服从参数k和p的二项分布。</p>
</blockquote>
<p>如果我们不放回白球，我们在取了k后后，取到白球的总次数X就服从超几何分布(hypergeometric distribution)。</p>
<p>R语言中与超几何分布有关的函数为<code>phyper</code>，<code>dhyper</code>，<code>rhyper</code>，<code>qhyper</code>。</p>
<p>其中dhyper的参数为dhyper(x, m, n, k)，这几个参数的含义如下所示：<br>x：从一个含有白球和黑球的盒子里不放回取出的白球数目。<br>m：白球的数量<br>n：黑球的数量<br>k：抽取的次数</p>
<h3 id="超几何分布的计算"><a href="#超几何分布的计算" class="headerlink" title="超几何分布的计算"></a>超几何分布的计算</h3><p>现在计算一下，有100个白球，400个黑球，不放回取50个球，有10个白球的概率，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; dhyper(<span class="number">10</span>,<span class="number">100</span>,<span class="number">400</span>,<span class="number">50</span>,log = <span class="literal">FALSE</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">0.1474</span></div></pre></td></tr></table></figure>
<p>现在计算一下，有100个白球，400个黑球，不放回取50个球，小于等于10个白球的概率，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; phyper(<span class="number">10</span>, <span class="number">100</span>, <span class="number">400</span>, <span class="number">50</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">0.5851</span></div></pre></td></tr></table></figure>
<h3 id="超几何分布的概率密度曲线"><a href="#超几何分布的概率密度曲线" class="headerlink" title="超几何分布的概率密度曲线"></a>超几何分布的概率密度曲线</h3><p>现在绘制超几何分布的概率密度曲线，如下所示：</p>
<p>参数说明：其中N表示的是总的球的数目，即<code>N=m+n</code>，这里设定的数目是500个，k表示抽取的次数，这里分别绘制了白球为100个抽取50次，白球为200个抽取60次，白球为300个抽取70次的情况，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">set.seed(<span class="number">1000</span>)</div><div class="line">x&lt;-seq(<span class="number">0</span>,<span class="number">50</span>)</div><div class="line">y1&lt;-dhyper(x,<span class="number">100</span>, <span class="number">400</span>, <span class="number">50</span>)</div><div class="line">y2&lt;-dhyper(x,<span class="number">200</span>, <span class="number">300</span>, <span class="number">60</span>)</div><div class="line">y3&lt;-dhyper(x,<span class="number">300</span>, <span class="number">200</span>, <span class="number">70</span>)</div><div class="line">plot(x,y1)</div><div class="line">plot(x,y1,col=<span class="string">"red"</span>,ylab=<span class="string">"density"</span>,</div><div class="line">     xlim=c(<span class="number">0</span>,<span class="number">55</span>),xlab=<span class="string">""</span>,</div><div class="line">     main=<span class="string">"Hypergeometric distribution"</span>)</div><div class="line">lines(x,y1,col=<span class="string">"red"</span>)</div><div class="line">points(x,y2,col=<span class="string">"blue"</span>)</div><div class="line">lines(x,y2,col=<span class="string">"blue"</span>)</div><div class="line">points(x,y3,col=<span class="string">"orange"</span>)</div><div class="line">lines(x,y3,col=<span class="string">"orange"</span>)</div><div class="line">legend(<span class="string">"topright"</span>,legend=paste(<span class="string">"N="</span>,c(<span class="number">500</span>,<span class="number">500</span>,<span class="number">500</span>),</div><div class="line">                               <span class="string">"k="</span>,c(<span class="number">50</span>,<span class="number">60</span>,<span class="number">70</span>)),</div><div class="line">       lwd=<span class="number">1</span>,col=c(<span class="string">"red"</span>,<span class="string">"blue"</span>,<span class="string">"orange"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180720/4EjkaG80Km.png?imageslim" alt="mark"></p>
<h3 id="超几何分布的概率积累分布曲线"><a href="#超几何分布的概率积累分布曲线" class="headerlink" title="超几何分布的概率积累分布曲线"></a>超几何分布的概率积累分布曲线</h3><p>现在绘制超几何分布的概率积累分布曲线，参数说明：其中N表示的是总的球的数目，即<code>N=m+n</code>，这里设定的数目是500个，k表示抽取的次数，这里分别绘制了白球为100个抽取50次，白球为200个抽取60次，白球为300个抽取70次的情况，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">set.seed(<span class="number">1000</span>)</div><div class="line">x&lt;-seq(<span class="number">0</span>,<span class="number">50</span>)</div><div class="line">y1&lt;-phyper(x,<span class="number">100</span>, <span class="number">400</span>, <span class="number">50</span>)</div><div class="line">y2&lt;-phyper(x,<span class="number">200</span>, <span class="number">300</span>, <span class="number">60</span>)</div><div class="line">y3&lt;-phyper(x,<span class="number">300</span>, <span class="number">200</span>, <span class="number">70</span>)</div><div class="line">plot(x,y1)</div><div class="line">plot(x,y1,col=<span class="string">"red"</span>,ylab=<span class="string">"density"</span>,</div><div class="line">     xlim=c(<span class="number">0</span>,<span class="number">55</span>),xlab=<span class="string">""</span>,</div><div class="line">     main=<span class="string">"Hypergeometric Cumulative distribution"</span>)</div><div class="line">lines(x,y1,col=<span class="string">"red"</span>)</div><div class="line">points(x,y2,col=<span class="string">"blue"</span>)</div><div class="line">lines(x,y2,col=<span class="string">"blue"</span>)</div><div class="line">points(x,y3,col=<span class="string">"orange"</span>)</div><div class="line">lines(x,y3,col=<span class="string">"orange"</span>)</div><div class="line">legend(<span class="string">"bottomright"</span>,legend=paste(<span class="string">"N="</span>,c(<span class="number">500</span>,<span class="number">500</span>,<span class="number">500</span>),</div><div class="line">                               <span class="string">"k="</span>,c(<span class="number">50</span>,<span class="number">60</span>,<span class="number">70</span>)),</div><div class="line">       lwd=<span class="number">1</span>,col=c(<span class="string">"red"</span>,<span class="string">"blue"</span>,<span class="string">"orange"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180720/GIlFbbElB8.png?imageslim" alt="mark"></p>
<p>案例分析</p>
<p>假定在一个20个人的研究生班中，有12个女生（用m表示，即m=12），有8个男生（用n表示，即n=8），因此，女生的比例是60%，如果随机抽取10个学生进行论文主审查，那么X=8篇女生的论文被抽中的概率是多少呢？</p>
<p>按照超几何分布Hyper(12,8,10)来计算，容易得出，其概率为0.0750，如果按照二项分布Binomial(10,0.6)来计算，则得出的概率是0.1209，显然这两种计算的差异很大，但是如果有120个女生和80个男生，那么随机抽取10个学生的论文，其中有8篇是女生的论文的概率就基本上差不多了，用超几何分布过计算，此概率是0.1183，用二项分布来计算，是0.1209。</p>
<p>现在计算一下这两个概率。</p>
<p>第1个概率（女生12个，男生8个），如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; m=<span class="number">12</span>;n=<span class="number">8</span>;k=<span class="number">10</span>;x=<span class="number">8</span></div><div class="line">&gt; dhyper(x,m,n,k)</div><div class="line">[<span class="number">1</span>] <span class="number">0.07501786</span></div><div class="line">&gt; dbinom(x,k,m/(m+n))</div><div class="line">[<span class="number">1</span>] <span class="number">0.1209324</span></div></pre></td></tr></table></figure>
<p>dhyper的参数前面了解了，现在看一下dbinom的参数，它的参数有3个，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dbinom(x, size, prob, log = <span class="literal">FALSE</span>)</div></pre></td></tr></table></figure>
<p>其中x表示目标事件的次数，我们的目标事件是”论文中是女生论文“，目标次数是8篇，此处x就等于8，k表示抽样的次数，这里是取了10个同学，prob表示目标事件的概率，我们的目标事件是”论文中是女生论文“，因此这个prob此处为0.6，也就是m/(m+n)。</p>
<p>现在扩大一下样本，女生120个，男生80个，抽10份论文，女生论文是8篇的概率，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; m=<span class="number">120</span>;n=<span class="number">80</span>;k=<span class="number">10</span>;x=<span class="number">8</span></div><div class="line">&gt; dhyper(x,m,n,k)</div><div class="line">[<span class="number">1</span>] <span class="number">0.1182677</span></div><div class="line">&gt; dbinom(x,k,m/(m+n))</div><div class="line">[<span class="number">1</span>] <span class="number">0.1209324</span></div></pre></td></tr></table></figure>
<p>在这个案例中，我们研究的是具体的某个事件的概率，也就是抽到女生论文是8篇的概率，如果我们要研究至少投到8篇是女生论文的概率，那么就需要求出8，9，10篇是女生论文的概率之和（女生人数为120人，男生80个），如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; dhyper(<span class="number">8</span>,<span class="number">120</span>,<span class="number">80</span>,<span class="number">10</span>)+dhyper(<span class="number">9</span>,<span class="number">120</span>,<span class="number">80</span>,<span class="number">10</span>)+dhyper(<span class="number">10</span>,<span class="number">120</span>,<span class="number">80</span>,<span class="number">10</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">0.1606976</span></div></pre></td></tr></table></figure>
<p>这里使用到了一个phyper函数，它的用法如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">phyper(q, m, n, k, lower.tail = TRUE, log.p = FALSE)</div></pre></td></tr></table></figure>
<p>q就是目标事件的次数，这里是8，因此使用这个函数计算出来的结果其实就是，抽取10篇，其中小于等于8篇是女生论文的概率，因此这个概率并不是我们想要的，我们想要的概率是至少8篇是女生论文的概率，也就是8，9，10篇。因此，此处我们计算出小于等于7篇是女生论文的概率，再用1减去就是我们要想的概率，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="number">1</span>-phyper(<span class="number">7</span>,m,n,k)</div><div class="line">[<span class="number">1</span>] <span class="number">0.1606976</span></div></pre></td></tr></table></figure>
<p>现在用dhyper函数来验证下，分别计算出8，9，10篇是女生论文的概率，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; dhyper(<span class="number">8</span>,m,n,k)</div><div class="line">[<span class="number">1</span>] <span class="number">0.1182677</span></div><div class="line">&gt; dhyper(<span class="number">9</span>,m,n,k)</div><div class="line">[<span class="number">1</span>] <span class="number">0.03726013</span></div><div class="line">&gt; dhyper(<span class="number">10</span>,m,n,k)</div><div class="line">[<span class="number">1</span>] <span class="number">0.005169843</span></div><div class="line">&gt; dhyper(<span class="number">8</span>,m,n,k)+dhyper(<span class="number">9</span>,m,n,k)+dhyper(<span class="number">10</span>,m,n,k)</div><div class="line">[<span class="number">1</span>] <span class="number">0.1606976</span></div></pre></td></tr></table></figure>
<p>结果是一样的。</p>
<h2 id="二项分布与超几何分布的联系与区别"><a href="#二项分布与超几何分布的联系与区别" class="headerlink" title="二项分布与超几何分布的联系与区别"></a>二项分布与超几何分布的联系与区别</h2><p>在抽样调查的实践中，一般不会重复调查同一个人，这相当于不放回抽样。严格来说应该用超几何分布来描述，但对于很大的总体，通常都考虑二项分布模型。这是因为，在一个很大的一群人中进行随机调查，就相当于从有大量黑白球的罐子中摸球，无论是放回抽样，还是不放回抽样，抽样时待抽取的黑白球所点的比例不会有显著的区别，由于二项分布计算简单，所以都用二项分布来近似。但是如果仅仅在一个人数不多的单位中进行调查，就相当于上面的不放回摸球，而且由于球的总数不多，每次抽样后，待抽取的黑白球所占的比例变化会很大，因此就应该考虑用超几何分布。</p>
<h2 id="Poisson分布"><a href="#Poisson分布" class="headerlink" title="Poisson分布"></a>Poisson分布</h2><p>在二战中，德国的导弹不断袭击英国，为了研究导弹袭击的规律，英国的统计学家R.D. Clarke把一个地区划分为许多小块，使得每个小块被击中的概率极小，在袭击是随机的假定下，各个小块被击中的概率在整个区域假定是一个常数，这样，一个小块被南路的次数就大致相当于在大量重复的成功概率很小的独立Bernoulli试验中成功的次数，他于是就导出了Poisson分布，而实际观测的导弹袭击的频数和用Poisson分布预测的频率相当吻合，在许多事件中，例如某种疾病的发生数目，一个自动生产线出现的废品数，某种事故发生的数目等，只要出现一次的概率很小，一般被看成近似地服从Poisson分布，Poisson分布的总体参数是其均值，而且其总体均值和总体方差相等，这里用λ表示该总体均值，Poission分布常用P(λ)或Poisson(λ)表示，此分布P(λ)的概率分布为：对于$x=0,1,\cdots$，以及$\lambda&gt;0$，有：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180814/29871IeHg8.png?imageslim" alt="mark"></p>
<p>下图就是参数为3、6、10的Poission分布图（只标出了20之内的部分），Poisson分布是一个分布族，其成员用不同的λ来区分，若干个独立的Poisson分布变量的和也服从Poisson分布，其参数等于那些Poisson分布的参数之和。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">x&lt;-<span class="number">0</span>:<span class="number">20</span></div><div class="line">z&lt;-cbind(dpois(x,<span class="number">3</span>),dpois(x,<span class="number">6</span>),dpois(x,<span class="number">10</span>))</div><div class="line">matplot(x,z,</div><div class="line">        pch=c(<span class="number">19</span>,<span class="number">8</span>,<span class="number">17</span>),</div><div class="line">        cex=<span class="number">1.5</span>,</div><div class="line">        xlab=<span class="string">"x"</span>,ylab=<span class="string">"P(X=x)"</span>,</div><div class="line">        col=<span class="number">1</span>,</div><div class="line">        main=<span class="string">"Poisson Distribution"</span>,</div><div class="line">        type=<span class="string">"b"</span>)</div><div class="line">legend(<span class="number">15</span>,<span class="number">0.23</span>,</div><div class="line">       c(<span class="string">"P(3)"</span>,<span class="string">"P(6)"</span>,<span class="string">"P(10)"</span>),</div><div class="line">       cex=<span class="number">1.5</span>,</div><div class="line">       pch=c(<span class="number">19</span>,<span class="number">8</span>,<span class="number">17</span>),</div><div class="line">       col=<span class="number">1</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180814/jf1B9225eB.jpeg?imageslim" alt="mark"></p>
<p>正如前面的导弹袭击案例所说，当Bernoulli试验的次数很大，而每次成功概率很小时，可以用Poisson分布来近似二项分布，数学上，如果二项分布Binomial(n,p)的p趋于0，而np趋于常数λ时，该二项分布则趋于Poisson分布P(λ)，由于当n很大，以及p很小时，二项分布计算很麻烦，因此在计算机出现之前，人们在计算概率时，往往用P(np)来对二项分布Binomial(n,p)做近似。</p>
<p>看一个案例，现在使用不同的n（例如取值10，100，1000，10000，100000）和p（例如取值0.1，0.01，0.001，0.0001，0.00001）分别利用二项分布和Poisson分布近似来计算X=2的概率，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; n&lt;-c(<span class="number">10</span>,<span class="number">100</span>,<span class="number">1000</span>,<span class="number">10000</span>,<span class="number">100000</span>)</div><div class="line">&gt; p&lt;-c(<span class="number">0.1</span>,<span class="number">0.01</span>,<span class="number">0.001</span>,<span class="number">0.0001</span>,<span class="number">0.00001</span>)</div><div class="line">&gt; cbind(dbinom(<span class="number">2</span>,n,p),dpois(<span class="number">2</span>,n*p))</div><div class="line">          [,<span class="number">1</span>]      [,<span class="number">2</span>]</div><div class="line">[<span class="number">1</span>,] <span class="number">0.1937102</span> <span class="number">0.1839397</span></div><div class="line">[<span class="number">2</span>,] <span class="number">0.1848648</span> <span class="number">0.1839397</span></div><div class="line">[<span class="number">3</span>,] <span class="number">0.1840317</span> <span class="number">0.1839397</span></div><div class="line">[<span class="number">4</span>,] <span class="number">0.1839489</span> <span class="number">0.1839397</span></div><div class="line">[<span class="number">5</span>,] <span class="number">0.1839406</span> <span class="number">0.1839397</span></div></pre></td></tr></table></figure>
<h2 id="正态分布"><a href="#正态分布" class="headerlink" title="正态分布"></a>正态分布</h2><p>正态分布内容参见这篇笔记《正态分布笔记》</p>
<h2 id="卡方分布"><a href="#卡方分布" class="headerlink" title="卡方分布"></a>卡方分布</h2><p>正态分布内容参见这篇笔记<a href="http://rvdsd.top/2017/06/06/BioStatistics/%E7%94%9F%E7%89%A9%E7%BB%9F%E8%AE%A1-06%E5%8D%A1%E6%96%B9%E5%88%86%E6%9E%90%E4%B8%8E%E5%8D%A1%E6%96%B9%E5%88%86%E5%B8%83/">《卡方检验》</a>。</p>
<h2 id="t分布"><a href="#t分布" class="headerlink" title="t分布"></a>t分布</h2><p>正态分布内容参见这篇笔记<a href="http://rvdsd.top/2017/06/03/BioStatistics/%E7%94%9F%E7%89%A9%E7%BB%9F%E8%AE%A1-03-T%E5%88%86%E5%B8%83%E4%B8%8E%E6%A3%80%E9%AA%8C/">《T分布与t检验》</a>。</p>
<h2 id="F分布"><a href="#F分布" class="headerlink" title="F分布"></a>F分布</h2><p>F-分布（F-distribution）是一种连续概率分布，被广泛应用于似然比率检验，特别是ANOVA中。F分布定义为：设X、Y为两个独立的随机变量，X服从自由度为k1的卡方分布，Y服从自由度为k2的卡方分布，这2个独立的卡方分布被各自的自由度除以后的比率这一统计量的分布。用公式表示就是下面的样子：</p>
<p>如果X是$\chi^2(m)$变量，Y是$\chi^2(n)$变量，而且X和Y独立，那么就有下面的这个公式，即<br>$F=\frac{X/m}{Y/n}$<br>这个公式可以称为具有自由度(m,n)的F分布，记为F(m,n)，也就是说，两个独立$\chi^2$分布变量（在除以它们各自的自由度后）的比为F分布变量。</p>
<p>F分布的概率密度函数为：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180815/A3HEemFA48.png?imageslim" alt="mark"></p>
<p>在F分布中，两个$\chi^2$分布的自由度则为F分布的自由度，因此，F分布有两个自由度，第一个自由度等于在分子上的$\chi^2$分布的自由度，第二个自由度等于在分母的$\chi^2$分布的自由度，下图显著了自由度分别为(3,20)，(10,20)和(50,20)的三条F分布密度曲线：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">x &lt;-c(seq(<span class="number">0</span>,<span class="number">4.5</span>,length=<span class="number">1000</span>))</div><div class="line">y2 &lt;- df(x,<span class="number">50</span>,<span class="number">20</span>)</div><div class="line">y3 &lt;- df(x,<span class="number">10</span>,<span class="number">20</span>)</div><div class="line">y5 &lt;- df(x,<span class="number">3</span>,<span class="number">20</span>)</div><div class="line">plot(x,y2,type=<span class="string">"l"</span>,xlab=<span class="string">""</span>,ylab=<span class="string">""</span>,lty=<span class="number">1</span>,main=<span class="string">""</span>)</div><div class="line">lines(x,y3,type=<span class="string">"l"</span>,xlab=<span class="string">""</span>,ylab=<span class="string">""</span>,lty=<span class="number">2</span>)</div><div class="line">lines(x,y5,type=<span class="string">"l"</span>,xlab=<span class="string">""</span>,ylab=<span class="string">""</span>,lty=<span class="number">3</span>)</div><div class="line">legend(<span class="number">3</span>,<span class="number">1.1</span>,c(<span class="string">"F(50,20)"</span>,<span class="string">"F(10,20)"</span>,<span class="string">"F(3,20)"</span>),lty=<span class="number">1</span>:<span class="number">3</span>)</div><div class="line">text(<span class="number">0</span>,<span class="number">0.6</span>,<span class="string">"F(3,20)"</span>)</div><div class="line">text(<span class="number">0.8</span>,<span class="number">0.85</span>,<span class="string">"F(10,20)"</span>)</div><div class="line">text(<span class="number">1</span>,<span class="number">1.0</span>,<span class="string">"F(50,20)"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180815/03aejGc5ib.png?imageslim" alt="mark"></p>
<p>从图上可以看出，当第二个自由度相时，第一个自由度越小，峰越靠近左边。</p>
<h2 id="均匀分布"><a href="#均匀分布" class="headerlink" title="均匀分布"></a>均匀分布</h2><p>均匀分布(uniform distribution)是最简单的连续型分布，它的聚会范围是一个区间，例如(a,b)，均匀颁同随机变量X聚会在该区间的一个子区间的概率等于该子区间宽度与区间(a,b)宽度b-1的比值，如果区间(a,b)为(0,1)区间，那么X落入(0.3,0.7)的概率为(0.7-0.3)/(1-0)=0.4，显然，均匀分布的密度函数在(a,b)区间为常数1/(b-a)，而在该区间外为零，用公式就是以下表示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180815/7EDA4K7gHg.png?imageslim" alt="mark"></p>
<p>这种形状为一个矩形，因此均匀分布也称为矩形分布(rectangular distribution)，定义在(a,b)区间上的均匀分布通常用U(a,b)或Unif(a,b)表示，下图是均匀分布U(0,1)的密度函数（左）和一个来自U(a,b)的样本的直方图（右），如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># uniform distribution</span></div><div class="line">par(mfrow=c(<span class="number">1</span>,<span class="number">2</span>))</div><div class="line">plot(-<span class="number">10</span>,<span class="number">10</span>,xlab=<span class="string">"X"</span>,ylab=<span class="string">""</span>,xlim=c(-<span class="number">0.3</span>,<span class="number">1.3</span>),ylim=c(<span class="number">0</span>,<span class="number">1.2</span>),main=<span class="string">"U(0,1)"</span>)</div><div class="line">segments(-<span class="number">0.3</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</div><div class="line">segments(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</div><div class="line">segments(<span class="number">1</span>,<span class="number">0</span>,<span class="number">1.3</span>,<span class="number">0</span>)</div><div class="line">segments(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,lty=<span class="number">2</span>)</div><div class="line">segments(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,lty=<span class="number">2</span>)</div><div class="line">x&lt;-runif(<span class="number">10000</span>)</div><div class="line">hist(x)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180815/BhKJ1cHm2K.png?imageslim" alt="mark"></p>
<h2 id="样本函数的分布"><a href="#样本函数的分布" class="headerlink" title="样本函数的分布"></a>样本函数的分布</h2><p>我们希望利用样本，尤其是通过作为样本函数的样本统计量来了解总体，并对总体参数进行推断。这些统计量包括閒贩蛭过的样本均值、样本中位数、样本标准差以及由它们组成的函数。统计量对不同的样本（但有相同的样本量）会取不同的值，作为随机样本的函数，它们也是随机的，也有自己的分布，这些分布就称为抽样分布(sampling distribution)， 我们来看一个案例。<br>我们有一个正常的色子，看一下每次投掷10次的试验（样本量为10），看一下这个均值的变化，下表记录了15次试验每次得到的结果和该次的样本均值，而和该表相应的左边为15条10个点的拆线，显示了15次共150个点数，右边为掷色子点数的15个均值，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">a &lt;- <span class="literal">NULL</span></div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">15</span>)&#123;</div><div class="line">  x &lt;- sample(<span class="number">1</span>:<span class="number">6</span>,<span class="number">10</span>,rep=<span class="literal">T</span>)</div><div class="line">  a &lt;- rbind(a,c(x,mean(x)))&#125;</div><div class="line">par(mfrow=c(<span class="number">1</span>,<span class="number">2</span>))</div><div class="line">matplot(<span class="number">1</span>:<span class="number">10</span>,t(a[,-<span class="number">11</span>]),type=<span class="string">"l"</span>,xlab=<span class="string">""</span>,main=<span class="string">"每次掷10次色子，重复15遍"</span>,ylab=<span class="string">"点数"</span>)</div><div class="line">plot(<span class="number">1</span>:<span class="number">15</span>,a[,<span class="number">11</span>],type=<span class="string">"l"</span>,xlab=<span class="string">""</span>,main=<span class="string">"15个均值（每个来自10次掷色子结果)"</span>,ylab=<span class="string">"点数"</span>,ylim=c(<span class="number">1</span>,<span class="number">6</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180815/8H16g5CI5h.png?imageslim" alt="mark"></p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180815/hJj3ikIchc.png?imageslim" alt="mark"></p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180815/Ej30i8DLEk.png?imageslim" alt="mark"></p>
<p>这些样本均值都和真正的总体均值(1+2+3+4+5+6)/6=3.5不完全一样，它们比较稳定，而不像那些原先的150个样本点，显然，这些均值有其自己的分布，与掷色子原先的多项分布不同，这使得人们对这些样本均值的分布感兴趣，前面介绍的$\chi^2$分布，t分布和F分布都可以是正态分布总体有关的抽样分布。</p>
<h2 id="样本均值的性质和中心极限定理"><a href="#样本均值的性质和中心极限定理" class="headerlink" title="样本均值的性质和中心极限定理"></a>样本均值的性质和中心极限定理</h2><p>我们把前面的掷色子试验的样本量从10增加到5000，而抽取1000个样本（原来是15个），结果得到1000个均值，这些均值的直方图如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">a&lt;-<span class="literal">NULL</span></div><div class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">1000</span>)&#123;</div><div class="line">x&lt;-sample(<span class="number">1</span>:<span class="number">6</span>,<span class="number">5000</span>,rep=<span class="literal">T</span>)</div><div class="line">a&lt;-rbind(a,mean(x))&#125;</div><div class="line">hist(a,xlab=<span class="string">""</span>,<span class="number">15</span>,freq=<span class="literal">F</span>)</div><div class="line">lines(density(a))</div><div class="line">rug(a)</div><div class="line">mean(a)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180815/D8diDDjmLH.png?imageslim" alt="mark"></p>
<p>上图解释：做1000次试验，每次掷5000次色子，这样就得到了1000个均值的直方图，图中的曲线是对这1000个均值的密度估计，下面小的短线标出了这1000个均值的实际位置。</p>
<p>这看上去很像正态分布的形状，这些均值的均值为3.500001，接近掷色子的总体均值3.5。这就意味着，当样本量增加时，多项分布（掷色子）的总体均值或许可能用正态分布来近似。其实，在一定条件下，在样本量趋于无穷时，一般分布的样本均值的分布趋于正态分布，这就是关于样本均值的中心极限定量。</p>
<h2 id="中心极限定理"><a href="#中心极限定理" class="headerlink" title="中心极限定理"></a>中心极限定理</h2><p>假定随机变量X的n个独立观测值组成一个样本，假定X的总体均值为μ，而总体标准差为σ，这两个总体参数通常是未知的，从这个样本，我们还可以计算样本均值$\bar{x}$和样本标准差x，当然样本均值可以用来估计μ的值，具体这种估计的好坏，依赖于样本均值有什么样的抽样分布。样本均值作为随机变量有如下性质（注：这里没有假定X的分布）：</p>
<ol>
<li>样本均值$\bar{x}$的抽样分布的总体均值等于μ；</li>
<li>样本均值$\bar{x}$的抽样分布的总体标准差等于$\delta/\sqrt{n}$，样本量越大，$\bar{x}$的集中程度越大；</li>
<li>即使X的分布不是正态，那么在很一般的条件下（中心极限定理成立的一个充分条件是：样本点是独立的，来自一个总体（同一个分布），总体均值存在，并且有非零有限总体方差。），当样本量增加时，$\bar{x}$的分布走近于正态分布$N(\mu,\delta/\sqrt{n})$，这就是中心极限定理（CLT,central limit theorem)。</li>
</ol>
<p>把上面第二条中的样本均值$\bar{x}$的抽样分布的总体标准差公式中的σ换成样本标准差s，得到$s/\sqrt{n}$就是均值的标准误差(standard error of mean,SEM)，它是对$\delta/\sqrt{n}$的一个近似。现在我们从U(0,1)，$\chi^2(2)$和F(0,10)这三种分布对于三种样本量大小n=1，3，100分别取600个样本，再计算出每个样本的均值，这样对每一种样本量都有600个均值，用这些均值画直方图，如下所示，可以看出，样本量越大，均值的直方图就越像正态分布，并且数据的分散程度也越小（越集中）。</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180815/IgfLgBai7C.png?imageslim" alt="mark"></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol>
<li><a href="http://blog.sina.com.cn/s/blog_670445240101m4z3.html" target="_blank" rel="external">每日一生信—富集分析（超几何分布）（Fisher’s Exact Test）</a> </li>
<li><a href="http://blog.sina.com.cn/s/blog_5d1edf6a0100ujcv.html" target="_blank" rel="external">R 超几何分布</a> </li>
<li><a href="https://en.wikipedia.org/wiki/Hypergeometric_distribution" target="_blank" rel="external">Wikipedia:Hypergeometric distribution</a></li>
<li>DawnGriffiths. 深入浅出统计学[M]. 电子工业出版社, 2012.</li>
<li>高桥信陈刚. 漫画统计学[M]. 科学出版社, 2009.</li>
<li>拉里·戈尼克, 沃尔科特·史密斯. 漫画统计学入门[M]. 辽宁教育出版社, 2002.</li>
<li>陈希孺.概率论与数理统计[M].中国科学技术大学出版社,1992.</li>
<li><a href="http://blog.fens.me/r-density/" target="_blank" rel="external">常用连续型分布介绍及R语言实现</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/06/01/BioStatistics/生物统计-StatQuest学习笔记01-统计学分布及抽样/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/01/BioStatistics/生物统计-StatQuest学习笔记01-统计学分布及抽样/" itemprop="url">StatQuest学习笔记01——统计学分布及抽样</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-01T12:10:54+08:00">
                2018-06-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物统计/" itemprop="url" rel="index">
                    <span itemprop="name">生物统计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,769
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  6
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这个系列的笔记是StatQuest视频的学习笔记，我的这些笔记有时候会使用一些自己以前收录的数据，外加自己补充的一些笔记。此篇笔记是基础知识，视频教程的1-5。</p>
<h2 id="什么是直方图"><a href="#什么是直方图" class="headerlink" title="什么是直方图"></a>什么是直方图</h2><p>如果我们测量一批人的身高，他们的身高并不固定，因此我们先做一个x轴，从左到右身高依次增高，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/70DL93Hd72.png?imageslim" alt="mark"></p>
<p>此时，我们开始测量这批人的身高，一个点代表一个人，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/23dFF1d16h.png?imageslim" alt="mark"></p>
<p>这种图有个缺陷，就是一些相同身高的人的点会重合，并不直观，因此我们可以转换一下图形，把相同身高的人的点叠加起来，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/6G4Agk0haI.png?imageslim" alt="mark"></p>
<p>这样的话， 我们就能很清楚地看到这批人身高的统计情况，这种图形可以叫直方图（histogram），直方图的下端（也就是x轴）的数据是连续的，可以自己设定，从图中可以明显看到，中间的人的点数多，两边的人点数少。再进一步，我们可以使用“分布（distribution）”这个术语来表示我们这次测量的为数据，将这些数据点的顶端用一个近似曲线连接起来，就成了下面的这个样子：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/HJl26FJlgm.png?imageslim" alt="mark"></p>
<p>这种图形类似于一个钟型（bell）我们可以称它为正态分布（normal distribution），如果我们测量出来的数据是下面的这个样子，它就呈现一种指数分布（exponential distribution）：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/d8IJBHmmfa.png?imageslim" alt="mark"></p>
<h2 id="直方图的特点"><a href="#直方图的特点" class="headerlink" title="直方图的特点"></a>直方图的特点</h2><p>如果我们在测量这批人的数据时，以0.5英尺（约合30cm）为单位，也就是说，在绘制直方图时，x轴的坐标上的宽度分布是这个样子的：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/98FBa3heAl.png?imageslim" alt="mark"></p>
<p>可以看到，这次测量把这批人的身高数据划分了4份，分别为小于5，5到5.5，5.5到6，大于6。如果改变一下，把数据划分为8份，也就是说最小的单位值是0.25，就是下面的这个样子：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/6c2A7mi4kH.png?imageslim" alt="mark"></p>
<p>如果测量更多的人，使用更加小的划分单位，我们就会得到一个对人体身高更加精确的估计值，下图是划分了18份，如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/flIcGdeFdb.png?imageslim" alt="mark"></p>
<p>并且还可以画出一条曲线（curve），对这批数据进行估计，如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/k2kg7ab0iG.png?imageslim" alt="mark"></p>
<p>从这张图上我们可以得到以下信息：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/BHbkI8IG71.png?imageslim" alt="mark"></p>
<p>测量一个人，得到这个低于4.5或高于6.5的概率比较低，而很大的概率会得到曲线中间凸出来的部分。使用曲线来估计一批人数据比直方图更有优势。第一，直方图有时候并不准，例如上图右侧蓝箭头这部分数据并没有测到，如果换一批人，就有可能测到；第二，使用曲线时，并不用考虑最小数据的分隔单位，就能估计一个数值的概率，例如我们要计算得到5.021和5.317这个数据的概率有多大，就直接利用曲线就能得到。第三，人的精力与资源有限，直接去测量大批数据并不现实，而估计一条曲线只需要我们手中少量数据的标准差与均值即可。<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/a8ecG659K4.png?imageslim" alt="mark"></p>
<p>在这张图里，直方图与曲线都表示这批数据的分布，其中曲线的最高处以及直方图的中间地带，都是最有可能测量到的部分。除了这种正态分布的图形外，还有其他的分布（下图左上是正态分布，右上是指数分页，左下是均匀分页），如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/0fHibjmk1K.png?imageslim" alt="mark"></p>
<h2 id="直方图与柱状图的区别"><a href="#直方图与柱状图的区别" class="headerlink" title="直方图与柱状图的区别"></a>直方图与柱状图的区别</h2><p>直方图x轴上的组距是连续的，从上面的图形可以得知，测量的身高的不同划分是小于5，5到5.5，5.5到6，6以上。而柱状图的x轴上通常是一些分类的数据类型，看下图：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/EgD46kd4gG.png?imageslim" alt="mark"></p>
<p>这张图就是一个柱状图（有人也称条形图），它的x轴是不连续的，只是一些分类变量。</p>
<h2 id="正态分布"><a href="#正态分布" class="headerlink" title="正态分布"></a>正态分布</h2><p>先看一下正态分布图形，就是上一部分中的身高分布数据，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/5alkghAAl8.png?imageslim" alt="mark"></p>
<p>从图形上可以看到正态分布的特点：</p>
<ol>
<li>左右对称，因此也叫钟型曲线（bell shaped curve）；</li>
<li>中间凸起，两侧平缓。</li>
</ol>
<p>再看另外的两个正态分布图形：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/gDaJ9H1B7L.png?imageslim" alt="mark"></p>
<p>其中，左侧绿线表示的是出生的婴儿的身高分布（英寸），右侧的划线表示的是成人身高的分布，从这两个曲线上我们可以得到这些信息：</p>
<ol>
<li>婴儿的正态分布曲线比较尖锐，这表示婴儿身高比较集中，成人身高的正态分布曲线比较平缓，这表示成人身高比较分散；</li>
<li>成人身高的平均值要高于婴儿身高的平均值。</li>
</ol>
<p>再看一下婴儿和成人身高的95%的集中程度：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/afg2l14Jgd.png?imageslim" alt="mark"></p>
<p>自然界的很多事物都符合正态分布，其背后的一个原理就是中心极限定理（the central limit theorem），以后的笔记会提到。</p>
<h2 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h2><p>模型，英文是指“model”。在统计学中，模型是指对现实世界中的一些事情的抽象处理，数据模型使用一些表格，图表，公式来研究现实世界中的一些规律，例如下图就是使用一个图表和公式来表示小鼠的体重与大小的关系：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/KC54a6FL81.png?imageslim" alt="mark"></p>
<p>有时候，图形不一定是直线，也有可能是曲线，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/g72KFhjJcD.png?imageslim" alt="mark"></p>
<h2 id="抽样分布"><a href="#抽样分布" class="headerlink" title="抽样分布"></a>抽样分布</h2><p>下图是一个直方图，一个点表示一个人的身高：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/5a7H4b2Bim.png?imageslim" alt="mark"></p>
<p>然后用一条曲线来表示数据的分布：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/g4Ce3kEI04.png?imageslim" alt="mark"></p>
<p>如果我们从这个分布里面随机抽出一个样本的话，有很大的概率会抽到中间的这一部分，就是下图中黑色圆角矩形表示的区域：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/ja213fBCEF.png?imageslim" alt="mark"></p>
<p>如果我们使用某个程序（例如R语言）随机地从服从正态分布的数据中挑出许多样本，然后对它们进行统计的话，看一下会发生哪些事情，例如从下面的这个正态分布中随机地挑出两个样本，一个样本的数量是3（一个样本不一定只是一个数据点），如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/E3D4lLLK6k.png?imageslim" alt="mark"></p>
<p>然后对这两个样本进行t检验，由于它们都是来源于同不一个分布，因此t检验结果的p值会很大（也就是说p很有可能大于0.05）。如果这两个样本是来源两个不同的分布，如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180602/8F7mCeJJll.png?imageslim" alt="mark"></p>
<p>那么经过t检验，得到的p值就会很小。如果想到得到较小的p值，这就可能要增加样本，或者是就此为止（增加样本涉及到一类错误与二类错误，这里不表）。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/05/28/Experiment/实验笔记-miRNA的qPCR方法笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/28/Experiment/实验笔记-miRNA的qPCR方法笔记/" itemprop="url">miRNA的qPCR方法笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-28T12:00:00+08:00">
                2018-05-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生物实验笔记/" itemprop="url" rel="index">
                    <span itemprop="name">生物实验笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,290
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  9
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>microRNA（后方简称miRNA）的长度比较短，通常是20nt到24nt长度，因此用常规的qPCR法很难对其直接定量。现在常用的对miRNA的定量方法主要有三种，分别为加尾法，茎环引物法，探针法。这篇笔记主要以mmu-miR-30d-50为例总结一下这前两种方法，因为探针法的原理与实验步骤我以前总结过。就我自己的看法，这三种方法最根本的原理就是延长miRNA。</p>
<h2 id="茎环引物法"><a href="#茎环引物法" class="headerlink" title="茎环引物法"></a>茎环引物法</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>茎环引物是一种能够自身环化的长引物，它的长度约为45bp。下面是茎环引物的示意图：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180524/Dh99I4kDc3.png?imageslim" alt="mark"></p>
<p>茎环引物的使用流程：</p>
<p>第一步：在反转录过程中，茎环逆转录引物（需要自己设计）与miRNA结合，反转录为cDNA；</p>
<p>第二步：在qPCR过程中，茎环结构打开，两条引物与打开茎环结构结合，其中一条引物与茎环引物上的公共序列结合，另外一条与相应的miRNA序列结合（需要自己设计），其他的miRNA也可以使用公共引物。</p>
<h3 id="mmu-miR-30d-5p的茎环引物设计"><a href="#mmu-miR-30d-5p的茎环引物设计" class="headerlink" title="mmu-miR-30d-5p的茎环引物设计"></a>mmu-miR-30d-5p的茎环引物设计</h3><p>第一步，在www.mirbase.org数据库中查询<a href="http://www.mirbase.org/cgi-bin/mirna_entry.pl?acc=MI0000549" target="_blank" rel="external">mmu-miR-30d-5p的成熟体序列</a>（5’-&gt;3’）如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UGUAAACAUCCCCGACUGGAAG</div></pre></td></tr></table></figure>
<p>将U转换为T，就如下所示：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">TGTAAACATCCCCGACTGGAAG</div></pre></td></tr></table></figure></p>
<p>第二步，设计茎环引物，茎环引物由两部分构成，一部分是通用的序列（通用序列有很多种，这里只列举一种），如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CTCAACTGGTGTCGTGGAGTCGGCAATTCAGTTGAGC</div></pre></td></tr></table></figure>
<p>另外一部分是针对某个miRNA特定序列，这一部分的序列是6个碱基，我们设计的是miR-30d-5p，从它的3‘端，开始数取6-8个序列，即<code>GAAGGTCA</code>，取它的互补序列，即为<code>CTTCCAGT</code>，将这段序列与茎环引物的通用序列，结合，就成了miR-30d-5p的反转录引物，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CTCAACTGGTGTCGTGGAGTCGGCAATTCAGTTGAGCCTTCCAGT</div></pre></td></tr></table></figure>
<p>这个引物是在反转录的时候使用，它在反转录过程中的示意图如下所示：<img src="http://ortxpw68f.bkt.clouddn.com/professional/180528/e54eA3ACjl.jpg?imageslim" alt="mark"></p>
<p>第三步，设计qPCR引物，正向引物，每个正向引物包括5’端通用序列和3‘端miRNA特异序列，5’端通用序列为：<code>5’-GCCGAG-3’</code>或<code>5’-TCGGCAGG-3’</code>，用于延伸实时定量PCR产物的长度；3’端为跟据成熟miRNA自身碱基组成及GC含量适当删减几个碱基所得的寡核苷酸或完整的成熟miRNA。即：上游引物为5‘- 通用引物+NNNNNNNNNNNNNNNNN-3’ ，自miRNA5’端抄起，14-16个或13-14个，这里就抄14个碱基。  通俗的说就是：保护性碱基（用来调GC含量的）+miRNA 5 端的13-16个碱基（不要抄到最后那6-8个上去了，意思就是不要与RT那段重叠了），因此miR-30d-5p的qPCR正向引物序列就是：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">TCGGCAGGTGTAAACATCCCCG</div></pre></td></tr></table></figure></p>
<p>反向引物，就是茎环引物上的一段序列，这里直接写为<code>5&#39;-CTCAACTGGTGTCGTGGA-3&#39;</code>（就是茎环引物上的一段序列）。这两条引物在qPCR中的反应过程如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180528/ad22mEl3fa.jpg?imageslim" alt="mark"></p>
<h3 id="RNA提取的实验材料"><a href="#RNA提取的实验材料" class="headerlink" title="RNA提取的实验材料"></a>RNA提取的实验材料</h3><p>Trizol（Thermo Fisher Scientific）</p>
<p>RNAase-Free水</p>
<p>无水乙醇（重庆川东化工有限公司）</p>
<p>氯仿（成都市科龙化工试剂厂）</p>
<p>异丙醇（成都市科龙化工试剂厂）</p>
<p>qPCR试剂盒（Takara，货号：RR820A）</p>
<p>反转录试剂盒（Takara，货号：RR037A）</p>
<h3 id="qPCR实验过程"><a href="#qPCR实验过程" class="headerlink" title="qPCR实验过程"></a>qPCR实验过程</h3><h3 id="1-提取RNA"><a href="#1-提取RNA" class="headerlink" title="1.提取RNA"></a>1.提取RNA</h3><p>提取RNA，按照常规的Trizol法提取即可，最终提取并测完浓度后，将RNA样本稀释到300ng/uL的浓度，并分装到3个EP管中，并取一部分出来，进行质控。质控的内容包括：1.2%的琼脂糖电泳，电压120V，40分钟，上样量200ng。</p>
<h3 id="2-反转录"><a href="#2-反转录" class="headerlink" title="2. 反转录"></a>2. 反转录</h3><ol>
<li><p>反转录采用Takara的反转录试剂盒，这个试剂盒是常规的反转录试剂盒，在反转录miRNA的时候，不需要试剂盒里面的2个引物，即成分3（Oligo dT primer）和成分4（Random 6 mers），使用自己设计的茎环引物进行反转，反转体系如下所示（20μL体系）：</p>
<p>| 成分                        | 体积 |<br>| —————————————- | —— |<br>| 5XPrimeScript Buffer        | 4    |<br>| PrimeScript RT Enzyme Mix I | 1    |<br>| 茎环引物                    | 1    |<br>| 总RNA                       | 1    |<br>| 无RNAase水                  | 20μL |</p>
</li>
</ol>
<p>PCR程序为：</p>
<ol>
<li>Step 1：37℃, 15min</li>
<li>Step 2：85 ℃, 5 sec</li>
<li>Step 3：4 ℃, 5min</li>
</ol>
<h3 id="3-qPCR反应"><a href="#3-qPCR反应" class="headerlink" title="3. qPCR反应"></a>3. qPCR反应</h3><p>反应体系如下所示：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>组分</th>
<th>体积(μL)</th>
</tr>
</thead>
<tbody>
<tr>
<td>2×SsoAdvanced SYBR   Green Supermix</td>
<td>10</td>
</tr>
<tr>
<td>Forward Primer(10μM)</td>
<td>1</td>
</tr>
<tr>
<td>Reverse Primer(10μM)</td>
<td>1</td>
</tr>
<tr>
<td>cDNA Template</td>
<td>1</td>
</tr>
<tr>
<td>ddH2O</td>
<td>To 20μL</td>
</tr>
</tbody>
</table>
</div>
<p>(2)PCR反应条件：</p>
<p>第一步：预变性条件95℃/10s；1 cycle；</p>
<p>第二步：PCR反应条件95℃/5s，60℃/30s，70℃/20s；40 cycles；</p>
<p>第三步：融解曲线分析95℃ 0s，20℃/s，65℃ 15s，20℃/s ，95℃ 0s ，0.1℃/s。</p>
<p>分析数据即可。</p>
<h3 id="茎环引物法的优缺点"><a href="#茎环引物法的优缺点" class="headerlink" title="茎环引物法的优缺点"></a>茎环引物法的优缺点</h3><p>茎环引物法的优点就在于特异性强，成本低。缺点就是一次只能针对一种特定的miRNA进行检测，而加尾法则能够对miRNA进行批量筛选。</p>
<h2 id="加尾法"><a href="#加尾法" class="headerlink" title="加尾法"></a>加尾法</h2><h3 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h3><p>加尾法的根本原理也是延长miRNA，然后再用上下游引物来进行qPCR。</p>
<p>在这里，还以miR-30d-5p为例，以及Takara的一个miRNA试剂盒为例说明一下加尾法的原理，参考资料主要是该试剂盒的说明书，即Mir-X™ miRNA First-Strand Synthesis and SYBR® qRT-PCR User Manual。这个试剂盒里面有这些成分：①mRQ Enzyme Mix；②mRQ Buffer (2X)；③mRQ 3’ Primer (10 μM) ；④U6 Forward Primer (10 μM)；⑤U6 Reverse Primer (10 μM)。</p>
<p>其中，①mRQ Enzyme Mix中含有poly(A)聚合酶，该酶向miRNA的3’末端添加poly(A)尾，此外还含有SMART MMLV逆转录酶，这个酶主要用于将加了poly(A)的RNA反转录为cDNA。②mRQ buffer是缓冲液，很好理解；③mRA 3‘ Primer这个我猜测可能是进行qPCR反应时的公共引物；④与⑤是U6的内参，这个也好理解。</p>
<p>整个反转录过程如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180528/BBk2j7KAjd.jpg?imageslim" alt="mark"></p>
<p>以上就是加尾法对miRNA进行检测的原理。这里只是以mmu-miR-30d-5p为例说明了一下，其实它也可以是miR-770-5p，也可以是miR-21-3p等，一次反转录几乎能够把细胞内的所有miRNA都给反转录成cDNA。因此，如果批量对miRNA进行qPCR筛选的话，加尾法是一种比较合适的方法，它只需要设计针对某个miRNA的特异引物即可，这样一次反转录生成的cDNA就可以重复做多个miRNA的检测。</p>
<h3 id="加尾法的上游引物设计"><a href="#加尾法的上游引物设计" class="headerlink" title="加尾法的上游引物设计"></a>加尾法的上游引物设计</h3><p>从原理图上可以知，例如针对miR-30d-5p的引物其实就是miR-30d-5p序列本身，只是把U变成了T。例如miR-30d-5p的成熟体序列为<code>UGUAAACAUCCCCGACUGGAAG</code>，那么它的加尾法上游引物就是<code>TGTAAACATCCCCGACTGGAAG</code>。</p>
<h3 id="qPCR反应"><a href="#qPCR反应" class="headerlink" title="qPCR反应"></a>qPCR反应</h3><p>加尾法的qPCR反应体系跟普通的qPCR体系一样，程序也类似（如果一次筛选大量的miRNA，则需要优化一下退火温度）。</p>
<h2 id="加尾引物的优化"><a href="#加尾引物的优化" class="headerlink" title="加尾引物的优化"></a>加尾引物的优化</h2><p>前面的加尾法只是一种非常粗糙的引物设计方法，因为不是所有的miRNA序列，用T替换U后，就可以直接当作引物的，加尾法的引物必须要经过优化。</p>
<h3 id="引物的设计基本原则"><a href="#引物的设计基本原则" class="headerlink" title="引物的设计基本原则"></a>引物的设计基本原则</h3><p>加尾法上流引物的设计原则也要遵循普通的PCR引物设计标准，如下所示：</p>
<ol>
<li>引物长度：与miRNA长度相似，20-25mer；</li>
<li>Tm值，约为60摄氏度，可以用Oligo软件分析，也可以使用一些在线的软件进行分析；</li>
<li>GC含量：40~60%。</li>
</ol>
<p>现在设计一个mmu-miR-21-5p的引物，在mibase数据库中查询，它的序列如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UAGCUUAUCAGACUGAUGUUGA</div></pre></td></tr></table></figure>
<p>用T替换为U，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">TAGCTTATCAGACTGATGTTGA</div></pre></td></tr></table></figure>
<p>把这条序列放到Oligo中评估一下：</p>
<p>第一，先评估一下是否构成二聚体，操作为Analyaze-&gt;Duplex Formation-&gt;Current Oligo，结果如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180717/dbccaJaClc.png?imageslim" alt="mark"></p>
<p>第二，评估一下引物的构成与Tm值，Analyaze-&gt;Composition&amp;Tm-&gt;Current Oligo，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180717/cFBmkI79hI.png?imageslim" alt="mark"></p>
<p>从这个结果来看，Tm值属于正常，但GC含量过低，有38.1%，此时需要进行调整，在5’端添加GC，调整后的序列如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GCTAGCTTATCAGACTGATGTTGA</div></pre></td></tr></table></figure>
<p>调整后的Tm值与GC含量如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180717/g9ehFL55hK.png?imageslim" alt="mark"></p>
<p>再看一个案例，has-ｍiR-615-5ｐ，它的序列如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GGGGGUCCCCGGUGCUCGGAUC</div></pre></td></tr></table></figure>
<p>用T替换U，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GGGGGTCCCCGGTGCTCGGATC</div></pre></td></tr></table></figure>
<p>查看一下自身结合的发卡结构，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180717/gi9cGGd7Hj.png?imageslim" alt="mark"></p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180717/flGHmljfm5.png?imageslim" alt="mark"></p>
<p>查看一下Tm值与GC含量，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180717/E2jJ99DB1G.png?imageslim" alt="mark"></p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180717/keA6eCifE1.png?imageslim" alt="mark"></p>
<p>此时需要对引物进行调整，在5’端删除GGGGG，在3‘端添加AAA，调整后的序列如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">TCCCCGGTGCTCGGATCAAA</div></pre></td></tr></table></figure>
<p>再查看一下发卡结构，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180717/jG9GK16h93.png?imageslim" alt="mark"></p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180717/gbC5L6edG2.png?imageslim" alt="mark"></p>
<p>查看一下Tm值与GC含量，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180717/G91L3FfFAJ.png?imageslim" alt="mark"></p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180717/ldel7Gl7cJ.png?imageslim" alt="mark"></p>
<p>已经调整到正常范围。</p>
<p>总结：</p>
<ol>
<li>加尾法的上流引物设计方法为：找到原始序列-&gt;使用T替换为U</li>
<li>在Oligo中评估这个序列，主要查看自身的发卡结构，引物二聚体形成，Tm值与GC含量</li>
<li>GC含量的调整要在引物的5’端与3’端进行。</li>
</ol>
<h2 id="Tm值计算器"><a href="#Tm值计算器" class="headerlink" title="Tm值计算器"></a>Tm值计算器</h2><ol>
<li>ThermoFisher的Tm值计算器：<a href="https://www.thermofisher.com/cn/zh/home/brands/thermo-scientific/molecular-biology/molecular-biology-learning-center/molecular-biology-resource-library/thermo-scientific-web-tools/tm-calculator.html" target="_blank" rel="external">https://www.thermofisher.com/cn/zh/home/brands/thermo-scientific/molecular-biology/molecular-biology-learning-center/molecular-biology-resource-library/thermo-scientific-web-tools/tm-calculator.html</a></li>
<li></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/05/19/Perl/Perl学习笔记（8）-文件与目录操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/19/Perl/Perl学习笔记（8）-文件与目录操作/" itemprop="url">Perl学习笔记（8）-文件与目录操作</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-19T12:00:00+08:00">
                2018-05-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Perl/" itemprop="url" rel="index">
                    <span itemprop="name">Perl</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,582
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  16
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Perl文件操作概述"><a href="#Perl文件操作概述" class="headerlink" title="Perl文件操作概述"></a>Perl文件操作概述</h2><p>Perl使用一种叫做<code>文件句柄</code>类型的变量来操作文件。从文件读取或者写入数据需要使用文件句柄。文件句柄(file handle)是一个I/O连接的名称，可以简单地地理解为控制文件的某个东西。Perl提供了三种文件句柄:STDIN,STDOUT,STDERR，分别代表标准输入、标准输出和标准出错输出。</p>
<p>Perl 中打开文件可以使用以下方式：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span> FILEHANDLE, EXPR</div><div class="line"><span class="keyword">open</span> FILEHANDLE</div><div class="line"><span class="keyword">sysopen</span> FILEHANDLE, FILENAME, MODE, PERMS</div><div class="line"><span class="keyword">sysopen</span> FILEHANDLE, FILENAME, MODE</div></pre></td></tr></table></figure></p>
<p>参数说明:<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">FILEHANDLE：文件句柄，用于存放一个文件唯一标识符，它就是一串数字，其实可以理解为文件编号。</div><div class="line">EXPR：文件名及文件访问类型组成的表达式。</div><div class="line">MODE：文件访问类型。</div><div class="line">PERMS：访问权限位(permission bits)。</div></pre></td></tr></table></figure></p>
<h2 id="Open函数"><a href="#Open函数" class="headerlink" title="Open函数"></a>Open函数</h2><h3 id="只读方式打开"><a href="#只读方式打开" class="headerlink" title="只读方式打开"></a>只读方式打开</h3><p>open是打开某个文件的函数，它的用法为<code>open(filevar,filenmae)</code>，其中，filevar是文件句柄，filename是文件名，路径可以是绝对路径，也可以是相对路径。<code>open(DATA,&quot;&lt;file.txt&quot;);</code>表示以只读的方式（只读的方式是<code>&lt;</code>号）打开文件<code>file.txt</code>。如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat open.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">open</span>(DATA,<span class="string">"&lt;file.txt"</span>) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"file.txt can not be opened,$!"</span>;</div><div class="line"></div><div class="line"><span class="keyword">while</span>(&lt;DATA&gt;)&#123;</div><div class="line">    <span class="keyword">print</span> <span class="string">"$_"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl open.pl </div><div class="line">This is a test file.</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat file.txt </div><div class="line">This is a test file.</div></pre></td></tr></table></figure>
<h3 id="写入方式打开"><a href="#写入方式打开" class="headerlink" title="写入方式打开"></a>写入方式打开</h3><p>写入方式打开是用<code>&gt;</code>符号，使用格式为：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span>(DATA,<span class="string">"&gt;file.txt"</span>) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"file.txt can not be open, $!"</span>;</div></pre></td></tr></table></figure>
<h3 id="读写方式打开"><a href="#读写方式打开" class="headerlink" title="读写方式打开"></a>读写方式打开</h3><p>如果要以读写方式打开文件，需要要<code>&gt;</code>或<code>&lt;</code>字符前添加<code>+</code>号，这种方式不会删除文件原来的内容，它的格式如下：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span>(DATA,<span class="string">"+&lt;file.txt"</span>); <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"file.txt can not be opened,$!"</span>;</div></pre></td></tr></table></figure>
<h3 id="删除文件内容"><a href="#删除文件内容" class="headerlink" title="删除文件内容"></a>删除文件内容</h3><p>删除文件内容，需要在<code>+</code>号后面添加<code>&gt;</code>符号，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span> DATA, <span class="string">"+&gt;file.txt"</span> <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"file can not be opened, $!"</span>;</div></pre></td></tr></table></figure>
<h3 id="追加数据"><a href="#追加数据" class="headerlink" title="追加数据"></a>追加数据</h3><p>追加数据使用双大于号（<code>&gt;&gt;</code>），如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span>(DATA,<span class="string">"&gt;&gt;file.txt"</span>)|| <span class="keyword">die</span> <span class="string">"file.txt can not be opened,$!"</span>;</div></pre></td></tr></table></figure>
<h3 id="读取追加文件的内容"><a href="#读取追加文件的内容" class="headerlink" title="读取追加文件的内容"></a>读取追加文件的内容</h3><p>在追加符号前面加上<code>+</code>号即可，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span>(DATA,<span class="string">"+&gt;&gt;file.txt"</span>) || <span class="keyword">die</span> <span class="string">"file.txt can not be opened,$!"</span>;</div></pre></td></tr></table></figure>
<h3 id="不同的访问模式汇总"><a href="#不同的访问模式汇总" class="headerlink" title="不同的访问模式汇总"></a>不同的访问模式汇总</h3><div class="table-container">
<table>
<thead>
<tr>
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;</code>或<code>r</code></td>
<td>只读方式打开，将文件指针指向文件头。</td>
</tr>
<tr>
<td><code>&gt;</code>或<code>w</code></td>
<td>写入方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。</td>
</tr>
<tr>
<td><code>&gt;&gt;</code>或<code>a</code></td>
<td>写入方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。</td>
</tr>
<tr>
<td><code>+&lt;</code>或<code>r+</code></td>
<td>读写方式打开，将文件指针指向文件头。</td>
</tr>
<tr>
<td><code>+&gt;</code>或<code>w+</code></td>
<td>读写方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。</td>
</tr>
<tr>
<td><code>+&gt;&gt;</code>或<code>a+</code></td>
<td>读写方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。</td>
</tr>
</tbody>
</table>
</div>
<h2 id="Sysopen函数"><a href="#Sysopen函数" class="headerlink" title="Sysopen函数"></a>Sysopen函数</h2><p><code>sysopen</code>函数类似于<code>open</code>函数，它的使用格式如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">sysopen</span>(FH,$filename,O_RDWR|O_CREAT,<span class="number">0666</span>)（中间有一个竖线，是OR的意思）</div></pre></td></tr></table></figure>
<p>参数解释：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>. FH:文件句柄，与<span class="keyword">open</span>函数的第<span class="number">1</span>个参数一样；</div><div class="line"><span class="number">2</span>. $filename：文件名；</div><div class="line"><span class="number">3</span>. O_RDWRIO_CREAT：模式值，tl模块提供的逻辑OR运算组合起来的常数构成；</div><div class="line"><span class="number">4</span>. 这个参数可先，是八进制值，<span class="number">0666</span>表示数据文件，<span class="number">0777</span>表示程序</div><div class="line">如果文件能够打开，则返回true，如果失败，返回false。</div></pre></td></tr></table></figure>
<p>以读写(<code>+&lt;filename</code>)的方式打开文件的代码是<code>sysopen(DATA,&quot;file.txt&quot;,O_RDWR);</code>如果需要在更新文件前清空文件，代码是`sysopen(DATA,”file.txt”,O_RDWR|O_TRUNC);。所有的模式值如下表所示：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>O_RDWR</td>
<td>读写方式打开，将文件指针指向文件头。</td>
</tr>
<tr>
<td>O_RDONLY</td>
<td>只读方式打开，将文件指针指向文件头。</td>
</tr>
<tr>
<td>O_WRONLY</td>
<td>写入方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。</td>
</tr>
<tr>
<td>O_CREAT</td>
<td>创建文件</td>
</tr>
<tr>
<td>O_APPEND</td>
<td>追加文件</td>
</tr>
<tr>
<td>O_TRUNC</td>
<td>将文件大小截为零</td>
</tr>
<tr>
<td>O_EXCL</td>
<td>如果使用O_CREAT时文件存在,就返回错误信息,它可以测试文件是否存在</td>
</tr>
<tr>
<td>O_NONBLOCK</td>
<td>非阻塞I/O使我们的操作要么成功，要么立即返回错误，不被阻塞。</td>
</tr>
</tbody>
</table>
</div>
<h2 id="Close函数"><a href="#Close函数" class="headerlink" title="Close函数"></a>Close函数</h2><p>在文件使用完后，要关闭文件，以刷新与文件句柄相关联的输入输出缓冲区，关闭文件的语法如下：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">close</span> FILEHANDLE</div><div class="line"><span class="keyword">close</span></div></pre></td></tr></table></figure>
<p>FILEHANDLE 为指定的文件句柄，如果成功关闭则返回 true，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">close</span>(DATA) || <span class="keyword">die</span> <span class="string">"can not close file"</span></div></pre></td></tr></table></figure>
<h2 id="读写文件"><a href="#读写文件" class="headerlink" title="读写文件"></a>读写文件</h2><p>向文件读写信息有几种不同的方式。</p>
<h3 id="第一种方式：-lt-FILEHANDLE-gt-操作符"><a href="#第一种方式：-lt-FILEHANDLE-gt-操作符" class="headerlink" title="第一种方式：&lt;FILEHANDLE&gt;操作符"></a>第一种方式：<code>&lt;FILEHANDLE&gt;操作符</code></h3><p>从打开的文件句柄读取信息的主要方法是<code>&lt;FILEHANDLE&gt;操作符</code>。在标量上下文中，它从文件句柄返回单一行，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span> file<span class="string">";</span></div><div class="line"><span class="string">@lines=&lt;DATA&gt;;</span></div><div class="line"><span class="string">print @lines;</span></div><div class="line"><span class="string">close(DATA);</span></div><div class="line"><span class="string">biotest@ubuntu:~/perl/06file$ perl import.pl</span></div><div class="line"><span class="string">1</span></div><div class="line"><span class="string">2</span></div><div class="line"><span class="string">3</span></div></pre></td></tr></table></figure>
<h3 id="getc-函数"><a href="#getc-函数" class="headerlink" title="getc 函数"></a>getc 函数</h3><p><code>xgetc</code>函数从指定的<code>FILEHANDLE</code>返回单一的字符，如果没指定返回 STDIN：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">getc</span> FILEHANDLE</div><div class="line"><span class="keyword">getc</span></div></pre></td></tr></table></figure>
<p>如果发生错误，或在文件句柄在文件末尾，则返回 undef。</p>
<h3 id="read函数"><a href="#read函数" class="headerlink" title="read函数"></a>read函数</h3><p>read函数用于从缓冲区的文件句柄读取信息。<br>这个函数用于从文件读取二进制数据，格式如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">read</span> FILEHANDLE,SCALAR,LENGTH,OFFSET</div><div class="line"><span class="keyword">read</span> FILEHANDLE,SCALAR,LENGTH</div></pre></td></tr></table></figure>
<p>参数说明:<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>. FILEHANDLE：文件句柄，用于存放一个文件唯一标识符。 </div><div class="line"><span class="number">2</span>. SCALAR：存贮结果，如果没有指定OFFSET，数据将放在SCALAR的开头。否则数据放在SCALAR中的OFFSET字节之后。</div><div class="line"><span class="number">3</span>. LENGTH：读取的内容长度。</div><div class="line"><span class="number">4</span>. OFFSET：偏移量。</div><div class="line">如果读取成功返回读取的字节数，如果在文件结尾返回<span class="number">0</span>，如果发生错误返回<span class="keyword">undef</span>。</div></pre></td></tr></table></figure></p>
<h3 id="print函数"><a href="#print函数" class="headerlink" title="print函数"></a>print函数</h3><p>对于所有从文件句柄中读取信息的函数，在后端主要的写入函数为 print：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> FILEHANDLE LIST</div><div class="line"><span class="keyword">print</span> LIST</div><div class="line"><span class="keyword">print</span></div></pre></td></tr></table></figure></p>
<p>利用文件句柄和print函数可以把程序运行的结果发给输出设备(STDOUT：标准输出)，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> <span class="string">"Hello World!\n"</span>;</div></pre></td></tr></table></figure>
<h2 id="文件操作实例"><a href="#文件操作实例" class="headerlink" title="文件操作实例"></a>文件操作实例</h2><h3 id="复制文件数据"><a href="#复制文件数据" class="headerlink" title="复制文件数据"></a>复制文件数据</h3><p>在下面的案例中，打开一个已经存在的文件<code>file1.txt</code>，并读取它的每一行，写入到文件<code>file2.txt</code>中，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat file1.txt</div><div class="line">This is line1 of file1.txt</div><div class="line">This is line2 of file1.txt</div><div class="line">This is line3 of file1.txt</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat operation.pl </div><div class="line"><span class="comment">#!/usr/bi/perl</span></div><div class="line"></div><div class="line"><span class="comment"># Open file1 with only-read</span></div><div class="line"><span class="keyword">open</span>(DATA1,<span class="string">"&lt;file1.txt"</span>);</div><div class="line"></div><div class="line"><span class="comment"># Open new file2</span></div><div class="line"><span class="keyword">open</span>(DATA2,<span class="string">"&gt;file2.txt"</span>);</div><div class="line"></div><div class="line"><span class="comment"># copy data</span></div><div class="line"><span class="keyword">while</span>(&lt;DATA1&gt;)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">print</span> DATA2 $_;</div><div class="line">&#125;</div><div class="line"><span class="keyword">close</span>(DATA1);</div><div class="line"><span class="keyword">close</span>(DATA2);</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl operation.pl </div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat file2.txt </div><div class="line">This is line1 of file1.txt</div><div class="line">This is line2 of file1.txt</div><div class="line">This is line3 of file1.txt</div></pre></td></tr></table></figure>
<h3 id="重命名文件"><a href="#重命名文件" class="headerlink" title="重命名文件"></a>重命名文件</h3><p>在下面的案例中，将<code>file1.txt</code>重命令为<code>new_file1.txt</code>，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls -lh *.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">13</span> file1.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">17</span> file2.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">21</span> May <span class="number">18</span> <span class="number">19</span>:<span class="number">44</span> file.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest  <span class="number">7</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">04</span> import.txt</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat rename.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">rename</span>(<span class="string">"/home/biotest/perl/06file/file1.txt"</span>,<span class="string">"/home/biotest/perl/06file/new_file1.txt"</span>);</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl rename.pl </div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls -lh *.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">17</span> file2.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">21</span> May <span class="number">18</span> <span class="number">19</span>:<span class="number">44</span> file.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest  <span class="number">7</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">04</span> import.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">13</span> new_file1.txt</div></pre></td></tr></table></figure>
<h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><p>现在删除当前目录下的<code>file2.txt</code>文件，使用的是<code>unlink</code>函数，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls -lh *.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">17</span> file2.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">21</span> May <span class="number">18</span> <span class="number">19</span>:<span class="number">44</span> file.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest  <span class="number">7</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">04</span> import.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">13</span> new_file1.txt</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ vim delete.pl</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat delete.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">unlink</span>(<span class="string">"/home/biotest/perl/06file/file2.txt"</span>);</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl delete.pl </div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls -lh *.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">21</span> May <span class="number">18</span> <span class="number">19</span>:<span class="number">44</span> file.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest  <span class="number">7</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">04</span> import.txt</div><div class="line">-rw-rw-r-- <span class="number">1</span> biotest biotest <span class="number">81</span> May <span class="number">18</span> <span class="number">20</span>:<span class="number">13</span> new_file1.txt</div></pre></td></tr></table></figure>
<h2 id="指定文件位置"><a href="#指定文件位置" class="headerlink" title="指定文件位置"></a>指定文件位置</h2><p><code>tell</code>函数用于获取文件的位置，<code>seek</code>函数指定文件内的位置。</p>
<h3 id="tell函数"><a href="#tell函数" class="headerlink" title="tell函数"></a>tell函数</h3><p>tell函数的使用如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">tell</span> FILEHANDLE</div><div class="line"><span class="keyword">tell</span></div></pre></td></tr></table></figure>
<p>如果指定 FILEHANDLE 该函数返回文件指针的位置，以字节计。如果没有指定则返回默认选取的文件句柄。 </p>
<h3 id="seek函数"><a href="#seek函数" class="headerlink" title="seek函数"></a>seek函数</h3><p>seek()函数是通过文件句柄来移动文件读写指针的方式来读取或写入文件的，以字节为单位进行读取和写入，使用格式如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">seek</span> FILEHANDLE, POSITION, WHENCE</div></pre></td></tr></table></figure>
<p>参数说明:<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>. FILEHANDLE：文件句柄，用于存放一个文件唯一标识符。</div><div class="line"><span class="number">2</span>. POSITION：表示文件句柄(读写位置指针)要移动的字节数。</div><div class="line"><span class="number">3</span>. WHENCE：表示文件句柄(读写位置指针)开始移动时的起始位置，可以取的值为<span class="number">0</span>、<span class="number">1</span>、<span class="number">2</span>；分别表示文件开头、当前位置和文件尾。</div></pre></td></tr></table></figure></p>
<p>以下案例就是从文件开头读取256个字节：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">seek</span> DATA, <span class="number">256</span>, <span class="number">0</span>;</div></pre></td></tr></table></figure></p>
<h3 id="使用案例"><a href="#使用案例" class="headerlink" title="使用案例"></a>使用案例</h3><p>以下代码用于判断这个文件是否𥇛，是否可读写，代码如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat file_info.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">my</span> $file=<span class="string">"/home/biotest/perl/06file/file.txt"</span>;</div><div class="line"><span class="keyword">my</span> (@description, $size);</div><div class="line"><span class="keyword">if</span> (-e $file)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a binary file'</span> <span class="keyword">if</span> (-B <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a socket'</span> <span class="keyword">if</span> (-S <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a text file'</span> <span class="keyword">if</span> (-T <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a special file'</span> <span class="keyword">if</span> (-b <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a special character file'</span> <span class="keyword">if</span> (-c <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'is a dictionary'</span> <span class="keyword">if</span> (-d <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, <span class="string">'file exists'</span> <span class="keyword">if</span> (-<span class="keyword">x</span> <span class="number">_</span>);</div><div class="line">    <span class="keyword">push</span> @description, (($size=-<span class="keyword">s</span> <span class="number">_</span>))? <span class="string">"$size byte"</span>:<span class="string">'null'</span>;</div><div class="line">    <span class="keyword">print</span> <span class="string">"$file information: "</span>,<span class="keyword">join</span>(<span class="string">','</span>,@description),<span class="string">"\n"</span>;</div><div class="line">&#125;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl file_info.pl </div><div class="line">/home/biotest/perl/<span class="number">06</span>file/file.txt information: is a text file,<span class="number">21</span> byte</div></pre></td></tr></table></figure>
<p>文件测试操作符如下表所示： </p>
<div class="table-container">
<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-A</code></td>
<td>文件上一次被访问的时间(单位：天)</td>
</tr>
<tr>
<td><code>-B</code></td>
<td>是否为二进制文件</td>
</tr>
<tr>
<td><code>-C</code></td>
<td>文件的(inode)索引节点修改时间(单位：天)</td>
</tr>
<tr>
<td><code>-M</code></td>
<td>文件上一次被修改的时间(单位：天)</td>
</tr>
<tr>
<td><code>-O</code></td>
<td>文件被真实的UID所有</td>
</tr>
<tr>
<td><code>-R</code></td>
<td>文件或目录可以被真实的UID/GID读取</td>
</tr>
<tr>
<td><code>-S</code></td>
<td>为socket(套接字)</td>
</tr>
<tr>
<td><code>-T</code></td>
<td>是否为文本文件</td>
</tr>
<tr>
<td><code>-W</code></td>
<td>文件或目录可以被真实的UID/GID写入</td>
</tr>
<tr>
<td><code>-X</code></td>
<td>文件或目录可以被真实的UID/GID执行</td>
</tr>
<tr>
<td><code>-b</code></td>
<td>为block-special (特殊块)文件(如挂载磁盘)</td>
</tr>
<tr>
<td><code>-c</code></td>
<td>为character-special (特殊字符)文件(如I/O 设备)</td>
</tr>
<tr>
<td><code>-d</code></td>
<td>为目录</td>
</tr>
<tr>
<td><code>-e</code></td>
<td>文件或目录名存在</td>
</tr>
<tr>
<td><code>-f</code></td>
<td>为普通文件</td>
</tr>
<tr>
<td><code>-g</code></td>
<td>文件或目录具有setgid属性</td>
</tr>
<tr>
<td><code>-k</code></td>
<td>文件或目录设置了sticky位</td>
</tr>
<tr>
<td><code>-l</code></td>
<td>为符号链接</td>
</tr>
<tr>
<td><code>-o</code></td>
<td>文件被有效UID所有</td>
</tr>
<tr>
<td><code>-p</code></td>
<td>文件是命名管道(FIFO)</td>
</tr>
<tr>
<td><code>-r</code></td>
<td>文件可以被有效的UID/GID读取</td>
</tr>
<tr>
<td><code>-s</code></td>
<td>文件或目录存在且不为0(返回字节数)</td>
</tr>
<tr>
<td><code>-t</code></td>
<td>文件句柄为TTY(系统函数isatty()的返回结果；不能对文件名使用这个测试)</td>
</tr>
<tr>
<td><code>-u</code></td>
<td>文件或目录具有setuid属性</td>
</tr>
<tr>
<td><code>-w</code></td>
<td>文件可以被有效的UID/GID写入</td>
</tr>
<tr>
<td><code>-x</code></td>
<td>文件可以被有效的UID/GID执行</td>
</tr>
<tr>
<td><code>-z</code></td>
<td>文件存在，大小为0(目录恒为false)，即是否为空文件，</td>
</tr>
</tbody>
</table>
</div>
<h2 id="Perl目录操作"><a href="#Perl目录操作" class="headerlink" title="Perl目录操作"></a>Perl目录操作</h2><p>下面是Perl中常用的一些操作目录的函数：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">opendir</span> DIRHANDLE, EXPR  <span class="comment"># 打开目录</span></div><div class="line"><span class="keyword">readdir</span> DIRHANDLE        <span class="comment"># 读取目录</span></div><div class="line"><span class="keyword">rewinddir</span> DIRHANDLE      <span class="comment"># 定位指针到开头</span></div><div class="line"><span class="keyword">telldir</span> DIRHANDLE        <span class="comment"># 返回目录的当前位置</span></div><div class="line"><span class="keyword">seekdir</span> DIRHANDLE, POS   <span class="comment"># 定位指定到目录的 POS 位置</span></div><div class="line">closedir DIRHANDLE       <span class="comment"># 关闭目录</span></div></pre></td></tr></table></figure>
<h3 id="显示所有文件"><a href="#显示所有文件" class="headerlink" title="显示所有文件"></a>显示所有文件</h3><p>在下面的案例中，可以显示所有的文件，使用了<code>glob</code>函数，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat glob.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="comment"># display /home/biotest/perl/06file/ all files</span></div><div class="line">$dir = <span class="string">"/home/biotest/perl/06file/*"</span>;</div><div class="line"><span class="keyword">my</span> @files=<span class="keyword">glob</span>($dir);</div><div class="line"></div><div class="line"><span class="keyword">foreach</span>(@files)&#123;</div><div class="line">    <span class="keyword">print</span> $_. <span class="string">"\n"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment"># display all files with .pl in /home/biotest/perl/06file/</span></div><div class="line">$dir=<span class="string">"/home/biotest/perl/06file/*.pl"</span>;</div><div class="line">@files=<span class="keyword">glob</span>($dir);</div><div class="line"></div><div class="line"><span class="keyword">foreach</span>(@files)&#123;</div><div class="line">    <span class="keyword">print</span> $_.<span class="string">"\n"</span>;</div><div class="line">&#125;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl glob.pl </div><div class="line">/home/biotest/perl/<span class="number">06</span>file/delete.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/file.txt</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/file_info.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/glob.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/import.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/import.txt</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/m1.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/new_file1.txt</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/open.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/operation.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/rename.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/delete.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/file_info.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/glob.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/import.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/m1.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/open.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/operation.pl</div><div class="line">/home/biotest/perl/<span class="number">06</span>file/rename.pl</div></pre></td></tr></table></figure>
<p>显示当前目录下所有文件，使用<code>opendir</code>函数，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat opendir.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">opendir</span>(DIR,<span class="string">'.'</span>) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"Can not open directory,$!"</span>;</div><div class="line"><span class="keyword">while</span>($file=<span class="keyword">readdir</span> DIR)&#123;</div><div class="line">    <span class="keyword">print</span> <span class="string">"$file\n"</span>;</div><div class="line">&#125;</div><div class="line">closedir DIR;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl opendir.pl </div><div class="line">open.pl</div><div class="line">file.txt</div><div class="line">..</div><div class="line">rename.pl</div><div class="line">glob.pl</div><div class="line">import.pl</div><div class="line">opendir.pl</div><div class="line">operation.pl</div><div class="line">new_file1.txt</div><div class="line">file_info.pl</div><div class="line">.</div><div class="line">m1.pl</div><div class="line">delete.pl</div><div class="line">import.txt</div></pre></td></tr></table></figure>
<h3 id="显示当前目录下所有以-pl结尾的文件"><a href="#显示当前目录下所有以-pl结尾的文件" class="headerlink" title="显示当前目录下所有以.pl结尾的文件"></a>显示当前目录下所有以<code>.pl</code>结尾的文件</h3><p>如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat display_file_pl.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">opendir</span>(DIR,<span class="string">'.'</span>) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"can not open directionary, $!"</span>;</div><div class="line"><span class="keyword">foreach</span> (<span class="keyword">sort</span> <span class="keyword">grep</span>(<span class="regexp">/^.*\.pl$/</span>,<span class="keyword">readdir</span>(DIR)))&#123;</div><div class="line">     <span class="keyword">print</span> <span class="string">"$_\n"</span>;</div><div class="line">&#125;</div><div class="line">closedir DIR;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl display_file_pl.pl </div><div class="line">delete.pl</div><div class="line">display_file_pl.pl</div><div class="line">file_info.pl</div><div class="line">glob.pl</div><div class="line">import.pl</div><div class="line">m1.pl</div><div class="line">open.pl</div><div class="line">opendir.pl</div><div class="line">operation.pl</div><div class="line">rename.pl</div></pre></td></tr></table></figure>
<h3 id="创建一个新目录"><a href="#创建一个新目录" class="headerlink" title="创建一个新目录"></a>创建一个新目录</h3><p>mkdir也是Perl中的一个函数，它用于创建一个新目录，但是使用之前，要有足够的权限，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat mkdir.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$dir=<span class="string">"/home/biotest/perl/06file/new"</span>;</div><div class="line"></div><div class="line"><span class="keyword">mkdir</span>($dir) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"Can not create $dir directionary, $!"</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"Create a directionary!"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl mkdir.pl </div><div class="line">Create a directionary!</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls</div><div class="line">delete.pl           glob.pl     mkdir.pl       open.pl</div><div class="line">display_file_pl.pl  import.pl   new            operation.pl</div><div class="line">file_info.pl        import.txt  new_file1.txt  rename.pl</div><div class="line">file.txt            m1.pl       opendir.pl</div></pre></td></tr></table></figure>
<h3 id="删除目录"><a href="#删除目录" class="headerlink" title="删除目录"></a>删除目录</h3><p>使用rmdir来删除目录，使用这个函数之前用户需要有足够的权限，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat del_dir.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$dir=<span class="string">"/home/biotest/perl/06file/new"</span>;</div><div class="line"></div><div class="line"><span class="keyword">rmdir</span>($dir) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"Can not delete $dir directionary, $!"</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"Delete directionary successfully!\n"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl del_dir.pl </div><div class="line">Delete directionary successfully!</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ ls</div><div class="line">del_dir.pl          file.txt    m1.pl          open.pl</div><div class="line">delete.pl           glob.pl     mkdir.pl       operation.pl</div><div class="line">display_file_pl.pl  import.pl   new_file1.txt  rename.pl</div><div class="line">file_info.pl        import.txt  opendir.pl</div></pre></td></tr></table></figure>
<h3 id="切换目录"><a href="#切换目录" class="headerlink" title="切换目录"></a>切换目录</h3><p>切换目录使用chdir函数，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ pwd</div><div class="line">/home/biotest/perl/<span class="number">06</span>file</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ cat chdir.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$dir=<span class="string">"/home/biotest"</span>;</div><div class="line"></div><div class="line"><span class="keyword">chdir</span>($dir) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"Can not change to $dir, $!"</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"Your current directionary is $dir\n"</span>;</div><div class="line"></div><div class="line"><span class="keyword">opendir</span>(DIR,<span class="string">'.'</span>) <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"Can not open $dir,$!"</span>;</div><div class="line"><span class="keyword">while</span>($file=<span class="keyword">readdir</span> DIR)&#123;</div><div class="line">    <span class="keyword">print</span> <span class="string">"$file\n"</span>;</div><div class="line">&#125;</div><div class="line">closedir DIR;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">06</span>file$ perl chdir.pl|head</div><div class="line">Your current directionary is /home/biotest</div><div class="line">Desktop</div><div class="line">Miniconda2-latest-Linux-x86_64.sh</div><div class="line">filename</div><div class="line">Pictures</div><div class="line">.dmrc</div><div class="line">Videos</div><div class="line">.xsession-errors.old</div><div class="line">.bash_history</div><div class="line">.cache</div></pre></td></tr></table></figure>
<p>从结果来看，运行代码后，chdir并不会在shell中直接切换到<code>/home/biotest</code>目录，但是，我们后来使用了<code>opendir</code>函数后，显示的文件确实是<code>/home/biotest</code>目录下的文件，这一点需要注意：切换目录改变的只能是Perl程序运行中的目录，而不是Shell实际中的目录。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.runoob.com/perl/perl-tutorial.html" target="_blank" rel="external">Perl教程|菜鸟教程</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/05/18/Perl/Perl学习笔记（7）-引用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/18/Perl/Perl学习笔记（7）-引用/" itemprop="url">Perl学习笔记（7）-引用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-18T12:00:00+08:00">
                2018-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Perl/" itemprop="url" rel="index">
                    <span itemprop="name">Perl</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  724
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Perl-引用"><a href="#Perl-引用" class="headerlink" title="Perl 引用"></a>Perl 引用</h2><p>引用就是指针，Perl的引用是一个标量类型，它可以指向变量、数组、哈希表（也叫关联数组）和函数，可以应用在程序的任何地方。</p>
<h2 id="创建引用"><a href="#创建引用" class="headerlink" title="创建引用"></a>创建引用</h2><p>定义变量的时候，在变量名前面加个\，就得到了这个变量的一个引用，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$scalarref = \$foo;     <span class="comment"># 标量变量引用</span></div><div class="line">$arrayref  = \@ARGV;    <span class="comment"># 列表的引用</span></div><div class="line">$hashref   = \%ENV;     <span class="comment"># 哈希的引用</span></div><div class="line">$coderef   = \&amp;handler; <span class="comment"># 函数引用</span></div><div class="line">$globref   = \*foo;     <span class="comment"># GLOB句柄引用</span></div></pre></td></tr></table></figure>
<p>在数组中我们可以用匿名数组引用，使用 [] 定义，在Perl中，匿名数组使用方括号（<code>[]</code>）来表示，而正常的数组，则是使用小括号来表示，例如<code>@ages=(25,30,40)</code>。当使用匿名数组引用时，使用方括号（<code>[]</code>），如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$aref= [ <span class="number">1</span>,<span class="string">"foo"</span>,<span class="keyword">undef</span>,<span class="number">13</span> ];</div></pre></td></tr></table></figure>
<p>匿名数组的元素仍然可以是匿名数组，所以可以用这种方法构造数组的数组，可以构造任意维度的数组，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">my</span> $aref = [</div><div class="line">        [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">        [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</div><div class="line">        [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>],</div><div class="line">]</div></pre></td></tr></table></figure>
<p>在哈希中我们可以用匿名哈希引用，使用 {} 定义：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$href= &#123; <span class="string">APR =&gt;</span><span class="number">4</span>, <span class="string">AUG =&gt;</span><span class="number">8</span> &#125;;</div></pre></td></tr></table></figure>
<p>也可以创建一个没有子程序名的匿名子程序引用:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$coderef = <span class="function"><span class="keyword">sub</span> </span>&#123; <span class="keyword">print</span> <span class="string">"Runoob!\n"</span> &#125;;</div></pre></td></tr></table></figure>
<h2 id="取消引用"><a href="#取消引用" class="headerlink" title="取消引用"></a>取消引用</h2><p>取消引用可以根据不同的类型使用<code>$</code>，<code>@</code>或<code>%</code>来消除，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ cat quote.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$var = <span class="number">10</span>;</div><div class="line">$r = \$var; <span class="comment"># $r 引用 $var 标量</span></div><div class="line"><span class="keyword">print</span> <span class="string">"$var is "</span>, $$r, <span class="string">"\n"</span>;  <span class="comment"># 输出本地存储的 $r 的变量值</span></div><div class="line"></div><div class="line">@var = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);<span class="comment"># $r 引用  @var 数组</span></div><div class="line">$r = \@var;</div><div class="line"><span class="keyword">print</span> <span class="string">"@var is "</span>, @$r, <span class="string">"\n"</span>;<span class="comment"># 输出本地存储的 $r 的变量值</span></div><div class="line"></div><div class="line">%var = (<span class="string">'key1'</span> =&gt; <span class="number">10</span>, <span class="string">'key2'</span> =&gt; <span class="number">20</span>);  <span class="comment"># $r 引用  %var 数组</span></div><div class="line">$r = \%var;</div><div class="line"><span class="keyword">print</span> <span class="string">"%var is :"</span>,%$r, <span class="string">"\n"</span>;<span class="comment"># 输出本地存储的 $r 的变量值</span></div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ perl quote.pl </div><div class="line"><span class="number">10</span> is <span class="number">10</span></div><div class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> is <span class="number">123</span></div><div class="line">%var is :key110key22<span class="number">0</span></div></pre></td></tr></table></figure>
<h2 id="判断引用类型"><a href="#判断引用类型" class="headerlink" title="判断引用类型"></a>判断引用类型</h2><p>如果你不能确定变量类型，你可以使用 ref 来判断，返回值列表如下，如果没有以下的值返回 false：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">SCALAR</div><div class="line">ARRAY</div><div class="line">HASH</div><div class="line">CODE</div><div class="line">GLOB</div><div class="line">REF</div></pre></td></tr></table></figure>
<p>案例如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ cat determined.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$var = <span class="number">10</span>;</div><div class="line">$r = \$var;</div><div class="line"><span class="keyword">print</span> <span class="string">"Reference type of r is "</span>, <span class="keyword">ref</span>($r), <span class="string">"\n"</span>;</div><div class="line"></div><div class="line">@var = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line">$r = \@var;</div><div class="line"><span class="keyword">print</span> <span class="string">"Reference type of r is "</span>, <span class="keyword">ref</span>($r), <span class="string">"\n"</span>;</div><div class="line"></div><div class="line">%var = (<span class="string">'key'</span> =&gt; <span class="number">10</span>, <span class="string">'key2'</span> =&gt; <span class="number">20</span>);</div><div class="line">$r = \%var;</div><div class="line"><span class="keyword">print</span> <span class="string">"Reference type of r is "</span>,<span class="keyword">ref</span>($r), <span class="string">"\n"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ perl determined.pl </div><div class="line">Reference type of r is SCALAR</div><div class="line">Reference type of r is ARRAY</div><div class="line">Reference type of r is HASH</div></pre></td></tr></table></figure>
<h2 id="循环引用"><a href="#循环引用" class="headerlink" title="循环引用"></a>循环引用</h2><p>循环引用在两个引用相互包含时出现。你需要小心使用，不然会导致内存泄露，如下实例：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ cat quote_loop.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">my</span> $foo = <span class="number">100</span>;</div><div class="line">$foo = \$foo;</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"Value of foo is "</span>, $foo, <span class="string">"\n"</span>;</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ perl quote_loop.pl </div><div class="line">Value of foo is REF(<span class="number">0x1fb50f8</span>)</div></pre></td></tr></table></figure>
<h2 id="引用函数"><a href="#引用函数" class="headerlink" title="引用函数"></a>引用函数</h2><p>函数引用格式: <code>\&amp;</code>，调用引用函数格式: <code>&amp; + 创建的引用名</code>，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">PrintHash</span></span>&#123;</div><div class="line">    <span class="keyword">my</span>(%hash) = @_;</div><div class="line">	</div><div class="line">	<span class="keyword">foreach</span> $item (%hash)&#123;</div><div class="line">	    <span class="keyword">print</span> <span class="string">"Element: $item\n"</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">%hash = (<span class="string">'name'</span> =&gt; <span class="string">'Baidu'</span>, <span class="string">'age'</span> =&gt; <span class="number">11</span>);</div><div class="line"></div><div class="line">$cref = \&amp;PrintHash;</div><div class="line"></div><div class="line">&amp;$cref(%hash);</div></pre></td></tr></table></figure>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.runoob.com/perl/perl-tutorial.html" target="_blank" rel="external">Perl教程|菜鸟教程</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/05/17/Perl/Perl学习笔记（6）-函数设计/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/17/Perl/Perl学习笔记（6）-函数设计/" itemprop="url">Perl学习笔记（6）-函数设计</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-17T12:00:00+08:00">
                2018-05-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Perl/" itemprop="url" rel="index">
                    <span itemprop="name">Perl</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1,457
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  6
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Perl的函数"><a href="#Perl的函数" class="headerlink" title="Perl的函数"></a>Perl的函数</h2><p>Perl函数也叫子程序，就是用户定义的函数。为了方便，我一律称为函数，不称子程序。Perl函数的语法格式如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">subroutine</span></span>&#123;</div><div class="line">statements;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>调用函数的语法格式为<code>subroutine( 参数列表 )</code>，如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">Hello</span></span>&#123;</div><div class="line"><span class="keyword">print</span> <span class="string">"Hello, World!\n"</span>;</div><div class="line">&#125;</div><div class="line">Hello();</div></pre></td></tr></table></figure></p>
<p>由于在设计<code>Hello</code>函数时，并没有设计相应的参数，因此在运行时就不需要加参数，但是还需要加上括号。</p>
<h2 id="向函数传递参数"><a href="#向函数传递参数" class="headerlink" title="向函数传递参数"></a>向函数传递参数</h2><p>Perl 函数可以和其他编程语言一样接受多个参数，函数参数使用特殊数组<code>@_</code>标明。因此函数第一个参数为<code>_[0]</code>, 第二个参数为<code>_[1]</code>, 以此类推，用户可以通过改变<code>@_</code>数组中的值来改变相应实际参数的值。。不论参数是标量型还是数组型的，用户把参数传给函数时，perl默认按引用的方式调用它们，如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ cat function_parameter.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">mean</span></span>&#123;</div><div class="line">    $n = <span class="keyword">scalar</span>(@_);</div><div class="line">    $sum = <span class="number">0</span>;</div><div class="line">    <span class="keyword">foreach</span> $item(@_)&#123;</div><div class="line">    $sum = $sum + $item;</div><div class="line">&#125;</div><div class="line">$average = $sum/$n;</div><div class="line"><span class="keyword">print</span> <span class="string">'Input parameter is : '</span>,<span class="string">"@_\n"</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"The first parameter is $_[0]\n"</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"The average of inputed parameters is $average\n"</span>;</div><div class="line">&#125;</div><div class="line">mean(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>);</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ perl function_parameter.pl </div><div class="line">Input parameter is : <span class="number">10</span> <span class="number">20</span> <span class="number">30</span></div><div class="line">The first parameter is <span class="number">10</span></div><div class="line">The average of inputed parameters is <span class="number">20</span></div></pre></td></tr></table></figure></p>
<p>代码解释：scalar不是求元素个数，它用来产生一个标量环境，对数组进行操作时，会返回元素个数。<code>$n = scalar(@_)</code>就是获取所有传入的参数的个数，在这段代码中，n值就是3。</p>
<h2 id="向函数传递列表"><a href="#向函数传递列表" class="headerlink" title="向函数传递列表"></a>向函数传递列表</h2><p>由于<code>@_</code>变量是一个数组，所以它可以向函数中传递列表。但如果我们需要传入标量和数组参数，需要把列表放在最后一个参数上，如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ cat print_list.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">PrintList</span></span>&#123;</div><div class="line"><span class="keyword">my</span> @list = @_;</div><div class="line"><span class="keyword">print</span> <span class="string">"List is @list\n"</span>;</div><div class="line">&#125;</div><div class="line">$a = <span class="number">10</span>;</div><div class="line">@b = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</div><div class="line">PrintList($a, @b);</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ perl print_list.pl </div><div class="line">List is <span class="number">10</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></div></pre></td></tr></table></figure></p>
<h2 id="向函数传递哈希"><a href="#向函数传递哈希" class="headerlink" title="向函数传递哈希"></a>向函数传递哈希</h2><p>当向函数传递哈希表时，它将复制到<code>@_</code>中，哈希表将被展开为键/值组合的列表，如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ cat print_hash.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">PrintHash</span></span>&#123;</div><div class="line">    <span class="keyword">my</span>(%hash) = @_;</div><div class="line">    <span class="keyword">foreach</span> <span class="keyword">my</span>$key (<span class="keyword">keys</span> %hash)&#123;</div><div class="line">    <span class="keyword">my</span> $value =$hash&#123;$key&#125;;</div><div class="line">    <span class="keyword">print</span> <span class="string">"$key:$value\n"</span>;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line">%hash = (<span class="string">'name'</span> =&gt; <span class="string">'Baidu'</span>, <span class="string">'age'</span> =&gt;<span class="number">11</span>);</div><div class="line">PrintHash(%hash);</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ perl print_hash.pl </div><div class="line">name:Baidu</div><div class="line">age:<span class="number">11</span></div></pre></td></tr></table></figure></p>
<h2 id="函数返回值"><a href="#函数返回值" class="headerlink" title="函数返回值"></a>函数返回值</h2><p>函数可以向其他编程语言一样使用<code>retur</code> 语句来返回函数值。如果没有使用<code>return</code>语句，则函数的最后一行语句将作为返回值，如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ cat <span class="keyword">return</span>.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">add_a_b</span></span>&#123;</div><div class="line">    $_[<span class="number">0</span>] + $_[<span class="number">1</span>];</div><div class="line">&#125;</div><div class="line"><span class="keyword">print</span> add_a_b(<span class="number">1</span>,<span class="number">12</span>).<span class="string">"\n"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ perl <span class="keyword">return</span>.pl </div><div class="line"><span class="number">13</span></div></pre></td></tr></table></figure></p>
<h2 id="函数的局部变量"><a href="#函数的局部变量" class="headerlink" title="函数的局部变量"></a>函数的局部变量</h2><p>默认情况下，Perl 中所有的变量都是全局变量，这就是说变量在程序的任何地方都可以调用。如果我们需要设置私有变量（私有变量其实与其他编程语言中的局部变量是一样的，后文一律称为局部变量），可以使 <code>my</code>操作符来设置。<code>my</code>操作符用于创建作用域变量，通过<code>my</code>创建的变量，存活于声明开始的地方，直到闭合作用域的结尾。<code>闭合作用域</code>指的可以是一对花括号中的区域，可以是一个文件，也可以是一个<code>if, while, for, foreach, eval</code>字符串。它的用法如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">somefunc</span> </span>&#123;</div><div class="line">   <span class="keyword">my</span> $variable; <span class="comment"># $variable在函数somefunc()之外不可见</span></div><div class="line">   <span class="keyword">my</span> ($another, @an_array, %a_hash); <span class="comment">#  同时声明多个变量</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>以下案例就演示了如何声明一个或多个局部变量：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ cat local_variable.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$variable_global = <span class="string">"Hello, World!\n"</span>;</div><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">PrintHello</span></span>&#123;</div><div class="line">    <span class="keyword">my</span> $variable_global;</div><div class="line">    $variable_global = <span class="string">"Hello, Learner!\n"</span>;</div><div class="line">    <span class="keyword">print</span> <span class="string">"Strings in function is :$variable_global\n"</span>;</div><div class="line">&#125;</div><div class="line">PrintHello();</div><div class="line"><span class="keyword">print</span> <span class="string">"Strings beyond function is : $variable_global\n"</span>;</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ perl local_variable.pl </div><div class="line">Strings in function is :Hello, Learner!</div><div class="line">Strings beyond function is : Hello, World!</div></pre></td></tr></table></figure></p>
<h2 id="变量的临时赋值"><a href="#变量的临时赋值" class="headerlink" title="变量的临时赋值"></a>变量的临时赋值</h2><p>我们可以使用 local 为全局变量提供临时的值，在退出作用域后将原来的值还回去。local定义的变量不存在于主程序中，但存在于该函数和该函数调用的函数中。定义时可以给其赋值，如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ cat local_temp.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$variable_global = <span class="string">"Hello, World!\n"</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">PrintLocal</span></span>&#123;</div><div class="line"><span class="keyword">local</span> $variable_global;</div><div class="line">$variable_global = <span class="string">"Hello, Learner!\n"</span>; <span class="comment">#临时赋值</span></div><div class="line">PrintMe();</div><div class="line"><span class="keyword">print</span> <span class="string">"PrintLocal function has strings: $variable_global\n"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">PrintMe</span></span>&#123;</div><div class="line"><span class="keyword">print</span> <span class="string">"PrintMe function has strings: $variable_global\n"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">sub</span> <span class="title">PrintHello</span></span>&#123;</div><div class="line"><span class="keyword">print</span> <span class="string">"PrintHello function has strings: $variable_global\n"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">PrintLocal();</div><div class="line">PrintHello();</div><div class="line"><span class="keyword">print</span> <span class="string">"Strings beyond function is : $variable_global\n"</span>;</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ perl local_temp.pl </div><div class="line"></div><div class="line">PrintMe function has strings: Hello, Learner!</div><div class="line"></div><div class="line">PrintLocal function has strings: Hello, Learner!</div><div class="line"></div><div class="line">PrintHello function has strings: Hello, World!</div><div class="line"></div><div class="line">Strings beyond function is : Hello, World!</div></pre></td></tr></table></figure></p>
<h2 id="静态变量"><a href="#静态变量" class="headerlink" title="静态变量"></a>静态变量</h2><p><code>state</code>关键字将局部变量永久存在。state也是词法变量，所以只在定义该变量的词法作用域中有效，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~/perl/05function$ cat state.pl </div><div class="line">#!/usr/bin/perl</div><div class="line"></div><div class="line">use feature &apos;state&apos;;</div><div class="line">sub PrintCount&#123;</div><div class="line">state $count = 0;</div><div class="line">print &quot;counter value is : $count\n&quot;;</div><div class="line">$count++;</div><div class="line">&#125;</div><div class="line">for (1..5)&#123;</div><div class="line">PrintCount();</div><div class="line">&#125;</div><div class="line">biotest@ubuntu:~/perl/05function$ perl state.pl </div><div class="line">counter value is : 0</div><div class="line">counter value is : 1</div><div class="line">counter value is : 2</div><div class="line">counter value is : 3</div><div class="line">counter value is : 4</div></pre></td></tr></table></figure></p>
<p>注1：state仅能创建闭合作用域为函数内部的变量。<br>注2：state是从Perl 5.9.4开始引入的，所以使用前必须加上 use。<br>注3：state可以声明标量、数组、哈希。但在声明数组和哈希时，不能对其初始化（至少Perl 5.14不支持）。</p>
<h2 id="函数调用上下文"><a href="#函数调用上下文" class="headerlink" title="函数调用上下文"></a>函数调用上下文</h2><p>函数调用过程中，会根据上下文来返回不同类型的值，比如<code>localtime()</code>函数，在标量上下文返回字符串，在列表上下文返回列表，如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ cat function_context.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">my</span> $variable = <span class="keyword">localtime</span>(<span class="keyword">time</span>);</div><div class="line"><span class="keyword">print</span> $variable;</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"\n"</span>;</div><div class="line"></div><div class="line">($sec,$min,$hour,$mday,$mon, $year,$wday,$yday,$isdst) = <span class="keyword">localtime</span>(<span class="keyword">time</span>);</div><div class="line"><span class="keyword">printf</span>(<span class="string">"%d-%d-%d %d:%d:%d\n"</span>,$year+<span class="number">1990</span>,$mon+<span class="number">1</span>,$mday,$hour,$min,$sec);</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">05</span>function$ perl function_context.pl </div><div class="line">Fri May <span class="number">18</span> <span class="number">16</span>:<span class="number">53</span>:<span class="number">48</span> <span class="number">2018</span></div><div class="line"><span class="number">2108</span>-<span class="number">5</span>-<span class="number">18</span> <span class="number">16</span>:<span class="number">53</span>:<span class="number">48</span></div></pre></td></tr></table></figure></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.runoob.com/perl/perl-tutorial.html" target="_blank" rel="external">Perl教程|菜鸟教程</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/05/16/Perl/Perl学习笔记（5）-时间日期处理与格式化输出/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/16/Perl/Perl学习笔记（5）-时间日期处理与格式化输出/" itemprop="url">Perl学习笔记（5）-格式化输出与时间日期的处理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-16T12:00:00+08:00">
                2018-05-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Perl/" itemprop="url" rel="index">
                    <span itemprop="name">Perl</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,293
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  10
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h2><p>Perl 是一个非常强大的文本数据处理语言。Perl 中可以使用 format 来定义一个模板，然后使用 write 按指定模板输出数据。Perl 格式化定义语法格式如下</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">format</span> FormatName =</div><div class="line">fieldline</div><div class="line">value_one, value_two, value_three</div><div class="line">fieldline</div><div class="line">value_one, value_two</div><div class="line">.</div></pre></td></tr></table></figure>
<p>参数解释：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">FormatName ：格式化名称。</div><div class="line">fieldline ：一个格式行，用来定义一个输出行的格式,类似 @,^,&lt;,&gt;,| 这样的字符。</div><div class="line">value_one,value_two…… ：数据行，用来向前面的格式行中插入值,都是perl的变量。</div><div class="line">. ：结束符号。</div></pre></td></tr></table></figure>
<p>看一个简单的案例：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat format01.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$text=<span class="string">"google runoob taobao"</span>;</div><div class="line"><span class="keyword">format</span> STDOUT = </div><div class="line">first:^&lt;&lt;&lt;&lt;&lt; <span class="comment"># left-justified 6 characters</span></div><div class="line">    $text</div><div class="line">second: ^&lt;&lt;&lt;&lt;&lt; <span class="comment"># left-justified 6 characters</span></div><div class="line">    $text</div><div class="line">third: ^&lt;&lt;&lt;&lt; <span class="comment"># left-justified 5 characters, last "o" will be removed</span></div><div class="line">    $text</div><div class="line">.</div><div class="line"><span class="keyword">write</span></div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl format01.pl </div><div class="line">first:google</div><div class="line">second: runoob</div><div class="line">third: taoba</div></pre></td></tr></table></figure>
<h2 id="格式行语法"><a href="#格式行语法" class="headerlink" title="格式行语法"></a>格式行语法</h2><ol>
<li>格式行以<code>@</code>或者<code>^</code>开头，这些行不作任何形式的变量代换。</li>
<li><code>@</code>字段(不要同数组符号<code>@</code>相混淆)是普通的字段。</li>
<li><code>@,^</code>后的<code>&lt;, &gt;,|</code>长度决定了字段的长度，如果变量超出定义的长度,那么它将被截断。</li>
<li><code>&lt;, &gt;,|</code>还分别表示,左对齐,右对齐,居中对齐。</li>
<li><code>^</code>字段用于多行文本块填充。</li>
</ol>
<h2 id="值域格式"><a href="#值域格式" class="headerlink" title="值域格式"></a>值域格式</h2><div class="table-container">
<table>
<thead>
<tr>
<th>格式</th>
<th>值域含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@&lt;&lt;&lt;</code></td>
<td>左对齐输出</td>
</tr>
<tr>
<td><code>@&gt;&gt;&gt;</code></td>
<td>右对齐输出</td>
</tr>
<tr>
<td>`@</td>
<td></td>
<td></td>
<td>`</td>
<td>中对齐输出</td>
</tr>
<tr>
<td><code>@##.##</code></td>
<td>固定精度数字</td>
</tr>
<tr>
<td><code>@*</code></td>
<td>多行文本</td>
</tr>
</tbody>
</table>
</div>
<p>每个值域的第一个字符是行填充符，当使用<code>@</code>字符时，不做文本格式化。在上表中，除了多行值域<code>@*</code>，域宽都等于其指定的包含字符<code>@</code>在内的字符个数，例如<code>@###.##</code>表示7个字符的宽度，小数点前4个，小数点后2个，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat format02.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">format</span> EMPLOYEE = </div><div class="line">=============================</div><div class="line">@&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;@&lt;&lt;</div><div class="line">$name,$age</div><div class="line">@#<span class="comment">####.##</span></div><div class="line">$salary</div><div class="line">=============================</div><div class="line">.</div><div class="line"></div><div class="line"><span class="keyword">select</span>(STDOUT);</div><div class="line">$~=EMPLOYEE;</div><div class="line"></div><div class="line">@n=(<span class="string">"Ali"</span>,<span class="string">"Runoob"</span>,<span class="string">"Tencent"</span>);</div><div class="line">@a=(<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>);</div><div class="line">@s=(<span class="number">2000.00</span>,<span class="number">2500.00</span>,<span class="number">4000.00</span>);</div><div class="line"></div><div class="line">$i=<span class="number">0</span>;</div><div class="line"><span class="keyword">foreach</span>(@n)&#123;</div><div class="line">    $name=$_;</div><div class="line">    $age=$a[$i];</div><div class="line">    $salary=$s[$i++];</div><div class="line">    <span class="keyword">write</span>;</div><div class="line">&#125;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl format02.pl </div><div class="line">=============================</div><div class="line">Ali                    <span class="number">20</span></div><div class="line">  <span class="number">2000.00</span></div><div class="line">=============================</div><div class="line">=============================</div><div class="line">Runoob                 <span class="number">30</span></div><div class="line">  <span class="number">2500.00</span></div><div class="line">=============================</div><div class="line">=============================</div><div class="line">Tencent                <span class="number">40</span></div><div class="line">  <span class="number">4000.00</span></div><div class="line">=============================</div></pre></td></tr></table></figure>
<h2 id="格式变量"><a href="#格式变量" class="headerlink" title="格式变量"></a>格式变量</h2><ol>
<li><code>$~ ($FORMAT_NAME)</code> ：格式名字；</li>
<li><code>$^ ($FORMAT_TOP_NAME)</code> ：当前的表头格式名字存储；</li>
<li><code>$% ($FORMAT_PAGE_NUMBER)</code> ：当前输出的页号；</li>
<li><code>$= ($FORMAT_LINES_PER_PAGE)</code> ：每页中的行数；</li>
<li><code>$| ($FORMAT_AUTOFLUSH)</code> ：是否自动刷新输出缓冲区存储；</li>
<li><code>$^L ($FORMAT_FORMFEED)</code> ：在每一页(除了第一页)表头之前需要输出的字符串存储。</li>
</ol>
<p>在下面的案例中，使用了<code>$~进行格式化，</code>案例如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<p>如果不指定<code>$~</code>的情况下，会输出名为<code>STDOUT</code>的格式，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat format04.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">write</span>; <span class="comment"># 没有指定$~，程序会会寻找名为STDOUT的格式</span></div><div class="line"><span class="keyword">format</span> STDOUT=</div><div class="line">----------------</div><div class="line">STDOUT formats</div><div class="line">----------------</div><div class="line">.</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl format04.pl </div><div class="line">----------------</div><div class="line">STDOUT formats</div><div class="line">----------------</div></pre></td></tr></table></figure>
<p>在下面的案例中，添加报表头部信息来说明<code>$^</code>或<code>$FORMAT_TOP_NAME</code>变量的使用：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat format05.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">format</span> EMPLOYEE =</div><div class="line">====================================</div><div class="line">@&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; @&lt;&lt;</div><div class="line">$name, $age</div><div class="line">@#<span class="comment">####.##</span></div><div class="line">$salary</div><div class="line">====================================</div><div class="line">.</div><div class="line"></div><div class="line"><span class="keyword">format</span> EMPLOYEE_TOP=</div><div class="line">====================================</div><div class="line">Name                     Age Page @&lt;</div><div class="line">                         $%</div><div class="line">====================================</div><div class="line">.</div><div class="line"></div><div class="line"><span class="keyword">select</span>(STDOUT);</div><div class="line">$~ = EMPLOYEE;</div><div class="line">$^ = EMPLOYEE_TOP;</div><div class="line"></div><div class="line">@n=(<span class="string">"Ali"</span>,<span class="string">"Runoob"</span>,<span class="string">"Tencent"</span>);</div><div class="line">@a=(<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>);</div><div class="line">@s=(<span class="number">2000.00</span>,<span class="number">2500.00</span>,<span class="number">4000.000</span>);</div><div class="line"></div><div class="line">$i=<span class="number">0</span>;</div><div class="line"><span class="keyword">foreach</span>(@n)&#123;</div><div class="line">    $name=$_;</div><div class="line">    $age=$a[$i];</div><div class="line">    $salary=$s[$i++];</div><div class="line">    <span class="keyword">write</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl format05.pl </div><div class="line">====================================</div><div class="line">Name                     Age Page <span class="number">1</span></div><div class="line">====================================</div><div class="line">====================================</div><div class="line">Ali                      <span class="number">20</span></div><div class="line">  <span class="number">2000.00</span></div><div class="line">====================================</div><div class="line">====================================</div><div class="line">Runoob                   <span class="number">30</span></div><div class="line">  <span class="number">2500.00</span></div><div class="line">====================================</div><div class="line">====================================</div><div class="line">Tencent                  <span class="number">40</span></div><div class="line">  <span class="number">4000.00</span></div><div class="line">====================================</div></pre></td></tr></table></figure>
<h2 id="输出到其它文件"><a href="#输出到其它文件" class="headerlink" title="输出到其它文件"></a>输出到其它文件</h2><p>默认情况下函数<code>write</code>将结果输出到标准输出文件<code>STDOUT</code>，我们也可以使它将结果输出到任意其它的文件中。最简单的方法就是把文件变量作为参数传递给<code>write</code>，例如<code>write(MYFILE)</code>，此时write就用缺省的名为MYFILE的打印格式输出到文件MYFILE中。但是这样就不能用<code>$~</code>变量来改变所使用的打印格式。系统变量<code>$~</code>只对默认文件变量起作用，我们可以改变默认文件变量，改变<code>$~</code>，再调用<code>write</code>，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat myfile.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">if</span>(<span class="keyword">open</span>(MYFILE,<span class="string">"&gt;tmp"</span>))&#123;</div><div class="line">$~=<span class="string">"MYFORMAT"</span>;</div><div class="line"><span class="keyword">write</span> MYFILE;</div><div class="line"></div><div class="line"><span class="keyword">format</span> MYFILE=</div><div class="line">========================</div><div class="line">Input into file</div><div class="line">========================</div><div class="line">.</div><div class="line"><span class="keyword">close</span> MYFILE;</div><div class="line">&#125;</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl myfile.pl </div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat tmp </div><div class="line">========================</div><div class="line">Input into file</div><div class="line">========================</div></pre></td></tr></table></figure>
<p>以使用<code>select</code>改变默认文件变量时，它返回当前默认文件变量的内部表示，这样我们就可以创建子程序，按自己的想法输出，又不影响程序的其它部分，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat select.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line"><span class="keyword">if</span>(<span class="keyword">open</span>(MYFILE,<span class="string">"&gt;&gt;tmp"</span>))&#123;</div><div class="line"><span class="keyword">select</span>(MYFILE);</div><div class="line">$~=<span class="string">"OTHER"</span>;</div><div class="line"><span class="keyword">write</span>;</div><div class="line"></div><div class="line"><span class="keyword">format</span> OTHER=</div><div class="line">========================</div><div class="line">input something into file</div><div class="line">========================</div><div class="line">.</div><div class="line"><span class="keyword">close</span> MYFILE;</div><div class="line">&#125;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl select.pl </div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat tmp</div><div class="line">========================</div><div class="line">Input into file</div><div class="line">========================</div><div class="line">========================</div><div class="line">input something into file</div><div class="line">========================</div></pre></td></tr></table></figure>
<h2 id="Perl中处理时间的函数"><a href="#Perl中处理时间的函数" class="headerlink" title="Perl中处理时间的函数"></a>Perl中处理时间的函数</h2><p>Perl中处理时间的函数有以下这些：</p>
<ol>
<li>time() 函数：返回从1970年1月1日起累计的秒数</li>
<li>localtime() 函数：获取本地时区时间</li>
<li>gmtime() 函数： 获取格林威治时间</li>
</ol>
<h2 id="当前时间和日期"><a href="#当前时间和日期" class="headerlink" title="当前时间和日期"></a>当前时间和日期</h2><p><code>localtime()</code>函数返回当前的时间和日期。<br>以下 9 个符号代表不同的时间日期参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">sec,     # 秒， 0 到 61</div><div class="line">min,     # 分钟， 0 到 59</div><div class="line">hour,    # 小时， 0 到 24</div><div class="line">mday,    # 天， 1 到 31</div><div class="line">mon,     # 月， 0 到 11</div><div class="line">year,    # 年，从 1900 开始</div><div class="line">wday,    # 星期几，0-6,0表示周日</div><div class="line">yday,    # 一年中的第几天,0-364,365</div><div class="line">isdst    # 如果夏令时有效，则为真</div></pre></td></tr></table></figure>
<p>使用案例如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat time.pl </div><div class="line">@months = <span class="string">qw(Janurary February March April May June July August September October November December)</span>;</div><div class="line">@days = <span class="string">qw(Sunday Saturday Monday Tuesday Wednesday Friday)</span>;</div><div class="line"></div><div class="line">($sec, $min, $hour, $mday,$mon,$year, $wday, $yday, $isdst) = <span class="keyword">localtime</span>() ;</div><div class="line"></div><div class="line"><span class="keyword">print</span><span class="string">"$mday $months[$mon] $days[$wday]\n"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl time.pl </div><div class="line"><span class="number">18</span> May Friday</div></pre></td></tr></table></figure>
<p>如果直接调用 localtime() ，它返回系统当期设置时区的时间，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat localtime.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$datenow=<span class="keyword">localtime</span>();</div><div class="line"><span class="keyword">print</span> <span class="string">"Now time is $datenow\n"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl localtime.pl </div><div class="line">Now <span class="keyword">time</span> is Fri May <span class="number">18</span> <span class="number">16</span>:<span class="number">05</span>:<span class="number">51</span> <span class="number">2018</span></div></pre></td></tr></table></figure>
<h2 id="格林威治时间-GMT"><a href="#格林威治时间-GMT" class="headerlink" title="格林威治时间 (GMT)"></a>格林威治时间 (GMT)</h2><p>函数 gmtime() 与 localtime() 类似，但它返回标准格林威治时间，如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat gmt.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$Chongqing_time = <span class="keyword">localtime</span>();</div><div class="line">$gmt_time = <span class="keyword">gmtime</span>();</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"Chongqing time is $Chongqing_time\n"</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"GMT time is $gmt_time\n"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl gmt.pl </div><div class="line">Chongqing <span class="keyword">time</span> is Fri May <span class="number">18</span> <span class="number">16</span>:<span class="number">07</span>:<span class="number">05</span> <span class="number">2018</span></div><div class="line">GMT <span class="keyword">time</span> is Fri May <span class="number">18</span> <span class="number">23</span>:<span class="number">07</span>:<span class="number">05</span> <span class="number">2018</span></div></pre></td></tr></table></figure></p>
<p>运行结果可以看出，中国当地时间和格林威治时间相差了8小时，中国是东八区。</p>
<h2 id="格式化日期和时间"><a href="#格式化日期和时间" class="headerlink" title="格式化日期和时间"></a>格式化日期和时间</h2><p>使用<code>localtime()</code>函数的 9 个时间元素来可以输出需要制定的格式时间。格式化输出使用 printf() 函数，如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat format_time.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst)=<span class="keyword">localtime</span>();</div><div class="line"></div><div class="line"><span class="keyword">printf</span>(<span class="string">"Formated time is HH:MM:SS\n"</span>);</div><div class="line"><span class="keyword">printf</span>(<span class="string">"%02d:%02d:%02d\n"</span>, $hour, $min, $sec);</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl format_time.pl </div><div class="line">Formated <span class="keyword">time</span> is HH:MM:SS</div><div class="line"><span class="number">16</span>:<span class="number">10</span>:<span class="number">03</span></div></pre></td></tr></table></figure></p>
<h2 id="新纪元时间-Epoch-Time"><a href="#新纪元时间-Epoch-Time" class="headerlink" title="新纪元时间(Epoch Time)"></a>新纪元时间(Epoch Time)</h2><p>使用 time() 函数来获取新纪元时间，该函数返回从1970年1月1日起累计的秒数，如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat epoch_time.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$epoch_time = <span class="keyword">time</span>();</div><div class="line"><span class="keyword">print</span> <span class="string">"Accumulated seconds from 1970.1.1. is $epoch_time\n"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl epoch_time.pl </div><div class="line">Accumulated seconds from <span class="number">1970.1</span>.<span class="number">1</span>. is <span class="number">1526685082</span></div></pre></td></tr></table></figure>
<p>也可以输出一个用户想要的时间格式，如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat custom_time.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = <span class="keyword">localtime</span>();</div><div class="line"><span class="keyword">print</span> <span class="string">"Current time and date"</span>;</div><div class="line"><span class="keyword">printf</span> (<span class="string">"%d-%d-%d %d:%d:%d"</span>, $year+<span class="number">1900</span>, $mon +<span class="number">1</span>, $mday, $hour, $min, $sec);</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"\n"</span>;</div><div class="line"></div><div class="line">$epoch_time = <span class="keyword">time</span>();</div><div class="line">$epoch_time = $epoch_time - <span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>; </div><div class="line">($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst) = <span class="keyword">localtime</span>($epoch_time);</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"Yesterady time and date is: "</span>;</div><div class="line"><span class="keyword">printf</span> (<span class="string">"%d-%d-%d %d:%d:%d"</span>, $year+<span class="number">1900</span>, $mon +<span class="number">1</span>, $mday, $hour, $min, $sec);</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"\n"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl custom_time.pl </div><div class="line">Current <span class="keyword">time</span> <span class="keyword">and</span> date2018-<span class="number">5</span>-<span class="number">18</span> <span class="number">16</span>:<span class="number">12</span>:<span class="number">46</span></div><div class="line">Yesterady <span class="keyword">time</span> <span class="keyword">and</span> date is: <span class="number">2018</span>-<span class="number">5</span>-<span class="number">17</span> <span class="number">16</span>:<span class="number">12</span>:<span class="number">46</span></div></pre></td></tr></table></figure></p>
<h2 id="POSIX-函数-strftime"><a href="#POSIX-函数-strftime" class="headerlink" title="POSIX 函数 strftime()"></a>POSIX 函数 strftime()</h2><p>函数<code>strftime()</code>可以将时间格式化为我们想要的格式。<br>下表列出了一些格式化的符号，<code>*</code> 号表示想要依赖本地时间：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>符号</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>%a</td>
<td>星期几的简称（ Sun..Sat） <code>*</code></td>
<td>Thu</td>
</tr>
<tr>
<td>%A</td>
<td>星期几的全称（ Sunday..Saturday）  <code>*</code></td>
<td>Thursday</td>
</tr>
<tr>
<td>%b</td>
<td>月的简称（Jan..Dec）  <code>*</code></td>
<td>Aug</td>
</tr>
<tr>
<td>%B</td>
<td>月的全称（January..December） <code>*</code></td>
<td>August</td>
</tr>
<tr>
<td>%c</td>
<td>日期和时间 *</td>
<td>Thu Aug 23 14:55:02 2001</td>
</tr>
<tr>
<td>%C</td>
<td>年份除于100，并取整 (00-99)</td>
<td>20</td>
</tr>
<tr>
<td>%d</td>
<td>一个月的第几天 (01-31)</td>
<td>23</td>
</tr>
<tr>
<td>%D</td>
<td>日期, MM/DD/YY 相等于%m/%d/%y</td>
<td><code>08/23/01</code></td>
</tr>
<tr>
<td>%e</td>
<td>一个月的第几天，使用空格填充个位数 ( 1-31)</td>
<td>23</td>
</tr>
<tr>
<td>%F</td>
<td>YYYY-MM-DD 的简写类似于 %Y-%m-%d</td>
<td>2001/8/23</td>
</tr>
<tr>
<td>%g</td>
<td>年份的最后两位数 (00-99)</td>
<td>1</td>
</tr>
<tr>
<td>%g</td>
<td>年</td>
<td>2001</td>
</tr>
<tr>
<td>%h</td>
<td>月的简称 <code>*</code>(和%b选项相同)</td>
<td>Aug</td>
</tr>
<tr>
<td>%H</td>
<td>24 小时制 (00-23)</td>
<td>14</td>
</tr>
<tr>
<td>%I</td>
<td>12 小时制 (01-12)</td>
<td><code>02</code></td>
</tr>
<tr>
<td>%j</td>
<td>一年的第几天 (001-366)</td>
<td>235</td>
</tr>
<tr>
<td>%m</td>
<td>月 (01-12)</td>
<td><code>08</code></td>
</tr>
<tr>
<td>%M</td>
<td>分钟 (00-59)</td>
<td>55</td>
</tr>
<tr>
<td>%n</td>
<td>新行 (‘\n’)</td>
<td></td>
</tr>
<tr>
<td>%p</td>
<td>显示出AM或PM</td>
<td>PM</td>
</tr>
<tr>
<td>%r</td>
<td>时间（hh：mm：ss AM或PM），12小时 <code>*</code></td>
<td><code>02:55:02 pm</code></td>
</tr>
<tr>
<td>%R</td>
<td>24 小时 HH:MM 时间格式,相等于 %H:%M</td>
<td>14:55</td>
</tr>
<tr>
<td>%S</td>
<td>秒数 (00-61)</td>
<td><code>02</code></td>
</tr>
<tr>
<td>%t</td>
<td>水平制表符 (‘\t’)</td>
<td></td>
</tr>
<tr>
<td>%T</td>
<td>时间（24小时制）（hh:mm:ss），相等于%H:%M:%S</td>
<td>14:55</td>
</tr>
<tr>
<td>%u</td>
<td>ISO 8601 的星期几格式，星期一为1 (1-7)</td>
<td>4</td>
</tr>
<tr>
<td>%U</td>
<td>一年中的第几周，星期天为第一天(00-53)</td>
<td>33</td>
</tr>
<tr>
<td>%V</td>
<td>ISO 8601 第几周 (00-53)</td>
<td>34</td>
</tr>
<tr>
<td>%w</td>
<td>一个星期的第几天（0代表星期天） (0-6)</td>
<td>4</td>
</tr>
<tr>
<td>%W</td>
<td>一年的第几个星期，星期一为第一天 (00-53)</td>
<td>34</td>
</tr>
<tr>
<td>%x</td>
<td>显示日期的格式（mm/dd/yy） <code>*</code></td>
<td>08/23/01</td>
</tr>
<tr>
<td>%X</td>
<td>显示时间格式   <code>*</code></td>
<td>14:55:02</td>
</tr>
<tr>
<td>%y</td>
<td>年，两位数 (00-99)</td>
<td><code>01</code></td>
</tr>
<tr>
<td>%Y</td>
<td>年</td>
<td>2018</td>
</tr>
<tr>
<td>%z</td>
<td>ISO 8601与UTC的时区偏移(1 minute=1, 1  hour=100)</td>
<td><code>+100</code></td>
</tr>
<tr>
<td>%Z</td>
<td>当前时区的名称,如”中国标准时间”  <code>*</code></td>
<td>CDT</td>
</tr>
<tr>
<td>%%</td>
<td>% 符号</td>
<td>%</td>
</tr>
</tbody>
</table>
</div>
<p>使用案例如下所示：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ cat strftime.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"><span class="keyword">use</span> POSIX <span class="string">qw(strftime)</span>;</div><div class="line"></div><div class="line">$current_time = strftime <span class="string">"%Y-%m-%d %H:%M:%S"</span>, <span class="keyword">localtime</span>;</div><div class="line"><span class="keyword">printf</span> (<span class="string">"Time and Date - $current_time\n"</span>);</div><div class="line"></div><div class="line">$current_time = strftime <span class="string">"%Y-%m-%d %H:%M:%S"</span>, <span class="keyword">gmtime</span>;</div><div class="line"><span class="keyword">printf</span> <span class="string">"Time and Date - $current_time\n"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">04</span><span class="keyword">time</span>$ perl strftime.pl </div><div class="line">Time <span class="keyword">and</span> Date - <span class="number">2018</span>-<span class="number">05</span>-<span class="number">18</span> <span class="number">16</span>:<span class="number">20</span>:<span class="number">05</span></div><div class="line">Time <span class="keyword">and</span> Date - <span class="number">2018</span>-<span class="number">05</span>-<span class="number">18</span> <span class="number">23</span>:<span class="number">20</span>:<span class="number">05</span></div></pre></td></tr></table></figure>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.runoob.com/perl/perl-tutorial.html" target="_blank" rel="external">Perl教程|菜鸟教程</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2018/05/15/Perl/Perl学习笔记（4）-运算符/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/15/Perl/Perl学习笔记（4）-运算符/" itemprop="url">Perl学习笔记（4）-运算符</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-15T12:00:00+08:00">
                2018-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Perl/" itemprop="url" rel="index">
                    <span itemprop="name">Perl</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,472
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  13
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="（0）前言"><a href="#（0）前言" class="headerlink" title="（0）前言"></a>（0）前言</h2><p>运算符是一种告诉编译器执行特定的数学或逻辑操作的符号，例如<code>3+2=5</code>这个表达式中，加号（<code>+</code>）就是一个数学运算符，Perl中的运算答有以下这些：</p>
<p>①算术运算符；②比较运算符；③逻辑运算符；④赋值运算符；⑤位运算符；⑥引号运算符；⑦其他运算符。</p>
<h2 id="（1）算术运算符"><a href="#（1）算术运算符" class="headerlink" title="（1）算术运算符"></a>（1）算术运算符</h2><p>假设有两个变量，即<code>$a=10</code>，<code>$b=20</code>，那么使用下表中的算术运算符计算的结果就是第3列的结果：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>加法运算</td>
<td><code>$a + $b</code> 结果为 30</td>
</tr>
<tr>
<td>-</td>
<td>减法运算</td>
<td><code>$a - $b</code> 结果为 -10</td>
</tr>
<tr>
<td>*</td>
<td>乘法运算</td>
<td><code>$a * $b</code> 结果为 200</td>
</tr>
<tr>
<td>/</td>
<td>除法运算</td>
<td><code>$b / $a</code> 结果为 2</td>
</tr>
<tr>
<td>%</td>
<td>求余运算，整除后的余数</td>
<td><code>$b % $a</code> 结果为 0</td>
</tr>
<tr>
<td>**</td>
<td>乘幂</td>
<td><code>$a**$b</code> 结果为 10 的 20 次方</td>
</tr>
</tbody>
</table>
</div>
<p>算术运算符比较简单，使用案例就略过。</p>
<h2 id="（2）比较运算符"><a href="#（2）比较运算符" class="headerlink" title="（2）比较运算符"></a>（2）比较运算符</h2><p>比较运算符有时候常常用于条件语句的判断中，还a和b这两个变量为例说明，如下所示：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>==</td>
<td>检查两个操作数的值是否相等，如果相等则条件为 true，否则为 false。</td>
<td>(<code>$a == $b</code>) 为 false</td>
</tr>
<tr>
<td>!=</td>
<td>检查两个操作数的值是否相等，如果不相等则条件为 true，否则为 false。</td>
<td>(<code>$a != $b</code>) 为 true。</td>
</tr>
<tr>
<td>&lt;=&gt;</td>
<td>检查两个操作数的值是否相等, 如果左边的数小于右边的数返回 -1，如果相等返回 0,  如果左边的数大于右边的数返回 1 。</td>
<td>(<code>$a &lt;=&gt; $b</code>) 返回 -1。</td>
</tr>
<tr>
<td>&gt;</td>
<td>检查左操作数的值是否大于右操作数的值，如果是则条件为 true，否则为 false。</td>
<td>(<code>$a &gt; $b</code>) 返回 false。</td>
</tr>
<tr>
<td>&lt;</td>
<td>检查左操作数的值是否小于右操作数的值，如果是则条件为 true，否则返回 false。</td>
<td>(<code>$a &lt; $b</code>) 返回 true。</td>
</tr>
<tr>
<td>&gt;=</td>
<td>检查左操作数的值是否大于或等于右操作数的值，如果是则条件为 true，否则返回 false。</td>
<td>(<code>$a &gt;= $b</code>) 返回 false。</td>
</tr>
<tr>
<td>&lt;=</td>
<td>检查左操作数的值是否小于或等于右操作数的值，如果是则条件为 true，否则返回 false。</td>
<td>(<code>$a &lt;= $b</code>) 返回 true。</td>
</tr>
</tbody>
</table>
</div>
<p>如果是文字，也可以用于比较，只是需要另外一套的运算符，例如<code>$a=&quot;abc&quot;,$b=&quot;xyz&quot;</code>，我猜测Perl在比较字符串时，有可能是按照ASCII码来进行比较的，它们的运算结果如下所示：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>意义</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>lt</td>
<td>小于，即less than</td>
<td>检查左边的字符串是否小于右边的字符串，如果是返回 true，否则返回 false。</td>
<td>(<code>$a lt $b</code>) 返回 true。</td>
</tr>
<tr>
<td>gt</td>
<td>大于，即greater</td>
<td>检查左边的字符串是否大于右边的字符串，如果是返回 true，否则返回 false。</td>
<td>(<code>$a gt $b</code>) 返回 false。</td>
</tr>
<tr>
<td>le</td>
<td>小于等于，即less equal</td>
<td>检查左边的字符串是否小于或等于右边的字符串，如果是返回 true，否则返回 false。</td>
<td>(<code>$a le $b</code>) 返回 true</td>
</tr>
<tr>
<td>ge</td>
<td>大于等于，即greater equal</td>
<td>检查左边的字符串是否大于或等于右边的字符串，如果是返回 true，否则返回 false。</td>
<td>(<code>$a ge $b</code>) 返回 false。</td>
</tr>
<tr>
<td>eq</td>
<td>等于，即equal</td>
<td>检查左边的字符串是否等于右边的字符串，如果是返回 true，否则返回 false。</td>
<td>(<code>$a eq $b</code>) 返回 false。</td>
</tr>
<tr>
<td>ne</td>
<td>不等于，即no equal</td>
<td>检查左边的字符串是否不等于右边的字符串，如果是返回 true，否则返回 false。</td>
<td>(<code>$a ne $b</code>) 返回 true</td>
</tr>
<tr>
<td>cmp</td>
<td>比较，compare，大于返回1，等于返回0，小于返回-1</td>
<td>如果左边的字符串大于右边的字符串返回 1，如果相等返回 0，如果左边的字符串小于右边的字符串返回  -1。</td>
<td>(<code>$a cmp $b</code>) 返回 -1。</td>
</tr>
</tbody>
</table>
</div>
<h2 id="（3）赋值运算符"><a href="#（3）赋值运算符" class="headerlink" title="（3）赋值运算符"></a>（3）赋值运算符</h2><p>表格实例中我们设置变量$a为10，$b为20，这里的赋值其实就是一些运算符的缩写，例如<code>$c=$a+$c</code>，就可以缩写为<code>$c+=$a</code>，如下所示：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>=</code></td>
<td>简单的赋值运算符，把右边操作数的值赋给左边操作数</td>
<td><code>$c = $a + $b</code> 将把 <code>$a + $b</code>的值赋给 <code>$c</code></td>
</tr>
<tr>
<td><code>+=</code></td>
<td>加且赋值运算符，把右边操作数加上左边操作数的结果赋值给左边操作数</td>
<td><code>$c += $a</code> 相等于 <code>$c = $c + $a</code></td>
</tr>
<tr>
<td><code>-=</code></td>
<td>减且赋值运算符，把左边操作数减去右边操作数的结果赋值给左边操作数</td>
<td><code>$c -= $a</code> 相等于 <code>$c = $c - $a</code></td>
</tr>
<tr>
<td><code>*=</code></td>
<td>乘且赋值运算符，把右边操作数乘以左边操作数的结果赋值给左边操作数</td>
<td><code>$c *= $a</code> 相等于 <code>$c = $c * $a</code></td>
</tr>
<tr>
<td><code>/=</code></td>
<td>除且赋值运算符，把左边操作数除以右边操作数的结果赋值给左边操作数</td>
<td><code>$c /= $a</code> 相等于 <code>$c = $c / $a</code></td>
</tr>
<tr>
<td><code>%=</code></td>
<td>求模且赋值运算符，求两个操作数的模赋值给左边操作数</td>
<td><code>$c %= $a</code> 相等于 <code>$c = $c % a</code></td>
</tr>
<tr>
<td><code>**=</code></td>
<td>乘幂且赋值运算符，求两个操作数的乘幂赋值给左边操作数</td>
<td><code>$c **= $a</code> 相等于 <code>$c = $c ** $a</code></td>
</tr>
</tbody>
</table>
</div>
<h2 id="（4）位运算"><a href="#（4）位运算" class="headerlink" title="（4）位运算"></a>（4）位运算</h2><p>位运算符作用于位，并逐位执行操作。现在设置<code>$a = 60，$b = 13</code>，现在以二进制格式表示，它们如下所示：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;</td>
<td>如果同时存在于两个操作数中，二进制  AND 运算符复制一位到结果中。</td>
<td><code>($a &amp; $b)</code>  将得到 12，二进制为 0000 1100</td>
</tr>
<tr>
<td>\</td>
<td></td>
<td>如果存在于任一操作数中，二进制  OR 运算符复制一位到结果中。</td>
<td>`($a</td>
<td>$b)` 将得到  61 ，二进制为 0011 1101</td>
</tr>
<tr>
<td>^</td>
<td>如果存在于其中一个操作数中但不同时存在于两个操作数中，二进制异或运算符复制一位到结果中。</td>
<td><code>($a ^ $b)</code> 将得到  49，二进制为 0011 0001</td>
</tr>
<tr>
<td>~</td>
<td>二进制补码运算符是一元运算符，具有”翻转”位效果，即0变成1，1变成0。</td>
<td><code>(~$a )</code> 将得到 -61  ，二进制为 1100 0011 ，一个有符号二进制数的补码形式。</td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>二进制左移运算符。左操作数的值向左移动右操作数指定的位数。</td>
<td><code>$a &lt;&lt; 2</code>  将得到 240 ，二进制为 1111 0000</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>二进制右移运算符。左操作数的值向右移动右操作数指定的位数。</td>
<td><code>$a &gt;&gt;  2</code>将得到 15 ，二进制为 0000 1111</td>
</tr>
</tbody>
</table>
</div>
<p>对于位运算，我不是特别了解，经检索，弄清楚了，现在画图说明一下：</p>
<h3 id="4-1-AND运算（-amp-）"><a href="#4-1-AND运算（-amp-）" class="headerlink" title="(4.1) AND运算（&amp;）"></a>(4.1) AND运算（<code>&amp;</code>）</h3><p><code>&amp;</code>这个运算是AND（也叫“与”运算），两个二进制的数字，经过<code>&amp;</code>运算时，如果同一个位数上都是1，结果就是1，如果同一个位数上都是0，或者说是一个是0，一个是1，那么结果就是0，如下图所示：黄色表示同一位上都是0，蓝色表示，一个是0，一个是1，绿色则是所有位上都是1，那么<code>($a &amp; $b)</code>得到的二进制结果就是00001100，转换为十进制就是12。</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180518/HBK78AgmBi.png?imageslim" alt="mark"></p>
<h3 id="4-2-OR运算（-）"><a href="#4-2-OR运算（-）" class="headerlink" title="(4.2)OR运算（|）"></a>(4.2)<code>OR</code>运算（<code>|</code>）</h3><p><code>|</code>这个运算是OR（也可以叫“或”运算），例如a是60，二进制是00111100，b是13，二进制是00001101，那么a与b经过<code>|</code>运算，只要它们两个相同位上的数字都不为0，也就是说，至少有一个位上是1，那么新生成的这个结果同一位上就是1，结果就是00111101，转换为10进制就是61，如下图所示，在绿色的方框中，1和1的结果是1，0和1，或者是1和1的结果是1，只有0和0的结果是0。</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180518/48IfAA3jk3.png?imageslim" alt="mark"></p>
<h3 id="4-3-异或运算（-）"><a href="#4-3-异或运算（-）" class="headerlink" title="(4.3)异或运算（^）"></a>(4.3)异或运算（<code>^</code>）</h3><p>比较两个数，然后返回一个结果，当两个输入数的同一位不同时就是1，如果相同就设为0，还是以下图为例说明，例如a是60，二进制是00111100，b是13，二进制是00001101，那么a与b经过<code>^</code>运算，只要它们两个相同位上的数字相同就是0，不同就是1，结果就是00110001，转换为10进制就是49，如下图所示：<br><img src="http://ortxpw68f.bkt.clouddn.com/professional/180518/CDc3aLj4Eg.png?imageslim" alt="mark"></p>
<h3 id="4-4-按位取反（-）"><a href="#4-4-按位取反（-）" class="headerlink" title="(4.4)按位取反（~）"></a>(4.4)按位取反（~）</h3><p>取反（<code>~</code>）这个操作理解起来有点麻烦，还是以a=60为例说明一下，60对应的二进制是00111100，取反表示对一个数的每一位都取反，0变成1，1变成0，例如a是60，二进制是00111100，经过<code>~</code>操作，结果就成了11000011，它的最高位是1（最高位表示正负，0表示正数，1表示负数），取反后的最高位是1，因此是负数，也就是说，a这个变量经过取反后的结果是一个负数。</p>
<p>而负数在计算机内是以反码形式储存的（不要纠结什么是反码，总之是一种编码形式），因此60的二进制取反后的二进制是11000011，这个东西是反码，它不能直接转换为10进制，需要把反码再转换成原码的形式，反码转换为原码的公式为：反码=原码的二进制取反+1，因此原码的二进制取反为11000011-1=11000010，由于11000010的最高位是1，因此把1000010再取反（最高位的1不要动），即0111101，转换为10进制就是61，最高位是1，是负数，因此就是-61，后文的代码运算中就能够看出来：</p>
<p>因此，总结一下取反的操作：</p>
<ol>
<li>第一步：对所有位取后，1变0，0变1；</li>
<li>第二步：观察最高倍数是否为1，如果是1，则这个数是负数，负数在计算机中是以反码的形式储存的；</li>
<li>第三步：运用公式，即反码减去1，此时是原码的取反后的值；</li>
<li>第四步：最高位的1不要动，对剩余的7个数字取反，得到原码。</li>
</ol>
<h3 id="4-5-按位左移（-lt-lt-）"><a href="#4-5-按位左移（-lt-lt-）" class="headerlink" title="(4.5)按位左移（&lt;&lt;）"></a>(4.5)按位左移（<code>&lt;&lt;</code>）</h3><p>将一个数的所有位向左移动指定的位数，例如a是60，它的进制是00111100，向左移2位，就成了0011110000，位数不够，用0来补充，转换为2进制就变成了240，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180518/bJDiE12E1I.png?imageslim" alt="mark"></p>
<h3 id="4-5-按位右移（-gt-gt-）"><a href="#4-5-按位右移（-gt-gt-）" class="headerlink" title="(4.5)按位右移（&gt;&gt;）"></a>(4.5)按位右移（<code>&gt;&gt;</code>）</h3><p>将一个数的所有位向右移动指定的位数，例如a是60，它的进制是00111100，向右移2位，就成了001111，超出的部分直接舍弃，转换为2进制就变成了15，如下所示：<br><img src="http://ortxpw68f.bkt.clouddn.com/professional/180518/IKB7FHLD78.png?imageslim" alt="mark"></p>
<p>看下面的案例</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">03</span>condition$ cat bit.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"><span class="keyword">use</span> integer;</div><div class="line">$a=<span class="number">60</span>;</div><div class="line">$b=<span class="number">13</span>;</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"\$a=$a,\$b=$b\n"</span>;</div><div class="line"></div><div class="line">$c=$a&amp;$b;</div><div class="line"><span class="keyword">print</span><span class="string">"\$a&amp;\$b=$c\n"</span>;</div><div class="line"></div><div class="line">$c=$a|$b;</div><div class="line"><span class="keyword">print</span> <span class="string">"\$a|\$b=$c\n"</span>;</div><div class="line"></div><div class="line">$c=$a^$b;</div><div class="line"><span class="keyword">print</span> <span class="string">"\$a^\$b=$c\n"</span>;</div><div class="line"></div><div class="line">$c= ~$a;</div><div class="line"><span class="comment"># 在这里需要注意一下，~符号与等号之间有一个空格</span></div><div class="line"><span class="keyword">print</span> <span class="string">"~\$a=$c\n"</span>;</div><div class="line"></div><div class="line">$c=$a&lt;&lt;<span class="number">2</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"\$a&lt;&lt;2=$c\n"</span>;</div><div class="line"></div><div class="line">$c=$a&gt;&gt;<span class="number">2</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"\$a&gt;&gt;2=$c\n"</span>;</div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">03</span>condition$ perl bit.pl </div><div class="line">$a=<span class="number">60</span>,$b=<span class="number">13</span></div><div class="line">$a&amp;$b=<span class="number">12</span></div><div class="line">$a|$b=<span class="number">61</span></div><div class="line">$a^$b=<span class="number">49</span></div><div class="line">~$a=-<span class="number">61</span></div><div class="line">$a&lt;&lt;<span class="number">2</span>=<span class="number">240</span></div><div class="line">$a&gt;&gt;<span class="number">2</span>=<span class="number">15</span></div></pre></td></tr></table></figure>
<h2 id="（5）逻辑运算符"><a href="#（5）逻辑运算符" class="headerlink" title="（5）逻辑运算符"></a>（5）逻辑运算符</h2><p>Perl的逻辑运算符如下表所示，例如我们设置变量<code>$a</code>为true,<code>$b</code>为false，下表的运算结果为：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>and</td>
<td>逻辑与运算符符。如果两个操作数都为 true，则条件为 true。</td>
<td><code>($a and $b)</code> 为 false。</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>C 风格的逻辑与运算符符。如果两个操作数都为 true，则条件为 true</td>
<td><code>($a &amp;&amp; $b)</code> 为 false。</td>
</tr>
<tr>
<td>or</td>
<td>逻辑或运算符。如果两个操作数中有任意一个非零，则条件为 true。</td>
<td><code>($a or $b)</code> 为 true。</td>
</tr>
<tr>
<td>\</td>
<td>\</td>
<td></td>
<td>C 风格逻辑或运算符。如果两个操作数中有任意一个非零，则条件为 true。</td>
<td>`($a</td>
<td></td>
<td>$b)` 为 true。</td>
</tr>
<tr>
<td>not</td>
<td>逻辑非运算符。用来反转操作数的逻辑状态。如果条件为 true，则逻辑非运算符将使其为 false。</td>
<td><code>not($a and $b)</code> 为 true。</td>
</tr>
</tbody>
</table>
</div>
<h2 id="（6）引号运算"><a href="#（6）引号运算" class="headerlink" title="（6）引号运算"></a>（6）引号运算</h2><p>Perl引号运算符如下表所示：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>q{ }</td>
<td>为字符串添加单引号</td>
<td>q{abcd} 结果为 ‘abcd’</td>
</tr>
<tr>
<td>qq{ }</td>
<td>为字符串添加双引号</td>
<td>qq{abcd} 结果为 “abcd”</td>
</tr>
<tr>
<td>qx{ }</td>
<td>为字符串添加反引号</td>
<td>qx{abcd} 结果为 <code>abcd</code></td>
</tr>
</tbody>
</table>
</div>
<p>看一些案例，如下所示：<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">03</span>condition$ cat quote.pl </div><div class="line"><span class="comment">#!/usr/bin/perl</span></div><div class="line"></div><div class="line">$a=<span class="number">10</span>;</div><div class="line">$b=<span class="string">q&#123;a=$a&#125;</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"q&#123;a=\$a&#125;=$b\n"</span>;</div><div class="line"></div><div class="line">$b=<span class="string">qq&#123;a=$a&#125;</span>;</div><div class="line"><span class="keyword">print</span> <span class="string">"qq&#123;a=\$a&#125;=$b\n"</span>;</div><div class="line"></div><div class="line">$t=<span class="string">qx&#123;date&#125;</span>;</div><div class="line"><span class="comment"># 这里其实就相当于调用了Linux的外部命令，即date这个命令</span></div><div class="line"><span class="keyword">print</span> <span class="string">"qx&#123;date&#125;=$t\n"</span>;</div><div class="line"></div><div class="line">biotest@ubuntu:~<span class="regexp">/perl/</span><span class="number">03</span>condition$ perl quote.pl </div><div class="line"><span class="string">q&#123;a=$a&#125;</span>=a=$a</div><div class="line"><span class="string">qq&#123;a=$a&#125;</span>=a=<span class="number">10</span></div><div class="line"><span class="string">qx&#123;date&#125;</span>=Fri May <span class="number">18</span> <span class="number">05</span>:08:<span class="number">41</span> PDT <span class="number">2018</span></div></pre></td></tr></table></figure></p>
<h2 id="（7）其他运算符"><a href="#（7）其他运算符" class="headerlink" title="（7）其他运算符"></a>（7）其他运算符</h2><p>除了以上我们提到的运算符外，Perl 还支持以下运算符：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>点号 (.) 用于连接两个字符串。</td>
<td>如果 <code>$a=&quot;run&quot;, $b=&quot;oob&quot;</code>， <code>$a.$b</code>  结果为 “runoob”</td>
</tr>
<tr>
<td>x</td>
<td>x 运算符返回字符串重复的次数。</td>
<td><code>(&#39;-&#39; x 3)</code> 输出为 <code>---</code>。</td>
</tr>
<tr>
<td>..</td>
<td>.. 为范围运算符。</td>
<td><code>(2..5)</code> 输出结果为 <code>(2, 3, 4, 5)</code></td>
</tr>
<tr>
<td>++</td>
<td>自增运算符，整数值增加 1</td>
<td><code>$a =10, $a++</code> 输出为 11</td>
</tr>
<tr>
<td>—</td>
<td>自减运算符，整数值减少 1</td>
<td><code>$a =10, $a--</code> 输出为 9</td>
</tr>
<tr>
<td>-&gt;</td>
<td>箭号用于指定一个类的方法</td>
<td><code>$obj-&gt;$a</code> 表示对象 <code>$obj</code> 的 <code>$a</code> 方法。   </td>
</tr>
</tbody>
</table>
</div>
<h2 id="（8）运算符的优先级"><a href="#（8）运算符的优先级" class="headerlink" title="（8）运算符的优先级"></a>（8）运算符的优先级</h2><p>在Perl中，可以使用圆括号来改变执行优秀级，括号里面的运算都比括号外的优先，这与小学数学中的四则运算法则类似。但是还有一些操作很难判断优先级，例如字符串的连接和乘幂运算，下表是操作符的结合性与优先级，如下所示：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符符</th>
<th>结合性</th>
</tr>
</thead>
<tbody>
<tr>
<td>++, —</td>
<td>无</td>
</tr>
<tr>
<td>-, ~, !</td>
<td>从右到左</td>
</tr>
<tr>
<td>**</td>
<td>从右到左</td>
</tr>
<tr>
<td>=~, !~</td>
<td>从左到右</td>
</tr>
<tr>
<td>*, /, %, x</td>
<td>从左到右</td>
</tr>
<tr>
<td>+, -, .</td>
<td>从左到右</td>
</tr>
<tr>
<td>&lt;&lt;, &gt;&gt;</td>
<td>从左到右</td>
</tr>
<tr>
<td>-e, -r,</td>
<td>无</td>
</tr>
<tr>
<td>&lt;, &lt;=, &gt;, &gt;=, lt, le, gt, ge</td>
<td>从左到右</td>
</tr>
<tr>
<td>==, !=, &lt;=&gt;, eq, ne, cmp</td>
<td>从左到右</td>
</tr>
<tr>
<td>&amp;</td>
<td>从左到右</td>
</tr>
<tr>
<td>\</td>
<td>, ^</td>
<td>从左到右</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>从左到右</td>
</tr>
<tr>
<td>\</td>
<td>\</td>
<td></td>
<td>从左到右</td>
</tr>
<tr>
<td>..</td>
<td>从左到右</td>
</tr>
<tr>
<td>? and :</td>
<td>从右到左</td>
</tr>
<tr>
<td>=, +=, -=, *=,</td>
<td>从右到左</td>
</tr>
<tr>
<td>其他</td>
<td></td>
</tr>
<tr>
<td>,</td>
<td>从左到右</td>
</tr>
<tr>
<td>not</td>
<td>从左到右</td>
</tr>
<tr>
<td>and</td>
<td>从左到右</td>
</tr>
<tr>
<td>or, xor</td>
<td>从左到右</td>
</tr>
</tbody>
</table>
</div>
<p>在这个表格里，任何操作符的优先级都高于列在它下方的所有操作符，低于列在它上方的所有操作符。|</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.runoob.com/perl/perl-tutorial.html" target="_blank" rel="external">Perl教程|菜鸟教程</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">RVDSD</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">114</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">91</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RVDSD</span>

  
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共438.1k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  










  
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine@1.1.4/dist/Valine.min.js"></script>
  <script type="text/javascript">
    new Valine({
        av: AV,
        el: '#vcomments' ,
        verify: true,
        notify: true,
        app_id: '4ORLDMxXCFDLSHPJ4wSSDkkw-gzGzoHsz',
        app_key: 'HSWpCY7XlN0pGV5DCrKoC0ic',
        placeholder: 'Comment input placeholder'
    });
  </script>



  





  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
