<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="RVDSD的个人笔记本">
<meta property="og:url" content="http://rvdsd.top/page/22/index.html">
<meta property="og:site_name" content="RVDSD的个人笔记本">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RVDSD的个人笔记本">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://rvdsd.top/page/22/"/>





  <title>RVDSD的个人笔记本</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RVDSD的个人笔记本</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2017/04/06/R/文档检索与环境配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/06/R/文档检索与环境配置/" itemprop="url">R语言笔记之文档检索与环境配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-06T12:00:00+08:00">
                2017-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/" itemprop="url" rel="index">
                    <span itemprop="name">R</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,969
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  16
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="R帮助函数"><a href="#R帮助函数" class="headerlink" title="R帮助函数"></a>R帮助函数</h2><p><code>help.start()</code> ，打开帮助文档首页</p>
<p><code>help.search(&quot;foo&quot;)</code>或<code>??foo，</code>以foo为关键词搜索本地帮助文档，<code>?Startup</code>查看与R有关的启动文件信息；</p>
<p><code>example(&quot;foo&quot;)</code> ，函数foo的使用示例（引号可以省略） </p>
<p><code>RSiteSearch(&quot;foo&quot;)</code>，以 foo 为关键词，查询整个 <a href="http://search.r-project.org" target="_blank" rel="external">http://search.r-project.org</a> 网站的包，例如<code>RSiteSearch(&quot;{Bayesian regression}&quot;)</code></p>
<p><code>apropos(&quot;foo&quot;,mode=&quot;function&quot;)</code>， 列出名称中含有 foo 的所有可用函数 。<code>apropos</code>支持正则表达式，例如<code>apropos(&quot;z$&quot;)</code>表示列出所有以z为结尾的变量。而<code>apropos(&quot;[4-9]&quot;)</code>则是含有4到9之间数字的所有变量。</p>
<p><code>data()</code>，列出当前已加载包中所含的所有可用示例数据集 </p>
<p><code>vignette()</code> ，列出当前已安装包中所有可用的 vignette 文档，vignette指是一类小文章，会描述某个R函数的用法。</p>
<p><code>vignette(&quot;foo&quot;)</code>，为主题 foo 显示指定的 vignette 文档 </p>
<p><code>demo()</code>，演示某些R案例</p>
<p><code>browseVignettes()</code>，查看当前系统里的Vignettes</p>
<p>注：在搜索帮助文档的过程中，可能会遇到R软件无法给出任何搜索项的相关信息的情况，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">help(adf.test)</div><div class="line"><span class="comment">## No documentation for 'adf.test' in specified packages and libraries:</span></div><div class="line"><span class="comment">## you could try '??adf.test'</span></div></pre></td></tr></table></figure>
<p>若你确定该函数安装在计算机中，则导致这样情况的原因可能是由于包含该函数的R包未载入，你不清楚哪个R包中包含这个函数。要解决这样的问题，需要在所有已安装的R包中搜索该函数。使用错误消息中提示的方法来进行搜索（即用help.search命令），例如:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">help.search(<span class="string">"adf.test"</span>)</div><div class="line"><span class="comment">## starting httpd help server ...</span></div><div class="line"><span class="comment">##  done</span></div></pre></td></tr></table></figure>
<h3 id="vignette"><a href="#vignette" class="headerlink" title="vignette()"></a>vignette()</h3><p>有些软件包中也会包含vignette，这是一些附加的文档，例如简介、教程或者开发文档等。这些vignette都会在安装软件包时，作为软件包的一部分安装到计算机中。vignette显示在软件包的帮助页面底部。可以通过vignette命令查看计算机中包含的所有软件包的附加文档列表，也可以通过在vignette命令中指定某一软件包的名称，查看特定软件包所附带的vignette?，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vignette(package=<span class="string">"ggplot2"</span>)</div></pre></td></tr></table></figure>
<p>每个vignette都对应一特定的名称，因此可以通过以下命令进行查看:vignette(“vignettename”) 。</p>
<h2 id="某看某个函数的文档"><a href="#某看某个函数的文档" class="headerlink" title="某看某个函数的文档"></a>某看某个函数的文档</h2><p>用法：help(函数名)或<code>?函数名</code></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">help(mean)</div></pre></td></tr></table></figure>
<p>或者使用args函数快速获取函数的参数。例如，args(functionname) </p>
<p>或者用example函数查看函数的使用示例。例如example(functionname) </p>
<h2 id="查看某个包的文档"><a href="#查看某个包的文档" class="headerlink" title="查看某个包的文档"></a>查看某个包的文档</h2><p>用法：help(package=”包的名称”)</p>
<p>需要与这区别的是，查看一个函数的帮助命令是help(函数名)，如果要查看一个包的帮助，操作与函数有所不同，需要加上package=，如下所示： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">help(mean) <span class="comment"># 查看函数mean的帮助文档</span></div><div class="line">help(package=<span class="string">"ggplot2"</span>) <span class="comment"># 查看包ggplot2的帮助文档</span></div></pre></td></tr></table></figure>
<h2 id="网络资源"><a href="#网络资源" class="headerlink" title="网络资源"></a>网络资源</h2><h3 id="Rseek-org"><a href="#Rseek-org" class="headerlink" title="Rseek.org"></a>Rseek.org</h3><p><a href="http://rseek.org/" target="_blank" rel="external">http://rseek.org</a></p>
<h3 id="Q-amp-A网站"><a href="#Q-amp-A网站" class="headerlink" title="Q&amp;A网站"></a>Q&amp;A网站</h3><p><a href="http://stackoverflow.com/" target="_blank" rel="external">http://stackoverflow.com</a></p>
<p>针对编程有关问题的Q&amp;A网站，例如数据结构、代码以及图表绘制等。</p>
<h3 id="有关统计的的Q-amp-A网站"><a href="#有关统计的的Q-amp-A网站" class="headerlink" title="有关统计的的Q&amp;A网站"></a>有关统计的的Q&amp;A网站</h3><p><a href="http://stats.stackexchange.com/" target="_blank" rel="external">http://stats.stackexchange.com</a> </p>
<h3 id="R官网"><a href="#R官网" class="headerlink" title="R官网"></a>R官网</h3><p><a href="http://cran.r-project.org/web/views" target="_blank" rel="external">http://cran.r-project.org/web/views</a></p>
<p>网站中的任务视图，寻找并阅读与你研究相关的内容，其中能找到链接和相关软件包的简介。</p>
<h3 id="关键词检索软件包"><a href="#关键词检索软件包" class="headerlink" title="关键词检索软件包"></a>关键词检索软件包</h3><p>通过关键字检索合适的软件包</p>
<p><a href="http://crantastic.org/" target="_blank" rel="external">http://crantastic.org</a></p>
<h3 id="sos"><a href="#sos" class="headerlink" title="sos"></a>sos</h3><p>提供查询R包的其他方式：</p>
<p><a href="http://cran.r-project.org/web/packages/sos/vignettes/sos.pdf" target="_blank" rel="external">http://cran.r-project.org/web/packages/sos/vignettes/sos.pdf</a></p>
<h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><h3 id="历史命令保留"><a href="#历史命令保留" class="headerlink" title="历史命令保留"></a>历史命令保留</h3><p>默认情况下，R会将一次对话中所有的命令都记录下来，方便随时重用，如果要将历史记录保存下来，可以使用<code>savehistory()</code>这个函数。默认情况下，R会当历史记录保存在当前工作目录下一个名为<code>.Rhistory</code>的文件中。</p>
<p>如果要将历史记录保存在其他文件，可以使用<code>file</code>参数，即<code>savehistory(file=&quot;TestHistory&quot;)</code>，扩展名对此文件并无影响。</p>
<p>如果要再次载入这个历史记录，使用可以<code>loadhistory()</code>命令，即<code>loadhistory(&quot;TestHistory&quot;)</code>。</p>
<h3 id="查看R当前的版本"><a href="#查看R当前的版本" class="headerlink" title="查看R当前的版本"></a>查看R当前的版本</h3><p>使用<code>R.version()</code>命令可以返回当前运行R的版本信息，包括运行平台本身的信息，比较丰富，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">&gt; R.Version()</div><div class="line">$platform</div><div class="line">[<span class="number">1</span>] <span class="string">"x86_64-w64-mingw32"</span></div><div class="line"></div><div class="line">$arch</div><div class="line">[<span class="number">1</span>] <span class="string">"x86_64"</span></div><div class="line"></div><div class="line">$os</div><div class="line">[<span class="number">1</span>] <span class="string">"mingw32"</span></div><div class="line"></div><div class="line">$system</div><div class="line">[<span class="number">1</span>] <span class="string">"x86_64, mingw32"</span></div><div class="line"></div><div class="line">$status</div><div class="line">[<span class="number">1</span>] <span class="string">""</span></div><div class="line"></div><div class="line">$major</div><div class="line">[<span class="number">1</span>] <span class="string">"3"</span></div><div class="line"></div><div class="line">$minor</div><div class="line">[<span class="number">1</span>] <span class="string">"5.2"</span></div><div class="line"></div><div class="line">$year</div><div class="line">[<span class="number">1</span>] <span class="string">"2018"</span></div><div class="line"></div><div class="line">$month</div><div class="line">[<span class="number">1</span>] <span class="string">"12"</span></div><div class="line"></div><div class="line">$day</div><div class="line">[<span class="number">1</span>] <span class="string">"20"</span></div><div class="line"></div><div class="line">$`svn rev`</div><div class="line">[<span class="number">1</span>] <span class="string">"75870"</span></div><div class="line"></div><div class="line">$language</div><div class="line">[<span class="number">1</span>] <span class="string">"R"</span></div><div class="line"></div><div class="line">$version.string</div><div class="line">[<span class="number">1</span>] <span class="string">"R version 3.5.2 (2018-12-20)"</span></div><div class="line"></div><div class="line">$nickname</div><div class="line">[<span class="number">1</span>] <span class="string">"Eggshell Igloo"</span></div></pre></td></tr></table></figure>
<p>如果只是想知道R的版本号，则用<code>getRversion()</code>函数，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; getRversion()</div><div class="line">[<span class="number">1</span>] ‘<span class="number">3.5</span><span class="number">.2</span>’</div></pre></td></tr></table></figure>
<h3 id="设置R语言默认CRAN镜像"><a href="#设置R语言默认CRAN镜像" class="headerlink" title="设置R语言默认CRAN镜像"></a>设置R语言默认CRAN镜像</h3><p>R使用的CRAN镜像信息保存在一个<code>.RProfile</code>为扩展名的文件中，这个文件位于用户的home文件夹或R的启动目录中，如果要想更改CRAN镜像就需要修改这个文件。</p>
<p>查看R语言可选的镜像要用到<code>chooseCRANmirror()</code>命名，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt; chooseCRANmirror()</div><div class="line">Secure CRAN mirrors </div><div class="line"></div><div class="line"> <span class="number">1</span>: <span class="number">0</span>-Cloud [https]                      <span class="number">2</span>: Algeria [https]                   </div><div class="line"> <span class="number">3</span>: Australia (Canberra) [https]         <span class="number">4</span>: Australia (Melbourne <span class="number">1</span>) [https]   </div><div class="line"> <span class="number">5</span>: Australia (Melbourne <span class="number">2</span>) [https]      <span class="number">6</span>: Australia (Perth) [https]         </div><div class="line"> <span class="number">7</span>: Austria [https]                      <span class="number">8</span>: Belgium (Ghent) [https]           </div><div class="line"> <span class="number">9</span>: Brazil (PR) [https]                 <span class="number">10</span>: Brazil (RJ) [https]      </div><div class="line"><span class="keyword">...</span> <span class="keyword">...</span></div><div class="line"><span class="keyword">...</span> <span class="keyword">...</span></div><div class="line"></div><div class="line">Selection:</div></pre></td></tr></table></figure>
<p>选择19（上海的镜像）。</p>
<p>输入<code>options(&quot;repos&quot;)[[1]][1]</code>就可以查看选择后的镜像，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; options(<span class="string">"repos"</span>)[[<span class="number">1</span>]][<span class="number">1</span>]</div><div class="line">                                CRAN </div><div class="line"><span class="string">"https://mirrors.tongji.edu.cn/CRAN"</span></div></pre></td></tr></table></figure>
<p>将上面的镜像添加到<code>.RProfile</code>文件中即可 ，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">options(repos=<span class="string">"https://mirrors.tongji.edu.cn/CRAN"</span>)</div></pre></td></tr></table></figure>
<h2 id="R代码的运行source"><a href="#R代码的运行source" class="headerlink" title="R代码的运行source()"></a>R代码的运行<code>source()</code></h2><p>运行R代码的方式有以下几种：</p>
<p>第一，若要在控制台上执行编辑器中的某一行代码，点击想要运行的那行代码，在RStudio中，按下<code>Ctrl</code>+<code>Enter</code>或按<code>Run</code>即可。</p>
<p>第二，若要运行编辑窗口中的所有代码，那么就需要点击源代码编辑器中的任何位置，按下<code>Ctrl</code>+<code>Shift</code>+<code>Enter</code>即可，或者是按<code>Source</code>按钮。或者是在控制台中直接输入<code>source(&quot;R代码的路径+R代码文件&quot;)</code>即可，例如在D盘下保存了一个R代码文件<code>test.r</code>，那么就需要输入<code>source(&quot;D:/test.r&quot;)</code>，按回车。</p>
<p>需要注意的是：Rstudio的编辑窗口中有一个<code>Source on Save</code>复选框，这个是表示自动保存，最好选上。</p>
<h2 id="Worksapce"><a href="#Worksapce" class="headerlink" title="Worksapce"></a>Worksapce</h2><p>在一次R任务中，会导入数据，会创建变量，这些所有的内容称为Worksapce，它具体指的是，在所有会话中创建的变量，函数，载入的包。如果要查看当前Worksapce中创建的哪些变量，可以使用<code>ls()</code>命令。</p>
<h3 id="保存Workspace命令save-image"><a href="#保存Workspace命令save-image" class="headerlink" title="保存Workspace命令save.image()"></a>保存Workspace命令save.image()</h3><p>如果想要保存整个Worksapce，要用到<code>save.image()</code>命令，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">setwd(<span class="string">"D:/"</span>)</div><div class="line">test1 &lt;- c(<span class="number">1</span>:<span class="number">4</span>)</div><div class="line">test2 &lt;- rep(<span class="number">1</span>:<span class="number">3</span>, <span class="number">4</span>)</div><div class="line">save.image(file=<span class="string">"test.Rdata"</span>)</div></pre></td></tr></table></figure>
<p>现在就在D盘下保存了一个名为<code>test.Rdata</code>的文件，现在关闭Rstudio。去D盘下，再打开<code>test</code>文件，发现原来的变量<code>test1</code>和<code>test2</code>都还在，跟原来的一样。</p>
<h2 id="Rda文件"><a href="#Rda文件" class="headerlink" title="Rda文件"></a>Rda文件</h2><p>Rda的全称是rdata，保存的是变量名与相应的多个变量，看以下代码：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">setwd(<span class="string">"D:/"</span>)</div><div class="line">x &lt;- c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</div><div class="line">y &lt;- c(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</div><div class="line">save(x,file=<span class="string">"x.rda"</span>)</div></pre></td></tr></table></figure>
<p>现在就在D盘保存了一个<code>x.rda</code>文件。当要载入这个文件时，要使用<code>load()</code>命令，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rm(list=ls())</div><div class="line">load(<span class="string">"D:/x.rda"</span>)</div><div class="line">x</div></pre></td></tr></table></figure>
<h2 id="save-与save-image-函数使用"><a href="#save-与save-image-函数使用" class="headerlink" title="save()与save.image()函数使用"></a><code>save()</code>与<code>save.image()</code>函数使用</h2><p>在R中如果要保存某个变量或工作环境需要用到<code>save()</code>和<code>save.iamge()</code>命令，它们的用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Usage</div><div class="line">save(<span class="keyword">...</span>, list = character(),</div><div class="line">     file = <span class="keyword">stop</span>(<span class="string">"'file' must be specified"</span>),</div><div class="line">     ascii = <span class="literal">FALSE</span>, version = <span class="literal">NULL</span>, envir = parent.frame(),</div><div class="line">     compress = isTRUE(!ascii), compression_level,</div><div class="line">     eval.promises = <span class="literal">TRUE</span>, precheck = <span class="literal">TRUE</span>)</div><div class="line"></div><div class="line">save.image(file = <span class="string">".RData"</span>, version = <span class="literal">NULL</span>, ascii = <span class="literal">FALSE</span>,</div><div class="line">           compress = !ascii, safe = <span class="literal">TRUE</span>)</div></pre></td></tr></table></figure>
<p>其中参数含义如下所示：</p>
<ul>
<li>list:一个包含要保存的对象名称的字符向量。</li>
<li>file:连接或保存数据的文件的名称。必须是保存的文件名。</li>
<li>ascii: ASCII码，默认FALSE。</li>
<li>envir: 寻找要保存的对象的环境。</li>
<li>compress:逻辑或字符串指定是否保存到指定文件是使用压缩。TRUE对应于gzip压缩，而字符串“gzip”、“bzip2”或“xz”指定压缩的类型。当文件是连接和工作空间格式版本时忽略。</li>
<li>save.image()只是“保存我当前工作空间”的捷径。</li>
</ul>
<p><code>save()</code>与<code>save.image()</code>函数的简单区别就在前者只保存一个变量（也可以保存多个），而后者可以一次保存所有的变量。</p>
<h2 id="ls-查看当前对象"><a href="#ls-查看当前对象" class="headerlink" title="ls()查看当前对象"></a>ls()查看当前对象</h2><p>例如ls()可以查看当前环境中的所有对象，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&gt; a = <span class="number">1</span>:<span class="number">4</span></div><div class="line">&gt; b = c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"C"</span>)</div><div class="line">&gt; ls()</div><div class="line">[<span class="number">1</span>] <span class="string">"a"</span> <span class="string">"b"</span>    </div><div class="line">&gt; ls(pattern = <span class="string">"^is"</span>,baseenv()) <span class="comment"># 列出base包中所有的以is开头的函数</span></div><div class="line"><span class="comment"># baseenv()表示返回base包中所有的环境</span></div><div class="line"> [<span class="number">1</span>] <span class="string">"is.array"</span>                <span class="string">"is.atomic"</span>               <span class="string">"is.call"</span>                </div><div class="line"> [<span class="number">4</span>] <span class="string">"is.character"</span>            <span class="string">"is.complex"</span>              <span class="string">"is.data.frame"</span>          </div><div class="line"> [<span class="number">7</span>] <span class="string">"is.double"</span>               <span class="string">"is.element"</span>              <span class="string">"is.environment"</span>         </div><div class="line">[<span class="number">10</span>] <span class="string">"is.expression"</span>           <span class="string">"is.factor"</span>               <span class="string">"is.finite"</span>              </div><div class="line">[<span class="number">13</span>] <span class="string">"is.function"</span>             <span class="string">"is.infinite"</span>             <span class="string">"is.integer"</span>             </div><div class="line">[<span class="number">16</span>] <span class="string">"is.language"</span>             <span class="string">"is.list"</span>                 <span class="string">"is.loaded"</span>              </div><div class="line">[<span class="number">19</span>] <span class="string">"is.logical"</span>              <span class="string">"is.matrix"</span>               <span class="string">"is.na"</span>                  </div><div class="line">[<span class="number">22</span>] <span class="string">"is.na.data.frame"</span>        <span class="string">"is.na.numeric_version"</span>   <span class="string">"is.na.POSIXlt"</span>          </div><div class="line">[<span class="number">25</span>] <span class="string">"is.na&lt;-"</span>                 <span class="string">"is.na&lt;-.default"</span>         <span class="string">"is.na&lt;-.factor"</span>         </div><div class="line">[<span class="number">28</span>] <span class="string">"is.na&lt;-.numeric_version"</span> <span class="string">"is.name"</span>                 <span class="string">"is.nan"</span>                 </div><div class="line">[<span class="number">31</span>] <span class="string">"is.null"</span>                 <span class="string">"is.numeric"</span>              <span class="string">"is.numeric.Date"</span>        </div><div class="line">[<span class="number">34</span>] <span class="string">"is.numeric.difftime"</span>     <span class="string">"is.numeric.POSIXt"</span>       <span class="string">"is.numeric_version"</span>     </div><div class="line">[<span class="number">37</span>] <span class="string">"is.object"</span>               <span class="string">"is.ordered"</span>              <span class="string">"is.package_version"</span>     </div><div class="line">[<span class="number">40</span>] <span class="string">"is.pairlist"</span>             <span class="string">"is.primitive"</span>            <span class="string">"is.qr"</span>                  </div><div class="line">[<span class="number">43</span>] <span class="string">"is.R"</span>                    <span class="string">"is.raw"</span>                  <span class="string">"is.recursive"</span>           </div><div class="line">[<span class="number">46</span>] <span class="string">"is.single"</span>               <span class="string">"is.symbol"</span>               <span class="string">"is.table"</span>               </div><div class="line">[<span class="number">49</span>] <span class="string">"is.unsorted"</span>             <span class="string">"is.vector"</span>               <span class="string">"isatty"</span>                 </div><div class="line">[<span class="number">52</span>] <span class="string">"isBaseNamespace"</span>         <span class="string">"isdebugged"</span>              <span class="string">"isFALSE"</span>                </div><div class="line">[<span class="number">55</span>] <span class="string">"isIncomplete"</span>            <span class="string">"isNamespace"</span>             <span class="string">"isNamespaceLoaded"</span>      </div><div class="line">[<span class="number">58</span>] <span class="string">"isOpen"</span>                  <span class="string">"isRestart"</span>               <span class="string">"isS4"</span>                   </div><div class="line">[<span class="number">61</span>] <span class="string">"isSeekable"</span>              <span class="string">"isSymmetric"</span>             <span class="string">"isSymmetric.matrix"</span>     </div><div class="line">[<span class="number">64</span>] <span class="string">"isTRUE"</span></div></pre></td></tr></table></figure>
<h3 id="ls-str-查看对象的类型"><a href="#ls-str-查看对象的类型" class="headerlink" title="ls.str()查看对象的类型"></a><code>ls.str()</code>查看对象的类型</h3><p>使用<code>ls.str()</code>命令可以查看变量的结构，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; ls.str()</div><div class="line">a :  int [<span class="number">1</span>:<span class="number">4</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></div><div class="line">b :  chr [<span class="number">1</span>:<span class="number">3</span>] <span class="string">"a"</span> <span class="string">"b"</span> <span class="string">"C"</span></div></pre></td></tr></table></figure>
<p>类似的函数还有<code>browseEnv()</code>，只是它是以HTML格式输出的，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">browseEnv()</div></pre></td></tr></table></figure>
<p><img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190704215727.png" alt=""></p>
<h2 id="工作空间管理"><a href="#工作空间管理" class="headerlink" title="工作空间管理"></a>工作空间管理</h2><p>如果把R对象的运行方式比较为游戏规则，那么工作空间就可以看作游戏场地。如果要玩好游戏，你不仅需要熟悉 规则，也要熟悉场地，这里的规则就是指R语言的各种语法，这里的场地就是R语言的运行工作空间。</p>
<h3 id="R语言的工作目录"><a href="#R语言的工作目录" class="headerlink" title="R语言的工作目录"></a>R语言的工作目录</h3><p>当R开始运行时，它总是运行在某一个目录下的，这个目录就是R会话的工作目录，多数情况话，使用的就是绝对路径，例如<code>C:\test</code>这种工作，或者是使用相对路径，例如<code>\test</code>这样的。</p>
<p>在R中使用<code>getwd()</code>可以获取当前R的工作目录，使用<code>setwd()</code>是设置工作目录。</p>
<h3 id="创建R项目"><a href="#创建R项目" class="headerlink" title="创建R项目"></a>创建R项目</h3><p>在Rstudio中要创建一个新项目就是使用<code>File|New Project</code>这个选项，具体的可以看Rstudio的实际操作。一旦创建了这个项目，就会在目录中创建一个扩展名为<code>.Rproj</code>文件。这个文件中储存了一些R的设计，一旦打开这个文件，这些设置就会启动，工作目录也将被设计为项目文件所在的位置。</p>
<p>假设我们在Rstudio中创建了一个R项目，此时就会在设置的目录中创建了一个<code>.Rproj</code>文件，这个项目就包括R脚本，数据文件，文本文件，图表等。</p>
<h3 id="检查工作环境"><a href="#检查工作环境" class="headerlink" title="检查工作环境"></a>检查工作环境</h3><p>在R中，每个代码语句都是在指定环境中运行的，这个环境就是符号和其绑定物的集合，当我们当一个值赋给一个变量时，调用一个函数，或者对应一个函数名，R就会在当前的环境中寻找这个变量。如果在Rstudio的控制台中输入命令，它们会在全局环境中运行。例如当我们在Rstudio中开始一个新的R对话时，就是在一个空的全局环境中开始工作，这个空的全局环境就是没有定义任何变量的全局变量。</p>
<p>使用<code>objects()</code>这个命令就可以查看当前工作环境中的变量，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">x &lt;- c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) </div><div class="line">y &lt;- c(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>) </div><div class="line">z &lt;- list(m = <span class="number">1.5</span>, n = c(<span class="string">"x"</span>, <span class="string">"y"</span>, <span class="string">"z"</span>)) </div><div class="line">objects()</div><div class="line">ls()</div><div class="line">ls.str()</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&gt; x &lt;- c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) </div><div class="line">&gt; y &lt;- c(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>) </div><div class="line">&gt; z &lt;- list(m = <span class="number">1.5</span>, n = c(<span class="string">"x"</span>, <span class="string">"y"</span>, <span class="string">"z"</span>)) </div><div class="line">&gt; objects()</div><div class="line">[<span class="number">1</span>] <span class="string">"x"</span> <span class="string">"y"</span> <span class="string">"z"</span></div><div class="line">&gt; ls()</div><div class="line">[<span class="number">1</span>] <span class="string">"x"</span> <span class="string">"y"</span> <span class="string">"z"</span></div><div class="line">&gt; ls.str()</div><div class="line">x :  num [<span class="number">1</span>:<span class="number">3</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></div><div class="line">y :  chr [<span class="number">1</span>:<span class="number">3</span>] <span class="string">"a"</span> <span class="string">"b"</span> <span class="string">"c"</span></div><div class="line">z : List of <span class="number">2</span></div><div class="line"> $ m: num <span class="number">1.5</span></div><div class="line"> $ n: chr [<span class="number">1</span>:<span class="number">3</span>] <span class="string">"x"</span> <span class="string">"y"</span> <span class="string">"z"</span></div></pre></td></tr></table></figure>
<p>从上面结果可以看出来，这个工作空间中有三个变量，另外，使用<code>ls()</code>与<code>objects()</code>的目的是一样的，但是<code>ls()</code>用的更多。使用<code>ls.str()</code>可以查看所有的变量的数据类型，此时也可以查看特定类型的，例如<code>ls.str(mode = &quot;list&quot;)</code>就可以列出列表类型的变量，此命令还支持正则表达式，使用<code>ls.str(patten = &quot;^\\w$&quot;, mode = &quot;list&quot;)</code>就列出匹配了所有字符串的list变量。</p>
<h3 id="修改全局选项"><a href="#修改全局选项" class="headerlink" title="修改全局选项"></a>修改全局选项</h3><p>R语言中能够查看所有选项的值，例如<code>getOption()</code>就可以查看，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; getOption(<span class="string">"digits"</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">7</span></div></pre></td></tr></table></figure>
<p>在查看某个参数时，要加上引号，从上面就可以知道，R中默认的数值是7位，使用<code>options()</code>可以改变显示位数，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="number">123.4567891011121314145</span></div><div class="line">[<span class="number">1</span>] <span class="number">123.4568</span></div><div class="line">&gt; options(digits = <span class="number">2</span>)</div><div class="line">&gt; <span class="number">123.4567891011121314145</span></div><div class="line">[<span class="number">1</span>] <span class="number">123</span></div><div class="line">&gt; options(digits = <span class="number">4</span>)</div><div class="line">&gt; <span class="number">123.4567891011121314145</span></div><div class="line">[<span class="number">1</span>] <span class="number">123.5</span></div></pre></td></tr></table></figure>
<h2 id="查看R程序运行时间"><a href="#查看R程序运行时间" class="headerlink" title="查看R程序运行时间"></a>查看R程序运行时间</h2><h3 id="proc-time-查看用户时间"><a href="#proc-time-查看用户时间" class="headerlink" title="proc.time()查看用户时间"></a><code>proc.time()</code>查看用户时间</h3><p>R中的<code>proc.time()</code>函数可以查看程序运行时，其实<code>proc</code>就是程序<code>procedure</code>的缩写，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; proc.time()</div><div class="line"> 用户  系统  流逝 </div><div class="line"> <span class="number">0.32</span>  <span class="number">0.73</span> <span class="number">26.81</span></div></pre></td></tr></table></figure>
<p>由于系统是中文的，R中显示的是中文，其中用户(user)表示：R执行用户指标的CPU运行时间；系统(system)是指：系统所需要的时间，流逝(elapsed)是指R打开到现在总共运行的时间。</p>
<h3 id="system-time-查看程序运行时间"><a href="#system-time-查看程序运行时间" class="headerlink" title="system.time()查看程序运行时间"></a><code>system.time()</code>查看程序运行时间</h3><p>使用<code>system.time()</code>函数可以查看R程序的运行时间，其语法是<code>system.time(expr,gcFirst = TRUE)</code>。</p>
<p>其中<code>expr</code>是需要运行的表达式，<code>gcFirst</code>是逻辑参数，<code>system.time()</code>这个函数实际上是调用了2次<code>proc.time()</code>函数，在程序运行前调用一次，在程序运行结束后又调用一次，然后计算这两次的时间差，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">system.time(<span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">1000</span>) mad(runif(<span class="number">1000</span>)))</div><div class="line">ptm &lt;- proc.time() <span class="comment">#将proc.time()的返回值保存到ptm对象里</span></div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">1000</span>) mad(runif(<span class="number">1000</span>))</div><div class="line">proc.time() - ptm</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; system.time(<span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">1000</span>) mad(runif(<span class="number">1000</span>)))</div><div class="line">用户 系统 流逝 </div><div class="line"><span class="number">0.17</span> <span class="number">0.00</span> <span class="number">0.17</span> </div><div class="line">&gt; ptm &lt;- proc.time() <span class="comment">#将proc.time()的返回值保存到ptm对象里</span></div><div class="line">&gt; <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">1000</span>) mad(runif(<span class="number">1000</span>))</div><div class="line">&gt; proc.time() - ptm</div><div class="line">用户 系统 流逝 </div><div class="line"><span class="number">0.15</span> <span class="number">0.00</span> <span class="number">0.16</span></div></pre></td></tr></table></figure>
<p>再来看一个案例：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ptm &lt;- proc.time()</div><div class="line">x &lt;- rnorm(<span class="number">100000</span>)</div><div class="line">y &lt;- rnomr(<span class="number">100000</span>)</div><div class="line">z &lt;- c()</div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">100000</span>)&#123;</div><div class="line">  z &lt;- c(z, x[i] + y[i])</div><div class="line">&#125;</div><div class="line">proc.time() - ptm</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt; ptm &lt;- proc.time()</div><div class="line">&gt; x &lt;- rnorm(<span class="number">100000</span>)</div><div class="line">&gt; y &lt;- rnomr(<span class="number">100000</span>)</div><div class="line">Error <span class="keyword">in</span> rnomr(<span class="number">1e+05</span>) : could not find <span class="keyword">function</span> <span class="string">"rnomr"</span></div><div class="line">&gt; z &lt;- c()</div><div class="line">&gt; <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">100000</span>)&#123;</div><div class="line">+   z &lt;- c(z, x[i] + y[i])</div><div class="line">+ &#125;</div><div class="line">&gt; proc.time() - ptm</div><div class="line"> 用户  系统  流逝 </div><div class="line"><span class="number">14.42</span>  <span class="number">1.05</span> <span class="number">15.68</span></div></pre></td></tr></table></figure>
<p>从上面结果我们可以发现，这段程序运行的时间为：15.68秒，这是因为在R中，使用<code>for</code>循环非常没有效率，最好不要用for循环。在上面的这个案例中，程序每次都增加一个元素z向量里，这样总共增加了100000次，如果我们已经知道了z的长度，首先给定z的长度，就可以提高运行效率，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ptm &lt;- proc.time()</div><div class="line">x &lt;- rnorm(<span class="number">100000</span>)</div><div class="line">y &lt;- rnomr(<span class="number">100000</span>)</div><div class="line">z &lt;- rep(<span class="literal">NA</span>, <span class="number">100000</span>)</div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">100000</span>)&#123;</div><div class="line">  z[i] &lt;- x[i] + y[i]</div><div class="line">&#125;</div><div class="line">proc.time() - ptm</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; proc.time() - ptm</div><div class="line">用户 系统 流逝 </div><div class="line"><span class="number">0.19</span> <span class="number">0.00</span> <span class="number">0.19</span></div></pre></td></tr></table></figure>
<p>用了0.19秒。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol>
<li><a href="https://www.cnblogs.com/cloudtj/articles/7192452.html" target="_blank" rel="external">R语言-默认镜像设置</a></li>
<li>R语言轻松入门与提高 [法]Andrie de Vries ,[比利时]Joris Mey</li>
<li><a href="https://www.jianshu.com/p/6d701d789ab2" target="_blank" rel="external">R语言_save()函数用法</a></li>
<li>学习R[美]Richard，Cotton著，刘军译</li>
<li>R语言编程指南.任坤 著，王婷，赵孟韬，王泽贤 译</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2017/04/05/R/数据类型5-数组/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/05/R/数据类型5-数组/" itemprop="url">R语言笔记之数据类型5-数组</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-05T12:00:00+08:00">
                2017-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/" itemprop="url" rel="index">
                    <span itemprop="name">R</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  827
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="什么是数组"><a href="#什么是数组" class="headerlink" title="什么是数组"></a>什么是数组</h2><p>数组：一维数据是向量，二维数据是矩阵，数组是向量和矩阵的直接推广，是由三维或三维以上的数据构成的。 </p>
<h2 id="构建数组"><a href="#构建数组" class="headerlink" title="构建数组"></a>构建数组</h2><p>数组函数是<code>array(),</code>语法是：<code>array(dadta, dim)</code>，其中<code>data</code>必须是同一类型的数据，<code>dim</code>是各维的长度组成的向量。函数<code>rowSums</code>, <code>colSums</code>, <code>rowMeans</code>, <code>colMeans</code>分别可以计算行总和，行均值，列总和，列均值，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">a&lt;-array(rep(<span class="number">1</span>:<span class="number">3</span>,each=<span class="number">3</span>),dim=c(<span class="number">3</span>,<span class="number">3</span>))</div><div class="line">a</div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]1    2    3</span></div><div class="line"><span class="comment">## [2,]1    2    3</span></div><div class="line"><span class="comment">## [3,]1    2    3</span></div><div class="line"></div><div class="line">rowSums(a)</div><div class="line"><span class="comment">## [1] 6 6 6</span></div><div class="line"></div><div class="line">colSums(a)</div><div class="line"><span class="comment">## [1] 3 6 9</span></div><div class="line"></div><div class="line">table(a)</div><div class="line"><span class="comment">## a</span></div><div class="line"><span class="comment">## 1 2 3 </span></div><div class="line"><span class="comment">## 3 3 3</span></div></pre></td></tr></table></figure>
<h2 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">colSums (x, na.rm = <span class="literal">FALSE</span>, dims = <span class="number">1</span>) rowSums (x, na.rm = <span class="literal">FALSE</span>, dims = <span class="number">1</span>) colMeans(x, na.rm = <span class="literal">FALSE</span>, dims = <span class="number">1</span>) rowMeans(x, na.rm = <span class="literal">FALSE</span>, dims = <span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>其中dims为整数，表示哪个或哪些维数被看做行或列，对于row统计函数，dims+1及以后的维度被看做行，对于col函数，dims及以前的维度（1:dims）被看做列： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">b &lt;- array(rep(<span class="number">1</span>:<span class="number">3</span>, each=<span class="number">9</span>), dim=c(<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>));b</div><div class="line"></div><div class="line"><span class="comment">## , , 1</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]1    1    1</span></div><div class="line"><span class="comment">## [2,]1    1    1</span></div><div class="line"><span class="comment">## [3,]1    1    1</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## , , 2</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]2    2    2</span></div><div class="line"><span class="comment">## [2,]2    2    2</span></div><div class="line"><span class="comment">## [3,]2    2    2</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## , , 3</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]3    3    3</span></div><div class="line"><span class="comment">## [2,]3    3    3</span></div><div class="line"><span class="comment">## [3,]3    3    3</span></div><div class="line"></div><div class="line">rowSums(b)</div><div class="line"><span class="comment">## [1] 18 18 18</span></div><div class="line"></div><div class="line">rowSums(b,dims=<span class="number">1</span>)</div><div class="line"><span class="comment">## [1] 18 18 18</span></div><div class="line"></div><div class="line">rowSums(b,dims=<span class="number">2</span>)</div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]6    6    6</span></div><div class="line"><span class="comment">## [2,]6    6    6</span></div><div class="line"><span class="comment">## [3,]6    6    6</span></div><div class="line"></div><div class="line">colSums(b)</div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]3    6    9</span></div><div class="line"><span class="comment">## [2,]3    6    9</span></div><div class="line"><span class="comment">## [3,]3    6    9</span></div><div class="line"></div><div class="line">colSums(b,dims=<span class="number">2</span>)</div><div class="line"><span class="comment">## [1]  9 18 27</span></div><div class="line"></div><div class="line">table(b)</div><div class="line"><span class="comment">## b</span></div><div class="line"><span class="comment">## 1 2 3 </span></div><div class="line"><span class="comment">## 9 9 9</span></div></pre></td></tr></table></figure>
<h2 id="数组命名"><a href="#数组命名" class="headerlink" title="数组命名"></a>数组命名</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">x&lt;-<span class="number">1</span>:<span class="number">3</span> <span class="comment">#建立向量x</span></div><div class="line">names(x) <span class="comment">#提取向量x的名称</span></div><div class="line"><span class="comment">## NULL</span></div><div class="line"></div><div class="line">names(x)&lt;-c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>);x<span class="comment">#将a,b,c作为x的名称</span></div><div class="line"><span class="comment">## a b c </span></div><div class="line"><span class="comment">## 1 2 3</span></div><div class="line"></div><div class="line">names(x)<span class="comment">#显示向量x的名称</span></div><div class="line"><span class="comment">## [1] "a" "b" "c"</span></div><div class="line"></div><div class="line">names(x)&lt;-<span class="literal">NULL</span>;x <span class="comment">#删除向量x的名称</span></div><div class="line"><span class="comment">## [1] 1 2 3</span></div><div class="line"></div><div class="line">x&lt;-matrix(<span class="number">1</span>:<span class="number">4</span>,<span class="number">2</span>)</div><div class="line">rownames(x)&lt;-c(<span class="string">"a"</span>,<span class="string">"b"</span>) <span class="comment"># 将行命名为a,b</span></div><div class="line">colnames(x)&lt;-c(<span class="string">"c"</span>,<span class="string">"d"</span>);x <span class="comment"># 将列命名为c,d</span></div><div class="line"><span class="comment">##   c d</span></div><div class="line"><span class="comment">## a 1 3</span></div><div class="line"><span class="comment">## b 2 4</span></div><div class="line"></div><div class="line">dimnames(x)<span class="comment">#返回包含两个向量的列表</span></div><div class="line"><span class="comment">## [[1]]</span></div><div class="line"><span class="comment">## [1] "a" "b"</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## [[2]]</span></div><div class="line"><span class="comment">## [1] "c" "d"</span></div><div class="line"></div><div class="line">a&lt;-array(<span class="number">1</span>:<span class="number">8</span>,dim=c(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>));a<span class="comment">#建立数组a,维度为2，2，2</span></div><div class="line"><span class="comment">## , , 1</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]1    3</span></div><div class="line"><span class="comment">## [2,]2    4</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## , , 2</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]5    7</span></div><div class="line"><span class="comment">## [2,]6    8</span></div><div class="line"></div><div class="line">dimnames(a)&lt;-list(c(<span class="string">"a"</span>,<span class="string">"b"</span>),c(<span class="string">"c"</span>,<span class="string">"d"</span>),c(<span class="string">"e"</span>,<span class="string">"f"</span>));a <span class="comment"># 将数组a的各组命名</span></div><div class="line"><span class="comment">## , , e</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##   c d</span></div><div class="line"><span class="comment">## a 1 3</span></div><div class="line"><span class="comment">## b 2 4</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## , , f</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##   c d</span></div><div class="line"><span class="comment">## a 5 7</span></div><div class="line"><span class="comment">## b 6 8</span></div></pre></td></tr></table></figure>
<h2 id="行列求和，平均值和频数"><a href="#行列求和，平均值和频数" class="headerlink" title="行列求和，平均值和频数"></a>行列求和，平均值和频数</h2><h3 id="简单数组"><a href="#简单数组" class="headerlink" title="简单数组"></a>简单数组</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">a &lt;- array(rep(<span class="number">1</span>:<span class="number">3</span>, each=<span class="number">3</span>), dim=c(<span class="number">3</span>,<span class="number">3</span>));a</div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]1    2    3</span></div><div class="line"><span class="comment">## [2,]1    2    3</span></div><div class="line"><span class="comment">## [3,]1    2    3</span></div><div class="line"></div><div class="line">rowSums(a) <span class="comment"># 求行的和</span></div><div class="line"><span class="comment">## [1] 6 6 6</span></div><div class="line"></div><div class="line">colSums(a) <span class="comment"># 求列的和　</span></div><div class="line"><span class="comment">## [1] 3 6 9</span></div><div class="line"></div><div class="line">table(a) <span class="comment"># 频数表</span></div><div class="line"><span class="comment">## a</span></div><div class="line"><span class="comment">## 1 2 3 </span></div><div class="line"><span class="comment">## 3 3 3</span></div></pre></td></tr></table></figure>
<h3 id="多维数组-1"><a href="#多维数组-1" class="headerlink" title="多维数组"></a>多维数组</h3><p>对于多维数组，rowSums, colSums, rowMeans, colMeans的使用稍为复杂点。它们的参数为: </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">b &lt;- array(rep(<span class="number">1</span>:<span class="number">3</span>, each=<span class="number">9</span>), dim=c(<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>));b</div><div class="line"><span class="comment">## , , 1</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]1    1    1</span></div><div class="line"><span class="comment">## [2,]1    1    1</span></div><div class="line"><span class="comment">## [3,]1    1    1</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## , , 2</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]2    2    2</span></div><div class="line"><span class="comment">## [2,]2    2    2</span></div><div class="line"><span class="comment">## [3,]2    2    2</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## , , 3</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]3    3    3</span></div><div class="line"><span class="comment">## [2,]3    3    3</span></div><div class="line"><span class="comment">## [3,]3    3    3</span></div><div class="line"></div><div class="line">rowSums(b)</div><div class="line"><span class="comment">## [1] 18 18 18</span></div><div class="line"></div><div class="line">rowSums(b,dims=<span class="number">1</span>)</div><div class="line"><span class="comment">## [1] 18 18 18</span></div><div class="line"></div><div class="line">rowSums(b,dims=<span class="number">2</span>)</div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]6    6    6</span></div><div class="line"><span class="comment">## [2,]6    6    6</span></div><div class="line"><span class="comment">## [3,]6    6    6</span></div><div class="line"></div><div class="line">colSums(b)</div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]3    6    9</span></div><div class="line"><span class="comment">## [2,]3    6    9</span></div><div class="line"><span class="comment">## [3,]3    6    9</span></div><div class="line"></div><div class="line">colSums(b,dims=<span class="number">2</span>)</div><div class="line"><span class="comment">## [1]  9 18 27</span></div><div class="line"></div><div class="line">table(b)</div><div class="line"><span class="comment">## b</span></div><div class="line"><span class="comment">## 1 2 3 </span></div><div class="line"><span class="comment">## 9 9 9</span></div><div class="line"></div><div class="line">c &lt;- sample(letters[<span class="number">1</span>:<span class="number">5</span>], <span class="number">10</span>, replace=<span class="literal">TRUE</span>)</div><div class="line">table(c)</div><div class="line"><span class="comment">## c</span></div><div class="line"><span class="comment">## a b d e </span></div><div class="line"><span class="comment">## 1 3 2 4</span></div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2017/04/05/R/数据类型6-列表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/05/R/数据类型6-列表/" itemprop="url">R语言笔记之数据类型6-列表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-05T12:00:00+08:00">
                2017-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/" itemprop="url" rel="index">
                    <span itemprop="name">R</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  179
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h1><h2 id="什么是列表"><a href="#什么是列表" class="headerlink" title="什么是列表"></a>什么是列表</h2><p>列表(list)为最复杂的数据类型，是一些对象或成分的有序集合，例如可以是向量，矩阵，数据框，或其他列表的组合。用<code>list()</code>创建：<code>mylist&lt;-list(object1,object2,...)</code>， 或命名列表：<code>mylist&lt;-list(name1=object1,name2=object2,...)</code>。</p>
<h2 id="创建列表"><a href="#创建列表" class="headerlink" title="创建列表"></a>创建列表</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"> g&lt;-<span class="string">"My First List"</span></div><div class="line">h&lt;-c(<span class="number">25</span>,<span class="number">26</span>,<span class="number">18</span>,<span class="number">39</span>)</div><div class="line">j&lt;-matrix(<span class="number">1</span>:<span class="number">10</span>,nrow=<span class="number">5</span>)</div><div class="line">k&lt;-c(<span class="string">"one"</span>,<span class="string">"two"</span>,<span class="string">"three"</span>)</div><div class="line">mylist&lt;-list(title=g,ages=h,j,k)</div><div class="line">mylist <span class="comment">#输出列表</span></div><div class="line"></div><div class="line"><span class="comment">## $title</span></div><div class="line"><span class="comment">## [1] "My First List"</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## $ages</span></div><div class="line"><span class="comment">## [1] 25 26 18 39</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## [[3]]</span></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]1    6</span></div><div class="line"><span class="comment">## [2,]2    7</span></div><div class="line"><span class="comment">## [3,]3    8</span></div><div class="line"><span class="comment">## [4,]4    9</span></div><div class="line"><span class="comment">## [5,]5   10</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## [[4]]</span></div><div class="line"><span class="comment">## [1] "one"   "two"   "three"</span></div></pre></td></tr></table></figure>
<h3 id="显示列表数据"><a href="#显示列表数据" class="headerlink" title="显示列表数据"></a>显示列表数据</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">mylist[<span class="number">1</span>]</div><div class="line"><span class="comment">## $title</span></div><div class="line"><span class="comment">## [1] "My First List"</span></div><div class="line"></div><div class="line">mylist[<span class="number">2</span>]</div><div class="line"><span class="comment">## $ages</span></div><div class="line"><span class="comment">## [1] 25 26 18 39</span></div><div class="line"></div><div class="line">mylist[[<span class="number">2</span>]]</div><div class="line"><span class="comment">## [1] 25 26 18 39</span></div><div class="line"></div><div class="line">mylist[<span class="string">"ages"</span>]</div><div class="line"><span class="comment">## $ages</span></div><div class="line"><span class="comment">## [1] 25 26 18 39</span></div></pre></td></tr></table></figure>
<h1 id=""><a href="#" class="headerlink" title=" "></a> </h1>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2017/04/04/R/数据类型4-矩阵/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/04/R/数据类型4-矩阵/" itemprop="url">R语言笔记之数据类型4-矩阵</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-04T12:00:00+08:00">
                2017-04-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/" itemprop="url" rel="index">
                    <span itemprop="name">R</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,515
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  18
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h1><h2 id="矩阵定义"><a href="#矩阵定义" class="headerlink" title="矩阵定义"></a>矩阵定义</h2><p>矩阵是一个二维数组，只是每个元素都拥有相同的模式（数值型、字符型或逻辑型）。可通过函数<code>matrix()</code>创建矩阵。一般使用格式为： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">myymatrix &lt;- matrix(vector, nrow=number_of_rows, ncol=number_of_columns, </div><div class="line">                    byrow=logical_value, dimnames=list(  </div><div class="line">                      char_vector_rownames, char_vector_colnames))</div></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>vector包含了矩阵的元素；</li>
<li>nrow和ncol用以指定行和列的维数；</li>
<li>dimnames包含了可选的、以字符型向量表示的行名和列名。</li>
<li>选项 byrow 则表明矩阵应当按行填充（ byrow=TRUE ）还是按列填充（ byrow=FALSE ），默认情况下按列填充。</li>
</ul>
<h2 id="创建矩阵"><a href="#创建矩阵" class="headerlink" title="创建矩阵"></a>创建矩阵</h2><h3 id="matrix"><a href="#matrix" class="headerlink" title="matrix()"></a>matrix()</h3><p>此函数在默认情况下是按列进行填充，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a &lt;- <span class="number">1</span>:<span class="number">12</span></div><div class="line">a </div><div class="line">matrix(a, nrow=<span class="number">4</span>, ncol=<span class="number">3</span>) <span class="comment"># 默认按列填充</span></div><div class="line">matrix(a, nrow=<span class="number">3</span>, ncol=<span class="number">3</span>, byrow=<span class="literal">T</span>) <span class="comment"># 按行填充</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt; a &lt;- <span class="number">1</span>:<span class="number">12</span></div><div class="line">&gt; a </div><div class="line"> [<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span></div><div class="line">&gt; matrix(a, nrow=<span class="number">4</span>, ncol=<span class="number">3</span>) <span class="comment"># 默认按列填充</span></div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">5</span>    <span class="number">9</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">6</span>   <span class="number">10</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span></div><div class="line">[<span class="number">4</span>,]    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span></div><div class="line">&gt; matrix(a, nrow=<span class="number">3</span>, ncol=<span class="number">3</span>, byrow=<span class="literal">T</span>) <span class="comment"># 按行填充</span></div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">4</span>    <span class="number">5</span>    <span class="number">6</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">7</span>    <span class="number">8</span>    <span class="number">9</span></div></pre></td></tr></table></figure>
<h3 id="dim"><a href="#dim" class="headerlink" title="dim()"></a>dim()</h3><p>通过dim来创建，先生成向量x，接着给向量x适当的维数，此例子中给向量的维数为5行，3列： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&gt; x &lt;- <span class="number">1</span>:<span class="number">15</span></div><div class="line">&gt; x <span class="comment"># 建立x</span></div><div class="line"> [<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span></div><div class="line">&gt; x &lt;- <span class="number">1</span>:<span class="number">15</span></div><div class="line">&gt; x <span class="comment"># 建立x</span></div><div class="line"> [<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span></div><div class="line">&gt; dim(x) <span class="comment">#查看x的维度</span></div><div class="line"><span class="literal">NULL</span></div><div class="line">&gt; dim(x) &lt;- c(<span class="number">5</span>,<span class="number">3</span>) <span class="comment"># 将向量x转化为5行3列的矩阵</span></div><div class="line">&gt; x</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">6</span>   <span class="number">11</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">7</span>   <span class="number">12</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">8</span>   <span class="number">13</span></div><div class="line">[<span class="number">4</span>,]    <span class="number">4</span>    <span class="number">9</span>   <span class="number">14</span></div><div class="line">[<span class="number">5</span>,]    <span class="number">5</span>   <span class="number">10</span>   <span class="number">15</span></div></pre></td></tr></table></figure>
<h3 id="矩阵命名"><a href="#矩阵命名" class="headerlink" title="矩阵命名"></a>矩阵命名</h3><p>用法：Dimnames(Row_name,Col_name)，给定行和列的名称,如果不需要给行或者列命名，则以NULL代替。例如：给下面的矩阵列命令：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">a&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>);a</div><div class="line"><span class="comment">## [1] 1 2 3 4 5 6</span></div><div class="line"></div><div class="line">a&lt;-matrix(a,nrow=<span class="number">2</span>,byrow=<span class="literal">T</span>,dimnames=list(c(<span class="string">'a'</span>,<span class="string">'b'</span>),c(<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>)));a</div><div class="line"><span class="comment">##   A B C</span></div><div class="line"><span class="comment">## a 1 2 3</span></div><div class="line"><span class="comment">## b 4 5 6</span></div></pre></td></tr></table></figure>
<p>用rownames与colnames实现</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">b&lt;-c(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>) <span class="comment"># 建立向量b</span></div><div class="line">b</div><div class="line"><span class="comment">## [1] 2 3 4 5 6 7</span></div><div class="line"></div><div class="line">b&lt;-matrix(b,nrow=<span class="number">2</span>) <span class="comment"># 将向量b转化为矩阵</span></div><div class="line">b</div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]2    4    6</span></div><div class="line"><span class="comment">## [2,]3    5    7</span></div><div class="line"></div><div class="line">rownames(b)&lt;-c(<span class="string">"row_1"</span>,<span class="string">"row_2"</span>) <span class="comment"># 将矩阵行命名</span></div><div class="line">colnames(b)&lt;-c(<span class="string">"col_1"</span>,<span class="string">"col_2"</span>,<span class="string">"col_3"</span>) <span class="comment"># 将矩阵的列命名</span></div><div class="line">b</div><div class="line"><span class="comment">##       col_1 col_2 col_3</span></div><div class="line"><span class="comment">## row_12     4     6</span></div><div class="line"><span class="comment">## row_23     5     7</span></div></pre></td></tr></table></figure>
<h2 id="查看矩阵"><a href="#查看矩阵" class="headerlink" title="查看矩阵"></a>查看矩阵</h2><h3 id="查看矩阵的列-行相关信息"><a href="#查看矩阵的列-行相关信息" class="headerlink" title="查看矩阵的列/行相关信息"></a>查看矩阵的列/行相关信息</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">colnames(a) <span class="comment"># 查看矩阵列名</span></div><div class="line"><span class="comment">## [1] "A" "B" "C"</span></div><div class="line"></div><div class="line">rownames(a) <span class="comment"># 查看矩阵行名</span></div><div class="line"><span class="comment">## [1] "a" "b"</span></div></pre></td></tr></table></figure>
<h3 id="查看矩阵的维度"><a href="#查看矩阵的维度" class="headerlink" title="查看矩阵的维度"></a>查看矩阵的维度</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">dim(a) <span class="comment"># 返回行与列数</span></div><div class="line"><span class="comment">## [1] 2 3</span></div><div class="line"></div><div class="line">nrow(a) <span class="comment"># 返回行数</span></div><div class="line"><span class="comment">## [1] 2</span></div><div class="line"></div><div class="line">ncol(a) <span class="comment"># 返回列数</span></div><div class="line"><span class="comment">## [1] 3</span></div></pre></td></tr></table></figure>
<h2 id="条件提取子矩阵"><a href="#条件提取子矩阵" class="headerlink" title="条件提取子矩阵"></a>条件提取子矩阵</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line">a <span class="comment"># 查看矩阵a</span></div><div class="line"></div><div class="line"><span class="comment">##   A B C</span></div><div class="line"><span class="comment">## a 1 2 3</span></div><div class="line"><span class="comment">## b 4 5 6</span></div><div class="line"></div><div class="line">a[<span class="number">2</span>,<span class="number">3</span>] <span class="comment">#取矩阵a的第2列，第3个元素</span></div><div class="line"></div><div class="line"><span class="comment">## [1] 6</span></div><div class="line"></div><div class="line"> a[,<span class="number">1</span>] <span class="comment">#取矩阵a的第1列</span></div><div class="line"></div><div class="line"><span class="comment">## a b </span></div><div class="line"><span class="comment">## 1 4</span></div><div class="line"></div><div class="line">a[<span class="number">1</span>,] <span class="comment"># 取矩阵a的第1行</span></div><div class="line"></div><div class="line"><span class="comment">## A B C </span></div><div class="line"><span class="comment">## 1 2 3</span></div><div class="line"></div><div class="line">c&lt;-a[a[,<span class="number">2</span>]&gt;<span class="number">4</span>] <span class="comment"># 取矩阵a第2行并且大于4的元素，并将其赋值给c</span></div><div class="line">c</div><div class="line"></div><div class="line"><span class="comment">## [1] 4 5 6</span></div><div class="line"></div><div class="line">x&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">8</span>)</div><div class="line">x&lt;-matrix(x,nrow=<span class="number">3</span>)</div><div class="line">x</div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]1    4    7</span></div><div class="line"><span class="comment">## [2,]2    5    8</span></div><div class="line"><span class="comment">## [3,]3    6    8</span></div><div class="line"></div><div class="line">x[,<span class="number">3</span>] <span class="comment"># 选取矩阵的第3列</span></div><div class="line"></div><div class="line"><span class="comment">## [1] 7 8 8</span></div><div class="line"></div><div class="line">x[<span class="number">3</span>,] <span class="comment"># 选取矩阵的第3行</span></div><div class="line"></div><div class="line"><span class="comment">## [1] 3 6 8</span></div><div class="line"></div><div class="line">y&lt;-x[,<span class="number">3</span>,drop=<span class="literal">FALSE</span>] <span class="comment"># 选取x矩阵的第3列，并返回一个矩阵给y</span></div><div class="line">y</div><div class="line"></div><div class="line"><span class="comment">##      [,1]</span></div><div class="line"><span class="comment">## [1,]    7</span></div><div class="line"><span class="comment">## [2,]    8</span></div><div class="line"><span class="comment">## [3,]    8</span></div><div class="line"></div><div class="line">x[,-<span class="number">1</span>] <span class="comment"># 不显示矩阵的第1列</span></div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]4    7</span></div><div class="line"><span class="comment">## [2,]5    8</span></div><div class="line"><span class="comment">## [3,]6    8</span></div><div class="line"></div><div class="line">x[-<span class="number">1</span>,] <span class="comment"># 不显示矩阵的第1行</span></div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]2    5    8</span></div><div class="line"><span class="comment">## [2,]3    6    8</span></div><div class="line"></div><div class="line">x[,-(<span class="number">1</span>:<span class="number">2</span>)] <span class="comment"># 不显示矩阵的第1，2列</span></div><div class="line"></div><div class="line"><span class="comment">## [1] 7 8 8</span></div><div class="line"></div><div class="line">z&lt;-x[,-(<span class="number">1</span>:<span class="number">2</span>),drop=<span class="literal">FALSE</span>] <span class="comment">#不显示矩阵x的第1，2列，并且返回为一矩阵y</span></div><div class="line">z</div><div class="line"></div><div class="line"><span class="comment">##      [,1]</span></div><div class="line"><span class="comment">## [1,]    7</span></div><div class="line"><span class="comment">## [2,]    8</span></div><div class="line"><span class="comment">## [3,]    8</span></div></pre></td></tr></table></figure>
<h2 id="提取矩阵的行或列"><a href="#提取矩阵的行或列" class="headerlink" title="提取矩阵的行或列"></a>提取矩阵的行或列</h2><p><code>nrow</code>与<code>ncol</code>函数： nrow与ncol函数返回行或列的某一个数字。NCOL与NROW用于向量，即把向量作为单行的矩阵处理。 用法： nrow(x) ncol(x) NCOL(x) NROW(x) 参数： x：向量，或数据框； 值：长度为1或无的整数： 类似的有dim函数，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">ma &lt;- matrix(<span class="number">1</span>:<span class="number">12</span>, <span class="number">3</span>, <span class="number">4</span>);ma <span class="comment"># 建矩阵3行4列的矩阵</span></div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2] [,3] [,4]</span></div><div class="line"><span class="comment">## [1,]1    4    710</span></div><div class="line"><span class="comment">## [2,]2    5    811</span></div><div class="line"><span class="comment">## [3,]3    6    912</span></div><div class="line"></div><div class="line">nrow(ma)   <span class="comment"># 行数为3</span></div><div class="line"></div><div class="line"><span class="comment">## [1] 3</span></div><div class="line"></div><div class="line">ncol(ma)   <span class="comment"># 列数为4</span></div><div class="line"></div><div class="line"><span class="comment">## [1] 4</span></div><div class="line"></div><div class="line">y &lt;-array(<span class="number">1</span>:<span class="number">24</span>, dim = <span class="number">2</span>:<span class="number">4</span>);y <span class="comment"># 建2行4列的数组</span></div><div class="line"></div><div class="line"><span class="comment">## , , 1</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]1    3    5</span></div><div class="line"><span class="comment">## [2,]2    4    6</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## , , 2</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]7    9   11</span></div><div class="line"><span class="comment">## [2,]8   10   12</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## , , 3</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]13   15   17</span></div><div class="line"><span class="comment">## [2,]14   16   18</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">## , , 4</span></div><div class="line"><span class="comment">## </span></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]19   21   23</span></div><div class="line"><span class="comment">## [2,]20   22   24</span></div><div class="line"></div><div class="line">ncol(y)</div><div class="line"></div><div class="line"><span class="comment">## [1] 3</span></div><div class="line"></div><div class="line">NCOL(<span class="number">1</span>:<span class="number">12</span>) <span class="comment"># NCOL把数组作为单行的矩阵处理</span></div><div class="line"></div><div class="line"><span class="comment">## [1] 1</span></div><div class="line"></div><div class="line">NROW(<span class="number">1</span>:<span class="number">12</span>) <span class="comment"># 12</span></div><div class="line"></div><div class="line"><span class="comment">## [1] 12</span></div></pre></td></tr></table></figure>
<h2 id="矩阵的运算"><a href="#矩阵的运算" class="headerlink" title="矩阵的运算"></a>矩阵的运算</h2><h3 id="矩阵相乘"><a href="#矩阵相乘" class="headerlink" title="矩阵相乘%*%"></a>矩阵相乘%*%</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">a</div><div class="line"></div><div class="line"><span class="comment">##   A B C</span></div><div class="line"><span class="comment">## a 1 2 3</span></div><div class="line"><span class="comment">## b 4 5 6</span></div><div class="line"></div><div class="line">d &lt;- c(<span class="number">1</span>:<span class="number">6</span>)</div><div class="line">d &lt;- matrix(d,nrow=<span class="number">3</span>)</div><div class="line">d</div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]1    4</span></div><div class="line"><span class="comment">## [2,]2    5</span></div><div class="line"><span class="comment">## [3,]3    6</span></div><div class="line"></div><div class="line">e&lt;-a%*%d</div><div class="line">e</div><div class="line"></div><div class="line"><span class="comment">##   [,1] [,2]</span></div><div class="line"><span class="comment">## a   14   32</span></div><div class="line"><span class="comment">## b   32   77</span></div></pre></td></tr></table></figure>
<p>只有当矩阵a的列数与矩阵b的行数相等时a×b才有意义。一个m×n的矩阵a（m,n)左乘一个n×p的矩阵b（n,p)，会得到一个m×p的矩阵c（m,p)，满足矩阵乘法满足结合律，但不满足交换律。 运算的法则： 矩阵a的第1行的3个元素(1,2,3)分别与矩阵b第1列的3个元素(1,2,3)相乘，其和为结果为e[1,1]，即e[1,1]=1×1+2×2+3×3=14； 矩阵a的第1行的3个元素(1,2,3)分别与矩阵b第2列的3个元素(4,5,6)相乘1×4+2×5+3×6=32，得到e[1,2]； 矩阵a的第2行的3个元素(4,5,6)分别与矩阵b第1列的3个元素(1,2,3)相乘4×1+5×2+6×3=32，得到e[2,1]； 矩阵a的第2行的3个元素(4,5,6)分别与矩阵b第2列的3个元素(4,5,6)相乘4×4+5×5+6×6=77，得到e[2,2]. </p>
<h3 id="矩阵合并"><a href="#矩阵合并" class="headerlink" title="矩阵合并"></a>矩阵合并</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">m1&lt;-matrix(<span class="number">1</span>,nrow=<span class="number">2</span>,ncol=<span class="number">2</span>)</div><div class="line">m1 <span class="comment"># 建立矩阵m1,2行2列，值为1</span></div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]1    1</span></div><div class="line"><span class="comment">## [2,]1    1</span></div><div class="line"></div><div class="line">m2&lt;-matrix(<span class="number">2</span>,nrow=<span class="number">2</span>,ncol=<span class="number">2</span>)</div><div class="line">m2 <span class="comment"># 建立矩阵m2,2行2列，值为2</span></div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]2    2</span></div><div class="line"><span class="comment">## [2,]2    2</span></div><div class="line"></div><div class="line">m_rbind&lt;-rbind(m1,m2);m_rbind <span class="comment"># 对两个矩阵m1,m2进行行合并，即上下合并</span></div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]1    1</span></div><div class="line"><span class="comment">## [2,]1    1</span></div><div class="line"><span class="comment">## [3,]2    2</span></div><div class="line"><span class="comment">## [4,]2    2</span></div><div class="line"></div><div class="line">m_cbind&lt;-cbind(m1,m2);m_cbind <span class="comment">#对两个矩阵m1,m2进行列合并，即左右合并</span></div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2] [,3] [,4]</span></div><div class="line"><span class="comment">## [1,]1    1    22</span></div><div class="line"><span class="comment">## [2,]1    1    22</span></div></pre></td></tr></table></figure>
<h3 id="星号表示相乘"><a href="#星号表示相乘" class="headerlink" title="星号表示相乘"></a>星号表示相乘</h3><p>把两个矩阵中每个对应的元素相乘，例子中a与b拥有相同的维度 </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">a</div><div class="line"></div><div class="line"><span class="comment">##   A B C</span></div><div class="line"><span class="comment">## a 1 2 3</span></div><div class="line"><span class="comment">## b 4 5 6</span></div><div class="line"></div><div class="line">b</div><div class="line"></div><div class="line"><span class="comment">##       col_1 col_2 col_3</span></div><div class="line"><span class="comment">## row_12     4     6</span></div><div class="line"><span class="comment">## row_23     5     7</span></div><div class="line"></div><div class="line">result&lt;-a*b <span class="comment">#将矩阵a与矩阵b相乘，并将其结果给result</span></div><div class="line">result</div><div class="line"></div><div class="line"><span class="comment">##    AB  C</span></div><div class="line"><span class="comment">## a  2  8 18</span></div><div class="line"><span class="comment">## b 12 25 42</span></div></pre></td></tr></table></figure>
<p>如果维度不同，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">a</div><div class="line"><span class="comment">##   A B C</span></div><div class="line"><span class="comment">## a 1 2 3</span></div><div class="line"><span class="comment">## b 4 5 6</span></div><div class="line">c</div><div class="line"><span class="comment">## [1] 4 5 6</span></div><div class="line">a*c <span class="comment"># a矩阵中的每一列与c的每一行相乘，循环c</span></div><div class="line"><span class="comment">##    AB  C</span></div><div class="line"><span class="comment">## a  4 12 15</span></div><div class="line"><span class="comment">## b 20 20 36</span></div></pre></td></tr></table></figure>
<h3 id="增加行与列"><a href="#增加行与列" class="headerlink" title="增加行与列"></a>增加行与列</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">f&lt;-matrix(,<span class="number">4</span>,<span class="number">2</span>) <span class="comment"># 建立4行2列的空矩阵f</span></div><div class="line">f</div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]NA   NA</span></div><div class="line"><span class="comment">## [2,]NA   NA</span></div><div class="line"><span class="comment">## [3,]NA   NA</span></div><div class="line"><span class="comment">## [4,]NA   NA</span></div><div class="line"></div><div class="line">f[c(<span class="number">1</span>,<span class="number">3</span>),]&lt;-matrix(c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)) <span class="comment">#取f的1行与3行，将向量(1,2,3,4)填充进去，默认按列填充</span></div><div class="line">f</div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]1    3</span></div><div class="line"><span class="comment">## [2,]NA   NA</span></div><div class="line"><span class="comment">## [3,]2    4</span></div><div class="line"><span class="comment">## [4,]NA   NA</span></div><div class="line"></div><div class="line">g&lt;-matrix(,<span class="number">4</span>,<span class="number">2</span>)</div><div class="line">g</div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]NA   NA</span></div><div class="line"><span class="comment">## [2,]NA   NA</span></div><div class="line"><span class="comment">## [3,]NA   NA</span></div><div class="line"><span class="comment">## [4,]NA   NA</span></div><div class="line"></div><div class="line">g[c(<span class="number">1</span>,<span class="number">3</span>),]&lt;-matrix(c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>),byrow=<span class="literal">FALSE</span>) <span class="comment"># byrow=FALSE则按行填充</span></div><div class="line">g</div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]1    3</span></div><div class="line"><span class="comment">## [2,]NA   NA</span></div><div class="line"><span class="comment">## [3,]2    4</span></div><div class="line"><span class="comment">## [4,]NA   NA</span></div></pre></td></tr></table></figure>
<h3 id="矩阵转置t"><a href="#矩阵转置t" class="headerlink" title="矩阵转置t()"></a>矩阵转置<code>t()</code></h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">f</div><div class="line"><span class="comment">##      [,1] [,2]</span></div><div class="line"><span class="comment">## [1,]1    3</span></div><div class="line"><span class="comment">## [2,]NA   NA</span></div><div class="line"><span class="comment">## [3,]2    4</span></div><div class="line"><span class="comment">## [4,]NA   NA</span></div><div class="line"></div><div class="line">h&lt;-t(f)</div><div class="line">h</div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2] [,3] [,4]</span></div><div class="line"><span class="comment">## [1,]1   NA    2NA</span></div><div class="line"><span class="comment">## [2,]3   NA    4NA</span></div></pre></td></tr></table></figure>
<h3 id="取对角元素diag"><a href="#取对角元素diag" class="headerlink" title="取对角元素diag()"></a>取对角元素<code>diag()</code></h3><p>若要取一个方阵的对角元素，对一个向量应用<code>diag()</code>函数将产生以这个向量为对角元素的对角矩阵，对一个正整数k应用<code>diag()</code>函数将产生k维单位矩阵，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">j&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>)</div><div class="line">j&lt;-matrix(j,nrow=<span class="number">3</span>)</div><div class="line">j_diag&lt;-diag(j) <span class="comment">#取对角</span></div><div class="line">j_diag</div><div class="line">diag(diag(j_diag))</div><div class="line">diag(<span class="number">3</span>)</div><div class="line"></div><div class="line">A &lt;- matrix(<span class="number">1</span>:<span class="number">16</span>,nrow=<span class="number">4</span>,ncol=<span class="number">4</span>)</div><div class="line">diag(A)</div><div class="line">diag(<span class="number">3</span>)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&gt; j_diag</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">5</span> <span class="number">9</span></div><div class="line">&gt; diag(diag(j_diag))</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">5</span> <span class="number">9</span></div><div class="line">&gt; diag(<span class="number">3</span>)</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">0</span>    <span class="number">0</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">0</span>    <span class="number">1</span>    <span class="number">0</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">0</span>    <span class="number">0</span>    <span class="number">1</span></div><div class="line"></div><div class="line">&gt; A &lt;- matrix(<span class="number">1</span>:<span class="number">16</span>,nrow=<span class="number">4</span>,ncol=<span class="number">4</span>)</div><div class="line">&gt; diag(A)</div><div class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">6</span> <span class="number">11</span> <span class="number">16</span></div><div class="line">&gt; diag(<span class="number">3</span>)</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">0</span>    <span class="number">0</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">0</span>    <span class="number">1</span>    <span class="number">0</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">0</span>    <span class="number">0</span>    <span class="number">1</span></div></pre></td></tr></table></figure>
<h3 id="求各行与列的总和与均值rowSum-，rowMeans"><a href="#求各行与列的总和与均值rowSum-，rowMeans" class="headerlink" title="求各行与列的总和与均值rowSum()，rowMeans()"></a>求各行与列的总和与均值<code>rowSum()</code>，<code>rowMeans()</code></h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">j</div><div class="line"></div><div class="line"><span class="comment">##      [,1] [,2] [,3]</span></div><div class="line"><span class="comment">## [1,]1    4    7</span></div><div class="line"><span class="comment">## [2,]2    5    8</span></div><div class="line"><span class="comment">## [3,]3    6    9</span></div><div class="line"></div><div class="line">rowSums(j) <span class="comment"># 求各行的总和</span></div><div class="line"></div><div class="line"><span class="comment">## [1] 12 15 18</span></div><div class="line"></div><div class="line">rowMeans(j) <span class="comment"># 求行的均值</span></div><div class="line"></div><div class="line"><span class="comment">## [1] 4 5 6</span></div><div class="line"></div><div class="line">colSums(j) <span class="comment">#求各列的总和</span></div><div class="line"></div><div class="line"><span class="comment">## [1]  6 15 24</span></div><div class="line"></div><div class="line">colMeans(j) <span class="comment">#求各列的均值</span></div><div class="line"></div><div class="line"><span class="comment">## [1] 2 5 8</span></div></pre></td></tr></table></figure>
<h3 id="矩阵的特征值与特征向量eigen"><a href="#矩阵的特征值与特征向量eigen" class="headerlink" title="矩阵的特征值与特征向量eigen()"></a>矩阵的特征值与特征向量<code>eigen()</code></h3><p>矩阵A的谱分解为<code>A=UΛU</code>，其中Λ是由A的特征值组成的对角矩阵，U的列为A的特征值对应的特征向量，在R中可以使用eigen()得到U和A，<code>eigen(x,symmertic, only.values=FALSE,EISPACK=FALSE)</code>，其中参数symmetric项是逻辑值，是F或T，它用于指定矩阵x是否为对称矩阵，如果不指定，系统将自动检验x是否为对称矩阵，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt; eigen(j)</div><div class="line">eigen() decomposition</div><div class="line">$values</div><div class="line">[<span class="number">1</span>]  <span class="number">1.611684e+01</span> -<span class="number">1.116844e+00</span> -<span class="number">5.700691e-16</span></div><div class="line"></div><div class="line">$vectors</div><div class="line">           [,<span class="number">1</span>]       [,<span class="number">2</span>]       [,<span class="number">3</span>]</div><div class="line">[<span class="number">1</span>,] -<span class="number">0.4645473</span> -<span class="number">0.8829060</span>  <span class="number">0.4082483</span></div><div class="line">[<span class="number">2</span>,] -<span class="number">0.5707955</span> -<span class="number">0.2395204</span> -<span class="number">0.8164966</span></div><div class="line">[<span class="number">3</span>,] -<span class="number">0.6770438</span>  <span class="number">0.4038651</span>  <span class="number">0.4082483</span></div></pre></td></tr></table></figure>
<h3 id="矩阵的求逆solve"><a href="#矩阵的求逆solve" class="headerlink" title="矩阵的求逆solve()"></a>矩阵的求逆<code>solve()</code></h3><p>矩阵求逆可用函数solve()，应用sovle(A,b)运算结果可以解线性方程组Ax=b，若b缺少，则系统默认为单位矩阵，因此可以用其进行矩阵求逆，如下所示： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">A &lt;- matrix(rnorm(<span class="number">16</span>),<span class="number">4</span>,<span class="number">4</span>);A</div><div class="line">solve(A)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt; A &lt;- matrix(rnorm(<span class="number">16</span>),<span class="number">4</span>,<span class="number">4</span>);A</div><div class="line">        [,<span class="number">1</span>]    [,<span class="number">2</span>]     [,<span class="number">3</span>]    [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,]  <span class="number">0.3981</span>  <span class="number">1.4330</span>  <span class="number">0.56972</span>  <span class="number">0.6897</span></div><div class="line">[<span class="number">2</span>,] -<span class="number">0.6120</span>  <span class="number">1.9804</span> -<span class="number">0.13505</span>  <span class="number">0.0280</span></div><div class="line">[<span class="number">3</span>,]  <span class="number">0.3411</span> -<span class="number">0.3672</span>  <span class="number">2.40162</span> -<span class="number">0.7433</span></div><div class="line">[<span class="number">4</span>,] -<span class="number">1.1294</span> -<span class="number">1.0441</span> -<span class="number">0.03924</span>  <span class="number">0.1888</span></div><div class="line">&gt; solve(A)</div><div class="line">        [,<span class="number">1</span>]    [,<span class="number">2</span>]      [,<span class="number">3</span>]    [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,] <span class="number">0.12130</span> -<span class="number">0.4308</span> -<span class="number">0.063267</span> -<span class="number">0.6283</span></div><div class="line">[<span class="number">2</span>,] <span class="number">0.04397</span>  <span class="number">0.3764</span>  <span class="number">0.007696</span> -<span class="number">0.1862</span></div><div class="line">[<span class="number">3</span>,] <span class="number">0.30921</span> -<span class="number">0.0369</span>  <span class="number">0.344768</span>  <span class="number">0.2331</span></div><div class="line">[<span class="number">4</span>,] <span class="number">1.03306</span> -<span class="number">0.5029</span> -<span class="number">0.264247</span>  <span class="number">0.5569</span></div></pre></td></tr></table></figure>
<h3 id="矩阵的特征值与特征向量eigen-1"><a href="#矩阵的特征值与特征向量eigen-1" class="headerlink" title="矩阵的特征值与特征向量eigen()"></a>矩阵的特征值与特征向量<code>eigen()</code></h3><p>矩阵A的谱分解为$A=U\Lambda U’$，其中$\Lambda$是由$A$的特征值组成的对角矩阵，$U$的列为$A$的特征值对应的特征向量，在R中可以使用<code>eigen()</code>得到$U$和$A$，此函数参数如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">eigen(x,symmetric,only.values=<span class="literal">FALSE</span>, EISPACK=<span class="literal">FALSE</span>)</div></pre></td></tr></table></figure>
<p>其中，x为矩阵，symmetric项指定矩阵x是否为对称矩阵，若不指定，系统将自动检测x是否为对称矩阵，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">A &lt;- diag(<span class="number">4</span>) +<span class="number">1</span></div><div class="line">A.e &lt;- eigen(A, symmetric=<span class="literal">T</span>)</div><div class="line">A.e</div><div class="line">A.e$vectors%*%diag(A.e$values)%*%t(A.e$vectors)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&gt; A &lt;- diag(<span class="number">4</span>) +<span class="number">1</span></div><div class="line">&gt; A.e &lt;- eigen(A, symmetric=<span class="literal">T</span>)</div><div class="line">&gt; A.e</div><div class="line">eigen() decomposition</div><div class="line">$values</div><div class="line">[<span class="number">1</span>] <span class="number">5</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span></div><div class="line"></div><div class="line">$vectors</div><div class="line">     [,<span class="number">1</span>]    [,<span class="number">2</span>]    [,<span class="number">3</span>]    [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,] -<span class="number">0.5</span>  <span class="number">0.8660</span>  <span class="number">0.0000</span>  <span class="number">0.0000</span></div><div class="line">[<span class="number">2</span>,] -<span class="number">0.5</span> -<span class="number">0.2887</span> -<span class="number">0.5774</span> -<span class="number">0.5774</span></div><div class="line">[<span class="number">3</span>,] -<span class="number">0.5</span> -<span class="number">0.2887</span> -<span class="number">0.2113</span>  <span class="number">0.7887</span></div><div class="line">[<span class="number">4</span>,] -<span class="number">0.5</span> -<span class="number">0.2887</span>  <span class="number">0.7887</span> -<span class="number">0.2113</span></div><div class="line"></div><div class="line">&gt; A.e$vectors%*%diag(A.e$values)%*%t(A.e$vectors)</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">2</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">1</span>    <span class="number">2</span>    <span class="number">1</span>    <span class="number">1</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">1</span>    <span class="number">1</span>    <span class="number">2</span>    <span class="number">1</span></div><div class="line">[<span class="number">4</span>,]    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">2</span></div></pre></td></tr></table></figure>
<h3 id="矩阵的Choleskey分解"><a href="#矩阵的Choleskey分解" class="headerlink" title="矩阵的Choleskey分解"></a>矩阵的Choleskey分解</h3><p>对于正定矩阵A，可对其进行Choleskey分解，即$A=P’P$，其中$P$为上三角矩阵，在R中可以用函数<code>chol()</code>进行Choleskey分解，如下所示： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">A &lt;- diag(<span class="number">4</span>) +<span class="number">1</span></div><div class="line">A.c &lt;-chol(A);A.c</div><div class="line">t(A.c)%*%A.c</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&gt; A &lt;- diag(<span class="number">4</span>) +<span class="number">1</span></div><div class="line">&gt; A.c &lt;-chol(A);A.c</div><div class="line">      [,<span class="number">1</span>]   [,<span class="number">2</span>]   [,<span class="number">3</span>]   [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,] <span class="number">1.414</span> <span class="number">0.7071</span> <span class="number">0.7071</span> <span class="number">0.7071</span></div><div class="line">[<span class="number">2</span>,] <span class="number">0.000</span> <span class="number">1.2247</span> <span class="number">0.4082</span> <span class="number">0.4082</span></div><div class="line">[<span class="number">3</span>,] <span class="number">0.000</span> <span class="number">0.0000</span> <span class="number">1.1547</span> <span class="number">0.2887</span></div><div class="line">[<span class="number">4</span>,] <span class="number">0.000</span> <span class="number">0.0000</span> <span class="number">0.0000</span> <span class="number">1.1180</span></div><div class="line">&gt; t(A.c)%*%A.c</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">2</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">1</span>    <span class="number">2</span>    <span class="number">1</span>    <span class="number">1</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">1</span>    <span class="number">1</span>    <span class="number">2</span>    <span class="number">1</span></div><div class="line">[<span class="number">4</span>,]    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">2</span></div></pre></td></tr></table></figure>
<h3 id="矩阵奇异值分解svd"><a href="#矩阵奇异值分解svd" class="headerlink" title="矩阵奇异值分解svd()"></a>矩阵奇异值分解<code>svd()</code></h3><p>A为$m \times n$矩阵，$rank(A)=r$，可以分解为$A=UDV‘$，其中，$U’U=V’V=I$。在R中可以使用函数<code>svd()</code>进行奇异值分解，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">A &lt;- matrix(<span class="number">1</span>:<span class="number">18</span>, <span class="number">3</span>,<span class="number">6</span>);A</div><div class="line">A.s &lt;- svd(A);A.s</div><div class="line">A.s$u%*%diag(A.s$d)%*%t(A.s$v)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&gt; A &lt;- matrix(<span class="number">1</span>:<span class="number">18</span>, <span class="number">3</span>,<span class="number">6</span>);A</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>] [,<span class="number">5</span>] [,<span class="number">6</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">4</span>    <span class="number">7</span>   <span class="number">10</span>   <span class="number">13</span>   <span class="number">16</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span>   <span class="number">11</span>   <span class="number">14</span>   <span class="number">17</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span>   <span class="number">12</span>   <span class="number">15</span>   <span class="number">18</span></div><div class="line">&gt; A.s &lt;- svd(A);A.s</div><div class="line">$d</div><div class="line">[<span class="number">1</span>] <span class="number">4.589e+01</span> <span class="number">1.641e+00</span> <span class="number">1.367e-15</span></div><div class="line"></div><div class="line">$u</div><div class="line">        [,<span class="number">1</span>]    [,<span class="number">2</span>]    [,<span class="number">3</span>]</div><div class="line">[<span class="number">1</span>,] -<span class="number">0.5290</span>  <span class="number">0.7439</span>  <span class="number">0.4082</span></div><div class="line">[<span class="number">2</span>,] -<span class="number">0.5761</span>  <span class="number">0.0384</span> -<span class="number">0.8165</span></div><div class="line">[<span class="number">3</span>,] -<span class="number">0.6231</span> -<span class="number">0.6671</span>  <span class="number">0.4082</span></div><div class="line"></div><div class="line">$v</div><div class="line">         [,<span class="number">1</span>]    [,<span class="number">2</span>]     [,<span class="number">3</span>]</div><div class="line">[<span class="number">1</span>,] -<span class="number">0.07736</span> -<span class="number">0.7196</span> -<span class="number">0.40767</span></div><div class="line">[<span class="number">2</span>,] -<span class="number">0.19033</span> -<span class="number">0.5089</span>  <span class="number">0.57456</span></div><div class="line">[<span class="number">3</span>,] -<span class="number">0.30330</span> -<span class="number">0.2983</span> -<span class="number">0.02801</span></div><div class="line">[<span class="number">4</span>,] -<span class="number">0.41627</span> -<span class="number">0.0876</span>  <span class="number">0.22266</span></div><div class="line">[<span class="number">5</span>,] -<span class="number">0.52924</span>  <span class="number">0.1231</span> -<span class="number">0.62121</span></div><div class="line">[<span class="number">6</span>,] -<span class="number">0.64221</span>  <span class="number">0.3337</span>  <span class="number">0.25966</span></div><div class="line"></div><div class="line">&gt; A.s$u%*%diag(A.s$d)%*%t(A.s$v)</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>] [,<span class="number">5</span>] [,<span class="number">6</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">4</span>    <span class="number">7</span>   <span class="number">10</span>   <span class="number">13</span>   <span class="number">16</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span>   <span class="number">11</span>   <span class="number">14</span>   <span class="number">17</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span>   <span class="number">12</span>   <span class="number">15</span>   <span class="number">18</span></div></pre></td></tr></table></figure>
<h3 id="矩阵QR分解qr"><a href="#矩阵QR分解qr" class="headerlink" title="矩阵QR分解qr()"></a>矩阵QR分解<code>qr()</code></h3><p>A为$m \times n$矩阵时可以进行QR分解，$A=QR$，其中，$Q’Q=I$，在R中可以使用<code>qr()</code>进行QR分解，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">A &lt;- matrix(<span class="number">1</span>:<span class="number">16</span>,<span class="number">4</span>,<span class="number">4</span>);A</div><div class="line">qr(A)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&gt; A &lt;- matrix(<span class="number">1</span>:<span class="number">16</span>,<span class="number">4</span>,<span class="number">4</span>);A</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">5</span>    <span class="number">9</span>   <span class="number">13</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span>   <span class="number">15</span></div><div class="line">[<span class="number">4</span>,]    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span>   <span class="number">16</span></div><div class="line">&gt; qr(A)</div><div class="line">$qr</div><div class="line">        [,<span class="number">1</span>]     [,<span class="number">2</span>]       [,<span class="number">3</span>]       [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,] -<span class="number">5.4772</span> -<span class="number">12.7802</span> -<span class="number">2.008e+01</span> -<span class="number">2.739e+01</span></div><div class="line">[<span class="number">2</span>,]  <span class="number">0.3651</span>  -<span class="number">3.2660</span> -<span class="number">6.532e+00</span> -<span class="number">9.798e+00</span></div><div class="line">[<span class="number">3</span>,]  <span class="number">0.5477</span>  -<span class="number">0.3782</span>  <span class="number">1.601e-15</span>  <span class="number">2.217e-15</span></div><div class="line">[<span class="number">4</span>,]  <span class="number">0.7303</span>  -<span class="number">0.9125</span> -<span class="number">5.547e-01</span> -<span class="number">1.478e-15</span></div><div class="line"></div><div class="line">$rank</div><div class="line">[<span class="number">1</span>] <span class="number">2</span></div><div class="line"></div><div class="line">$qraux</div><div class="line">[<span class="number">1</span>] <span class="number">1.183e+00</span> <span class="number">1.156e+00</span> <span class="number">1.832e+00</span> <span class="number">1.478e-15</span></div><div class="line"></div><div class="line">$pivot</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></div><div class="line"></div><div class="line">attr(,<span class="string">"class"</span>)</div><div class="line">[<span class="number">1</span>] <span class="string">"qr"</span></div></pre></td></tr></table></figure>
<h3 id="矩阵kronecker积kronecker"><a href="#矩阵kronecker积kronecker" class="headerlink" title="矩阵kronecker积kronecker()"></a>矩阵kronecker积<code>kronecker()</code></h3><p>A为$m \times n$矩阵,B为$h \times k$矩阵，而A与B的kronecker积为一个$nh \times mk$维矩阵，在R中，使用函数<code>kronecker()</code>来过计算kronecker积，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">A &lt;- matrix(<span class="number">1</span>:<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>);A</div><div class="line">B &lt;- matrix(rep(<span class="number">1</span>,<span class="number">4</span>),<span class="number">2</span>,<span class="number">2</span>);B</div><div class="line">kronecker(A,B)</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt; A &lt;- matrix(<span class="number">1</span>:<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>);A</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">3</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">4</span></div><div class="line">&gt; B &lt;- matrix(rep(<span class="number">1</span>,<span class="number">4</span>),<span class="number">2</span>,<span class="number">2</span>);B</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">1</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">1</span>    <span class="number">1</span></div><div class="line">&gt; kronecker(A,B)</div><div class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</div><div class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">1</span>    <span class="number">3</span>    <span class="number">3</span></div><div class="line">[<span class="number">2</span>,]    <span class="number">1</span>    <span class="number">1</span>    <span class="number">3</span>    <span class="number">3</span></div><div class="line">[<span class="number">3</span>,]    <span class="number">2</span>    <span class="number">2</span>    <span class="number">4</span>    <span class="number">4</span></div><div class="line">[<span class="number">4</span>,]    <span class="number">2</span>    <span class="number">2</span>    <span class="number">4</span>    <span class="number">4</span></div></pre></td></tr></table></figure>
<h3 id="矩阵的维数dim-，nrow-和ncol"><a href="#矩阵的维数dim-，nrow-和ncol" class="headerlink" title="矩阵的维数dim()，nrow()和ncol()"></a>矩阵的维数<code>dim()</code>，<code>nrow()</code>和<code>ncol()</code></h3><p>在R中，使用<code>dim()</code>函数返回矩阵的维数，<code>nrow()</code>返回行数，<code>ncol()</code>返回列数。</p>
<p>时可以进行QR分解，$A=QR$，其中，$Q’Q=I$，在R中可以使用<code>qr()</code>进行QR分解，如下所示：</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol>
<li>元统计分析及R语言建模（第4版） [Multivariate Statistical Analysis and Modeling for R Language] .王斌会 著</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2017/04/03/R/数据类型3-数据框/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/03/R/数据类型3-数据框/" itemprop="url">R语言笔记之数据类型3-数据框</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-03T12:00:00+08:00">
                2017-04-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/" itemprop="url" rel="index">
                    <span itemprop="name">R</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5,089
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  27
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="数据框定义"><a href="#数据框定义" class="headerlink" title="数据框定义"></a>数据框定义</h2><p>一种矩阵形式的数据，但数据框中各列可以是不同类型的数据。数据框每列是一个变量，每行是一个观测。数据框可以看成是矩阵的推广，也可看作一种特殊的列表对象。</p>
<h2 id="数据框的创建"><a href="#数据框的创建" class="headerlink" title="数据框的创建"></a>数据框的创建</h2><h3 id="data-frame"><a href="#data-frame" class="headerlink" title="data.frame()"></a>data.frame()</h3><p>通过data.frame函数来创建数据框，该函数包含的主要参数为: data.frame(…, row.names = NULL, check.rows = FALSE, check.names = TRUE, stringsAsFactors = default.stringsAsFactors()) 如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">rats &lt;- c(<span class="number">1</span>:<span class="number">6</span>)</div><div class="line">group &lt;- c(<span class="string">"postive"</span>,<span class="string">"postive"</span>,<span class="string">"model"</span>,<span class="string">"model"</span>,<span class="string">"control"</span>,<span class="string">"control"</span>)</div><div class="line">sex &lt;- c(<span class="string">"F"</span>,<span class="string">"M"</span>,<span class="string">"F"</span>,<span class="string">"M"</span>,<span class="string">"F"</span>,<span class="string">"M"</span>)</div><div class="line">glu.d1 &lt;- c(<span class="number">11.97</span>,<span class="number">12.97</span>,<span class="number">27.34</span>,<span class="number">23.97</span>,<span class="number">6.79</span>,<span class="number">5.19</span>)</div><div class="line">glu.d7 &lt;- c(<span class="number">12.97</span>,<span class="number">13.97</span>,<span class="number">25.56</span>,<span class="number">23.97</span>,<span class="number">5.79</span>,<span class="number">6.19</span>)</div><div class="line">rat.data &lt;- data.frame(rats,group,sex,glu.d1,glu.d7)</div><div class="line">rat.data</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data<br>  rats   group sex glu.d1 glu.d7<br>1    1 postive   F  11.97  12.97<br>2    2 postive   M  12.97  13.97<br>3    3   model   F  27.34  25.56<br>4    4   model   M  23.97  23.97<br>5    5 control   F   6.79   5.79<br>6    6 control   M   5.19   6.19</p>
</blockquote>
<h3 id="expand-grid"><a href="#expand-grid" class="headerlink" title="expand.grid()"></a>expand.grid()</h3><p>通过expand.grid()创建一个数据框，此函数可以创建元素所有可能的组合：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">x&lt;-expand.grid(h=c(<span class="number">60</span>,<span class="number">80</span>),w=c(<span class="number">100</span>,<span class="number">300</span>),sex=c(<span class="string">"M"</span>,<span class="string">"F"</span>))</div><div class="line">x</div></pre></td></tr></table></figure>
<blockquote>
<p> x<br>   h   w sex<br>1 60 100   M<br>2 80 100   M<br>3 60 300   M<br>4 80 300   M<br>5 60 100   F<br>6 80 100   F<br>7 60 300   F<br>8 80 300   F</p>
</blockquote>
<h3 id="查看数据框信息"><a href="#查看数据框信息" class="headerlink" title="查看数据框信息"></a>查看数据框信息</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">class(rat.data) <span class="comment"># 查看类型</span></div></pre></td></tr></table></figure>
<blockquote>
<p> class(rat.data) # 查看类型<br>[1] “data.frame”</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">class(rat.data$sex) # 查看某列的类型</div></pre></td></tr></table></figure>
<blockquote>
<p> class(rat.data$sex) # 查看某列的类型<br>[1] “factor”</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">length(rat.data) # 查看数据框长度</div></pre></td></tr></table></figure>
<blockquote>
<p> length(rat.data) # 查看数据框长度<br>[1] 5</p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">names(rat.data) <span class="comment"># 数据框各项名称</span></div></pre></td></tr></table></figure>
<blockquote>
<p> names(rat.data) # 数据框各项名称<br>[1] “rats”   “group”  “sex”    “glu.d1” “glu.d7”</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">summary(rat.data) </div><div class="line"># 数据框信息总结,对字符类/因子类数据，给出相应的频数统计；给数值型数据给出5个主要的指标</div></pre></td></tr></table></figure>
<blockquote>
<p> summary(rat.data)<br>      rats          group   sex       glu.d1           glu.d7<br> Min.   :1.00   control:2   F:3   Min.   : 5.190   Min.   : 5.790<br> 1st Qu.:2.25   model  :2   M:3   1st Qu.: 8.085   1st Qu.: 7.885<br> Median :3.50   postive:2         Median :12.470   Median :13.470<br> Mean   :3.50                     Mean   :14.705   Mean   :14.742<br> 3rd Qu.:4.75                     3rd Qu.:21.220   3rd Qu.:21.470<br> Max.   :6.00                     Max.   :27.340   Max.   :25.560 </p>
</blockquote>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">table(rat.data$group,rat.data$sex) </div><div class="line"><span class="comment"># 将数据框中的group与sex关联为一个表</span></div></pre></td></tr></table></figure>
<blockquote>
<p> table(rat.data$group,rat.data$sex)<br>   F M<br>  control 1 1<br>  model   1 1<br>  postive 1 1</p>
</blockquote>
<h2 id="数据框的去重"><a href="#数据框的去重" class="headerlink" title="数据框的去重"></a>数据框的去重</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rat.data2 &lt;- rbind(rat.data,rat.data) <span class="comment"># 创建一个新数据框rat.data2，内容是rat.data的2倍</span></div><div class="line">unique(rat.data2) <span class="comment"># 对数据框进行去重，即提取不重复的元素</span></div></pre></td></tr></table></figure>
<blockquote>
<p> unique(rat.data2) # 对数据框进行去重，即提取不重复的元素<br>  rats   group sex glu.d1 glu.d7<br>1    1 postive   F  11.97  12.97<br>2    2 postive   M  12.97  13.97<br>3    3   model   F  27.34  25.56<br>4    4   model   M  23.97  23.97<br>5    5 control   F   6.79   5.79<br>6    6 control   M   5.19   6.19</p>
</blockquote>
<h3 id="去重函数unique"><a href="#去重函数unique" class="headerlink" title="去重函数unique()"></a>去重函数unique()</h3><p>查询数据中的唯一值只可以使用<code>unique()</code>函数，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mtcars$cyl</div><div class="line">unique(mtcars$cyl)</div><div class="line">levels(as.factor(mtcars$cyl)) <span class="comment"># 采用levles()这种方式只是核对一下，这种方式不推荐</span></div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; mtcars$cyl</div><div class="line"> [<span class="number">1</span>] <span class="number">6</span> <span class="number">6</span> <span class="number">4</span> <span class="number">6</span> <span class="number">8</span> <span class="number">6</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">6</span> <span class="number">6</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">8</span> <span class="number">6</span> <span class="number">8</span> <span class="number">4</span></div><div class="line">&gt; unique(mtcars$cyl)</div><div class="line">[<span class="number">1</span>] <span class="number">6</span> <span class="number">4</span> <span class="number">8</span></div><div class="line">&gt; levels(as.factor(mtcars$cyl))</div><div class="line">[<span class="number">1</span>] <span class="string">"4"</span> <span class="string">"6"</span> <span class="string">"8"</span></div></pre></td></tr></table></figure>
<h3 id="取重复的行duplicated"><a href="#取重复的行duplicated" class="headerlink" title="取重复的行duplicated()"></a>取重复的行duplicated()</h3><p>查找重复数据的函数是<code>duplicated()</code>，现在找出数据集<code>iris</code>中的一个重复值，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">x &lt;- c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line">duplicated(x)</div><div class="line"><span class="comment"># 有重复的值就会标为TRUE，没有重复的值就标为FALSE</span></div><div class="line"></div><div class="line">dupes &lt;- duplicated(iris)</div><div class="line">head(dupes)</div><div class="line">which(dupes)</div><div class="line">iris[dupes,]</div></pre></td></tr></table></figure>
<p>计算结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt; x &lt;- c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line">&gt; duplicated(x)</div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></div><div class="line">&gt; <span class="comment"># 有重复的值就会标为TRUE，没有重复的值就标为FALSE</span></div><div class="line"></div><div class="line"></div><div class="line">&gt; dupes &lt;- duplicated(iris)</div><div class="line">&gt; head(dupes)</div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span></div><div class="line">&gt; which(dupes)</div><div class="line">[<span class="number">1</span>] <span class="number">143</span></div><div class="line">&gt; iris[dupes,]</div><div class="line">    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species</div><div class="line"><span class="number">143</span>          <span class="number">5.8</span>         <span class="number">2.7</span>          <span class="number">5.1</span>         <span class="number">1.9</span> virginica</div></pre></td></tr></table></figure>
<p>从上面结果可以看出来两个信息：</p>
<ol>
<li>当duplicated()遇到重复的值时（重复的值必然至少有2个），第1个重复的值返回的是FALSE，到第2个以及第2个往后重复的值才显示为TRUE；</li>
<li>duplicated()返回的是一个逻辑向量，因此可以将其当作索引去除重复行，如下所示：</li>
</ol>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">head(iris[!dupes, ])</div><div class="line">nrow(iris[!dupes, ])</div></pre></td></tr></table></figure>
<p>计算结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt; head(iris[!dupes, ])</div><div class="line">  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</div><div class="line"><span class="number">1</span>          <span class="number">5.1</span>         <span class="number">3.5</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</div><div class="line"><span class="number">2</span>          <span class="number">4.9</span>         <span class="number">3.0</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</div><div class="line"><span class="number">3</span>          <span class="number">4.7</span>         <span class="number">3.2</span>          <span class="number">1.3</span>         <span class="number">0.2</span>  setosa</div><div class="line"><span class="number">4</span>          <span class="number">4.6</span>         <span class="number">3.1</span>          <span class="number">1.5</span>         <span class="number">0.2</span>  setosa</div><div class="line"><span class="number">5</span>          <span class="number">5.0</span>         <span class="number">3.6</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  setosa</div><div class="line"><span class="number">6</span>          <span class="number">5.4</span>         <span class="number">3.9</span>          <span class="number">1.7</span>         <span class="number">0.4</span>  setosa</div><div class="line">&gt; nrow(iris[!dupes, ])</div><div class="line">[<span class="number">1</span>] <span class="number">149</span></div></pre></td></tr></table></figure>
<p>再看一个案例：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rat.data2[duplicated(rat.data2),]<span class="comment"># 取数据框中重复的行</span></div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data2[duplicated(rat.data2),]# 取数据框中重复的行<br>   rats   group sex glu.d1 glu.d7<br>7     1 postive   F  11.97  12.97<br>8     2 postive   M  12.97  13.97<br>9     3   model   F  27.34  25.56<br>10    4   model   M  23.97  23.97<br>11    5 control   F   6.79   5.79<br>12    6 control   M   5.19   6.19</p>
</blockquote>
<h3 id="提取某个元素"><a href="#提取某个元素" class="headerlink" title="提取某个元素"></a>提取某个元素</h3><p>rat.data[i,j]指第i行第j列的数据</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rat.data[<span class="number">1</span>,<span class="number">2</span>] <span class="comment">#取第1行第2列</span></div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data[1,2] #取第1行第2列<br>[1] postive<br>Levels: control model postive</p>
</blockquote>
<h3 id="提取某行"><a href="#提取某行" class="headerlink" title="提取某行"></a>提取某行</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rat.data[<span class="number">2</span>,] <span class="comment">#取第2行</span></div><div class="line">rat.data[c(<span class="number">1</span>,<span class="number">4</span>),] <span class="comment">#取1，4行</span></div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data[2,] #取第2行<br>  rats   group sex glu.d1 glu.d7<br>2    2 postive   M  12.97  13.97</p>
<p> rat.data[c(1,4),] #取1，4行<br>  rats   group sex glu.d1 glu.d7<br>1    1 postive   F  11.97  12.97<br>4    4   model   M  23.97  23.97</p>
</blockquote>
<h3 id="提取某列——用列号提取"><a href="#提取某列——用列号提取" class="headerlink" title="提取某列——用列号提取"></a>提取某列——用列号提取</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rat.data[,3] #取第3列</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data[,3] #取第3列<br>[1] F M F M F M<br>Levels: F M</p>
</blockquote>
<h3 id="提取某列——用列名称提取"><a href="#提取某列——用列名称提取" class="headerlink" title="提取某列——用列名称提取"></a>提取某列——用列名称提取</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rat.data$rats #取rat.data数据框中的rats列</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data$rats #取rat.data数据框中的rats列<br>[1] 1 2 3 4 5 6</p>
</blockquote>
<h3 id="提取除掉某列的其余列"><a href="#提取除掉某列的其余列" class="headerlink" title="提取除掉某列的其余列"></a>提取除掉某列的其余列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rat.data[,-3] #取除了第3列外的其余列</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data[,-3] #取除了第3列外的其余列<br>  rats   group glu.d1 glu.d7<br>1    1 postive  11.97  12.97<br>2    2 postive  12.97  13.97<br>3    3   model  27.34  25.56<br>4    4   model  23.97  23.97<br>5    5 control   6.79   5.79<br>6    6 control   5.19   6.19</p>
</blockquote>
<h3 id="取1到4行中的第4列"><a href="#取1到4行中的第4列" class="headerlink" title="取1到4行中的第4列"></a>取1到4行中的第4列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rat.data[1:4,4]</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data[1:4,4]<br>[1] 11.97 12.97 27.34 23.97</p>
</blockquote>
<h3 id="取1到4行中的第3列"><a href="#取1到4行中的第3列" class="headerlink" title="取1到4行中的第3列"></a>取1到4行中的第3列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rat.data[1:4,3]</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data[1:4,3]<br>[1] F M F M<br>Levels: F M</p>
</blockquote>
<h3 id="取第1行，2到4列"><a href="#取第1行，2到4列" class="headerlink" title="取第1行，2到4列"></a>取第1行，2到4列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rat.data[1,2:4] #取第1行，2到4列</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data[1,2:4] #取第1行，2到4列<br>    group sex glu.d1<br>1 postive   F  11.97</p>
</blockquote>
<h3 id="提取满足某一条件的列-或match"><a href="#提取满足某一条件的列-或match" class="headerlink" title="提取满足某一条件的列==或match()"></a>提取满足某一条件的列<code>==</code>或<code>match()</code></h3><p>提取rat.data中所有control级别的观察值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Sel &lt;- rat.data$group == &quot;control&quot;</div><div class="line">rat.data.control &lt;- rat.data[Sel,]</div><div class="line">rat.data.control</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data.control<br>  rats   group sex glu.d1 glu.d7<br>5    5 control   F   6.79   5.79<br>6    6 control   M   5.19   6.19</p>
</blockquote>
<p>使用<code>match()</code>函数，</p>
<p>在mtcars的行名称中检索<code>Toyota Corolla</code>元素，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">index &lt;- match(<span class="string">"Toyota Corolla"</span>, rownames(mtcars))</div><div class="line">index</div><div class="line">mtcars[index, <span class="number">1</span>:<span class="number">4</span>]</div></pre></td></tr></table></figure>
<p>计算结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; index &lt;- match(<span class="string">"Toyota Corolla"</span>, rownames(mtcars))</div><div class="line">&gt; index</div><div class="line">[<span class="number">1</span>] <span class="number">20</span></div><div class="line">&gt; mtcars[index, <span class="number">1</span>:<span class="number">4</span>]</div><div class="line">                mpg cyl disp hp</div><div class="line">Toyota Corolla <span class="number">33.9</span>   <span class="number">4</span> <span class="number">71.1</span> <span class="number">65</span></div></pre></td></tr></table></figure>
<h3 id="使用with计算条件总和"><a href="#使用with计算条件总和" class="headerlink" title="使用with计算条件总和"></a>使用with计算条件总和</h3><p>案例：计算mtcars在不同马力段中油耗的平均值使用<code>mean()</code>函数，在阈值为150马力的情况下，计算过程如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">with(mtcars, mean(mpg))</div><div class="line">with(mtcars, mean(mpg[hp &lt; <span class="number">150</span>]))</div><div class="line">with(mtcars, mean(mpg[hp &gt;= <span class="number">150</span>]))</div></pre></td></tr></table></figure>
<p>结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; with(mtcars, mean(mpg))</div><div class="line">[<span class="number">1</span>] <span class="number">20.09062</span></div><div class="line">&gt; with(mtcars, mean(mpg[hp &lt; <span class="number">150</span>]))</div><div class="line">[<span class="number">1</span>] <span class="number">24.22353</span></div><div class="line">&gt; with(mtcars, mean(mpg[hp &gt;= <span class="number">150</span>]))</div><div class="line">[<span class="number">1</span>] <span class="number">15.40667</span></div></pre></td></tr></table></figure>
<h3 id="提取子集案例二"><a href="#提取子集案例二" class="headerlink" title="提取子集案例二"></a>提取子集案例二</h3><p>如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&gt; manager&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</div><div class="line">&gt; date&lt;-c(<span class="string">"10/24/08"</span>,<span class="string">"10/28/08"</span>,<span class="string">"10/01/08"</span>,<span class="string">"10/12/08"</span>,<span class="string">"05/01/09"</span>)</div><div class="line">&gt; country&lt;-c(<span class="string">"US"</span>,<span class="string">"US"</span>,<span class="string">"UK"</span>,<span class="string">"China"</span>,<span class="string">"UK"</span>)</div><div class="line">&gt; gender&lt;-c(<span class="string">"M"</span>,<span class="string">"F"</span>,<span class="string">"F"</span>,<span class="string">"M"</span>,<span class="string">"F"</span>)</div><div class="line">&gt; age&lt;-c(<span class="number">32</span>,<span class="number">45</span>,<span class="number">25</span>,<span class="number">23</span>,<span class="number">99</span>)</div><div class="line">&gt; q1&lt;-c(<span class="number">5</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>)</div><div class="line">&gt; q2&lt;-c(<span class="number">4</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>)</div><div class="line">&gt; q3&lt;-c(<span class="number">2</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>)</div><div class="line">&gt; q4&lt;-c(<span class="number">5</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="literal">NA</span>,<span class="number">2</span>)</div><div class="line">&gt; q5&lt;-c(<span class="number">5</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="literal">NA</span>)</div><div class="line">&gt; leadership&lt;-data.frame(manager,date,country,gender,age,q1,q2,q3,q4,q5,stringsAsFactors=<span class="literal">FALSE</span>)</div><div class="line">&gt; leadership</div><div class="line">  manager     date country gender age q1 q2 q3 q4 q5</div><div class="line"><span class="number">1</span>       <span class="number">1</span> <span class="number">10</span>/<span class="number">24</span>/<span class="number">08</span>      US      M  <span class="number">32</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">2</span>  <span class="number">5</span>  <span class="number">5</span></div><div class="line"><span class="number">2</span>       <span class="number">2</span> <span class="number">10</span>/<span class="number">28</span>/<span class="number">08</span>      US      <span class="literal">F</span>  <span class="number">45</span>  <span class="number">3</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">3</span>  <span class="number">5</span></div><div class="line"><span class="number">3</span>       <span class="number">3</span> <span class="number">10</span>/<span class="number">01</span>/<span class="number">08</span>      UK      <span class="literal">F</span>  <span class="number">25</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">3</span>  <span class="number">3</span>  <span class="number">3</span></div><div class="line"><span class="number">4</span>       <span class="number">4</span> <span class="number">10</span>/<span class="number">12</span>/<span class="number">08</span>   China      M  <span class="number">23</span>  <span class="number">2</span>  <span class="number">4</span>  <span class="number">4</span> <span class="literal">NA</span>  <span class="number">3</span></div><div class="line"><span class="number">5</span>       <span class="number">5</span> <span class="number">05</span>/<span class="number">01</span>/<span class="number">09</span>      UK      <span class="literal">F</span>  <span class="number">99</span>  <span class="number">1</span>  <span class="number">5</span>  <span class="number">3</span>  <span class="number">2</span> <span class="literal">NA</span></div><div class="line">&gt; newdata &lt;- leadership[, c(<span class="number">6</span>:<span class="number">10</span>)] <span class="comment">#从leadership数据框中取第6行到第10行的变量，并且将其保存在newdata中，将行下标留空(,），表示取所有行</span></div><div class="line">&gt; newdata</div><div class="line">  q1 q2 q3 q4 q5</div><div class="line"><span class="number">1</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">2</span>  <span class="number">5</span>  <span class="number">5</span></div><div class="line"><span class="number">2</span>  <span class="number">3</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">3</span>  <span class="number">5</span></div><div class="line"><span class="number">3</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">3</span>  <span class="number">3</span>  <span class="number">3</span></div><div class="line"><span class="number">4</span>  <span class="number">2</span>  <span class="number">4</span>  <span class="number">4</span> <span class="literal">NA</span>  <span class="number">3</span></div><div class="line"><span class="number">5</span>  <span class="number">1</span>  <span class="number">5</span>  <span class="number">3</span>  <span class="number">2</span> <span class="literal">NA</span></div></pre></td></tr></table></figure>
<p>再看一案例，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&gt; leadership</div><div class="line">  manager     date country gender age q1 q2 q3 q4 q5</div><div class="line"><span class="number">1</span>       <span class="number">1</span> <span class="number">10</span>/<span class="number">24</span>/<span class="number">08</span>      US      M  <span class="number">32</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">2</span>  <span class="number">5</span>  <span class="number">5</span></div><div class="line"><span class="number">2</span>       <span class="number">2</span> <span class="number">10</span>/<span class="number">28</span>/<span class="number">08</span>      US      <span class="literal">F</span>  <span class="number">45</span>  <span class="number">3</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">3</span>  <span class="number">5</span></div><div class="line"><span class="number">3</span>       <span class="number">3</span> <span class="number">10</span>/<span class="number">01</span>/<span class="number">08</span>      UK      <span class="literal">F</span>  <span class="number">25</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">3</span>  <span class="number">3</span>  <span class="number">3</span></div><div class="line"><span class="number">4</span>       <span class="number">4</span> <span class="number">10</span>/<span class="number">12</span>/<span class="number">08</span>   China      M  <span class="number">23</span>  <span class="number">2</span>  <span class="number">4</span>  <span class="number">4</span> <span class="literal">NA</span>  <span class="number">3</span></div><div class="line"><span class="number">5</span>       <span class="number">5</span> <span class="number">05</span>/<span class="number">01</span>/<span class="number">09</span>      UK      <span class="literal">F</span>  <span class="number">99</span>  <span class="number">1</span>  <span class="number">5</span>  <span class="number">3</span>  <span class="number">2</span> <span class="literal">NA</span></div><div class="line">&gt; newdata&lt;- leadership[which(leadership$gender == <span class="string">"M"</span> &amp; leadership$age&gt;<span class="number">30</span>),] <span class="comment"># 将leaderhip中30岁以上的男性选入newdata中</span></div><div class="line">&gt; newdata</div><div class="line">  manager     date country gender age q1 q2 q3 q4 q5</div><div class="line"><span class="number">1</span>       <span class="number">1</span> <span class="number">10</span>/<span class="number">24</span>/<span class="number">08</span>      US      M  <span class="number">32</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">2</span>  <span class="number">5</span>  <span class="number">5</span></div></pre></td></tr></table></figure>
<h3 id="将某一数值转换为某一类别变量"><a href="#将某一数值转换为某一类别变量" class="headerlink" title="将某一数值转换为某一类别变量"></a>将某一数值转换为某一类别变量</h3><h4 id="创建数据框"><a href="#创建数据框" class="headerlink" title="创建数据框"></a>创建数据框</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">manager&lt;-c(1,2,3,4,5)</div><div class="line">date&lt;-c(&quot;10/24/08&quot;,&quot;10/28/08&quot;,&quot;10/1/08&quot;,&quot;10/12/08&quot;,&quot;5/1/09&quot;)</div><div class="line">country&lt;-c(&quot;US&quot;,&quot;US&quot;,&quot;UK&quot;,&quot;UK&quot;,&quot;UK&quot;)</div><div class="line">gender&lt;-c(&quot;M&quot;,&quot;F&quot;,&quot;F&quot;,&quot;M&quot;,&quot;F&quot;)</div><div class="line">age&lt;-c(32,45,25,39,99)</div><div class="line">q1&lt;-c(5,3,3,3,2)</div><div class="line">q2&lt;-c(4,5,5,3,2)</div><div class="line">q3&lt;-c(5,2,5,4,1)</div><div class="line">q4&lt;-c(5,5,5,NA,2)</div><div class="line">q5&lt;-c(5,5,2,NA,1)</div><div class="line">leadership&lt;-data.frame(manager,date,country,gender,age,q1,q2,q3,q4,q5,stringsAsFactor=FALSE)</div><div class="line">#把字符转化为因子</div><div class="line">leadership</div></pre></td></tr></table></figure>
<blockquote>
<p> leadership<br>  manager     date country gender age q1 q2 q3 q4 q5 stringsAsFactor<br>1       1 10/24/08      US      M  32  5  4  5  5  5           FALSE<br>2       2 10/28/08      US      F  45  3  5  2  5  5           FALSE<br>3       3  10/1/08      UK      F  25  3  5  5  5  2           FALSE<br>4       4 10/12/08      UK      M  39  3  3  4 NA NA           FALSE<br>5       5   5/1/09      UK      F  99  2  2  1  2  1           FALSE</p>
</blockquote>
<h4 id="转变变量-可转化为因子型变量"><a href="#转变变量-可转化为因子型变量" class="headerlink" title="转变变量(可转化为因子型变量)"></a>转变变量(可转化为因子型变量)</h4><p>要求：将大于99的转换为缺失，age大于75的为Elder，55到75之间的为Middle，55以下的为Young：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">leadership$age[leadership$age == <span class="number">99</span>] &lt;-<span class="literal">NA</span> <span class="comment"># 年龄为99时，表示缺失</span></div><div class="line">leadership$agecat[leadership$age &gt;<span class="number">75</span>] &lt;- <span class="string">"Elder"</span> <span class="comment"># 当age大于75时，agecat为Elder</span></div><div class="line">leadership$agecat[leadership$age &gt;= <span class="number">55</span> &amp; leadership$age&lt;= <span class="number">75</span>] &lt;- <span class="string">"Middle"</span> <span class="comment"># 当55&lt;= age &lt;=75时，agecat为Middle</span></div><div class="line">leadership$agecat[leadership$age &lt; <span class="number">55</span>] &lt;-<span class="string">"Young"</span> <span class="comment">#age&lt;55时，agecat为Young</span></div><div class="line">leadership</div></pre></td></tr></table></figure>
<blockquote>
<p> leadership<br>  manager     date country gender age q1 q2 q3 q4 q5 stringsAsFactor agecat<br>1       1 10/24/08      US      M  32  5  4  5  5  5           FALSE  Young<br>2       2 10/28/08      US      F  45  3  5  2  5  5           FALSE  Young<br>3       3  10/1/08      UK      F  25  3  5  5  5  2           FALSE  Young<br>4       4 10/12/08      UK      M  39  3  3  4 NA NA           FALSE  Young<br>5       5   5/1/09      UK      F  NA  2  2  1  2  1           FALSE   <na></na></p>
</blockquote>
<h2 id="判断数据框各行是否完整complete-cases"><a href="#判断数据框各行是否完整complete-cases" class="headerlink" title="判断数据框各行是否完整complete.cases"></a>判断数据框各行是否完整<code>complete.cases</code></h2><p>所用函数为<code>complete.cases</code></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rat.data1&lt;-rat.data</div><div class="line">rat.data1$group[<span class="number">2</span>]&lt;-<span class="literal">NA</span></div><div class="line">complete.cases(rat.data1) <span class="comment">#判断数据框是否完整</span></div></pre></td></tr></table></figure>
<blockquote>
<p> complete.cases(rat.data1) #判断数据框是否完整<br>[1]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE</p>
</blockquote>
<p>如果要删除某个数据集中的包含缺失值的行，那么就可以通过下面的代码实现：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">rat.data1 &lt;- rat.data1[complete.cases(rat.data1),]</div><div class="line"></div><div class="line"><span class="comment"># 或者是使用na.omit()函数</span></div><div class="line">rat.data1 &lt;- na.omit(rat.data1)</div></pre></td></tr></table></figure>
<h2 id="提取非缺失值"><a href="#提取非缺失值" class="headerlink" title="提取非缺失值"></a>提取非缺失值</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rat.data1[complete.cases(rat.data1),] #选择非缺失值的数据</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data1[complete.cases(rat.data1),] #选择非缺失值的数据<br>  rats   group sex glu.d1 glu.d7<br>1    1 postive   F  11.97  12.97<br>3    3   model   F  27.34  25.56<br>4    4   model   M  23.97  23.97<br>5    5 control   F   6.79   5.79<br>6    6 control   M   5.19   6.19</p>
</blockquote>
<h2 id="增加列"><a href="#增加列" class="headerlink" title="增加列"></a>增加列</h2><h3 id="直接添加"><a href="#直接添加" class="headerlink" title="直接添加"></a>直接添加</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rat.data$result&lt;-c(rat.data$glu.d1-rat.data$glu.d7)</div><div class="line">rat.data</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data<br>  rats   group sex glu.d1 glu.d7 result<br>1    1 postive   F  11.97  12.97  -1.00<br>2    2 postive   M  12.97  13.97  -1.00<br>3    3   model   F  27.34  25.56   1.78<br>4    4   model   M  23.97  23.97   0.00<br>5    5 control   F   6.79   5.79   1.00<br>6    6 control   M   5.19   6.19  -1.00</p>
</blockquote>
<h3 id="cbind添加"><a href="#cbind添加" class="headerlink" title="cbind添加"></a>cbind添加</h3><p>格式为data.frame1 &lt;- cbind(data.fram1,新的变量（可以由公式得到）)，例如下面的例子就是在rat.data1添加一个result变量，result的变量是由rat.data1中的glu.d1减去glu.d7得到的。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rat.data1&lt;-cbind(rat.data1, result=c(rat.data1$glu.d1-rat.data1$glu.d7))</div><div class="line">rat.data1</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data1&lt;-cbind(rat.data1, result=c(rat.data1$glu.d1-rat.data1$glu.d7))<br> rat.data1<br>  rats   group sex glu.d1 glu.d7 result<br>1    1 postive   F  11.97  12.97  -1.00<br>2    2    <na>   M  12.97  13.97  -1.00<br>3    3   model   F  27.34  25.56   1.78<br>4    4   model   M  23.97  23.97   0.00<br>5    5 control   F   6.79   5.79   1.00<br>6    6 control   M   5.19   6.19  -1.00</na></p>
</blockquote>
<p>另外的方法为：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rat.data1$result &lt;- rat.data1$glu.d1-rat.data1$glu.d7</div><div class="line"><span class="comment"># 或</span></div><div class="line">rat.data1 &lt;- transform(rat.data1,result=glu.d1-glu.d7)</div></pre></td></tr></table></figure>
<h3 id="merge-添加"><a href="#merge-添加" class="headerlink" title="merge()添加"></a>merge()添加</h3><p>用法为<code>total &lt;- merge(dataframeA, dataframeB, by = &quot;ID&quot;)</code>，它表示，将dataframeA与dataframeB按照ID进行合并，这种联结通常是横向的，即向数据框中添加变量。 </p>
<h2 id="删除列"><a href="#删除列" class="headerlink" title="删除列"></a>删除列</h2><h3 id="使用NULL"><a href="#使用NULL" class="headerlink" title="使用NULL"></a>使用NULL</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rat.data1</div><div class="line">rat.data1$result&lt;-<span class="literal">NULL</span> <span class="comment"># 删除result这一列，原数列有2列result</span></div><div class="line">rat.data1</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data1<br>  rats   group sex glu.d1 glu.d7 result<br>1    1 postive   F  11.97  12.97  -1.00<br>2    2    <na>   M  12.97  13.97  -1.00<br>3    3   model   F  27.34  25.56   1.78<br>4    4   model   M  23.97  23.97   0.00<br>5    5 control   F   6.79   5.79   1.00<br>6    6 control   M   5.19   6.19  -1.00</na></p>
<p> rat.data1$result&lt;-NULL # 删除result这一列</p>
<p> rat.data1<br>  rats   group sex glu.d1 glu.d7<br>1    1 postive   F  11.97  12.97<br>2    2    <na>   M  12.97  13.97<br>3    3   model   F  27.34  25.56<br>4    4   model   M  23.97  23.97<br>5    5 control   F   6.79   5.79<br>6    6 control   M   5.19   6.19</na></p>
</blockquote>
<h3 id="用subset"><a href="#用subset" class="headerlink" title="用subset()"></a>用subset()</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rat.data1&lt;-subset(rat.data1,select=c(-sex,-group)) <span class="comment">#删除sex,group列</span></div><div class="line">rat.data1</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data1&lt;-subset(rat.data1,select=c(-sex,-group)) #删除sex,group列<br> rat.data1<br>  rats glu.d1 glu.d7<br>1    1  11.97  12.97<br>2    2  12.97  13.97<br>3    3  27.34  25.56<br>4    4  23.97  23.97<br>5    5   6.79   5.79<br>6    6   5.19   6.19</p>
</blockquote>
<h3 id="in"><a href="#in" class="headerlink" title="%in%"></a><code>%in%</code></h3><p><code>%in%</code>是一种特殊类型的函数，被称为二元运算符。</p>
<p>使用<code>%in%</code>，如下所示：</p>
<p>先生成一个数据框，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&gt; manager&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</div><div class="line">&gt; date&lt;-c(<span class="string">"10/24/08"</span>,<span class="string">"10/28/08"</span>,<span class="string">"10/01/08"</span>,<span class="string">"10/12/08"</span>,<span class="string">"05/01/09"</span>)</div><div class="line">&gt; country&lt;-c(<span class="string">"US"</span>,<span class="string">"US"</span>,<span class="string">"UK"</span>,<span class="string">"China"</span>,<span class="string">"UK"</span>)</div><div class="line">&gt; gender&lt;-c(<span class="string">"M"</span>,<span class="string">"F"</span>,<span class="string">"F"</span>,<span class="string">"M"</span>,<span class="string">"F"</span>)</div><div class="line">&gt; age&lt;-c(<span class="number">32</span>,<span class="number">45</span>,<span class="number">25</span>,<span class="number">23</span>,<span class="number">99</span>)</div><div class="line">&gt; q1&lt;-c(<span class="number">5</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>)</div><div class="line">&gt; q2&lt;-c(<span class="number">4</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>)</div><div class="line">&gt; q3&lt;-c(<span class="number">2</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>)</div><div class="line">&gt; q4&lt;-c(<span class="number">5</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="literal">NA</span>,<span class="number">2</span>)</div><div class="line">&gt; q5&lt;-c(<span class="number">5</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="literal">NA</span>)</div><div class="line">&gt; leadership&lt;-data.frame(manager,date,country,gender,age,q1,q2,q3,q4,q5,stringsAsFactors=<span class="literal">FALSE</span>)</div><div class="line">&gt; leadership</div><div class="line">  manager     date country gender age q1 q2 q3 q4 q5</div><div class="line"><span class="number">1</span>       <span class="number">1</span> <span class="number">10</span>/<span class="number">24</span>/<span class="number">08</span>      US      M  <span class="number">32</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">2</span>  <span class="number">5</span>  <span class="number">5</span></div><div class="line"><span class="number">2</span>       <span class="number">2</span> <span class="number">10</span>/<span class="number">28</span>/<span class="number">08</span>      US      <span class="literal">F</span>  <span class="number">45</span>  <span class="number">3</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">3</span>  <span class="number">5</span></div><div class="line"><span class="number">3</span>       <span class="number">3</span> <span class="number">10</span>/<span class="number">01</span>/<span class="number">08</span>      UK      <span class="literal">F</span>  <span class="number">25</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">3</span>  <span class="number">3</span>  <span class="number">3</span></div><div class="line"><span class="number">4</span>       <span class="number">4</span> <span class="number">10</span>/<span class="number">12</span>/<span class="number">08</span>   China      M  <span class="number">23</span>  <span class="number">2</span>  <span class="number">4</span>  <span class="number">4</span> <span class="literal">NA</span>  <span class="number">3</span></div><div class="line"><span class="number">5</span>       <span class="number">5</span> <span class="number">05</span>/<span class="number">01</span>/<span class="number">09</span>      UK      <span class="literal">F</span>  <span class="number">99</span>  <span class="number">1</span>  <span class="number">5</span>  <span class="number">3</span>  <span class="number">2</span> <span class="literal">NA</span></div></pre></td></tr></table></figure>
<p>现在删除q3与q4，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; myvars &lt;-names(leadership)%<span class="keyword">in</span>%c(<span class="string">"q3"</span>,<span class="string">"q4"</span>)</div><div class="line">&gt; newdata&lt;-leadership[!myvars]</div><div class="line">&gt; newdata</div><div class="line">  manager     date country gender age q1 q2 q5</div><div class="line"><span class="number">1</span>       <span class="number">1</span> <span class="number">10</span>/<span class="number">24</span>/<span class="number">08</span>      US      M  <span class="number">32</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">5</span></div><div class="line"><span class="number">2</span>       <span class="number">2</span> <span class="number">10</span>/<span class="number">28</span>/<span class="number">08</span>      US      <span class="literal">F</span>  <span class="number">45</span>  <span class="number">3</span>  <span class="number">5</span>  <span class="number">5</span></div><div class="line"><span class="number">3</span>       <span class="number">3</span> <span class="number">10</span>/<span class="number">01</span>/<span class="number">08</span>      UK      <span class="literal">F</span>  <span class="number">25</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">3</span></div><div class="line"><span class="number">4</span>       <span class="number">4</span> <span class="number">10</span>/<span class="number">12</span>/<span class="number">08</span>   China      M  <span class="number">23</span>  <span class="number">2</span>  <span class="number">4</span>  <span class="number">3</span></div><div class="line"><span class="number">5</span>       <span class="number">5</span> <span class="number">05</span>/<span class="number">01</span>/<span class="number">09</span>      UK      <span class="literal">F</span>  <span class="number">99</span>  <span class="number">1</span>  <span class="number">5</span> <span class="literal">NA</span></div></pre></td></tr></table></figure>
<p>names(leadership)生成了一个包含所有变量名的字符型微量，即<code>c(&quot;manager&quot;,&quot;date&quot;,&quot;country&quot;，&quot;gender&quot;，&quot;age&quot;，&quot;q1&quot;，&quot;q2&quot;，&quot;q3&quot;,&quot;q4&quot;,&quot;q5&quot;,&quot;stringsAsFactor&quot;)</code>，<code>names(leadership)%in%c(&quot;item3&quot;,&quot;item4&quot;)</code>返回了一个逻辑型向量，<code>names(leadership)``中每个匹配item3或item4的元素值为TRUE，反之为</code>FALSE，c(FALSE, FALSE, FALSE, FALSE,FALSE, FALSE, FALSE, TRUE, TRUE, FALSE)<code>，运算符非（!）将逻辑值反转：</code>c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE,FALSE, TRUE)<code>,</code>leadership[c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE,TRUE)]`选择了逻辑值为TRUE的列，于是q3和q4被剔除了。</p>
<p>或者直接使用<code>-</code>号，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; newdata &lt;- leadership[c(-<span class="number">8</span>,-<span class="number">9</span>) ] <span class="comment">#直接在变量前加减号</span></div><div class="line">&gt; newdata</div><div class="line">  manager     date country gender age q1 q2 q5</div><div class="line"><span class="number">1</span>       <span class="number">1</span> <span class="number">10</span>/<span class="number">24</span>/<span class="number">08</span>      US      M  <span class="number">32</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">5</span></div><div class="line"><span class="number">2</span>       <span class="number">2</span> <span class="number">10</span>/<span class="number">28</span>/<span class="number">08</span>      US      <span class="literal">F</span>  <span class="number">45</span>  <span class="number">3</span>  <span class="number">5</span>  <span class="number">5</span></div><div class="line"><span class="number">3</span>       <span class="number">3</span> <span class="number">10</span>/<span class="number">01</span>/<span class="number">08</span>      UK      <span class="literal">F</span>  <span class="number">25</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">3</span></div><div class="line"><span class="number">4</span>       <span class="number">4</span> <span class="number">10</span>/<span class="number">12</span>/<span class="number">08</span>   China      M  <span class="number">23</span>  <span class="number">2</span>  <span class="number">4</span>  <span class="number">3</span></div><div class="line"><span class="number">5</span>       <span class="number">5</span> <span class="number">05</span>/<span class="number">01</span>/<span class="number">09</span>      UK      <span class="literal">F</span>  <span class="number">99</span>  <span class="number">1</span>  <span class="number">5</span> <span class="literal">NA</span></div></pre></td></tr></table></figure>
<h2 id="增加行"><a href="#增加行" class="headerlink" title="增加行"></a>增加行</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rat.data1&lt;-rbind(rat.data1,rat.data1)</div><div class="line">rat.data1</div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data1&lt;-rbind(rat.data1,rat.data1)<br> rat.data1<br>   rats glu.d1 glu.d7<br>1     1  11.97  12.97<br>2     2  12.97  13.97<br>3     3  27.34  25.56<br>4     4  23.97  23.97<br>5     5   6.79   5.79<br>6     6   5.19   6.19<br>7     1  11.97  12.97<br>8     2  12.97  13.97<br>9     3  27.34  25.56<br>10    4  23.97  23.97<br>11    5   6.79   5.79<br>12    6   5.19   6.19</p>
</blockquote>
<h2 id="删除行"><a href="#删除行" class="headerlink" title="删除行"></a>删除行</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rat.data1&lt;-rat.data1[-<span class="number">8</span>,] <span class="comment">#删除第8行</span></div><div class="line">rat.data1[-c(<span class="number">1</span>,<span class="number">2</span>),] <span class="comment">#删除1，2行</span></div></pre></td></tr></table></figure>
<blockquote>
<p> rat.data1&lt;-rat.data1[-8,] #删除第8行<br> rat.data1[-c(1,2),] #删除1，2行<br>   rats glu.d1 glu.d7<br>3     3  27.34  25.56<br>4     4  23.97  23.97<br>5     5   6.79   5.79<br>6     6   5.19   6.19<br>7     1  11.97  12.97<br>9     3  27.34  25.56<br>10    4  23.97  23.97<br>11    5   6.79   5.79<br>12    6   5.19   6.19</p>
</blockquote>
<h2 id="数据框的排序"><a href="#数据框的排序" class="headerlink" title="数据框的排序"></a>数据框的排序</h2><h3 id="基于单列进行排序"><a href="#基于单列进行排序" class="headerlink" title="基于单列进行排序"></a>基于单列进行排序</h3><p>排序所用的函数为sort()和order(),sort()是对元素直接进行排序，而order()则是反回排序后的元素在原来列中的位置，现在以内置的CO2数据为例说明，只取CO2的前10行：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">raw_data &lt;- CO2[<span class="number">1</span>:<span class="number">10</span>,]</div><div class="line">raw_data</div><div class="line">sort(raw_data$uptake) <span class="comment">#对uptake进行排序，默认为升序</span></div><div class="line">sort(raw_data$uptake,decreasing = <span class="literal">TRUE</span>) <span class="comment"># decreasing为T时，为降序</span></div><div class="line">order.raw_data &lt;- order(raw_data$uptake);order.raw_data</div><div class="line"><span class="comment"># order的结果是说，在排序后的数据中，第1个元素位于原来的第8个位置</span></div><div class="line"><span class="comment"># 排序后的第1个数据是13.6，而13.6在原来uptake中位于第8</span></div><div class="line">raw_data$uptake[order.raw_data] <span class="comment">#这个结果与sort(raw_data$uptake)是一样的</span></div><div class="line">raw_data[order.raw_data,] <span class="comment">#按照uptake的升序对数据框进行排序</span></div></pre></td></tr></table></figure>
<blockquote>
<p> raw_data &lt;- CO2[1:10,]<br> raw_data<br>   Plant   Type  Treatment conc uptake<br>1    Qn1 Quebec nonchilled   95   16.0<br>2    Qn1 Quebec nonchilled  175   30.4<br>3    Qn1 Quebec nonchilled  250   34.8<br>4    Qn1 Quebec nonchilled  350   37.2<br>5    Qn1 Quebec nonchilled  500   35.3<br>6    Qn1 Quebec nonchilled  675   39.2<br>7    Qn1 Quebec nonchilled 1000   39.7<br>8    Qn2 Quebec nonchilled   95   13.6<br>9    Qn2 Quebec nonchilled  175   27.3<br>10   Qn2 Quebec nonchilled  250   37.1<br> sort(raw_data$uptake) #对uptake进行排序，默认为升序<br> [1] 13.6 16.0 27.3 30.4 34.8 35.3 37.1 37.2 39.2 39.7<br> sort(raw_data$uptake,decreasing = TRUE) # decreasing为T时，为降序<br> [1] 39.7 39.2 37.2 37.1 35.3 34.8 30.4 27.3 16.0 13.6<br> order.raw_data &lt;- order(raw_data$uptake);order.raw_data<br> [1]  8  1  9  2  3  5 10  4  6  7</p>
<p>   order的结果是说，在排序后的数据中，第1个元素位于原来的第8个位置</p>
<p>   排序后的第1个数据是13.6，而13.6在原来uptake中位于第8</p>
<p> raw_data$uptake[order.raw_data] #这个结果与sort(raw_data$uptake)是一样的<br> [1] 13.6 16.0 27.3 30.4 34.8 35.3 37.1 37.2 39.2 39.7<br> raw_data[order.raw_data,] #按照uptake的升序对数据框进行排序<br>   Plant   Type  Treatment conc uptake<br>8    Qn2 Quebec nonchilled   95   13.6<br>1    Qn1 Quebec nonchilled   95   16.0<br>9    Qn2 Quebec nonchilled  175   27.3<br>2    Qn1 Quebec nonchilled  175   30.4<br>3    Qn1 Quebec nonchilled  250   34.8<br>5    Qn1 Quebec nonchilled  500   35.3<br>10   Qn2 Quebec nonchilled  250   37.1<br>4    Qn1 Quebec nonchilled  350   37.2<br>6    Qn1 Quebec nonchilled  675   39.2<br>7    Qn1 Quebec nonchilled 1000   39.7</p>
</blockquote>
<h3 id="基于多列的排序"><a href="#基于多列的排序" class="headerlink" title="基于多列的排序"></a>基于多列的排序</h3><p>还以前述的数据为例说明：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">order.raw_data2 &lt;- with(raw_data,order(conc,uptake))</div><div class="line">raw_data[order.raw_data2,]</div><div class="line"></div><div class="line">order.raw_data3 &lt;- with(raw_data,order(uptake,conc))</div><div class="line">raw_data[order.raw_data3,]</div></pre></td></tr></table></figure>
<blockquote>
<p> order.raw_data2 &lt;- with(raw_data,order(conc,uptake))<br> raw_data[order.raw_data2,]<br>   Plant   Type  Treatment conc uptake<br>8    Qn2 Quebec nonchilled   95   13.6<br>1    Qn1 Quebec nonchilled   95   16.0<br>9    Qn2 Quebec nonchilled  175   27.3<br>2    Qn1 Quebec nonchilled  175   30.4<br>3    Qn1 Quebec nonchilled  250   34.8<br>10   Qn2 Quebec nonchilled  250   37.1<br>4    Qn1 Quebec nonchilled  350   37.2<br>5    Qn1 Quebec nonchilled  500   35.3<br>6    Qn1 Quebec nonchilled  675   39.2<br>7    Qn1 Quebec nonchilled 1000   39.7</p>
<p> order.raw_data3 &lt;- with(raw_data,order(uptake,conc))<br> raw_data[order.raw_data3,]<br>   Plant   Type  Treatment conc uptake<br>8    Qn2 Quebec nonchilled   95   13.6<br>1    Qn1 Quebec nonchilled   95   16.0<br>9    Qn2 Quebec nonchilled  175   27.3<br>2    Qn1 Quebec nonchilled  175   30.4<br>3    Qn1 Quebec nonchilled  250   34.8<br>5    Qn1 Quebec nonchilled  500   35.3<br>10   Qn2 Quebec nonchilled  250   37.1<br>4    Qn1 Quebec nonchilled  350   37.2<br>6    Qn1 Quebec nonchilled  675   39.2<br>7    Qn1 Quebec nonchilled 1000   39.7</p>
</blockquote>
<p>可以看出来，在第1种排序中， with(raw_data,order(conc,uptake))，先以order进行排序，如果order相同，则按照uptake进行排序；在第2种排序中，with(raw_data,order(uptake,conc))，先以uptake进行排序，如果uptake相同，则按conc进行排序。</p>
<h3 id="混合排序"><a href="#混合排序" class="headerlink" title="混合排序"></a>混合排序</h3><p>混合排序是指某一列是升序，某一列为降序，所用到的函数是xtfrm()，其中在需要降序的列前加上铅，在升序的列前加正号，现在以raw_data数据为例说明，以conc的降序，uptake的升序进行排序，用法如下：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">order.raw_data4 &lt;- order(-xtfrm(raw_data$conc),+raw_data$uptake)</div><div class="line">raw_data[order.raw_data4,]</div></pre></td></tr></table></figure>
<blockquote>
<p> order.raw_data4 &lt;- order(-xtfrm(raw_data$conc),+raw_data$uptake)<br> raw_data[order.raw_data4,]<br>   Plant   Type  Treatment conc uptake<br>7    Qn1 Quebec nonchilled 1000   39.7<br>6    Qn1 Quebec nonchilled  675   39.2<br>5    Qn1 Quebec nonchilled  500   35.3<br>4    Qn1 Quebec nonchilled  350   37.2<br>3    Qn1 Quebec nonchilled  250   34.8<br>10   Qn2 Quebec nonchilled  250   37.1<br>9    Qn2 Quebec nonchilled  175   27.3<br>2    Qn1 Quebec nonchilled  175   30.4<br>8    Qn2 Quebec nonchilled   95   13.6<br>1    Qn1 Quebec nonchilled   95   16.0</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2017/04/02/R/数据类型2-因子/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/02/R/数据类型2-因子/" itemprop="url">R语言笔记之数据类型2因子</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-02T12:00:00+08:00">
                2017-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/" itemprop="url" rel="index">
                    <span itemprop="name">R</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,076
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  10
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="因子"><a href="#因子" class="headerlink" title="因子"></a>因子</h1><h2 id="因子定义"><a href="#因子定义" class="headerlink" title="因子定义"></a>因子定义</h2><p>因子(factor)：是名义型变量或有序型变量，比较特殊。一个因子不仅包括分类变量本身还包括变量不同的可能水平（即使它们在数据中不出现）。 </p>
<h2 id="factor-用法"><a href="#factor-用法" class="headerlink" title="factor()用法"></a>factor()用法</h2><p><code>factor (x,levels=sort(unique(x),na.last=TRUE), labels=lebels, exclude=NA, ordered=is.order (x))</code></p>
<p>其中，levels用于指定因子的可能水平，labels用于定义水平的名字；exclude指从向量x中剔除的水平值，ordered指因子的水平是否要排序，例如: </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a &lt;- factor(<span class="number">1</span>:<span class="number">3</span>)</div><div class="line">a</div><div class="line"><span class="comment">## [1] 1 2 3</span></div><div class="line"><span class="comment">## Levels: 1 2 3</span></div></pre></td></tr></table></figure>
<p>从上面的结果可以看出，这组数据中有3个数据，3个水平，分别为1，2，3。还有一种情况是，水平数大于实际的数据数，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">b&lt;-factor(<span class="number">1</span>:<span class="number">3</span>,levels=<span class="number">1</span>:<span class="number">5</span>);b</div><div class="line"><span class="comment">## [1] 1 2 3</span></div><div class="line"><span class="comment">## Levels: 1 2 3 4 5</span></div></pre></td></tr></table></figure>
<p>这组数据中有3个数据，有5个水平（其中两个水平没出现）。</p>
<h2 id="factor数据的名称"><a href="#factor数据的名称" class="headerlink" title="factor数据的名称"></a>factor数据的名称</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">c&lt;-factor(<span class="number">1</span>:<span class="number">3</span>,labels=c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>))</div><div class="line">c</div><div class="line"><span class="comment">## [1] a b c</span></div><div class="line"><span class="comment">## Levels: a b </span></div><div class="line">&gt; str(c)</div><div class="line"> Factor w/ <span class="number">3</span> levels <span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>: <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></div></pre></td></tr></table></figure>
<p>c有三个水平，名字分别为a,b,c </p>
<h2 id="将factor转化为其它类型"><a href="#将factor转化为其它类型" class="headerlink" title="将factor转化为其它类型"></a>将factor转化为其它类型</h2><h3 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">d&lt;-c(<span class="number">1</span>,<span class="number">10</span>) <span class="comment">#建立向量a,值为1,10</span></div><div class="line">d</div><div class="line"><span class="comment">## [1]  1 10</span></div><div class="line">fac&lt;-factor(d)</div><div class="line">fac <span class="comment">#提取向量a的因子数，并赋给fac</span></div><div class="line"><span class="comment">## [1] 1  10</span></div><div class="line"><span class="comment">## Levels: 1 10</span></div><div class="line">fac_value&lt;-as.numeric(fac) <span class="comment">#将fac转化为数值</span></div><div class="line">fac</div><div class="line"><span class="comment">## [1] 1  10</span></div><div class="line"><span class="comment">## Levels: 1 10</span></div></pre></td></tr></table></figure>
<h3 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">e&lt;-c(<span class="string">"Male"</span>,<span class="string">"Female"</span>)</div><div class="line">e  <span class="comment">#建立向量e，为字符型</span></div><div class="line"><span class="comment">## [1] "Male"   "Female"</span></div><div class="line">fac_e&lt;-factor(e);fac_e <span class="comment">#提取向量b的因子，并且赋给fac2</span></div><div class="line"><span class="comment">## [1] Male   Female</span></div><div class="line"><span class="comment">## Levels: Female Male</span></div><div class="line">fac_e_value&lt;-as.numeric(fac_e)<span class="comment">#将fac_e转化为数值型</span></div><div class="line">fac_e_value</div><div class="line"><span class="comment">## [1] 2 1</span></div></pre></td></tr></table></figure>
<h3 id="将factor转换为数值"><a href="#将factor转换为数值" class="headerlink" title="将factor转换为数值"></a>将factor转换为数值</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">as.numeric(as.character(fac))</div><div class="line"><span class="comment">## [1]  1 10</span></div></pre></td></tr></table></figure>
<p>上述命令将fac(1,10)先转化为字符型，接着将字符型转化为数值型，如果直接将factor转换为numeric，容易出错，一般情况下就是先看factor转换为character，再转换为numeric。</p>
<h2 id="将其它数据转换为factor"><a href="#将其它数据转换为factor" class="headerlink" title="将其它数据转换为factor"></a>将其它数据转换为factor</h2><h3 id="将字符转换为因子"><a href="#将字符转换为因子" class="headerlink" title="将字符转换为因子"></a>将字符转换为因子</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">a &lt;- c(<span class="string">"green"</span>,<span class="string">"blue"</span>,<span class="string">"green"</span>,<span class="string">"yellow"</span>)</div><div class="line">a &lt;- factor(a)</div><div class="line">levels(a) &lt;- c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</div><div class="line">ff &lt;- factor(c(<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,labels=c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)))</div><div class="line">ff</div><div class="line"></div><div class="line"><span class="comment">##                         labels1 labels2 labels3 </span></div><div class="line"><span class="comment">##       A       BC       1       23 </span></div><div class="line"><span class="comment">## Levels: 1 2 3 A B C</span></div></pre></td></tr></table></figure>
<h3 id="将数值转换为因子"><a href="#将数值转换为因子" class="headerlink" title="将数值转换为因子"></a>将数值转换为因子</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">b &lt;- c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>)</div><div class="line">b &lt;- factor(b)</div><div class="line">b</div><div class="line"></div><div class="line"><span class="comment">## [1] 1 2 3 1</span></div><div class="line"><span class="comment">## Levels: 1 2 3</span></div></pre></td></tr></table></figure>
<h3 id="提取可能的factor"><a href="#提取可能的factor" class="headerlink" title="提取可能的factor"></a>提取可能的factor</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">ff &lt;- factor(c(<span class="number">2</span>,<span class="number">4</span>),levels=<span class="number">2</span>:<span class="number">5</span>)</div><div class="line">ff</div><div class="line"></div><div class="line"><span class="comment">## [1] 2 4</span></div><div class="line"><span class="comment">## Levels: 2 3 4 5</span></div><div class="line"></div><div class="line">levels(ff)</div><div class="line"></div><div class="line"><span class="comment">## [1] "2" "3" "4" "5"</span></div></pre></td></tr></table></figure>
<h3 id="将连续型数据转换factor"><a href="#将连续型数据转换factor" class="headerlink" title="将连续型数据转换factor"></a>将连续型数据转换factor</h3><p>以<code>PlantGrowth</code>数据集为例说明，先看一下这个数据集：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">pg &lt;- PlantGrowth[c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">11</span>,<span class="number">21</span>,<span class="number">22</span>),]</div><div class="line">pg</div><div class="line"><span class="comment"># weight group</span></div><div class="line"><span class="comment"># 1    4.17  ctrl</span></div><div class="line"><span class="comment"># 2    5.58  ctrl</span></div><div class="line"><span class="comment"># 11   4.81  trt1</span></div><div class="line"><span class="comment"># 21   6.31  trt2</span></div><div class="line"><span class="comment"># 22   5.12  trt2</span></div></pre></td></tr></table></figure>
<p>在这个案例中，我们使用<code>cut()</code>函数把一个连续型变量<code>weight</code>转化为分类变量<code>wtclass</code>，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">pg$wtclass &lt;- cut(pg$weight,breaks=c(<span class="number">0</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="literal">Inf</span>))</div><div class="line">pg</div><div class="line"><span class="comment"># weight group wtclass</span></div><div class="line"><span class="comment"># 1    4.17  ctrl   (0,5]</span></div><div class="line"><span class="comment"># 2    5.58  ctrl   (5,6]</span></div><div class="line"><span class="comment"># 11   4.81  trt1   (0,5]</span></div><div class="line"><span class="comment"># 21   6.31  trt2 (6,Inf]</span></div><div class="line"><span class="comment"># 22   5.12  trt2   (5,6]</span></div></pre></td></tr></table></figure>
<p>我们为三个类设定了四个边界值，边界值可以包括正无穷(Inf)和负无穷(-Inf)，如果一个值落在我们规定的区间外，它的类别将被设定为NA（缺失值），<code>cut()</code>函数的结果是一个因素，并且因子水平的名称是以生成的区间命名的，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; str(pg)</div><div class="line"><span class="string">'data.frame'</span>:	<span class="number">5</span> obs. of  <span class="number">3</span> variables:</div><div class="line"> $ weight : num  <span class="number">4.17</span> <span class="number">5.58</span> <span class="number">4.81</span> <span class="number">6.31</span> <span class="number">5.12</span></div><div class="line"> $ group  : Factor w/ <span class="number">3</span> levels <span class="string">"ctrl"</span>,<span class="string">"trt1"</span>,..: <span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">3</span></div><div class="line"> $ wtclass: Factor w/ <span class="number">3</span> levels <span class="string">"(0,5]"</span>,<span class="string">"(5,6]"</span>,..: <span class="number">1</span> <span class="number">2</span> <span class="number">1</span> <span class="number">3</span> <span class="number">2</span></div></pre></td></tr></table></figure>
<p>但是这个区间名称明显不太方便，我们可以更改一下，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">pg$wtclass &lt;-cut(pg$weight,breaks=c(<span class="number">0</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="literal">Inf</span>),</div><div class="line">                labels=c(<span class="string">"Small"</span>,<span class="string">"Medium"</span>,<span class="string">"Large"</span>))</div><div class="line"><span class="comment"># &gt; pg</span></div><div class="line"><span class="comment"># weight group wtclass</span></div><div class="line"><span class="comment"># 1    4.17  ctrl   Small</span></div><div class="line"><span class="comment"># 2    5.58  ctrl  Medium</span></div><div class="line"><span class="comment"># 11   4.81  trt1   Small</span></div><div class="line"><span class="comment"># 21   6.31  trt2   Large</span></div><div class="line"><span class="comment"># 22   5.12  trt2  Medium</span></div></pre></td></tr></table></figure>
<p><code>cut()</code>函数生成的区间是左开右闭的，换句话说，它们不会包含最小值，但是它们包含了最大值，对于值最小的一类，可以通常设置参数<code>include.lowest=TRUE</code>来实现，这样它们就能同时包含最小值和最大值了，如果要让生成的区间是左闭右开的，需要设定参数<code>right=FALSE</code>，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pg$wtclass &lt;- cut(pg$weight,breaks=c(<span class="number">0</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="literal">Inf</span>),right=<span class="literal">FALSE</span>)</div></pre></td></tr></table></figure>
<p>如果要更改不同因子的名称，例如将Small改为A，Medium改为B，Large改为C，那么就需要car中的recode函数，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">head(pg)</div><div class="line"><span class="comment"># weight group wtclass</span></div><div class="line"><span class="comment"># 1    4.17  ctrl   Small</span></div><div class="line"><span class="comment"># 2    5.58  ctrl  Medium</span></div><div class="line"><span class="comment"># 11   4.81  trt1   Small</span></div><div class="line"><span class="comment"># 21   6.31  trt2   Large</span></div><div class="line"><span class="comment"># 22   5.12  trt2  Medium</span></div><div class="line"><span class="keyword">library</span>(car)</div><div class="line">pg$wtclass &lt;- recode(pg$wtclass,<span class="string">"'Small'='A';'Medium'='B';'Large'='C'"</span>)</div><div class="line">head(pg)</div><div class="line"><span class="comment"># weight group wtclass</span></div><div class="line"><span class="comment"># 1    4.17  ctrl       A</span></div><div class="line"><span class="comment"># 2    5.58  ctrl       B</span></div><div class="line"><span class="comment"># 11   4.81  trt1       A</span></div><div class="line"><span class="comment"># 21   6.31  trt2       C</span></div><div class="line"><span class="comment"># 22   5.12  trt2       B</span></div></pre></td></tr></table></figure>
<h3 id="生成指定的factor"><a href="#生成指定的factor" class="headerlink" title="生成指定的factor"></a>生成指定的factor</h3><h4 id="seq"><a href="#seq" class="headerlink" title="seq()"></a>seq()</h4><p>在R的向量笔记中，提到了seq()函数用来生成某一条件的向量，这个函数在生成特定因子方面也有很重要的作用，用法为<code>seq(length=, from=, to=)</code>，其中，length:指定生成个数，from:是指开始生成的点，to:截止点。如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">seq(length=<span class="number">10</span>,from=<span class="number">10</span>,to=<span class="number">100</span>) <span class="comment"># 生成从10到100的向量，一共10个</span></div><div class="line"><span class="comment">##  [1]10  20  3040  50  6070  80  90 100</span></div><div class="line"><span class="comment"># 上述命令等价于</span></div><div class="line"></div><div class="line">seq(<span class="number">10</span>,<span class="number">100</span>,<span class="number">10</span>)</div><div class="line"><span class="comment">##  [1]10  20  3040  50  6070  80  90 100</span></div><div class="line"></div><div class="line">seq(<span class="number">1</span>,<span class="number">10</span>,by=<span class="number">2</span>)</div><div class="line"><span class="comment">## [1] 1 3 5 7 9</span></div><div class="line"></div><div class="line">seq(<span class="number">1</span>,<span class="number">10</span>,length=<span class="number">6</span>)</div><div class="line"><span class="comment">## [1]  1.02.8  4.6  6.48.2 10.0</span></div><div class="line"></div><div class="line">sequence(<span class="number">2</span>:<span class="number">3</span>) <span class="comment">#产生以 2 和 3 结尾的序列数据</span></div><div class="line"><span class="comment">## [1] 1 2 1 2 3</span></div></pre></td></tr></table></figure>
<h4 id="rep"><a href="#rep" class="headerlink" title="rep()"></a>rep()</h4><p>用法：<code>rep(P，N)</code>，表示重复生成P值N次，例如rep(a1:a2,a1:a2) #重复a1到a2，按a1产生a1次，按a2产生a2次，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">rep(<span class="number">1</span>,<span class="number">10</span>)</div><div class="line"><span class="comment">##  [1] 1 1 1 1 1 1 1 1 1 1</span></div><div class="line"></div><div class="line">rep(<span class="number">1</span>:<span class="number">5</span>,each=<span class="number">2</span>, times=<span class="number">2</span>) <span class="comment">#重复1到5，每个元素重复二次，整个数列重复两次</span></div><div class="line"><span class="comment">##  [1] 1 1 2 2 3 3 4 4 5 5 1 1 2 2 3 3 4 4 5 5</span></div><div class="line"></div><div class="line">rep(<span class="number">1</span>:<span class="number">3</span>,<span class="number">1</span>:<span class="number">3</span>) <span class="comment"># 1重复1次，2重复2次，3重复3次</span></div><div class="line"><span class="comment">## [1] 1 2 2 3 3 3</span></div></pre></td></tr></table></figure>
<h4 id="gl函数"><a href="#gl函数" class="headerlink" title="gl函数"></a>gl函数</h4><p>生成规则的因子序列，gl(k,n)：k为水平数据，n是每个水平重复的次数。如下所示： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">gl(<span class="number">3</span>,<span class="number">5</span>) <span class="comment">#生成5个1，5个2，5个3，</span></div><div class="line"></div><div class="line"><span class="comment">##  [1] 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3</span></div><div class="line"><span class="comment">## Levels: 1 2 3</span></div><div class="line"></div><div class="line">gl(<span class="number">3</span>,<span class="number">5</span>,length=<span class="number">30</span>) <span class="comment">#生成5个1，5个2，5个3，循环到30个，即：</span></div><div class="line"></div><div class="line"><span class="comment">##  [1] 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3</span></div><div class="line"><span class="comment">## Levels: 1 2 3</span></div><div class="line"></div><div class="line">gl(<span class="number">2</span>,<span class="number">6</span>,label=c(<span class="string">"Male"</span>,<span class="string">"Female"</span>)) <span class="comment">#生成Male与Female两个因子，各6个，共12个数据：</span></div><div class="line"></div><div class="line"><span class="comment">##  [1] MaleMale   Male   MaleMale   Male   Female Female Female Female</span></div><div class="line"><span class="comment">## [11] Female Female</span></div><div class="line"><span class="comment">## Levels: Male Female</span></div></pre></td></tr></table></figure>
<h2 id="有序因子"><a href="#有序因子" class="headerlink" title="有序因子"></a>有序因子</h2><p>因子没有顺序，但也可以人为指定顺序。例如糖尿病类型Diabetes(Type1,Type2)，就是2种类型没有顺序，但病人状态status(Poor,Imporved,Excellent)是有顺序的。案例如下：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">patientID&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</div><div class="line">age&lt;-c(<span class="number">25</span>,<span class="number">34</span>,<span class="number">28</span>,<span class="number">52</span>)</div><div class="line">diabetes&lt;-c(<span class="string">"Type1"</span>,<span class="string">"Type2"</span>,<span class="string">"Type1"</span>,<span class="string">"Type1"</span>)</div><div class="line">status&lt;-c(<span class="string">"Poor"</span>,<span class="string">"Improved"</span>,<span class="string">"Excellent"</span>,<span class="string">"Poor"</span>)</div><div class="line">diabetes&lt;-factor(diabetes) <span class="comment">#提取不同糖尿病类型的因子</span></div><div class="line">status&lt;-factor(status,order=<span class="literal">TRUE</span>) <span class="comment"># 提取因子，并且有序</span></div><div class="line">patientdata&lt;-data.frame(patientID,age,diabetes,status)</div><div class="line">patientdata</div><div class="line"></div><div class="line"><span class="comment">##   patientID age diabetes    status</span></div><div class="line"><span class="comment">## 11  25    Type1Poor</span></div><div class="line"><span class="comment">## 22  34    Type2Improved</span></div><div class="line"><span class="comment">## 33  28    Type1 Excellent</span></div><div class="line"><span class="comment">## 44  52    Type1Poor</span></div></pre></td></tr></table></figure>
<p> 注：字符型向量的因子水平默认依字母顺序创建。但在实际情况中并不常用，而是通过levels选项来指定因子顺序，使用factor(status, order = TRUE, levels = c(“Poor”, “Improved”, “Excellent”))，各个水平的赋值就为1 = Poor, 2 = Improved, 3 = Excellent。或者是通过下面代码实现：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">factor(status, ordered = <span class="literal">TRUE</span>, levels = c(<span class="string">"Poor"</span>, <span class="string">"Improved"</span>, <span class="string">"Excellent"</span>))</div><div class="line"></div><div class="line"><span class="comment">## [1] Poor      ImprovedExcellent Poor     </span></div><div class="line"><span class="comment">## Levels: Poor &lt; Improved &lt; Excellent</span></div><div class="line"></div><div class="line">str(patientdata)<span class="comment">#显示数据框的结构</span></div><div class="line"></div><div class="line"><span class="comment">## 'data.frame':    4 obs. of  4 variables:</span></div><div class="line"><span class="comment">##  $ patientID: num  1 2 3 4</span></div><div class="line"><span class="comment">##  $ age      : num25 34 28 52</span></div><div class="line"><span class="comment">##  $ diabetes : Factor w/ 2 levels "Type1","Type2": 1 2 1 1</span></div><div class="line"><span class="comment">##  $ status   : Ord.factor w/ 3 levels "Excellent"&lt;"Improved"&lt;..: 3 2 1 3</span></div><div class="line"></div><div class="line">summary(patientdata)</div><div class="line"></div><div class="line"><span class="comment">##    patientID         age         diabetes       status </span></div><div class="line"><span class="comment">##  Min.   :1.00Min.   :25.00   Type1:3Excellent:1  </span></div><div class="line"><span class="comment">##  1st Qu.:1.75   1st Qu.:27.25   Type2:1Improved :1  </span></div><div class="line"><span class="comment">##  Median :2.50   Median :31.00             Poor     :2  </span></div><div class="line"><span class="comment">##  Mean   :2.50Mean   :34.75                          </span></div><div class="line"><span class="comment">##  3rd Qu.:3.25   3rd Qu.:38.50                          </span></div><div class="line"><span class="comment">##  Max.   :4.00Max.   :52.00</span></div></pre></td></tr></table></figure>
<h2 id="factor的统计"><a href="#factor的统计" class="headerlink" title="factor的统计"></a>factor的统计</h2><p>如果一组数据有多个重复值，例如美国的每一个州都位于4个区域的中某一个，分别为东北，南、中北和西，则我们看一下内置的state数据集： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">head(state.region)</div><div class="line"></div><div class="line"><span class="comment">## [1] South West  West  South WestWest </span></div><div class="line"><span class="comment">## Levels: Northeast South North Central West</span></div><div class="line"></div><div class="line">table(state.region)</div><div class="line"></div><div class="line"><span class="comment">## state.region</span></div><div class="line"><span class="comment">##Northeast         South North Central          West </span></div><div class="line"><span class="comment">##9            16            12            13</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2017/04/01/R/数据类型1-向量/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/01/R/数据类型1-向量/" itemprop="url">R语言笔记之数据类型之向量</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-01T12:00:00+08:00">
                2017-04-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/" itemprop="url" rel="index">
                    <span itemprop="name">R</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,011
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  14
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="常见数据类型"><a href="#常见数据类型" class="headerlink" title="常见数据类型"></a>常见数据类型</h1><p>R拥有许多用于存储数据的对象类型，包括标量、向量、矩阵、数组、数据框和列表。它们在存储数据的类型、创建方式、结构复杂度，以及用于定位和访问其中个别元素的标记等方面均有所不同。下图给出了这些数据结构的一个示意图：</p>
<p><img src="https://pic-1256416512.cos.ap-chengdu.myqcloud.com/img/20190605153312.png" alt=""></p>
<h1 id="查看数据类型"><a href="#查看数据类型" class="headerlink" title="查看数据类型"></a>查看数据类型</h1><h2 id="class"><a href="#class" class="headerlink" title="class()"></a>class()</h2><p>使用class函数可以查看数据的类型，如下所示： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; x=c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</div><div class="line">&gt; class(x)</div><div class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></div><div class="line">&gt; x1&lt;-as.character(x)</div><div class="line">&gt; class(x1)</div><div class="line">[<span class="number">1</span>] <span class="string">"character"</span></div></pre></td></tr></table></figure>
<h1 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h1><p>常用函数如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">判断转换 类型转换函数 </div><div class="line">is.numeric() as.numeric() </div><div class="line">is.character() as.character() </div><div class="line">is.vector() as.vector() </div><div class="line">is.matrix() as.matrix() </div><div class="line">is.data.frame() as.data.frame() </div><div class="line">is.factor() as.factor() </div><div class="line">is.logical() as.logical()</div></pre></td></tr></table></figure>
<p>使用如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&gt; a &lt;- c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);a</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></div><div class="line">&gt; is.numeric(a)</div><div class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></div><div class="line">&gt; is.vector(a)</div><div class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></div><div class="line">&gt; a &lt;- as.character(a)</div><div class="line">&gt; a <span class="comment">#将a转化为字符串类型</span></div><div class="line">[<span class="number">1</span>] <span class="string">"1"</span> <span class="string">"2"</span> <span class="string">"3"</span></div><div class="line">&gt; is.numeric(a)</div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span></div><div class="line">&gt; is.vector(a)</div><div class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></div><div class="line">&gt; is.character(a)</div><div class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></div><div class="line">&gt; as.numeric(<span class="literal">FALSE</span>) <span class="comment">#逻辑型数据转化为0与1</span></div><div class="line">[<span class="number">1</span>] <span class="number">0</span></div><div class="line">&gt; as.numeric(<span class="literal">TRUE</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">1</span></div></pre></td></tr></table></figure>
<h1 id="向量"><a href="#向量" class="headerlink" title="向量"></a>向量</h1><h2 id="常见向量类型"><a href="#常见向量类型" class="headerlink" title="常见向量类型"></a>常见向量类型</h2><p>向量可以是数值，字符，逻辑等，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt; a&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,-<span class="number">3</span>,-<span class="number">4</span>);a <span class="comment">#数值型向量</span></div><div class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span> -<span class="number">3</span> -<span class="number">4</span></div><div class="line">&gt; b&lt;-c(<span class="string">"one"</span>,<span class="string">"two"</span>,<span class="string">"three"</span>);b <span class="comment">#字符型向量</span></div><div class="line">[<span class="number">1</span>] <span class="string">"one"</span>   <span class="string">"two"</span>   <span class="string">"three"</span></div><div class="line">&gt; c&lt;-c(<span class="literal">TRUE</span>,<span class="literal">TRUE</span>,<span class="literal">TRUE</span>,<span class="literal">FALSE</span>);c <span class="comment">#逻辑型向量</span></div><div class="line">[<span class="number">1</span>]  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span></div><div class="line">&gt; x&lt;-c(<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>);x</div><div class="line">[<span class="number">1</span>] <span class="number">5</span> <span class="number">4</span> <span class="number">2</span></div><div class="line">&gt; x[<span class="number">9</span>]&lt;-<span class="number">9</span>;x <span class="comment"># 当向量x不够长时，指定第9个元素为9,#自动将中间的元素补为NA</span></div><div class="line">[<span class="number">1</span>]  <span class="number">5</span>  <span class="number">4</span>  <span class="number">2</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span>  <span class="number">9</span></div></pre></td></tr></table></figure>
<h2 id="向量的下标"><a href="#向量的下标" class="headerlink" title="向量的下标"></a>向量的下标</h2><p>向量的元素下标取值是以1开始，例如：要前例中取x向量中值为1,则为x[2]，如果一个向量中有一个字符，则该向量的类型会变成字符，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; demo_1&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="string">'a'</span>)</div><div class="line">&gt; demo_1</div><div class="line">[<span class="number">1</span>] <span class="string">"1"</span> <span class="string">"2"</span> <span class="string">"a"</span></div><div class="line">&gt; mode(demo_1)</div><div class="line">[<span class="number">1</span>] <span class="string">"character"</span></div></pre></td></tr></table></figure>
<h2 id="向量的名称"><a href="#向量的名称" class="headerlink" title="向量的名称"></a>向量的名称</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; years &lt;- c(<span class="number">1960</span>,<span class="number">1964</span>,<span class="number">1976</span>,<span class="number">1994</span>)</div><div class="line">&gt; years</div><div class="line">[<span class="number">1</span>] <span class="number">1960</span> <span class="number">1964</span> <span class="number">1976</span> <span class="number">1994</span></div><div class="line">&gt; names(years)&lt;-c(<span class="string">"Kennedy"</span>, <span class="string">"Johnson"</span>, <span class="string">"Carter"</span>,<span class="string">"Clinton"</span>);years</div><div class="line">Kennedy Johnson  Carter Clinton </div><div class="line">   <span class="number">1960</span>    <span class="number">1964</span>    <span class="number">1976</span>    <span class="number">1994</span></div></pre></td></tr></table></figure>
<h2 id="向量元素的添加及合并"><a href="#向量元素的添加及合并" class="headerlink" title="向量元素的添加及合并"></a>向量元素的添加及合并</h2><p>常用函数为<code>c()</code>，<code>append()</code>，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">v1&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);v1</div><div class="line">v1_ft &lt;- c(<span class="literal">TRUE</span>, <span class="literal">TRUE</span>, <span class="literal">FALSE</span>)</div><div class="line">v1[v1_ft]</div><div class="line">v2&lt;-c(v1,<span class="number">55</span>);v2 </div><div class="line"><span class="comment">#格式为新向量&lt;-(原向量，新元素)</span></div><div class="line"><span class="comment">## [1]  12  3 55</span></div><div class="line">c(v2,v1) <span class="comment"># 向量的合并</span></div><div class="line"><span class="comment">## [1]  12  3 55  12  3</span></div><div class="line">append(v1,<span class="number">10</span>,after=<span class="number">3</span>) <span class="comment">#在第3个向量后面加入10</span></div><div class="line"><span class="comment">## [1]  12  3 10</span></div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt; v1&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);v1</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></div><div class="line">&gt; v1_ft &lt;- c(<span class="literal">TRUE</span>, <span class="literal">TRUE</span>, <span class="literal">FALSE</span>)</div><div class="line">&gt; v1[v1_ft]</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span></div><div class="line">&gt; v2&lt;-c(v1,<span class="number">55</span>);v2 </div><div class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span> <span class="number">55</span></div><div class="line">&gt; c(v2,v1) <span class="comment"># 向量的合并</span></div><div class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span> <span class="number">55</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span></div><div class="line">&gt; <span class="comment">## [1]  12  3 55  12  3</span></div><div class="line">&gt; append(v1,<span class="number">10</span>,after=<span class="number">3</span>) <span class="comment">#在第3个向量后面加入10</span></div><div class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span> <span class="number">10</span></div></pre></td></tr></table></figure>
<p>如果逻辑变量与数值在一起，则为转换成数值。TRUE转变成1 and FALSE 转变成 0，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; demo_2&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="literal">TRUE</span>);demo_2</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">1</span></div><div class="line">&gt; mode(demo_2)</div><div class="line">[<span class="number">1</span>] <span class="string">"numeric"</span></div></pre></td></tr></table></figure>
<p>在R语言中没有单一的整数、单一字符的概念，例如：<code>X&lt;-2</code>；<code>X&lt;-&#39;a&#39;</code>；R都是当作向量来处理，只是这个向量只包括单一值。</p>
<h2 id="向量批量序列的生成"><a href="#向量批量序列的生成" class="headerlink" title="向量批量序列的生成"></a>向量批量序列的生成</h2><h3 id="seq"><a href="#seq" class="headerlink" title="seq()"></a>seq()</h3><p>用法：<code>seq(length=, from=, to=)</code></p>
<p>length:指定生成个数；from:是指开始生成的点；to:截止点。如果不指定，则默认条件下：seq(N1,N2,BY=)，其中，n1：开始位置；n2：截止位置；by=指定间隔，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">seq(length=<span class="number">10</span>,from=<span class="number">10</span>,to=<span class="number">100</span>) <span class="comment"># 生成从10到100的向量，一共10个</span></div><div class="line"><span class="comment">##  [1]10  20  3040  50  6070  80  90 100</span></div><div class="line"></div><div class="line"><span class="comment"># 此命令等价于：</span></div><div class="line">seq(<span class="number">10</span>,<span class="number">100</span>,<span class="number">10</span>)</div><div class="line"><span class="comment">##  [1]10  20  3040  50  6070  80  90 100</span></div><div class="line">seq(<span class="number">1</span>,<span class="number">10</span>,by=<span class="number">2</span>)</div><div class="line"><span class="comment">## [1] 1 3 5 7 9</span></div><div class="line">seq(<span class="number">1</span>,<span class="number">10</span>,length=<span class="number">6</span>)</div><div class="line"><span class="comment">## [1]  1.02.8  4.6  6.48.2 10.0</span></div><div class="line">sequence(<span class="number">2</span>:<span class="number">3</span>) <span class="comment">#产生以 2 和 3 结尾的序列数据</span></div><div class="line"><span class="comment">## [1] 1 2 1 2 3</span></div></pre></td></tr></table></figure>
<h3 id="rep"><a href="#rep" class="headerlink" title="rep()"></a>rep()</h3><p>用法：1. rep(P，N) 重复生成P值N次；2.rep(a1:a2,a1:a2) #重复a1到a2，按a1产生a1次，按a2产生a2次，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">rep(<span class="number">1</span>,<span class="number">10</span>)</div><div class="line"><span class="comment">##  [1] 1 1 1 1 1 1 1 1 1 1</span></div><div class="line">rep(<span class="number">1</span>:<span class="number">5</span>,each=<span class="number">2</span>, times=<span class="number">2</span>) <span class="comment">#重复1到5，每个元素重复二次，整个数列重复两次</span></div><div class="line"><span class="comment">##  [1] 1 1 2 2 3 3 4 4 5 5 1 1 2 2 3 3 4 4 5 5</span></div><div class="line">rep(<span class="number">1</span>:<span class="number">3</span>,<span class="number">1</span>:<span class="number">3</span>) <span class="comment"># 1重复1次，2重复2次，3重复3次</span></div><div class="line"><span class="comment">## [1] 1 2 2 3 3 3</span></div></pre></td></tr></table></figure>
<h2 id="向量索引"><a href="#向量索引" class="headerlink" title="向量索引"></a>向量索引</h2><p>取子向量：通过下标实现</p>
<p>取某个元素：x[2];(如果X包括名称，注意:x[2]与x[[2]]的区别；</p>
<p>取某中几个：x[c(1,2,0)]</p>
<p>取某个/几个元素，利用-：x[-n]</p>
<h2 id="向量排序"><a href="#向量排序" class="headerlink" title="向量排序"></a>向量排序</h2><p>sort(); 输出排序后的结果；order()；输出排序后的各个向量位置，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">a&lt;-c(<span class="number">3</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">12</span>,<span class="number">19</span>)</div><div class="line">sort(a)</div><div class="line"><span class="comment">## [1]  03  9 12 19</span></div><div class="line">order(a)</div><div class="line"><span class="comment">## [1] 3 1 2 4 5</span></div><div class="line">a&lt;-c(<span class="number">3</span>,<span class="number">9</span>,<span class="number">0</span>,<span class="number">12</span>,<span class="number">19</span>)</div></pre></td></tr></table></figure>
<h2 id="向量运算"><a href="#向量运算" class="headerlink" title="向量运算"></a>向量运算</h2><h3 id="相加"><a href="#相加" class="headerlink" title="相加"></a>相加</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; Demo_5 &lt;- <span class="number">1</span>:<span class="number">3</span>;Demo_5</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></div><div class="line">&gt; Demo_6 &lt;- <span class="number">2</span>:<span class="number">5</span>;Demo_6</div><div class="line">[<span class="number">1</span>] <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></div><div class="line">&gt; Demo_7 &lt;- Demo_6+ Demo_5;Demo_7</div><div class="line">Warning message:</div><div class="line">In Demo_6 + Demo_5 :</div><div class="line">  longer object length is not a multiple of shorter object length</div><div class="line">[<span class="number">1</span>] <span class="number">3</span> <span class="number">5</span> <span class="number">7</span> <span class="number">6</span></div></pre></td></tr></table></figure>
<h2 id="向量：提取满足某一条件的向量"><a href="#向量：提取满足某一条件的向量" class="headerlink" title="向量：提取满足某一条件的向量"></a>向量：提取满足某一条件的向量</h2><p>常见用法如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">x[n] 第n个元素</div><div class="line">x[-n] 除了第n个元素的x</div><div class="line">x[<span class="number">1</span>:n] 前n个元素</div><div class="line">x[-(<span class="number">1</span>:n)] 第n+<span class="number">1</span>至最后的元素</div><div class="line">x[c(<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>) ] 指定元素</div><div class="line">x[<span class="string">"name"</span>] 名为<span class="string">"name"</span>的元素</div><div class="line">x[x &gt; <span class="number">3</span>] 所有大于<span class="number">3</span>的元素</div><div class="line">x[x &gt; <span class="number">3</span> &amp; x &lt; <span class="number">5</span>] 区间(<span class="number">3</span>,<span class="number">5</span>)的元素</div><div class="line">x[x %<span class="keyword">in</span>% c (<span class="string">"a"</span>,<span class="string">"and"</span>,<span class="string">"the"</span>)] 给定组中的元素</div></pre></td></tr></table></figure>
<p>具体案例使用如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">x&lt;-c(<span class="number">10</span>:<span class="number">1</span>);x</div><div class="line"><span class="comment">##  [1] 109  8  76  5  43  2  1</span></div><div class="line">x[x==<span class="number">3</span>]&lt;-<span class="number">25</span>;x <span class="comment">#将x中等于3的元素变为25</span></div><div class="line"><span class="comment">##  [1] 109  8  76  5  4 252  1</span></div><div class="line">x[x=<span class="number">1</span>]&lt;-<span class="number">12</span>;x <span class="comment">#将x的第1个元素数值变为12</span></div><div class="line"><span class="comment">##  [1] 129  8  76  5  4 252  1</span></div><div class="line">letters[<span class="number">1</span>:<span class="number">30</span>] <span class="comment"># 产生字母序列</span></div><div class="line"><span class="comment">##  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q"</span></div><div class="line"><span class="comment">## [18] "r" "s" "t" "u" "v" "w" "x" "y" "z" NA  NA  NA  NA</span></div><div class="line">a &lt;- c(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">3</span>);a</div><div class="line"><span class="comment">##  [1] 2 3 4 2 5 1 6 3 2 5 8 5 7 3</span></div><div class="line">which.max(a) <span class="comment"># 找出最大元素的下标</span></div><div class="line"><span class="comment">## [1] 11</span></div><div class="line">which.min(a) <span class="comment"># 找出大小的元素下标</span></div><div class="line"><span class="comment">## [1] 6</span></div><div class="line">a[which.max(a)] <span class="comment"># 找出最大的元素</span></div><div class="line"><span class="comment">## [1] 8</span></div><div class="line">which(a==<span class="number">2</span>) <span class="comment"># 等于2的元素的下标</span></div><div class="line"><span class="comment">## [1] 1 4 9</span></div><div class="line">a[which(a==<span class="number">2</span>)] <span class="comment"># 等于2的元素</span></div><div class="line"><span class="comment">## [1] 2 2 2</span></div><div class="line">which(a&gt;<span class="number">5</span>) <span class="comment"># 大于5的元素的下标</span></div><div class="line"><span class="comment">## [1]  7 11 13</span></div><div class="line">a[which(a&gt;<span class="number">5</span>)] <span class="comment"># 大于5的元素</span></div><div class="line"><span class="comment">## [1] 6 8 7</span></div></pre></td></tr></table></figure>
<p>再看一案例</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt; data &lt;- <span class="number">1</span>:<span class="number">100</span></div><div class="line">&gt; data[data &gt; <span class="number">20</span>]</div><div class="line"><span class="comment"># 取data 中大于20 的对象出来</span></div><div class="line"> [<span class="number">1</span>]  <span class="number">21</span>  <span class="number">22</span>  <span class="number">23</span>  <span class="number">24</span>  <span class="number">25</span>  <span class="number">26</span>  <span class="number">27</span>  <span class="number">28</span>  <span class="number">29</span>  <span class="number">30</span>  <span class="number">31</span>  <span class="number">32</span>  <span class="number">33</span>  <span class="number">34</span>  <span class="number">35</span>  <span class="number">36</span>  <span class="number">37</span>  <span class="number">38</span>  <span class="number">39</span>  <span class="number">40</span>  <span class="number">41</span>  <span class="number">42</span>  <span class="number">43</span>  <span class="number">44</span></div><div class="line">[<span class="number">25</span>]  <span class="number">45</span>  <span class="number">46</span>  <span class="number">47</span>  <span class="number">48</span>  <span class="number">49</span>  <span class="number">50</span>  <span class="number">51</span>  <span class="number">52</span>  <span class="number">53</span>  <span class="number">54</span>  <span class="number">55</span>  <span class="number">56</span>  <span class="number">57</span>  <span class="number">58</span>  <span class="number">59</span>  <span class="number">60</span>  <span class="number">61</span>  <span class="number">62</span>  <span class="number">63</span>  <span class="number">64</span>  <span class="number">65</span>  <span class="number">66</span>  <span class="number">67</span>  <span class="number">68</span></div><div class="line">[<span class="number">49</span>]  <span class="number">69</span>  <span class="number">70</span>  <span class="number">71</span>  <span class="number">72</span>  <span class="number">73</span>  <span class="number">74</span>  <span class="number">75</span>  <span class="number">76</span>  <span class="number">77</span>  <span class="number">78</span>  <span class="number">79</span>  <span class="number">80</span>  <span class="number">81</span>  <span class="number">82</span>  <span class="number">83</span>  <span class="number">84</span>  <span class="number">85</span>  <span class="number">86</span>  <span class="number">87</span>  <span class="number">88</span>  <span class="number">89</span>  <span class="number">90</span>  <span class="number">91</span>  <span class="number">92</span></div><div class="line">[<span class="number">73</span>]  <span class="number">93</span>  <span class="number">94</span>  <span class="number">95</span>  <span class="number">96</span>  <span class="number">97</span>  <span class="number">98</span>  <span class="number">99</span> <span class="number">100</span></div></pre></td></tr></table></figure>
<p>通过方括号中的data &gt; 20 ，实现了我们想要的效果，具体是如何实现的呢？ </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; data &gt; <span class="number">20</span></div><div class="line">  [<span class="number">1</span>] <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span></div><div class="line"> [<span class="number">17</span>] <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></div><div class="line"> [<span class="number">33</span>]  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></div><div class="line"> [<span class="number">49</span>]  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></div><div class="line"> [<span class="number">65</span>]  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></div><div class="line"> [<span class="number">81</span>]  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></div><div class="line"> [<span class="number">97</span>]  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></div></pre></td></tr></table></figure>
<p>data &gt; 20 是一个表示式，它的返回值是一个有TRUE和FALSE 构成的逻辑向量，最终只选取了TRUE对应的元素，所以data 中大于20的元素被选了出来。通过下标和逻辑值两种方式，可以满足我们绝大部分的需求，但是有时候，我们只是想知道符合条件的值对应的下标，这个时候which 函数就派上了用场，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; which(letters == <span class="string">"a"</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">1</span></div></pre></td></tr></table></figure>
<p><code>==</code>操作符用来判断字符串相等，which 函数返回对应的下标，letters 这个向量中，第一个元素就是字母a, 所以返回值为1，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; letters</div><div class="line"> [<span class="number">1</span>] <span class="string">"a"</span> <span class="string">"b"</span> <span class="string">"c"</span> <span class="string">"d"</span> <span class="string">"e"</span> <span class="string">"f"</span> <span class="string">"g"</span> <span class="string">"h"</span> <span class="string">"i"</span> <span class="string">"j"</span> <span class="string">"k"</span> <span class="string">"l"</span> <span class="string">"m"</span> <span class="string">"n"</span> <span class="string">"o"</span> <span class="string">"p"</span> <span class="string">"q"</span> <span class="string">"r"</span> <span class="string">"s"</span> <span class="string">"t"</span> <span class="string">"u"</span> <span class="string">"v"</span> <span class="string">"w"</span> <span class="string">"x"</span></div><div class="line">[<span class="number">25</span>] <span class="string">"y"</span> <span class="string">"z"</span></div><div class="line">&gt; which(letters %<span class="keyword">in</span>% c(<span class="string">"a"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>))</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">4</span> <span class="number">5</span></div></pre></td></tr></table></figure>
<p><code>%in%</code>操作符用来判断操作符左边的向量中的元素是否位于操作符右边的向量中，通过这种集合操作，可以方便的一次返回多个下标，使用subset函数也可以提取满足某一条件的向量元素，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; x &lt;- c(<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">20</span>)</div><div class="line">&gt; x</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">3</span> <span class="number">8</span> <span class="number">2</span> <span class="number">20</span></div><div class="line">&gt; subset(x,x&gt;<span class="number">5</span>)</div><div class="line">[<span class="number">1</span>] <span class="number">8</span> <span class="number">20</span></div></pre></td></tr></table></figure>
<h3 id="ifelse"><a href="#ifelse" class="headerlink" title="ifelse"></a>ifelse</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; x &lt;- c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>);x</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span></div><div class="line">&gt; ifelse(x != <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>) <span class="comment">#若果x的值不等于1，输出1，否则输出0</span></div><div class="line">[<span class="number">1</span>] <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span></div></pre></td></tr></table></figure>
<p>ifelse和<code>%in%</code>的联合使用，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&gt; ifelse(x %<span class="keyword">in</span>% <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>) <span class="comment">#若x的值包含在1里面，输出1，否者输出0</span></div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span></div><div class="line">&gt; ifelse(x %<span class="keyword">in</span>% <span class="number">1</span>, <span class="string">'yes'</span>, <span class="string">'no'</span>) <span class="comment">#若x的值包含在1里面，输出yes，否者输出no</span></div><div class="line">[<span class="number">1</span>] <span class="string">"yes"</span> <span class="string">"yes"</span> <span class="string">"yes"</span> <span class="string">"no"</span>  <span class="string">"no"</span>  <span class="string">"yes"</span> <span class="string">"yes"</span></div><div class="line">&gt; which(x %<span class="keyword">in</span>% <span class="number">1</span>) <span class="comment"># 输出x包含在1中值的位置</span></div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">6</span> <span class="number">7</span></div><div class="line">&gt; y &lt;- c(<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>)</div><div class="line">&gt; z &lt;- c(<span class="number">1</span>, <span class="number">4</span>)</div><div class="line">&gt; ifelse(y %<span class="keyword">in</span>% z, which(y==z), <span class="number">0</span> ) <span class="comment">##若y的值包含在z里面，输出y==z的位置，否者输出0</span></div><div class="line">[<span class="number">1</span>] <span class="number">0</span> <span class="number">4</span> <span class="number">0</span> <span class="number">4</span></div><div class="line">&gt; ifelse(y %<span class="keyword">in</span>% z, which(y==z), <span class="number">0</span> ) <span class="comment">##若y的值包含在z里面，输出y==z的位置，否者输出0，</span></div><div class="line">[<span class="number">1</span>] <span class="number">0</span> <span class="number">4</span> <span class="number">0</span> <span class="number">4</span></div><div class="line">&gt; <span class="comment">#此例中没有找到y==z的值， 输出为NA。</span></div><div class="line">&gt; ifelse(y %<span class="keyword">in</span>% z, <span class="number">1</span>, <span class="number">0</span> )</div><div class="line">[<span class="number">1</span>] <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></div></pre></td></tr></table></figure>
<h2 id="向量的比较"><a href="#向量的比较" class="headerlink" title="向量的比较"></a>向量的比较</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">x&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</div><div class="line">y&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</div><div class="line">z&lt;-c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>);</div><div class="line">x;y;z</div><div class="line"><span class="comment">## [1] 1 2 3</span></div><div class="line"><span class="comment">## [1] 1 2 3</span></div><div class="line"><span class="comment">## [1] 1 2 4</span></div><div class="line">x==y;x==z;y==z <span class="comment">#分别比较x,y,z的各个元素</span></div><div class="line"><span class="comment">## [1] TRUE TRUE TRUE</span></div><div class="line"><span class="comment">## [1]  TRUETRUE FALSE</span></div><div class="line"><span class="comment">## [1]  TRUETRUE FALSE</span></div><div class="line">identical(x,y);identical(x,z);identical(z,y) <span class="comment">#比较x,y,z的整体</span></div><div class="line"><span class="comment">## [1] TRUE</span></div><div class="line"><span class="comment">## [1] FALSE</span></div><div class="line"><span class="comment">## [1] FALSE</span></div><div class="line">all.equal(x,y) <span class="comment">#比较数值型变量是否“近似相等”</span></div><div class="line"><span class="comment">## [1] TRUE</span></div></pre></td></tr></table></figure>
<h2 id="两组数据的集合运算"><a href="#两组数据的集合运算" class="headerlink" title="两组数据的集合运算"></a>两组数据的集合运算</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="comment">#首先对集合A,B,C赋值</span></div><div class="line">&gt; A&lt;-<span class="number">1</span>:<span class="number">10</span></div><div class="line">&gt; B&lt;-seq(<span class="number">5</span>,<span class="number">15</span>,<span class="number">2</span>)</div><div class="line">&gt; C&lt;-<span class="number">1</span>:<span class="number">5</span></div><div class="line">&gt; union(A,B)<span class="comment">#求A和B的并集</span></div><div class="line"> [<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">13</span> <span class="number">15</span></div><div class="line">&gt; intersect(A,B)  <span class="comment">#求A和B的交集</span></div><div class="line">[<span class="number">1</span>] <span class="number">5</span> <span class="number">7</span> <span class="number">9</span></div><div class="line">&gt; setdiff(A,B) <span class="comment">#求A-B</span></div><div class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">6</span>  <span class="number">8</span> <span class="number">10</span></div><div class="line">&gt; setdiff(B,A) <span class="comment">#求B-A</span></div><div class="line">[<span class="number">1</span>] <span class="number">11</span> <span class="number">13</span> <span class="number">15</span></div><div class="line">&gt; setequal(A,B) <span class="comment"># 检验集合A,B是否相同</span></div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span></div><div class="line">&gt; is.element(<span class="number">12</span>,C) <span class="comment">#检验元素12是否属于集合C</span></div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span></div><div class="line">&gt; all(C%<span class="keyword">in</span>%A) <span class="comment">#检验集合A是否包含C</span></div><div class="line">[<span class="number">1</span>] <span class="literal">TRUE</span></div><div class="line">&gt; all(C%<span class="keyword">in</span>%B)</div><div class="line">[<span class="number">1</span>] <span class="literal">FALSE</span></div><div class="line">&gt; match(C,B)</div><div class="line">[<span class="number">1</span>] <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span>  <span class="number">1</span></div></pre></td></tr></table></figure>
<p>从上面可以看到<code>%in%</code>这个操作符只返回逻辑向量TRUE 或者FALSE，而且返回值应该与<code>%in%</code>这个操作符前面的向量程度相等。也就是说它相当于遍历了C里面的一个个元素，判断它们是否在B中出现过，然后返回是或者否即可。而<code>match(C,B)</code>的结果就很不一样了，它的返回结果同样与前面的向量等长，但是它并非返回逻辑向量，而是遍历了C里面的一个个元素，判断它们是否在B中出现过，如果出现就返回在B中的索引号，如果没有出现，就返回NA，还来看一个<code>match()</code>的案例，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">A&lt;-<span class="number">1</span>:<span class="number">10</span></div><div class="line">B&lt;-seq(<span class="number">5</span>,<span class="number">15</span>,<span class="number">2</span>)</div><div class="line">C&lt;-<span class="number">1</span>:<span class="number">5</span></div><div class="line">A</div><div class="line">B</div><div class="line">C</div><div class="line">match(A,B) <span class="comment">#遍历A中的元素，看A的元素是否在B里面出现过，如果A中的元素在B中出现，就返回此元素在B中的索引号</span></div><div class="line">match(B,A)</div><div class="line">match(A,C)</div><div class="line">match(C,A)</div><div class="line">match(B,C)</div><div class="line">match(C,B)</div></pre></td></tr></table></figure>
<p>运行结果如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&gt; A</div><div class="line"> [<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></div><div class="line">&gt; B</div><div class="line">[<span class="number">1</span>]  <span class="number">5</span>  <span class="number">7</span>  <span class="number">9</span> <span class="number">11</span> <span class="number">13</span> <span class="number">15</span></div><div class="line">&gt; C</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></div><div class="line">&gt; match(A,B)</div><div class="line"> [<span class="number">1</span>] <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span>  <span class="number">1</span> <span class="literal">NA</span>  <span class="number">2</span> <span class="literal">NA</span>  <span class="number">3</span> <span class="literal">NA</span></div><div class="line">&gt; match(B,A)</div><div class="line">[<span class="number">1</span>]  <span class="number">5</span>  <span class="number">7</span>  <span class="number">9</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span></div><div class="line">&gt; match(A,C)</div><div class="line"> [<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span></div><div class="line">&gt; match(C,A)</div><div class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></div><div class="line">&gt; match(B,C)</div><div class="line">[<span class="number">1</span>]  <span class="number">5</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span></div><div class="line">&gt; match(C,B)</div><div class="line">[<span class="number">1</span>] <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="literal">NA</span>  <span class="number">1</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/21/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><span class="page-number current">22</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">RVDSD</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">217</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">107</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RVDSD</span>

  
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_pv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>


<div class="BbeiAn-info">
	<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41018102000118" style="color:#909090;text-decoration:none;padding-left:0px;no-repeat left center" rel="nofollow">豫公网安备 41018102000118</a>	  <!--这里将图标作为了背景，以使得能和后面的文字在同一行-->
</div>

  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共859.6k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
