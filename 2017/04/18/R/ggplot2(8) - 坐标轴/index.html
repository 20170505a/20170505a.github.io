<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="ggplot2," />










<meta name="description" content="交换x轴与y轴12library(ggplot2)ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()  现在将上图中的x轴与y轴进行交换： 1ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()+coord_flip()  逆转转换后的原x轴变量  中图中交换了x轴与y轴后，发">
<meta name="keywords" content="ggplot2">
<meta property="og:type" content="article">
<meta property="og:title" content="ggplot2(8)-坐标轴">
<meta property="og:url" content="http://rvdsd.top/2017/04/18/R/ggplot2(8) - 坐标轴/index.html">
<meta property="og:site_name" content="RVDSD的个人笔记本">
<meta property="og:description" content="交换x轴与y轴12library(ggplot2)ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()  现在将上图中的x轴与y轴进行交换： 1ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()+coord_flip()  逆转转换后的原x轴变量  中图中交换了x轴与y轴后，发">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/lm8E3DAKd6.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/GkKFebe46g.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/0ljd32IkHh.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/2H9jKcKKGi.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/G33bjl5Efl.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/HCblg7iGHb.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/97e6ked7GH.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/I1871D7I23.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/LCHafLdfg8.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/D41CA2eFHe.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/AjkfHeLmk0.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/2Ii117jCd2.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/1KflEf9Jd9.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/0Bk7km1AEf.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/IBBgbg1ACg.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/8c0gjgLBLf.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/798cBIa36j.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/KCa0Em2Kek.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/D8DggLBCcH.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/1m3b9d71mF.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/J02IlKiGKh.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/J4CCb57eI9.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/8dlfdldFl3.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/B0332GLjCk.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/28afm5gHha.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/HDgEG2iF77.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/BHHCG2b70c.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/HLGIHFgHhi.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/H61cFK2IAe.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/mj1GHm17Lc.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/BC6KGmFE9c.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/990jeDgBcl.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/lI08LlEiG9.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/2gFAaBaJ8L.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/a4AFDa3iJ8.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/LjFAE6jLLd.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/F98gE7HAf8.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/kLfAfjjdA4.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/F2Gh50Be6E.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/27CkGfgAIH.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/29FDHeA2FJ.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/13c71HefJ0.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/l3lDKIb7BB.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/9F6eB6l65j.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/kJHK96Alk5.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/FH5aGFe8J7.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/Lma509bDJ6.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/9bDHA4eJec.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/39eae2IJD1.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/e8ddIgbd6D.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/4jd5Kal6lG.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/lEaIgg5dGj.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/i886m0EDD2.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/L32EkKL6Bl.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/8b57LgDJ64.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/dAfc0bL30E.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/456L80LBdm.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/97gbacGD6a.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/ikdkfh5E0c.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/ligKb4hd6J.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/Fa25hgbd3j.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/KdFGj6BmmK.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/gmKk6Kml7l.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/1Gi3F1f8fC.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/Ld36iJ6hCk.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/D1EKdB2HBc.png?imageslim">
<meta property="og:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/g4cmDFddBK.png?imageslim">
<meta property="og:updated_time" content="2018-09-01T04:21:30.617Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ggplot2(8)-坐标轴">
<meta name="twitter:description" content="交换x轴与y轴12library(ggplot2)ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()  现在将上图中的x轴与y轴进行交换： 1ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()+coord_flip()  逆转转换后的原x轴变量  中图中交换了x轴与y轴后，发">
<meta name="twitter:image" content="http://ortxpw68f.bkt.clouddn.com/professional/180831/lm8E3DAKd6.png?imageslim">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://rvdsd.top/2017/04/18/R/ggplot2(8) - 坐标轴/"/>





  <title>ggplot2(8)-坐标轴 | RVDSD的个人笔记本</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RVDSD的个人笔记本</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学习过程中的输出</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://rvdsd.top/2017/04/18/R/ggplot2(8) - 坐标轴/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="RVDSD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RVDSD的个人笔记本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ggplot2(8)-坐标轴</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-18T12:00:00+08:00">
                2017-04-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/" itemprop="url" rel="index">
                    <span itemprop="name">R</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,518
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  16
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="交换x轴与y轴"><a href="#交换x轴与y轴" class="headerlink" title="交换x轴与y轴"></a>交换x轴与y轴</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(ggplot2)</div><div class="line">ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/lm8E3DAKd6.png?imageslim" alt="mark"></p>
<p>现在将上图中的x轴与y轴进行交换：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()+coord_flip()</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/GkKFebe46g.png?imageslim" alt="mark"></p>
<p>逆转转换后的原x轴变量 </p>
<p>中图中交换了x轴与y轴后，发现x轴的分类变量从原来的从左向右排列变成了从下往上排列，但通过scale_x_discrete()参数可以进行逆转： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()+coord_flip()+scale_x_discrete(limits=rev(levels(PlantGrowth$group)))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/0ljd32IkHh.png?imageslim" alt="mark"></p>
<h2 id="设置连续型坐标轴的值域"><a href="#设置连续型坐标轴的值域" class="headerlink" title="设置连续型坐标轴的值域"></a>设置连续型坐标轴的值域</h2><h3 id="设置y轴的范围："><a href="#设置y轴的范围：" class="headerlink" title="设置y轴的范围："></a>设置y轴的范围：</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">p &lt;- ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()</div><div class="line">p</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/2H9jKcKKGi.png?imageslim" alt="mark"></p>
<h3 id="将y轴的范围扩大"><a href="#将y轴的范围扩大" class="headerlink" title="将y轴的范围扩大"></a>将y轴的范围扩大</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + ylim(<span class="number">0</span>,max(PlantGrowth$weight))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/G33bjl5Efl.png?imageslim" alt="mark"></p>
<h3 id="调整y轴的范围，并且在0-5-10处加上标记"><a href="#调整y轴的范围，并且在0-5-10处加上标记" class="headerlink" title="调整y轴的范围，并且在0,5,10处加上标记"></a>调整y轴的范围，并且在0,5,10处加上标记</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + scale_y_continuous(limits=c(<span class="number">0</span>,<span class="number">10</span>),breaks=c(<span class="number">0</span>,<span class="number">5</span>,<span class="number">10</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/HCblg7iGHb.png?imageslim" alt="mark"></p>
<p>breaks参数中可以加入多个标记，如下所示：</p>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/97e6ked7GH.png?imageslim" alt="mark"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + scale_y_continuous(limit=c(<span class="number">5</span>,<span class="number">6.5</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/I1871D7I23.png?imageslim" alt="mark"></p>
<h3 id="可以使用expand-limits-来单向扩展值域"><a href="#可以使用expand-limits-来单向扩展值域" class="headerlink" title="可以使用expand_limits()来单向扩展值域"></a>可以使用expand_limits()来单向扩展值域</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + expand_limits(y=<span class="number">4</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/LCHafLdfg8.png?imageslim" alt="mark"></p>
<h2 id="反转一条连续型坐标轴"><a href="#反转一条连续型坐标轴" class="headerlink" title="反转一条连续型坐标轴"></a>反转一条连续型坐标轴</h2><p>可以用scale_y_reverse()来翻转坐标轴：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()+scale_y_reverse()</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/D41CA2eFHe.png?imageslim" alt="mark"></p>
<p>通过指定y轴的坐标范围也可以实现以上效果，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()+ylim(<span class="number">6.5</span>,<span class="number">3.5</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/AjkfHeLmk0.png?imageslim" alt="mark"></p>
<p>翻转坐标轴并设定值域：</p>
<p>注意y轴数值的变化：</p>
<p>d<img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/2Ii117jCd2.png?imageslim" alt="mark"></p>
<h2 id="修改x轴上的类别的顺序"><a href="#修改x轴上的类别的顺序" class="headerlink" title="修改x轴上的类别的顺序"></a>修改x轴上的类别的顺序</h2><h3 id="基础绘图"><a href="#基础绘图" class="headerlink" title="基础绘图"></a>基础绘图</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">p &lt;- ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()</div><div class="line">p</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/1KflEf9Jd9.png?imageslim" alt="mark"></p>
<h3 id="改变x轴的顺序"><a href="#改变x轴的顺序" class="headerlink" title="改变x轴的顺序"></a>改变x轴的顺序</h3><p>可以发现，上述图的x轴顺序是ctr1,trt1,trt2，现在改变x轴的顺序：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + scale_x_discrete(limits=c(<span class="string">"trt1"</span>,<span class="string">"ctrl"</span>,<span class="string">"trt2"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/0Bk7km1AEf.png?imageslim" alt="mark"></p>
<p>上述代码改变x轴的顺序，将原来的顺序ctrl，trt1,trt2改变为trt1,ctrl,trt2。</p>
<h3 id="反转x轴有关类型的顺序"><a href="#反转x轴有关类型的顺序" class="headerlink" title="反转x轴有关类型的顺序"></a>反转x轴有关类型的顺序</h3><p>可以用scale_x_discrete(limits=rev())来实现，原图如下：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/IBBgbg1ACg.png?imageslim" alt="mark"></p>
<p>反转后的如下：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + scale_x_discrete(limits=rev(levels(PlantGrowth$group)))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/8c0gjgLBLf.png?imageslim" alt="mark"></p>
<h3 id="显示其中的两项"><a href="#显示其中的两项" class="headerlink" title="显示其中的两项"></a>显示其中的两项</h3><p>下面的代码则只显示ctrl与trt1两组的箱线图：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + scale_x_discrete(limits=c(<span class="string">"ctrl"</span>,<span class="string">"trt1"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/798cBIa36j.png?imageslim" alt="mark"></p>
<h2 id="设置x轴与y轴的缩放比例"><a href="#设置x轴与y轴的缩放比例" class="headerlink" title="设置x轴与y轴的缩放比例"></a>设置x轴与y轴的缩放比例</h2><p>先看一下原图：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(gcookbook)</div><div class="line">head(marathon,<span class="number">8</span>) <span class="comment"># 先查看一下数据集，数据集marathon中包括跑步者的全程马拉松和半程马拉松</span></div><div class="line"></div><div class="line"><span class="comment">##       Half     Full</span></div><div class="line"><span class="comment">## 1 66.80000 141.4833</span></div><div class="line"><span class="comment">## 2 67.88333 147.2667</span></div><div class="line"><span class="comment">## 3 68.70000 147.8833</span></div><div class="line"><span class="comment">## 4 69.90000 156.7500</span></div><div class="line"><span class="comment">## 5 69.95000 147.4333</span></div><div class="line"><span class="comment">## 6 70.11667 150.0000</span></div><div class="line"><span class="comment">## 7 70.63333 147.2333</span></div><div class="line"><span class="comment">## 8 70.65000 159.0000</span></div><div class="line"></div><div class="line">sp &lt;- ggplot(marathon,aes(x=Half,y=Full)) + geom_point()</div><div class="line">sp</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/KCa0Em2Kek.png?imageslim" alt="mark"></p>
<h3 id="缩小x轴与y轴"><a href="#缩小x轴与y轴" class="headerlink" title="缩小x轴与y轴"></a>缩小x轴与y轴</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sp + coord_fixed()</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/D8DggLBCcH.png?imageslim" alt="mark"></p>
<p>原图中的y轴与x轴的单位长度之比为并不为1:1,加了coord_fixed()之后，y轴长度与x轴长度的单位长度之比为1:1。通过下面的案例可以更加清楚地说明。</p>
<p>下面的代码把x轴与y轴的单位长度设置相同，即两个刻度之间间距都是30</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sp + coord_fixed()+</div><div class="line">  scale_y_continuous(breaks=seq(<span class="number">0</span>,<span class="number">420</span>,<span class="number">30</span>))+</div><div class="line">  scale_x_continuous(breaks=seq(<span class="number">0</span>,<span class="number">420</span>,<span class="number">30</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/1m3b9d71mF.png?imageslim" alt="mark"></p>
<h3 id="改变x轴与y轴的比例"><a href="#改变x轴与y轴的比例" class="headerlink" title="改变x轴与y轴的比例"></a>改变x轴与y轴的比例</h3><p>通过coord_fixed(ratio=1/2)参数实现，先看一下最基本的实现方法：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sp + coord_fixed(ratio=<span class="number">1</span>/<span class="number">2</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/J02IlKiGKh.png?imageslim" alt="mark"></p>
<p>上述的图形的坐标轴表示x轴是y轴的1/2，但并不直观，接下来进行更直观的设置。</p>
<p>把x轴的最小刻度设置为15，把y轴的最小刻度设置为30：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sp + coord_fixed(ratio=<span class="number">1</span>/<span class="number">2</span>)+</div><div class="line">  scale_y_continuous(breaks=seq(<span class="number">0</span>,<span class="number">420</span>,<span class="number">30</span>))+</div><div class="line">  scale_x_continuous(breaks=seq(<span class="number">0</span>,<span class="number">420</span>,<span class="number">15</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/J4CCb57eI9.png?imageslim" alt="mark"></p>
<h2 id="设置刻度线的位置"><a href="#设置刻度线的位置" class="headerlink" title="设置刻度线的位置"></a>设置刻度线的位置</h2><h3 id="原始绘图"><a href="#原始绘图" class="headerlink" title="原始绘图"></a>原始绘图</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/8dlfdldFl3.png?imageslim" alt="mark"></p>
<p>上述图形的坐标轴是均匀分布的，从3.5到6.0，每个间隔是0.5，现在进行更改。</p>
<h3 id="更改y轴的位置"><a href="#更改y轴的位置" class="headerlink" title="更改y轴的位置"></a>更改y轴的位置</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()+</div><div class="line">  scale_y_continuous(breaks=c(<span class="number">4</span>,<span class="number">4.25</span>,<span class="number">4.5</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/B0332GLjCk.png?imageslim" alt="mark"></p>
<p>可以看出来，上述的y轴坐刻度已经发生了改变，变成了4,4.25,4.5,5,6,8。其中scale_y_continuous()表示y轴的数据是连续型的。如果是离散型的则用scale_y_discrete()。</p>
<h3 id="不同类型的x轴刻度"><a href="#不同类型的x轴刻度" class="headerlink" title="不同类型的x轴刻度"></a>不同类型的x轴刻度</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ggplot(PlantGrowth,aes(x=group,y=weight))+geom_boxplot()+</div><div class="line">  scale_x_discrete(limits=c(<span class="string">"trt2"</span>,<span class="string">"ctrl"</span>),breaks=<span class="string">"ctrl"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/28afm5gHha.png?imageslim" alt="mark"></p>
<p>上述的代码表示，限定x轴上只显示trt2与ctrl两组数据，但只显示ctrl这个类型的标签。</p>
<h2 id="移除刻度线和标签"><a href="#移除刻度线和标签" class="headerlink" title="移除刻度线和标签"></a>移除刻度线和标签</h2><h3 id="基本图形"><a href="#基本图形" class="headerlink" title="基本图形"></a>基本图形</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">p &lt;- ggplot(PlantGrowth,aes(x=group,y=weight)) + geom_boxplot() <span class="comment"># 先看一下最基本的图形</span></div><div class="line">p</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/HDgEG2iF77.png?imageslim" alt="mark"></p>
<h3 id="移除y轴刻度"><a href="#移除y轴刻度" class="headerlink" title="移除y轴刻度"></a>移除y轴刻度</h3><p>用到的代码是theme(axis.text.y=element_blank())，即通过主题的应用，把y轴的刻度改为空白，即axis.text.y=element_blank()。 </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + theme(axis.text.y=element_blank())</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/BHHCG2b70c.png?imageslim" alt="mark"></p>
<p>上面的图形把y轴的刻度标签移除了，只是把数字移除了，但刻度还存在，可以进一步把y轴的刻度线移除，如下所示，现在将x轴与y轴的上的刻度全移除，与上面的一样，即axis.ticks=element_blank()</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + theme(axis.ticks=element_blank(),axis.text.y=element_blank())</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/HLGIHFgHhi.png?imageslim" alt="mark"></p>
<p>上述图形把y轴的刻度标签（数字）与刻度线移除了。</p>
<h3 id="移除刻度线，刻度标签，网格"><a href="#移除刻度线，刻度标签，网格" class="headerlink" title="移除刻度线，刻度标签，网格"></a>移除刻度线，刻度标签，网格</h3><p>可以通过一个参数把y轴的刻度线，刻度标签，网格线都移除，即scale_y_continuous(breaks=NULL)，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + scale_y_continuous(breaks=<span class="literal">NULL</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/H61cFK2IAe.png?imageslim" alt="mark"></p>
<h2 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h2><p>ggplot中的背景色默认的是灰色主题，有的时候与论文中排版不协调，可以更换为白色主题，需要的参数是theme_bw()，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + scale_y_continuous(breaks=<span class="literal">NULL</span>)+theme_bw()</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/mj1GHm17Lc.png?imageslim" alt="mark"></p>
<h2 id="修改刻度标签的文本"><a href="#修改刻度标签的文本" class="headerlink" title="修改刻度标签的文本"></a>修改刻度标签的文本</h2><h3 id="基本图形-1"><a href="#基本图形-1" class="headerlink" title="基本图形"></a>基本图形</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hwp &lt;- ggplot(heightweight,aes(x=ageYear,y=heightIn))+geom_point()</div><div class="line">hwp</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/BC6KGmFE9c.png?imageslim" alt="mark"></p>
<h3 id="更改y轴的坐标标签"><a href="#更改y轴的坐标标签" class="headerlink" title="更改y轴的坐标标签"></a>更改y轴的坐标标签</h3><p>上述图形的y轴表示的是身高（heightIn），数字表示的是身高的数值，现在可以将数值更改为另外一种标签，即把50,56,60,66,72位置的刻度标签从数值改为”Tiny”,”Really”,”Short”,”Medium”,”Tallish”，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hwp + scale_y_continuous(breaks=c(<span class="number">50</span>,<span class="number">56</span>,<span class="number">60</span>,<span class="number">66</span>,<span class="number">72</span>),labels=c(<span class="string">"Tiny"</span>,<span class="string">"Really\nshort"</span>,<span class="string">"Short"</span>,<span class="string">"Medium"</span>,<span class="string">"Tallish"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/990jeDgBcl.png?imageslim" alt="mark"></p>
<p>上述图形的y轴表示的内容与原始图形的一样，只是标签变了，其中<code>&quot;Really\nshort&quot;</code>表示换行。</p>
<h3 id="对标签的进一步优化"><a href="#对标签的进一步优化" class="headerlink" title="对标签的进一步优化"></a>对标签的进一步优化</h3><p>下面的代码是构建一个函数，将数值转化为英尺与英寸的格式</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">footinch_formatter &lt;- <span class="keyword">function</span>(x)&#123;</div><div class="line">  foot &lt;- floor(x/<span class="number">12</span>) <span class="comment"># floor()是取小数的整数部分</span></div><div class="line">  inch &lt;- x%%<span class="number">12</span> <span class="comment"># %%取余数</span></div><div class="line">  <span class="keyword">return</span>(paste(foot,<span class="string">"'"</span>,inch,<span class="string">"\""</span>,sep=<span class="string">""</span>))</div><div class="line">&#125;</div><div class="line"></div><div class="line">footinch_formatter(<span class="number">56</span>:<span class="number">64</span>) <span class="comment"># 案例</span></div><div class="line"></div><div class="line"><span class="comment">## [1] "4'8\""  "4'9\""  "4'10\"" "4'11\"" "5'0\""  "5'1\""  "5'2\""  "5'3\"" </span></div><div class="line"><span class="comment">## [9] "5'4\""</span></div></pre></td></tr></table></figure>
<h3 id="用labels参数将上述的函数传递给标签"><a href="#用labels参数将上述的函数传递给标签" class="headerlink" title="用labels参数将上述的函数传递给标签"></a>用labels参数将上述的函数传递给标签</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hwp + scale_y_continuous(labels=footinch_formatter)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/lI08LlEiG9.png?imageslim" alt="mark"></p>
<h3 id="设置刻度"><a href="#设置刻度" class="headerlink" title="设置刻度"></a>设置刻度</h3><p>从48到72，每个间隔4</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hwp + scale_y_continuous(breaks=seq(<span class="number">48</span>,<span class="number">72</span>,<span class="number">4</span>),labels=footinch_formatter)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/2gFAaBaJ8L.png?imageslim" alt="mark"></p>
<h3 id="其余的格式设定"><a href="#其余的格式设定" class="headerlink" title="其余的格式设定"></a>其余的格式设定</h3><p>可以把一些时间测试转化为HH:MM:SS(时:分:秒)或者其他类似的格式。如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">timeHMS_formatter &lt;- <span class="keyword">function</span>(x)&#123;</div><div class="line">  h &lt;- floor(x/<span class="number">60</span>) <span class="comment"># 小时部分</span></div><div class="line">  m &lt;- floor(x%%<span class="number">60</span>) <span class="comment"># 分钟部分</span></div><div class="line">  s &lt;- round(<span class="number">60</span>*(x%%<span class="number">1</span>)) <span class="comment"># 舍入到最接近的秒数</span></div><div class="line">  lab &lt;- sprintf(<span class="string">"%02d:%02d:%02d"</span>,h,m,s) <span class="comment"># 格式化数据</span></div><div class="line">  lab &lt;- gsub(<span class="string">"^00:"</span>,<span class="string">""</span>,lab) <span class="comment">#　如果开头存在00:则移除</span></div><div class="line">  lab &lt;- gsub(<span class="string">"^00"</span>,<span class="string">""</span>,lab) <span class="comment"># 如果形状存在0则移除</span></div><div class="line">  <span class="keyword">return</span>(lab)</div><div class="line">&#125;</div><div class="line"></div><div class="line">timeHMS_formatter(c(<span class="number">.33</span>,<span class="number">50</span>,<span class="number">51.25</span>,<span class="number">59.32</span>,<span class="number">60</span>,<span class="number">60.1</span>,<span class="number">130.23</span>))</div><div class="line"></div><div class="line"><span class="comment">## [1] ":20"      "50:00"    "51:15"    "59:19"    "01:00:00" "01:00:06"</span></div><div class="line"><span class="comment">## [7] "02:10:14"</span></div><div class="line"></div><div class="line">另外有scales包，里面有可以格式化的函数，如下所示：</div><div class="line"></div><div class="line"><span class="keyword">library</span>(scales)</div><div class="line">comma(<span class="number">1230092123</span>) <span class="comment"># 在千、百万、十亿等位置向数字添加逗号</span></div><div class="line"></div><div class="line"><span class="comment">## [1] "1,230,092,123"</span></div><div class="line"></div><div class="line">dollar(<span class="number">34.33</span>) <span class="comment"># 添加一个美元符号</span></div><div class="line"></div><div class="line"><span class="comment">## [1] "$34.33"</span></div><div class="line"></div><div class="line">percent(c(<span class="number">89.34</span>,<span class="number">0.034</span>)) <span class="comment">#　乘以100，传到到最接近的整数值，并加添一个百分号</span></div><div class="line"></div><div class="line"><span class="comment">## [1] "8,930%" "0%"</span></div><div class="line"></div><div class="line">scientific(<span class="number">1892321122232</span>) <span class="comment"># 科学计数法</span></div><div class="line"></div><div class="line"><span class="comment">## [1] "1.89e+12"</span></div></pre></td></tr></table></figure>
<h2 id="修改刻度标签的外观"><a href="#修改刻度标签的外观" class="headerlink" title="修改刻度标签的外观"></a>修改刻度标签的外观</h2><h3 id="基本图形-2"><a href="#基本图形-2" class="headerlink" title="基本图形"></a>基本图形</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">bp &lt;- ggplot(PlantGrowth,aes(x=group,y=weight)) +</div><div class="line">  geom_boxplot()</div><div class="line">bp</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/a4AFDa3iJ8.png?imageslim" alt="mark"></p>
<p>下面的命令将x轴上的三个分类变量ctrl,trt1,trt2的名称更改为Control,Treatment1,Treatment2:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">bp &lt;- ggplot(PlantGrowth,aes(x=group,y=weight)) +</div><div class="line">  geom_boxplot() +</div><div class="line">  scale_x_discrete(breaks=c(<span class="string">"ctrl"</span>,<span class="string">"trt1"</span>,<span class="string">"trt2"</span>),</div><div class="line">                   labels=c(<span class="string">"Control"</span>,<span class="string">"Treatment1"</span>,<span class="string">"Treatment2"</span>))</div><div class="line">bp</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/LjFAE6jLLd.png?imageslim" alt="mark"></p>
<h3 id="对标签进行旋转"><a href="#对标签进行旋转" class="headerlink" title="对标签进行旋转"></a>对标签进行旋转</h3><p>把x轴上的标签改为垂直，上图中的标签太长，可以将其从水平位置更改到垂直位置： angle参数用于更改标签的角度，下面是将标签更改为垂直： 其中hjust用于控制纵向对齐，vjust用于控制横向对齐。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bp + theme(axis.text.x = element_text(angle=<span class="number">90</span>,hjust=<span class="number">1</span>,vjust=<span class="number">0.5</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/F98gE7HAf8.png?imageslim" alt="mark">把把x轴上的标签旋转30度：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bp + theme(axis.text.x = element_text(angle=<span class="number">30</span>,hjust=<span class="number">1</span>,vjust=<span class="number">0.5</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/kLfAfjjdA4.png?imageslim" alt="mark"></p>
<h3 id="更改标签的大小，样式，字体"><a href="#更改标签的大小，样式，字体" class="headerlink" title="更改标签的大小，样式，字体"></a>更改标签的大小，样式，字体</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">bp + theme(axis.text.x = element_text(family=<span class="string">"Times"</span>,face=<span class="string">"italic"</span>,colour=<span class="string">"darkred"</span>,size=rel(<span class="number">0.9</span>)))</div><div class="line"><span class="comment">#上述命令中size=rel(0.9)表示当前主题基础字体大小的0.9</span></div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/F2Gh50Be6E.png?imageslim" alt="mark"></p>
<h3 id="设置坐标轴标签"><a href="#设置坐标轴标签" class="headerlink" title="设置坐标轴标签"></a>设置坐标轴标签</h3><p>下面命令是在x轴与y轴上分别添加文本：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hwp + xlab(<span class="string">"Age in years"</span>) + ylab(<span class="string">"Height in inches"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/27CkGfgAIH.png?imageslim" alt="mark"></p>
<p>上面的命令是通过xlab()与ylab()来实现的，另外一种方法是通过labs()来实现：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hwp + labs(x=<span class="string">"Age in years"</span>,y=<span class="string">"Height in inches"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/29FDHeA2FJ.png?imageslim" alt="mark"></p>
<h3 id="坐标标签换行"><a href="#坐标标签换行" class="headerlink" title="坐标标签换行"></a>坐标标签换行</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hwp + scale_x_continuous(name=<span class="string">"Age\n(years)"</span>) <span class="comment"># 换行</span></div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/13c71HefJ0.png?imageslim" alt="mark">4</p>
<h2 id="移除坐标轴标签"><a href="#移除坐标轴标签" class="headerlink" title="移除坐标轴标签"></a>移除坐标轴标签</h2><h3 id="原始图形"><a href="#原始图形" class="headerlink" title="原始图形"></a>原始图形</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">p &lt;- ggplot(PlantGrowth,aes(x=group,y=weight)) + geom_boxplot()</div><div class="line">p</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/l3lDKIb7BB.png?imageslim" alt="mark"></p>
<h3 id="去掉坐标的标签"><a href="#去掉坐标的标签" class="headerlink" title="去掉坐标的标签"></a>去掉坐标的标签</h3><p>下面的命令是将x轴的坐标标签去掉，即去掉了”group”字样：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + theme(axis.title.x=element_blank())</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/9F6eB6l65j.png?imageslim" alt="mark"></p>
<h3 id="使用xlab去除坐标标签"><a href="#使用xlab去除坐标标签" class="headerlink" title="使用xlab去除坐标标签"></a>使用xlab去除坐标标签</h3><p>上面的代码是将x轴的坐标标签去掉，下方没有空余空间，另外一种方式是将坐标标签去空白表示，有空余空间，如下所示： </p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + xlab(<span class="string">""</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/kJHK96Alk5.png?imageslim" alt="mark"></p>
<p>解释：当用them()来设置axis.title.x=element_blank()时，x轴或y轴标度的名称是不会改变的，只是没有显示其文本，并且不会为其留出空间，而用xlab(“”)时，则是将标度的名称改变成了空白，还是会为名称留出空间。</p>
<h2 id="修改坐标轴标签的外观"><a href="#修改坐标轴标签的外观" class="headerlink" title="修改坐标轴标签的外观"></a>修改坐标轴标签的外观</h2><h3 id="原始图形-1"><a href="#原始图形-1" class="headerlink" title="原始图形"></a>原始图形</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(gcookbook)</div><div class="line">hwp &lt;- ggplot(heightweight,aes(x=ageYear,y=heightIn))+geom_point()</div><div class="line">hwp</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/FH5aGFe8J7.png?imageslim" alt="mark"></p>
<p>现在将上述图形中的x轴坐标标签修改为深红色(darkred)，斜体(italic)，大小为14(size=14):</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hwp + theme(axis.title.x=element_text(face=<span class="string">"italic"</span>,colour=<span class="string">"darkred"</span>,size=<span class="number">14</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/Lma509bDJ6.png?imageslim" alt="mark"></p>
<p>将y轴的标签向左旋转0度（angle=0），斜体（italic）大小为14（size=14）</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hwp + ylab(<span class="string">"Height\n(inches)"</span>)+theme(axis.title.y=element_text(angle=<span class="number">0</span>,face=<span class="string">"italic"</span>,size=<span class="number">14</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/9bDHA4eJec.png?imageslim" alt="mark"></p>
<p>将y轴的标签向左旋转90度（angle=90,y轴标签的文字默认是水平的），斜体（italic），深红色（darkred），大小为14（size=14）</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hwp + ylab(<span class="string">"Height\n(inches)"</span>)+</div><div class="line">  theme(axis.title.y=element_text(angle=<span class="number">30</span>,face=<span class="string">"italic"</span>,colour=<span class="string">"darkred"</span>,size=<span class="number">14</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/39eae2IJD1.png?imageslim" alt="mark"></p>
<h2 id="沿坐标轴添加直线："><a href="#沿坐标轴添加直线：" class="headerlink" title="沿坐标轴添加直线："></a>沿坐标轴添加直线：</h2><h3 id="初始图形"><a href="#初始图形" class="headerlink" title="初始图形"></a>初始图形</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">p &lt;- ggplot(heightweight,aes(x=ageYear,y=heightIn)) + geom_point()</div><div class="line">p</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/e8ddIgbd6D.png?imageslim" alt="mark"></p>
<h3 id="沿坐标轴添加直线：-1"><a href="#沿坐标轴添加直线：-1" class="headerlink" title="沿坐标轴添加直线："></a>沿坐标轴添加直线：</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + theme(axis.line=element_line(colour=<span class="string">"black"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/4jd5Kal6lG.png?imageslim" alt="mark"></p>
<h2 id="更改主题"><a href="#更改主题" class="headerlink" title="更改主题"></a>更改主题</h2><p>如果绘图的主题在绘图区域的周围只有一条边，例如theme_bw()主题，则需要同时重置panel.border参数：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">p + theme_bw()+</div><div class="line">  theme(panel.border = element_blank(),</div><div class="line">        axis.line = element_line(colour=<span class="string">"black"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/lEaIgg5dGj.png?imageslim" alt="mark"></p>
<p>如果坐标轴上的直线太粗，则末端不会重合，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">p + theme_bw()+</div><div class="line">  theme(panel.border = element_blank(),</div><div class="line">        axis.line = element_line(colour=<span class="string">"black"</span>,size=<span class="number">4</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/i886m0EDD2.png?imageslim" alt="mark"></p>
<p>如果需要末端进行重合，需要添加lineed=”square”命令：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">p + theme_bw()+</div><div class="line">  theme(panel.border = element_blank(),</div><div class="line">        axis.line = element_line(colour=<span class="string">"black"</span>,size=<span class="number">4</span>,lineend=<span class="string">"square"</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/L32EkKL6Bl.png?imageslim" alt="mark"></p>
<h2 id="使用对数坐标轴"><a href="#使用对数坐标轴" class="headerlink" title="使用对数坐标轴"></a>使用对数坐标轴</h2><h3 id="初始图形-1"><a href="#初始图形-1" class="headerlink" title="初始图形"></a>初始图形</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(MASS)</div><div class="line">p &lt;- ggplot(Animals,aes(x=body,y=brain,label=rownames(Animals)))+geom_text(size=<span class="number">3</span>)</div><div class="line">p</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/8b57LgDJ64.png?imageslim" alt="mark"></p>
<h3 id="修改坐标轴为对数"><a href="#修改坐标轴为对数" class="headerlink" title="修改坐标轴为对数"></a>修改坐标轴为对数</h3><p>现在将上述图形的x轴与y轴取对数，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + scale_x_log10() + scale_y_log10()</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/dAfc0bL30E.png?imageslim" alt="mark"></p>
<h3 id="添加刻度标签："><a href="#添加刻度标签：" class="headerlink" title="添加刻度标签："></a>添加刻度标签：</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">p + scale_x_log10(breaks=<span class="number">10</span>^(-<span class="number">1</span>:<span class="number">5</span>))+scale_y_log10(breaks=<span class="number">10</span>^(<span class="number">0</span>:<span class="number">3</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/456L80LBdm.png?imageslim" alt="mark"></p>
<h3 id="把坐标轴的标签转化为指数记数法："><a href="#把坐标轴的标签转化为指数记数法：" class="headerlink" title="把坐标轴的标签转化为指数记数法："></a>把坐标轴的标签转化为指数记数法：</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(scales)</div><div class="line">p + scale_x_log10(breaks=<span class="number">10</span>^(-<span class="number">1</span>:<span class="number">5</span>),</div><div class="line">                  labels=trans_format(<span class="string">"log10"</span>,math_format(<span class="number">10</span>^.x)))+</div><div class="line">  scale_y_log10(breaks=<span class="number">10</span>^(<span class="number">0</span>:<span class="number">3</span>),</div><div class="line">                labels=trans_format(<span class="string">"log10"</span>,math_format(<span class="number">10</span>^.x)))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/97gbacGD6a.png?imageslim" alt="mark"></p>
<p>下面的代码表示，先对x轴与y轴的坐标进行转换，将转换后的数据映射到坐标轴上，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ggplot(Animals,aes(x=log10(body),y=log10(brain),label=rownames(Animals)))+geom_text(size=<span class="number">5</span>)</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/ikdkfh5E0c.png?imageslim" alt="mark"></p>
<p>下面的代码是将x轴与y轴的坐标进行对数转换，对x轴进行自然对数变换，对y轴进行以2为底数的对数变换。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">p + scale_x_continuous(trans = log_trans(),</div><div class="line">                       breaks = trans_breaks(<span class="string">"log"</span>,<span class="keyword">function</span>(x) exp(x)),</div><div class="line">                       labels = trans_format(<span class="string">"log"</span>,math_format(e^.x)))+</div><div class="line">  scale_y_continuous(trans = log2_trans(),</div><div class="line">                     breaks = trans_breaks(<span class="string">"log2"</span>,<span class="keyword">function</span>(x) <span class="number">2</span>^x),</div><div class="line">                     labels= trans_format(<span class="string">"log2"</span>,math_format(<span class="number">2</span>^.x)))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/ligKb4hd6J.png?imageslim" alt="mark"></p>
<h3 id="折线图的坐标转换"><a href="#折线图的坐标转换" class="headerlink" title="折线图的坐标转换"></a>折线图的坐标转换</h3><p>原始图形</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ggplot(aapl,aes(x=date,y=adj_price))+geom_line()</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/Fa25hgbd3j.png?imageslim" alt="mark"></p>
<p>现在对y轴进行对数变换：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ggplot(aapl,aes(x=date,y=adj_price))+geom_line()+</div><div class="line">  scale_y_log10(breaks=c(<span class="number">2</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">250</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/KdFGj6BmmK.png?imageslim" alt="mark"></p>
<h3 id="为对数坐标轴添加刻度"><a href="#为对数坐标轴添加刻度" class="headerlink" title="为对数坐标轴添加刻度"></a>为对数坐标轴添加刻度</h3><p>用到的函数是<code>annotation_logticks()</code>，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/gmKk6Kml7l.png?imageslim" alt="mark"></p>
<h3 id="进行一步优化刻度线"><a href="#进行一步优化刻度线" class="headerlink" title="进行一步优化刻度线"></a>进行一步优化刻度线</h3><p>对x轴或y轴的刻度进一步设置时，可以用<code>minor_breaks=log10(5)+ -2:5)</code>，即<code>minor_breaks=log10(5*10^(minpow:maxpow))</code>，这个是用来调整图形中的网格线，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ggplot(Animals,aes(x=body,y=brain,label=rownames(Animals)))+</div><div class="line">  geom_text(size=<span class="number">3</span>)+</div><div class="line">  annotation_logticks()+</div><div class="line">  scale_x_log10(breaks=trans_breaks(<span class="string">"log10"</span>,<span class="keyword">function</span>(x) <span class="number">10</span>^x),</div><div class="line">                labels=trans_format(<span class="string">"log10"</span>,math_format(<span class="number">10</span>^.x)),</div><div class="line">                minor_breaks=log10(<span class="number">5</span>)+ -<span class="number">2</span>:<span class="number">5</span>)+</div><div class="line">    scale_y_log10(breaks=trans_breaks(<span class="string">"log10"</span>,<span class="keyword">function</span>(x) <span class="number">10</span>^x),</div><div class="line">                labels=trans_format(<span class="string">"log10"</span>,math_format(<span class="number">10</span>^.x)),</div><div class="line">                minor_breaks=log10(<span class="number">5</span>)+ -<span class="number">1</span>:<span class="number">3</span>)+</div><div class="line">  coord_fixed()+</div><div class="line">  theme_bw()</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/1Gi3F1f8fC.png?imageslim" alt="mark"></p>
<h2 id="绘制环状图形"><a href="#绘制环状图形" class="headerlink" title="绘制环状图形"></a>绘制环状图形</h2><h3 id="基础图形"><a href="#基础图形" class="headerlink" title="基础图形"></a>基础图形</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">head(wind,<span class="number">8</span>)</div><div class="line"></div><div class="line"><span class="comment">##    TimeUTC Temp WindAvg WindMax WindDir SpeedCat DirCat</span></div><div class="line"><span class="comment">## 3        0 3.54    9.52   10.39      89    10-15     90</span></div><div class="line"><span class="comment">## 4        5 3.52    9.10    9.90      92     5-10     90</span></div><div class="line"><span class="comment">## 5       10 3.53    8.73    9.51      92     5-10     90</span></div><div class="line"><span class="comment">## 6       15 3.63    8.97    9.90      94     5-10     90</span></div><div class="line"><span class="comment">## 7       20 3.71    8.51    9.41      97     5-10     90</span></div><div class="line"><span class="comment">## 8       25 3.73    8.43    9.02      95     5-10     90</span></div><div class="line"><span class="comment">## 9       30 3.56    8.12    8.92      98     5-10    105</span></div><div class="line"><span class="comment">## 10      35 3.63    8.47    9.11     101     5-10    105</span></div></pre></td></tr></table></figure>
<p>先以直方图的形式绘制出来，x轴是DirCat，按SpeedCat进行填充，条形图的组距是15，开始位置是-7.5,x轴的位置范围是0到360。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ggplot(wind,aes(x=DirCat,fill=SpeedCat))+</div><div class="line">  geom_histogram(binwidth=<span class="number">15</span>,origin=-<span class="number">7.5</span>)+</div><div class="line">  scale_y_continuous(breaks=seq(<span class="number">0</span>,<span class="number">60</span>,<span class="number">10</span>))</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/Ld36iJ6hCk.png?imageslim" alt="mark"></p>
<p>极坐标只是将上述的条形图卷曲成了圆形，书中的坐标轴标记是0到60，最小单位是10，但按照书中的代码并不能绘图出来，因此，下面的代码中加入了scale_y_continuous(breaks=seq(0,60,10))。如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ggplot(wind,aes(x=DirCat,fill=SpeedCat))+</div><div class="line">  geom_histogram(binwidth=<span class="number">15</span>,origin=-<span class="number">7.5</span>)+</div><div class="line">  scale_y_continuous(breaks=seq(<span class="number">0</span>,<span class="number">60</span>,<span class="number">10</span>))+</div><div class="line">  coord_polar()</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/D1EKdB2HBc.png?imageslim" alt="mark"></p>
<h3 id="极坐标的进一步优化"><a href="#极坐标的进一步优化" class="headerlink" title="极坐标的进一步优化"></a>极坐标的进一步优化</h3><p>改变直方图的轮廓为黑色（colour=”black”），尺寸为0.25(size=0.25)，改变图例的顺序(fill=guide_legend(reverse=TRUE))，优化颜色(scale_fill_brewer())，如下所示：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ggplot(wind,aes(x=DirCat,fill=SpeedCat))+</div><div class="line">    geom_histogram(binwidth=<span class="number">15</span>,origin=-<span class="number">7.5</span>,colour=<span class="string">"black"</span>,size=<span class="number">0.25</span>)+</div><div class="line">    guides(fill=guide_legend(reverse=<span class="literal">TRUE</span>))+</div><div class="line">    coord_polar()+</div><div class="line">    scale_x_continuous(limits=c(<span class="number">0</span>,<span class="number">360</span>),breaks=seq(<span class="number">0</span>,<span class="number">360</span>,by=<span class="number">45</span>),minor_breaks=seq(<span class="number">0</span>,<span class="number">360</span>,by=<span class="number">15</span>))+scale_fill_brewer()</div></pre></td></tr></table></figure>
<p><img src="http://ortxpw68f.bkt.clouddn.com/professional/180831/g4cmDFddBK.png?imageslim" alt="mark"></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol>
<li>常肖楠, 邓一硕, 魏太云. R数据可视化手册[M]. 人民邮电出版社, 2014.</li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/ggplot2/" <i class="fa fa-tag"></i> ggplot2</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/04/17/R/ggplot2(7) - 注解/" rel="next" title="ggplot2(7)-注解">
                <i class="fa fa-chevron-left"></i> ggplot2(7)-注解
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/04/19/R/ggplot2(9) - 整体外观/" rel="prev" title="ggplot2(9)-整体外观">
                ggplot2(9)-整体外观 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="vcomments"></div>
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">RVDSD</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">147</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#交换x轴与y轴"><span class="nav-number">1.</span> <span class="nav-text">交换x轴与y轴</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置连续型坐标轴的值域"><span class="nav-number">2.</span> <span class="nav-text">设置连续型坐标轴的值域</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#设置y轴的范围："><span class="nav-number">2.1.</span> <span class="nav-text">设置y轴的范围：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#将y轴的范围扩大"><span class="nav-number">2.2.</span> <span class="nav-text">将y轴的范围扩大</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#调整y轴的范围，并且在0-5-10处加上标记"><span class="nav-number">2.3.</span> <span class="nav-text">调整y轴的范围，并且在0,5,10处加上标记</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可以使用expand-limits-来单向扩展值域"><span class="nav-number">2.4.</span> <span class="nav-text">可以使用expand_limits()来单向扩展值域</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#反转一条连续型坐标轴"><span class="nav-number">3.</span> <span class="nav-text">反转一条连续型坐标轴</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改x轴上的类别的顺序"><span class="nav-number">4.</span> <span class="nav-text">修改x轴上的类别的顺序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基础绘图"><span class="nav-number">4.1.</span> <span class="nav-text">基础绘图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#改变x轴的顺序"><span class="nav-number">4.2.</span> <span class="nav-text">改变x轴的顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#反转x轴有关类型的顺序"><span class="nav-number">4.3.</span> <span class="nav-text">反转x轴有关类型的顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#显示其中的两项"><span class="nav-number">4.4.</span> <span class="nav-text">显示其中的两项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置x轴与y轴的缩放比例"><span class="nav-number">5.</span> <span class="nav-text">设置x轴与y轴的缩放比例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#缩小x轴与y轴"><span class="nav-number">5.1.</span> <span class="nav-text">缩小x轴与y轴</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#改变x轴与y轴的比例"><span class="nav-number">5.2.</span> <span class="nav-text">改变x轴与y轴的比例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置刻度线的位置"><span class="nav-number">6.</span> <span class="nav-text">设置刻度线的位置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原始绘图"><span class="nav-number">6.1.</span> <span class="nav-text">原始绘图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更改y轴的位置"><span class="nav-number">6.2.</span> <span class="nav-text">更改y轴的位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不同类型的x轴刻度"><span class="nav-number">6.3.</span> <span class="nav-text">不同类型的x轴刻度</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#移除刻度线和标签"><span class="nav-number">7.</span> <span class="nav-text">移除刻度线和标签</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本图形"><span class="nav-number">7.1.</span> <span class="nav-text">基本图形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移除y轴刻度"><span class="nav-number">7.2.</span> <span class="nav-text">移除y轴刻度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移除刻度线，刻度标签，网格"><span class="nav-number">7.3.</span> <span class="nav-text">移除刻度线，刻度标签，网格</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#更换主题"><span class="nav-number">8.</span> <span class="nav-text">更换主题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改刻度标签的文本"><span class="nav-number">9.</span> <span class="nav-text">修改刻度标签的文本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本图形-1"><span class="nav-number">9.1.</span> <span class="nav-text">基本图形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更改y轴的坐标标签"><span class="nav-number">9.2.</span> <span class="nav-text">更改y轴的坐标标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对标签的进一步优化"><span class="nav-number">9.3.</span> <span class="nav-text">对标签的进一步优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用labels参数将上述的函数传递给标签"><span class="nav-number">9.4.</span> <span class="nav-text">用labels参数将上述的函数传递给标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置刻度"><span class="nav-number">9.5.</span> <span class="nav-text">设置刻度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其余的格式设定"><span class="nav-number">9.6.</span> <span class="nav-text">其余的格式设定</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改刻度标签的外观"><span class="nav-number">10.</span> <span class="nav-text">修改刻度标签的外观</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本图形-2"><span class="nav-number">10.1.</span> <span class="nav-text">基本图形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对标签进行旋转"><span class="nav-number">10.2.</span> <span class="nav-text">对标签进行旋转</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更改标签的大小，样式，字体"><span class="nav-number">10.3.</span> <span class="nav-text">更改标签的大小，样式，字体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置坐标轴标签"><span class="nav-number">10.4.</span> <span class="nav-text">设置坐标轴标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#坐标标签换行"><span class="nav-number">10.5.</span> <span class="nav-text">坐标标签换行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#移除坐标轴标签"><span class="nav-number">11.</span> <span class="nav-text">移除坐标轴标签</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原始图形"><span class="nav-number">11.1.</span> <span class="nav-text">原始图形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#去掉坐标的标签"><span class="nav-number">11.2.</span> <span class="nav-text">去掉坐标的标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用xlab去除坐标标签"><span class="nav-number">11.3.</span> <span class="nav-text">使用xlab去除坐标标签</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改坐标轴标签的外观"><span class="nav-number">12.</span> <span class="nav-text">修改坐标轴标签的外观</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原始图形-1"><span class="nav-number">12.1.</span> <span class="nav-text">原始图形</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#沿坐标轴添加直线："><span class="nav-number">13.</span> <span class="nav-text">沿坐标轴添加直线：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#初始图形"><span class="nav-number">13.1.</span> <span class="nav-text">初始图形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#沿坐标轴添加直线：-1"><span class="nav-number">13.2.</span> <span class="nav-text">沿坐标轴添加直线：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#更改主题"><span class="nav-number">14.</span> <span class="nav-text">更改主题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用对数坐标轴"><span class="nav-number">15.</span> <span class="nav-text">使用对数坐标轴</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#初始图形-1"><span class="nav-number">15.1.</span> <span class="nav-text">初始图形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改坐标轴为对数"><span class="nav-number">15.2.</span> <span class="nav-text">修改坐标轴为对数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加刻度标签："><span class="nav-number">15.3.</span> <span class="nav-text">添加刻度标签：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#把坐标轴的标签转化为指数记数法："><span class="nav-number">15.4.</span> <span class="nav-text">把坐标轴的标签转化为指数记数法：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#折线图的坐标转换"><span class="nav-number">15.5.</span> <span class="nav-text">折线图的坐标转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为对数坐标轴添加刻度"><span class="nav-number">15.6.</span> <span class="nav-text">为对数坐标轴添加刻度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#进行一步优化刻度线"><span class="nav-number">15.7.</span> <span class="nav-text">进行一步优化刻度线</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#绘制环状图形"><span class="nav-number">16.</span> <span class="nav-text">绘制环状图形</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基础图形"><span class="nav-number">16.1.</span> <span class="nav-text">基础图形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#极坐标的进一步优化"><span class="nav-number">16.2.</span> <span class="nav-text">极坐标的进一步优化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考资料"><span class="nav-number">17.</span> <span class="nav-text">参考资料</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">RVDSD</span>

  
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共552.2k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  










  
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine@1.1.4/dist/Valine.min.js"></script>
  <script type="text/javascript">
    new Valine({
        av: AV,
        el: '#vcomments' ,
        verify: true,
        notify: true,
        app_id: '4ORLDMxXCFDLSHPJ4wSSDkkw-gzGzoHsz',
        app_key: 'HSWpCY7XlN0pGV5DCrKoC0ic',
        placeholder: 'Comment input placeholder'
    });
  </script>



  





  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
